var nj=e=>{throw TypeError(e)};var f7=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var i1=(e,t,n)=>t.has(e)||nj("Cannot "+n);var ue=(e,t,n)=>(i1(e,t,"read from private field"),n?n.call(e):t.get(e)),mt=(e,t,n)=>t.has(e)?nj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Qe=(e,t,n,r)=>(i1(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),dr=(e,t,n)=>(i1(e,t,"access private method"),n);var Lv=(e,t,n,r)=>({set _(a){Qe(e,t,a,n)},get _(){return ue(e,t,r)}});var sVe=f7((EVe,l7)=>{function h7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function It(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nF={exports:{}},Vx={},rF={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm=Symbol.for("react.element"),p7=Symbol.for("react.portal"),m7=Symbol.for("react.fragment"),v7=Symbol.for("react.strict_mode"),g7=Symbol.for("react.profiler"),y7=Symbol.for("react.provider"),x7=Symbol.for("react.context"),b7=Symbol.for("react.forward_ref"),w7=Symbol.for("react.suspense"),S7=Symbol.for("react.memo"),_7=Symbol.for("react.lazy"),rj=Symbol.iterator;function C7(e){return e===null||typeof e!="object"?null:(e=rj&&e[rj]||e["@@iterator"],typeof e=="function"?e:null)}var aF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iF=Object.assign,oF={};function Rf(e,t,n){this.props=e,this.context=t,this.refs=oF,this.updater=n||aF}Rf.prototype.isReactComponent={};Rf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sF(){}sF.prototype=Rf.prototype;function Sk(e,t,n){this.props=e,this.context=t,this.refs=oF,this.updater=n||aF}var _k=Sk.prototype=new sF;_k.constructor=Sk;iF(_k,Rf.prototype);_k.isPureReactComponent=!0;var aj=Array.isArray,lF=Object.prototype.hasOwnProperty,Ck={current:null},cF={key:!0,ref:!0,__self:!0,__source:!0};function uF(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)lF.call(t,r)&&!cF.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Zm,type:e,key:i,ref:o,props:a,_owner:Ck.current}}function E7(e,t){return{$$typeof:Zm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ek(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zm}function k7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ij=/\/+/g;function o1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?k7(""+e.key):t.toString(36)}function Qg(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zm:case p7:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+o1(o,0):r,aj(a)?(n="",e!=null&&(n=e.replace(ij,"$&/")+"/"),Qg(a,t,n,"",function(c){return c})):a!=null&&(Ek(a)&&(a=E7(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ij,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",aj(e))for(var s=0;s<e.length;s++){i=e[s];var l=r+o1(i,s);o+=Qg(i,t,n,l,a)}else if(l=C7(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=r+o1(i,s++),o+=Qg(i,t,n,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Uv(e,t,n){if(e==null)return e;var r=[],a=0;return Qg(e,r,"","",function(i){return t.call(n,i,a++)}),r}function N7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mr={current:null},Jg={transition:null},T7={ReactCurrentDispatcher:Mr,ReactCurrentBatchConfig:Jg,ReactCurrentOwner:Ck};function dF(){throw Error("act(...) is not supported in production builds of React.")}ht.Children={map:Uv,forEach:function(e,t,n){Uv(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Uv(e,function(){t++}),t},toArray:function(e){return Uv(e,function(t){return t})||[]},only:function(e){if(!Ek(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ht.Component=Rf;ht.Fragment=m7;ht.Profiler=g7;ht.PureComponent=Sk;ht.StrictMode=v7;ht.Suspense=w7;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T7;ht.act=dF;ht.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=iF({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ck.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)lF.call(t,l)&&!cF.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:Zm,type:e.type,key:a,ref:i,props:r,_owner:o}};ht.createContext=function(e){return e={$$typeof:x7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:y7,_context:e},e.Consumer=e};ht.createElement=uF;ht.createFactory=function(e){var t=uF.bind(null,e);return t.type=e,t};ht.createRef=function(){return{current:null}};ht.forwardRef=function(e){return{$$typeof:b7,render:e}};ht.isValidElement=Ek;ht.lazy=function(e){return{$$typeof:_7,_payload:{_status:-1,_result:e},_init:N7}};ht.memo=function(e,t){return{$$typeof:S7,type:e,compare:t===void 0?null:t}};ht.startTransition=function(e){var t=Jg.transition;Jg.transition={};try{e()}finally{Jg.transition=t}};ht.unstable_act=dF;ht.useCallback=function(e,t){return Mr.current.useCallback(e,t)};ht.useContext=function(e){return Mr.current.useContext(e)};ht.useDebugValue=function(){};ht.useDeferredValue=function(e){return Mr.current.useDeferredValue(e)};ht.useEffect=function(e,t){return Mr.current.useEffect(e,t)};ht.useId=function(){return Mr.current.useId()};ht.useImperativeHandle=function(e,t,n){return Mr.current.useImperativeHandle(e,t,n)};ht.useInsertionEffect=function(e,t){return Mr.current.useInsertionEffect(e,t)};ht.useLayoutEffect=function(e,t){return Mr.current.useLayoutEffect(e,t)};ht.useMemo=function(e,t){return Mr.current.useMemo(e,t)};ht.useReducer=function(e,t,n){return Mr.current.useReducer(e,t,n)};ht.useRef=function(e){return Mr.current.useRef(e)};ht.useState=function(e){return Mr.current.useState(e)};ht.useSyncExternalStore=function(e,t,n){return Mr.current.useSyncExternalStore(e,t,n)};ht.useTransition=function(){return Mr.current.useTransition()};ht.version="18.3.1";rF.exports=ht;var _=rF.exports;const z=It(_),kk=h7({__proto__:null,default:z},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A7=_,P7=Symbol.for("react.element"),j7=Symbol.for("react.fragment"),O7=Object.prototype.hasOwnProperty,R7=A7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I7={key:!0,ref:!0,__self:!0,__source:!0};function fF(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)O7.call(t,r)&&!I7.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:P7,type:e,key:i,ref:o,props:a,_owner:R7.current}}Vx.Fragment=j7;Vx.jsx=fF;Vx.jsxs=fF;nF.exports=Vx;var h=nF.exports,hF={exports:{}},ba={},pF={exports:{}},mF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,O){var B=j.length;j.push(O);e:for(;0<B;){var G=B-1>>>1,L=j[G];if(0<a(L,O))j[G]=O,j[B]=L,B=G;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var O=j[0],B=j.pop();if(B!==O){j[0]=B;e:for(var G=0,L=j.length,W=L>>>1;G<W;){var J=2*(G+1)-1,ee=j[J],ne=J+1,Z=j[ne];if(0>a(ee,B))ne<L&&0>a(Z,ee)?(j[G]=Z,j[ne]=B,G=ne):(j[G]=ee,j[J]=B,G=J);else if(ne<L&&0>a(Z,B))j[G]=Z,j[ne]=B,G=ne;else break e}}return O}function a(j,O){var B=j.sortIndex-O.sortIndex;return B!==0?B:j.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,f=3,p=!1,v=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=j)r(c),O.sortIndex=O.expirationTime,t(l,O);else break;O=n(c)}}function w(j){if(m=!1,b(j),!v)if(n(l)!==null)v=!0,M(S);else{var O=n(c);O!==null&&$(w,O.startTime-j)}}function S(j,O){v=!1,m&&(m=!1,y(k),k=-1),p=!0;var B=f;try{for(b(O),d=n(l);d!==null&&(!(d.expirationTime>O)||j&&!A());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var L=G(d.expirationTime<=O);O=e.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&r(l),b(O)}else r(l);d=n(l)}if(d!==null)var W=!0;else{var J=n(c);J!==null&&$(w,J.startTime-O),W=!1}return W}finally{d=null,f=B,p=!1}}var C=!1,E=null,k=-1,N=5,T=-1;function A(){return!(e.unstable_now()-T<N)}function P(){if(E!==null){var j=e.unstable_now();T=j;var O=!0;try{O=E(!0,j)}finally{O?I():(C=!1,E=null)}}else C=!1}var I;if(typeof x=="function")I=function(){x(P)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,I=function(){D.postMessage(null)}}else I=function(){g(P,0)};function M(j){E=j,C||(C=!0,I())}function $(j,O){k=g(function(){j(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,M(S))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var B=f;f=O;try{return j()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,O){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=f;f=j;try{return O()}finally{f=B}},e.unstable_scheduleCallback=function(j,O,B){var G=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,j){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=B+L,j={id:u++,callback:O,priorityLevel:j,startTime:B,expirationTime:L,sortIndex:-1},B>G?(j.sortIndex=B,t(c,j),n(l)===null&&j===n(c)&&(m?(y(k),k=-1):m=!0,$(w,B-G))):(j.sortIndex=L,t(l,j),v||p||(v=!0,M(S))),j},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(j){var O=f;return function(){var B=f;f=O;try{return j.apply(this,arguments)}finally{f=B}}}})(mF);pF.exports=mF;var D7=pF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M7=_,ya=D7;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vF=new Set,gp={};function nu(e,t){Vd(e,t),Vd(e+"Capture",t)}function Vd(e,t){for(gp[e]=t,e=0;e<t.length;e++)vF.add(t[e])}var qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k_=Object.prototype.hasOwnProperty,$7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oj={},sj={};function F7(e){return k_.call(sj,e)?!0:k_.call(oj,e)?!1:$7.test(e)?sj[e]=!0:(oj[e]=!0,!1)}function L7(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function B7(e,t,n,r){if(t===null||typeof t>"u"||L7(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $r(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lr[e]=new $r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lr[t]=new $r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lr[e]=new $r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lr[e]=new $r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lr[e]=new $r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lr[e]=new $r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lr[e]=new $r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lr[e]=new $r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lr[e]=new $r(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nk=/[\-:]([a-z])/g;function Tk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nk,Tk);lr[t]=new $r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nk,Tk);lr[t]=new $r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nk,Tk);lr[t]=new $r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lr[e]=new $r(e,1,!1,e.toLowerCase(),null,!1,!1)});lr.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lr[e]=new $r(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ak(e,t,n,r){var a=lr.hasOwnProperty(t)?lr[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(B7(t,n,a,r)&&(n=null),r||a===null?F7(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ls=M7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zv=Symbol.for("react.element"),Hu=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),Pk=Symbol.for("react.strict_mode"),N_=Symbol.for("react.profiler"),gF=Symbol.for("react.provider"),yF=Symbol.for("react.context"),jk=Symbol.for("react.forward_ref"),T_=Symbol.for("react.suspense"),A_=Symbol.for("react.suspense_list"),Ok=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),xF=Symbol.for("react.offscreen"),lj=Symbol.iterator;function lh(e){return e===null||typeof e!="object"?null:(e=lj&&e[lj]||e["@@iterator"],typeof e=="function"?e:null)}var cn=Object.assign,s1;function Ih(e){if(s1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);s1=t&&t[1]||""}return`
`+s1+e}var l1=!1;function c1(e,t){if(!e||l1)return"";l1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{l1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ih(e):""}function U7(e){switch(e.tag){case 5:return Ih(e.type);case 16:return Ih("Lazy");case 13:return Ih("Suspense");case 19:return Ih("SuspenseList");case 0:case 2:case 15:return e=c1(e.type,!1),e;case 11:return e=c1(e.type.render,!1),e;case 1:return e=c1(e.type,!0),e;default:return""}}function P_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gu:return"Fragment";case Hu:return"Portal";case N_:return"Profiler";case Pk:return"StrictMode";case T_:return"Suspense";case A_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yF:return(e.displayName||"Context")+".Consumer";case gF:return(e._context.displayName||"Context")+".Provider";case jk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ok:return t=e.displayName||null,t!==null?t:P_(e.type)||"Memo";case Ds:t=e._payload,e=e._init;try{return P_(e(t))}catch{}}return null}function z7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P_(t);case 8:return t===Pk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function W7(e){var t=bF(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wv(e){e._valueTracker||(e._valueTracker=W7(e))}function wF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bF(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Sy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function j_(e,t){var n=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cj(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function SF(e,t){t=t.checked,t!=null&&Ak(e,"checked",t,!1)}function O_(e,t){SF(e,t);var n=xl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?R_(e,t.type,n):t.hasOwnProperty("defaultValue")&&R_(e,t.type,xl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uj(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function R_(e,t,n){(t!=="number"||Sy(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Dh=Array.isArray;function dd(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xl(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function I_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dj(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(pe(92));if(Dh(n)){if(1<n.length)throw Error(pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xl(n)}}function _F(e,t){var n=xl(t.value),r=xl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function fj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vv,EF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vv=Vv||document.createElement("div"),Vv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V7=["Webkit","ms","Moz","O"];Object.keys(Vh).forEach(function(e){V7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vh[t]=Vh[e]})});function kF(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vh.hasOwnProperty(e)&&Vh[e]?(""+t).trim():t+"px"}function NF(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=kF(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var H7=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function M_(e,t){if(t){if(H7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function $_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var F_=null;function Rk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var L_=null,fd=null,hd=null;function hj(e){if(e=nv(e)){if(typeof L_!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=Xx(t),L_(e.stateNode,e.type,t))}}function TF(e){fd?hd?hd.push(e):hd=[e]:fd=e}function AF(){if(fd){var e=fd,t=hd;if(hd=fd=null,hj(e),t)for(e=0;e<t.length;e++)hj(t[e])}}function PF(e,t){return e(t)}function jF(){}var u1=!1;function OF(e,t,n){if(u1)return e(t,n);u1=!0;try{return PF(e,t,n)}finally{u1=!1,(fd!==null||hd!==null)&&(jF(),AF())}}function xp(e,t){var n=e.stateNode;if(n===null)return null;var r=Xx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(pe(231,t,typeof n));return n}var B_=!1;if(qo)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){B_=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{B_=!1}function G7(e,t,n,r,a,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Hh=!1,_y=null,Cy=!1,U_=null,q7={onError:function(e){Hh=!0,_y=e}};function K7(e,t,n,r,a,i,o,s,l){Hh=!1,_y=null,G7.apply(q7,arguments)}function X7(e,t,n,r,a,i,o,s,l){if(K7.apply(this,arguments),Hh){if(Hh){var c=_y;Hh=!1,_y=null}else throw Error(pe(198));Cy||(Cy=!0,U_=c)}}function ru(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function RF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pj(e){if(ru(e)!==e)throw Error(pe(188))}function Y7(e){var t=e.alternate;if(!t){if(t=ru(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return pj(a),e;if(i===r)return pj(a),t;i=i.sibling}throw Error(pe(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(pe(189))}}if(n.alternate!==r)throw Error(pe(190))}if(n.tag!==3)throw Error(pe(188));return n.stateNode.current===n?e:t}function IF(e){return e=Y7(e),e!==null?DF(e):null}function DF(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DF(e);if(t!==null)return t;e=e.sibling}return null}var MF=ya.unstable_scheduleCallback,mj=ya.unstable_cancelCallback,Q7=ya.unstable_shouldYield,J7=ya.unstable_requestPaint,vn=ya.unstable_now,Z7=ya.unstable_getCurrentPriorityLevel,Ik=ya.unstable_ImmediatePriority,$F=ya.unstable_UserBlockingPriority,Ey=ya.unstable_NormalPriority,eX=ya.unstable_LowPriority,FF=ya.unstable_IdlePriority,Hx=null,Ji=null;function tX(e){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(Hx,e,void 0,(e.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:aX,nX=Math.log,rX=Math.LN2;function aX(e){return e>>>=0,e===0?32:31-(nX(e)/rX|0)|0}var Hv=64,Gv=4194304;function Mh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ky(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=Mh(s):(i&=o,i!==0&&(r=Mh(i)))}else o=n&~a,o!==0?r=Mh(o):i!==0&&(r=Mh(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Si(t),a=1<<n,r|=e[n],t&=~a;return r}function iX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oX(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Si(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=iX(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function z_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function LF(){var e=Hv;return Hv<<=1,!(Hv&4194240)&&(Hv=64),e}function d1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ev(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Si(t),e[t]=n}function sX(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Si(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function Dk(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Si(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Pt=0;function BF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UF,Mk,zF,WF,VF,W_=!1,qv=[],al=null,il=null,ol=null,bp=new Map,wp=new Map,Ls=[],lX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vj(e,t){switch(e){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":ol=null;break;case"pointerover":case"pointerout":bp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(t.pointerId)}}function uh(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=nv(t),t!==null&&Mk(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function cX(e,t,n,r,a){switch(t){case"focusin":return al=uh(al,e,t,n,r,a),!0;case"dragenter":return il=uh(il,e,t,n,r,a),!0;case"mouseover":return ol=uh(ol,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return bp.set(i,uh(bp.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,wp.set(i,uh(wp.get(i)||null,e,t,n,r,a)),!0}return!1}function HF(e){var t=dc(e.target);if(t!==null){var n=ru(t);if(n!==null){if(t=n.tag,t===13){if(t=RF(n),t!==null){e.blockedOn=t,VF(e.priority,function(){zF(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=V_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);F_=r,n.target.dispatchEvent(r),F_=null}else return t=nv(n),t!==null&&Mk(t),e.blockedOn=n,!1;t.shift()}return!0}function gj(e,t,n){Zg(e)&&n.delete(t)}function uX(){W_=!1,al!==null&&Zg(al)&&(al=null),il!==null&&Zg(il)&&(il=null),ol!==null&&Zg(ol)&&(ol=null),bp.forEach(gj),wp.forEach(gj)}function dh(e,t){e.blockedOn===t&&(e.blockedOn=null,W_||(W_=!0,ya.unstable_scheduleCallback(ya.unstable_NormalPriority,uX)))}function Sp(e){function t(a){return dh(a,e)}if(0<qv.length){dh(qv[0],e);for(var n=1;n<qv.length;n++){var r=qv[n];r.blockedOn===e&&(r.blockedOn=null)}}for(al!==null&&dh(al,e),il!==null&&dh(il,e),ol!==null&&dh(ol,e),bp.forEach(t),wp.forEach(t),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)HF(n),n.blockedOn===null&&Ls.shift()}var pd=ls.ReactCurrentBatchConfig,Ny=!0;function dX(e,t,n,r){var a=Pt,i=pd.transition;pd.transition=null;try{Pt=1,$k(e,t,n,r)}finally{Pt=a,pd.transition=i}}function fX(e,t,n,r){var a=Pt,i=pd.transition;pd.transition=null;try{Pt=4,$k(e,t,n,r)}finally{Pt=a,pd.transition=i}}function $k(e,t,n,r){if(Ny){var a=V_(e,t,n,r);if(a===null)w1(e,t,r,Ty,n),vj(e,r);else if(cX(a,e,t,n,r))r.stopPropagation();else if(vj(e,r),t&4&&-1<lX.indexOf(e)){for(;a!==null;){var i=nv(a);if(i!==null&&UF(i),i=V_(e,t,n,r),i===null&&w1(e,t,r,Ty,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else w1(e,t,r,null,n)}}var Ty=null;function V_(e,t,n,r){if(Ty=null,e=Rk(r),e=dc(e),e!==null)if(t=ru(e),t===null)e=null;else if(n=t.tag,n===13){if(e=RF(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ty=e,null}function GF(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z7()){case Ik:return 1;case $F:return 4;case Ey:case eX:return 16;case FF:return 536870912;default:return 16}default:return 16}}var Xs=null,Fk=null,ey=null;function qF(){if(ey)return ey;var e,t=Fk,n=t.length,r,a="value"in Xs?Xs.value:Xs.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return ey=a.slice(e,1<r?1-r:void 0)}function ty(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kv(){return!0}function yj(){return!1}function wa(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Kv:yj,this.isPropagationStopped=yj,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kv)},persist:function(){},isPersistent:Kv}),t}var If={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lk=wa(If),tv=cn({},If,{view:0,detail:0}),hX=wa(tv),f1,h1,fh,Gx=cn({},tv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fh&&(fh&&e.type==="mousemove"?(f1=e.screenX-fh.screenX,h1=e.screenY-fh.screenY):h1=f1=0,fh=e),f1)},movementY:function(e){return"movementY"in e?e.movementY:h1}}),xj=wa(Gx),pX=cn({},Gx,{dataTransfer:0}),mX=wa(pX),vX=cn({},tv,{relatedTarget:0}),p1=wa(vX),gX=cn({},If,{animationName:0,elapsedTime:0,pseudoElement:0}),yX=wa(gX),xX=cn({},If,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bX=wa(xX),wX=cn({},If,{data:0}),bj=wa(wX),SX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CX[e])?!!t[e]:!1}function Bk(){return EX}var kX=cn({},tv,{key:function(e){if(e.key){var t=SX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ty(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_X[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bk,charCode:function(e){return e.type==="keypress"?ty(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ty(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NX=wa(kX),TX=cn({},Gx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wj=wa(TX),AX=cn({},tv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bk}),PX=wa(AX),jX=cn({},If,{propertyName:0,elapsedTime:0,pseudoElement:0}),OX=wa(jX),RX=cn({},Gx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IX=wa(RX),DX=[9,13,27,32],Uk=qo&&"CompositionEvent"in window,Gh=null;qo&&"documentMode"in document&&(Gh=document.documentMode);var MX=qo&&"TextEvent"in window&&!Gh,KF=qo&&(!Uk||Gh&&8<Gh&&11>=Gh),Sj=" ",_j=!1;function XF(e,t){switch(e){case"keyup":return DX.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qu=!1;function $X(e,t){switch(e){case"compositionend":return YF(t);case"keypress":return t.which!==32?null:(_j=!0,Sj);case"textInput":return e=t.data,e===Sj&&_j?null:e;default:return null}}function FX(e,t){if(qu)return e==="compositionend"||!Uk&&XF(e,t)?(e=qF(),ey=Fk=Xs=null,qu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return KF&&t.locale!=="ko"?null:t.data;default:return null}}var LX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LX[e.type]:t==="textarea"}function QF(e,t,n,r){TF(r),t=Ay(t,"onChange"),0<t.length&&(n=new Lk("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qh=null,_p=null;function BX(e){lL(e,0)}function qx(e){var t=Yu(e);if(wF(t))return e}function UX(e,t){if(e==="change")return t}var JF=!1;if(qo){var m1;if(qo){var v1="oninput"in document;if(!v1){var Ej=document.createElement("div");Ej.setAttribute("oninput","return;"),v1=typeof Ej.oninput=="function"}m1=v1}else m1=!1;JF=m1&&(!document.documentMode||9<document.documentMode)}function kj(){qh&&(qh.detachEvent("onpropertychange",ZF),_p=qh=null)}function ZF(e){if(e.propertyName==="value"&&qx(_p)){var t=[];QF(t,_p,e,Rk(e)),OF(BX,t)}}function zX(e,t,n){e==="focusin"?(kj(),qh=t,_p=n,qh.attachEvent("onpropertychange",ZF)):e==="focusout"&&kj()}function WX(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qx(_p)}function VX(e,t){if(e==="click")return qx(t)}function HX(e,t){if(e==="input"||e==="change")return qx(t)}function GX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ki=typeof Object.is=="function"?Object.is:GX;function Cp(e,t){if(ki(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!k_.call(t,a)||!ki(e[a],t[a]))return!1}return!0}function Nj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tj(e,t){var n=Nj(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nj(n)}}function eL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tL(){for(var e=window,t=Sy();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sy(e.document)}return t}function zk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qX(e){var t=tL(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&eL(n.ownerDocument.documentElement,n)){if(r!==null&&zk(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Tj(n,i);var o=Tj(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var KX=qo&&"documentMode"in document&&11>=document.documentMode,Ku=null,H_=null,Kh=null,G_=!1;function Aj(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;G_||Ku==null||Ku!==Sy(r)||(r=Ku,"selectionStart"in r&&zk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kh&&Cp(Kh,r)||(Kh=r,r=Ay(H_,"onSelect"),0<r.length&&(t=new Lk("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ku)))}function Xv(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xu={animationend:Xv("Animation","AnimationEnd"),animationiteration:Xv("Animation","AnimationIteration"),animationstart:Xv("Animation","AnimationStart"),transitionend:Xv("Transition","TransitionEnd")},g1={},nL={};qo&&(nL=document.createElement("div").style,"AnimationEvent"in window||(delete Xu.animationend.animation,delete Xu.animationiteration.animation,delete Xu.animationstart.animation),"TransitionEvent"in window||delete Xu.transitionend.transition);function Kx(e){if(g1[e])return g1[e];if(!Xu[e])return e;var t=Xu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nL)return g1[e]=t[n];return e}var rL=Kx("animationend"),aL=Kx("animationiteration"),iL=Kx("animationstart"),oL=Kx("transitionend"),sL=new Map,Pj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pl(e,t){sL.set(e,t),nu(t,[e])}for(var y1=0;y1<Pj.length;y1++){var x1=Pj[y1],XX=x1.toLowerCase(),YX=x1[0].toUpperCase()+x1.slice(1);Pl(XX,"on"+YX)}Pl(rL,"onAnimationEnd");Pl(aL,"onAnimationIteration");Pl(iL,"onAnimationStart");Pl("dblclick","onDoubleClick");Pl("focusin","onFocus");Pl("focusout","onBlur");Pl(oL,"onTransitionEnd");Vd("onMouseEnter",["mouseout","mouseover"]);Vd("onMouseLeave",["mouseout","mouseover"]);Vd("onPointerEnter",["pointerout","pointerover"]);Vd("onPointerLeave",["pointerout","pointerover"]);nu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nu("onBeforeInput",["compositionend","keypress","textInput","paste"]);nu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QX=new Set("cancel close invalid load scroll toggle".split(" ").concat($h));function jj(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,X7(r,t,void 0,e),e.currentTarget=null}function lL(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;jj(a,s,c),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;jj(a,s,c),i=l}}}if(Cy)throw e=U_,Cy=!1,U_=null,e}function Vt(e,t){var n=t[Q_];n===void 0&&(n=t[Q_]=new Set);var r=e+"__bubble";n.has(r)||(cL(t,e,2,!1),n.add(r))}function b1(e,t,n){var r=0;t&&(r|=4),cL(n,e,r,t)}var Yv="_reactListening"+Math.random().toString(36).slice(2);function Ep(e){if(!e[Yv]){e[Yv]=!0,vF.forEach(function(n){n!=="selectionchange"&&(QX.has(n)||b1(n,!1,e),b1(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yv]||(t[Yv]=!0,b1("selectionchange",!1,t))}}function cL(e,t,n,r){switch(GF(t)){case 1:var a=dX;break;case 4:a=fX;break;default:a=$k}n=a.bind(null,t,n,e),a=void 0,!B_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function w1(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=dc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}OF(function(){var c=i,u=Rk(n),d=[];e:{var f=sL.get(e);if(f!==void 0){var p=Lk,v=e;switch(e){case"keypress":if(ty(n)===0)break e;case"keydown":case"keyup":p=NX;break;case"focusin":v="focus",p=p1;break;case"focusout":v="blur",p=p1;break;case"beforeblur":case"afterblur":p=p1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=mX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PX;break;case rL:case aL:case iL:p=yX;break;case oL:p=OX;break;case"scroll":p=hX;break;case"wheel":p=IX;break;case"copy":case"cut":case"paste":p=bX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wj}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,b;x!==null;){b=x;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=xp(x,y),w!=null&&m.push(kp(x,w,b)))),g)break;x=x.return}0<m.length&&(f=new p(f,v,null,n,u),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==F_&&(v=n.relatedTarget||n.fromElement)&&(dc(v)||v[Ko]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=c,v=v?dc(v):null,v!==null&&(g=ru(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(m=xj,w="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(m=wj,w="onPointerLeave",y="onPointerEnter",x="pointer"),g=p==null?f:Yu(p),b=v==null?f:Yu(v),f=new m(w,x+"leave",p,n,u),f.target=g,f.relatedTarget=b,w=null,dc(u)===c&&(m=new m(y,x+"enter",v,n,u),m.target=b,m.relatedTarget=g,w=m),g=w,p&&v)t:{for(m=p,y=v,x=0,b=m;b;b=xu(b))x++;for(b=0,w=y;w;w=xu(w))b++;for(;0<x-b;)m=xu(m),x--;for(;0<b-x;)y=xu(y),b--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=xu(m),y=xu(y)}m=null}else m=null;p!==null&&Oj(d,f,p,m,!1),v!==null&&g!==null&&Oj(d,g,v,m,!0)}}e:{if(f=c?Yu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=UX;else if(Cj(f))if(JF)S=HX;else{S=WX;var C=zX}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=VX);if(S&&(S=S(e,c))){QF(d,S,n,u);break e}C&&C(e,f,c),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&R_(f,"number",f.value)}switch(C=c?Yu(c):window,e){case"focusin":(Cj(C)||C.contentEditable==="true")&&(Ku=C,H_=c,Kh=null);break;case"focusout":Kh=H_=Ku=null;break;case"mousedown":G_=!0;break;case"contextmenu":case"mouseup":case"dragend":G_=!1,Aj(d,n,u);break;case"selectionchange":if(KX)break;case"keydown":case"keyup":Aj(d,n,u)}var E;if(Uk)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qu?XF(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(KF&&n.locale!=="ko"&&(qu||k!=="onCompositionStart"?k==="onCompositionEnd"&&qu&&(E=qF()):(Xs=u,Fk="value"in Xs?Xs.value:Xs.textContent,qu=!0)),C=Ay(c,k),0<C.length&&(k=new bj(k,e,null,n,u),d.push({event:k,listeners:C}),E?k.data=E:(E=YF(n),E!==null&&(k.data=E)))),(E=MX?$X(e,n):FX(e,n))&&(c=Ay(c,"onBeforeInput"),0<c.length&&(u=new bj("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}lL(d,t)})}function kp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ay(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=xp(e,n),i!=null&&r.unshift(kp(e,i,a)),i=xp(e,t),i!=null&&r.push(kp(e,i,a))),e=e.return}return r}function xu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oj(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,a?(l=xp(n,i),l!=null&&o.unshift(kp(n,l,s))):a||(l=xp(n,i),l!=null&&o.push(kp(n,l,s)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var JX=/\r\n?/g,ZX=/\u0000|\uFFFD/g;function Rj(e){return(typeof e=="string"?e:""+e).replace(JX,`
`).replace(ZX,"")}function Qv(e,t,n){if(t=Rj(t),Rj(e)!==t&&n)throw Error(pe(425))}function Py(){}var q_=null,K_=null;function X_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Y_=typeof setTimeout=="function"?setTimeout:void 0,eY=typeof clearTimeout=="function"?clearTimeout:void 0,Ij=typeof Promise=="function"?Promise:void 0,tY=typeof queueMicrotask=="function"?queueMicrotask:typeof Ij<"u"?function(e){return Ij.resolve(null).then(e).catch(nY)}:Y_;function nY(e){setTimeout(function(){throw e})}function S1(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Sp(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Sp(t)}function sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Df=Math.random().toString(36).slice(2),Wi="__reactFiber$"+Df,Np="__reactProps$"+Df,Ko="__reactContainer$"+Df,Q_="__reactEvents$"+Df,rY="__reactListeners$"+Df,aY="__reactHandles$"+Df;function dc(e){var t=e[Wi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ko]||n[Wi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Dj(e);e!==null;){if(n=e[Wi])return n;e=Dj(e)}return t}e=n,n=e.parentNode}return null}function nv(e){return e=e[Wi]||e[Ko],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function Xx(e){return e[Np]||null}var J_=[],Qu=-1;function jl(e){return{current:e}}function Kt(e){0>Qu||(e.current=J_[Qu],J_[Qu]=null,Qu--)}function Bt(e,t){Qu++,J_[Qu]=e.current,e.current=t}var bl={},Cr=jl(bl),Hr=jl(!1),Lc=bl;function Hd(e,t){var n=e.type.contextTypes;if(!n)return bl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Gr(e){return e=e.childContextTypes,e!=null}function jy(){Kt(Hr),Kt(Cr)}function Mj(e,t,n){if(Cr.current!==bl)throw Error(pe(168));Bt(Cr,t),Bt(Hr,n)}function uL(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(pe(108,z7(e)||"Unknown",a));return cn({},n,r)}function Oy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bl,Lc=Cr.current,Bt(Cr,e),Bt(Hr,Hr.current),!0}function $j(e,t,n){var r=e.stateNode;if(!r)throw Error(pe(169));n?(e=uL(e,t,Lc),r.__reactInternalMemoizedMergedChildContext=e,Kt(Hr),Kt(Cr),Bt(Cr,e)):Kt(Hr),Bt(Hr,n)}var Po=null,Yx=!1,_1=!1;function dL(e){Po===null?Po=[e]:Po.push(e)}function iY(e){Yx=!0,dL(e)}function Ol(){if(!_1&&Po!==null){_1=!0;var e=0,t=Pt;try{var n=Po;for(Pt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Po=null,Yx=!1}catch(a){throw Po!==null&&(Po=Po.slice(e+1)),MF(Ik,Ol),a}finally{Pt=t,_1=!1}}return null}var Ju=[],Zu=0,Ry=null,Iy=0,Ta=[],Aa=0,Bc=null,Io=1,Do="";function Zl(e,t){Ju[Zu++]=Iy,Ju[Zu++]=Ry,Ry=e,Iy=t}function fL(e,t,n){Ta[Aa++]=Io,Ta[Aa++]=Do,Ta[Aa++]=Bc,Bc=e;var r=Io;e=Do;var a=32-Si(r)-1;r&=~(1<<a),n+=1;var i=32-Si(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Io=1<<32-Si(t)+a|n<<a|r,Do=i+e}else Io=1<<i|n<<a|r,Do=e}function Wk(e){e.return!==null&&(Zl(e,1),fL(e,1,0))}function Vk(e){for(;e===Ry;)Ry=Ju[--Zu],Ju[Zu]=null,Iy=Ju[--Zu],Ju[Zu]=null;for(;e===Bc;)Bc=Ta[--Aa],Ta[Aa]=null,Do=Ta[--Aa],Ta[Aa]=null,Io=Ta[--Aa],Ta[Aa]=null}var ma=null,da=null,Qt=!1,hi=null;function hL(e,t){var n=Ra(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fj(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ma=e,da=sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ma=e,da=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bc!==null?{id:Io,overflow:Do}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ra(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ma=e,da=null,!0):!1;default:return!1}}function Z_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function e2(e){if(Qt){var t=da;if(t){var n=t;if(!Fj(e,t)){if(Z_(e))throw Error(pe(418));t=sl(n.nextSibling);var r=ma;t&&Fj(e,t)?hL(r,n):(e.flags=e.flags&-4097|2,Qt=!1,ma=e)}}else{if(Z_(e))throw Error(pe(418));e.flags=e.flags&-4097|2,Qt=!1,ma=e}}}function Lj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ma=e}function Jv(e){if(e!==ma)return!1;if(!Qt)return Lj(e),Qt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!X_(e.type,e.memoizedProps)),t&&(t=da)){if(Z_(e))throw pL(),Error(pe(418));for(;t;)hL(e,t),t=sl(t.nextSibling)}if(Lj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){da=sl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}da=null}}else da=ma?sl(e.stateNode.nextSibling):null;return!0}function pL(){for(var e=da;e;)e=sl(e.nextSibling)}function Gd(){da=ma=null,Qt=!1}function Hk(e){hi===null?hi=[e]:hi.push(e)}var oY=ls.ReactCurrentBatchConfig;function hh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pe(309));var r=n.stateNode}if(!r)throw Error(pe(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(pe(284));if(!n._owner)throw Error(pe(290,e))}return e}function Zv(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bj(e){var t=e._init;return t(e._payload)}function mL(e){function t(y,x){if(e){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function a(y,x){return y=dl(y,x),y.index=0,y.sibling=null,y}function i(y,x,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function s(y,x,b,w){return x===null||x.tag!==6?(x=P1(b,y.mode,w),x.return=y,x):(x=a(x,b),x.return=y,x)}function l(y,x,b,w){var S=b.type;return S===Gu?u(y,x,b.props.children,w,b.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ds&&Bj(S)===x.type)?(w=a(x,b.props),w.ref=hh(y,x,b),w.return=y,w):(w=ly(b.type,b.key,b.props,null,y.mode,w),w.ref=hh(y,x,b),w.return=y,w)}function c(y,x,b,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=j1(b,y.mode,w),x.return=y,x):(x=a(x,b.children||[]),x.return=y,x)}function u(y,x,b,w,S){return x===null||x.tag!==7?(x=Rc(b,y.mode,w,S),x.return=y,x):(x=a(x,b),x.return=y,x)}function d(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=P1(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zv:return b=ly(x.type,x.key,x.props,null,y.mode,b),b.ref=hh(y,null,x),b.return=y,b;case Hu:return x=j1(x,y.mode,b),x.return=y,x;case Ds:var w=x._init;return d(y,w(x._payload),b)}if(Dh(x)||lh(x))return x=Rc(x,y.mode,b,null),x.return=y,x;Zv(y,x)}return null}function f(y,x,b,w){var S=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:s(y,x,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zv:return b.key===S?l(y,x,b,w):null;case Hu:return b.key===S?c(y,x,b,w):null;case Ds:return S=b._init,f(y,x,S(b._payload),w)}if(Dh(b)||lh(b))return S!==null?null:u(y,x,b,w,null);Zv(y,b)}return null}function p(y,x,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,s(x,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zv:return y=y.get(w.key===null?b:w.key)||null,l(x,y,w,S);case Hu:return y=y.get(w.key===null?b:w.key)||null,c(x,y,w,S);case Ds:var C=w._init;return p(y,x,b,C(w._payload),S)}if(Dh(w)||lh(w))return y=y.get(b)||null,u(x,y,w,S,null);Zv(x,w)}return null}function v(y,x,b,w){for(var S=null,C=null,E=x,k=x=0,N=null;E!==null&&k<b.length;k++){E.index>k?(N=E,E=null):N=E.sibling;var T=f(y,E,b[k],w);if(T===null){E===null&&(E=N);break}e&&E&&T.alternate===null&&t(y,E),x=i(T,x,k),C===null?S=T:C.sibling=T,C=T,E=N}if(k===b.length)return n(y,E),Qt&&Zl(y,k),S;if(E===null){for(;k<b.length;k++)E=d(y,b[k],w),E!==null&&(x=i(E,x,k),C===null?S=E:C.sibling=E,C=E);return Qt&&Zl(y,k),S}for(E=r(y,E);k<b.length;k++)N=p(E,y,k,b[k],w),N!==null&&(e&&N.alternate!==null&&E.delete(N.key===null?k:N.key),x=i(N,x,k),C===null?S=N:C.sibling=N,C=N);return e&&E.forEach(function(A){return t(y,A)}),Qt&&Zl(y,k),S}function m(y,x,b,w){var S=lh(b);if(typeof S!="function")throw Error(pe(150));if(b=S.call(b),b==null)throw Error(pe(151));for(var C=S=null,E=x,k=x=0,N=null,T=b.next();E!==null&&!T.done;k++,T=b.next()){E.index>k?(N=E,E=null):N=E.sibling;var A=f(y,E,T.value,w);if(A===null){E===null&&(E=N);break}e&&E&&A.alternate===null&&t(y,E),x=i(A,x,k),C===null?S=A:C.sibling=A,C=A,E=N}if(T.done)return n(y,E),Qt&&Zl(y,k),S;if(E===null){for(;!T.done;k++,T=b.next())T=d(y,T.value,w),T!==null&&(x=i(T,x,k),C===null?S=T:C.sibling=T,C=T);return Qt&&Zl(y,k),S}for(E=r(y,E);!T.done;k++,T=b.next())T=p(E,y,k,T.value,w),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?k:T.key),x=i(T,x,k),C===null?S=T:C.sibling=T,C=T);return e&&E.forEach(function(P){return t(y,P)}),Qt&&Zl(y,k),S}function g(y,x,b,w){if(typeof b=="object"&&b!==null&&b.type===Gu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zv:e:{for(var S=b.key,C=x;C!==null;){if(C.key===S){if(S=b.type,S===Gu){if(C.tag===7){n(y,C.sibling),x=a(C,b.props.children),x.return=y,y=x;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ds&&Bj(S)===C.type){n(y,C.sibling),x=a(C,b.props),x.ref=hh(y,C,b),x.return=y,y=x;break e}n(y,C);break}else t(y,C);C=C.sibling}b.type===Gu?(x=Rc(b.props.children,y.mode,w,b.key),x.return=y,y=x):(w=ly(b.type,b.key,b.props,null,y.mode,w),w.ref=hh(y,x,b),w.return=y,y=w)}return o(y);case Hu:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(y,x.sibling),x=a(x,b.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else t(y,x);x=x.sibling}x=j1(b,y.mode,w),x.return=y,y=x}return o(y);case Ds:return C=b._init,g(y,x,C(b._payload),w)}if(Dh(b))return v(y,x,b,w);if(lh(b))return m(y,x,b,w);Zv(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(y,x.sibling),x=a(x,b),x.return=y,y=x):(n(y,x),x=P1(b,y.mode,w),x.return=y,y=x),o(y)):n(y,x)}return g}var qd=mL(!0),vL=mL(!1),Dy=jl(null),My=null,ed=null,Gk=null;function qk(){Gk=ed=My=null}function Kk(e){var t=Dy.current;Kt(Dy),e._currentValue=t}function t2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function md(e,t){My=e,Gk=ed=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wr=!0),e.firstContext=null)}function za(e){var t=e._currentValue;if(Gk!==e)if(e={context:e,memoizedValue:t,next:null},ed===null){if(My===null)throw Error(pe(308));ed=e,My.dependencies={lanes:0,firstContext:e}}else ed=ed.next=e;return t}var fc=null;function Xk(e){fc===null?fc=[e]:fc.push(e)}function gL(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Xk(t)):(n.next=a.next,a.next=n),t.interleaved=n,Xo(e,r)}function Xo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function Yk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ll(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Xo(e,n)}return a=r.interleaved,a===null?(t.next=t,Xk(r)):(t.next=a.next,a.next=t),r.interleaved=t,Xo(e,n)}function ny(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dk(e,n)}}function Uj(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $y(e,t,n,r){var a=e.updateQueue;Ms=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,u=c=l=null,s=i;do{var f=s.lane,p=s.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,m=s;switch(f=t,p=n,m.tag){case 1:if(v=m.payload,typeof v=="function"){d=v.call(p,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(p,d,f):v,f==null)break e;d=cn({},d,f);break e;case 2:Ms=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;f=s,s=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);zc|=o,e.lanes=o,e.memoizedState=d}}function zj(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(pe(191,a));a.call(r)}}}var rv={},Zi=jl(rv),Tp=jl(rv),Ap=jl(rv);function hc(e){if(e===rv)throw Error(pe(174));return e}function Qk(e,t){switch(Bt(Ap,t),Bt(Tp,e),Bt(Zi,rv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:D_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=D_(t,e)}Kt(Zi),Bt(Zi,t)}function Kd(){Kt(Zi),Kt(Tp),Kt(Ap)}function xL(e){hc(Ap.current);var t=hc(Zi.current),n=D_(t,e.type);t!==n&&(Bt(Tp,e),Bt(Zi,n))}function Jk(e){Tp.current===e&&(Kt(Zi),Kt(Tp))}var tn=jl(0);function Fy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var C1=[];function Zk(){for(var e=0;e<C1.length;e++)C1[e]._workInProgressVersionPrimary=null;C1.length=0}var ry=ls.ReactCurrentDispatcher,E1=ls.ReactCurrentBatchConfig,Uc=0,sn=null,An=null,Un=null,Ly=!1,Xh=!1,Pp=0,sY=0;function fr(){throw Error(pe(321))}function eN(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ki(e[n],t[n]))return!1;return!0}function tN(e,t,n,r,a,i){if(Uc=i,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ry.current=e===null||e.memoizedState===null?dY:fY,e=n(r,a),Xh){i=0;do{if(Xh=!1,Pp=0,25<=i)throw Error(pe(301));i+=1,Un=An=null,t.updateQueue=null,ry.current=hY,e=n(r,a)}while(Xh)}if(ry.current=By,t=An!==null&&An.next!==null,Uc=0,Un=An=sn=null,Ly=!1,t)throw Error(pe(300));return e}function nN(){var e=Pp!==0;return Pp=0,e}function $i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?sn.memoizedState=Un=e:Un=Un.next=e,Un}function Wa(){if(An===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=An.next;var t=Un===null?sn.memoizedState:Un.next;if(t!==null)Un=t,An=e;else{if(e===null)throw Error(pe(310));An=e,e={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Un===null?sn.memoizedState=Un=e:Un=Un.next=e}return Un}function jp(e,t){return typeof t=="function"?t(e):t}function k1(e){var t=Wa(),n=t.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=e;var r=An,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,c=i;do{var u=c.lane;if((Uc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,sn.lanes|=u,zc|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=s,ki(r,t.memoizedState)||(Wr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,sn.lanes|=i,zc|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function N1(e){var t=Wa(),n=t.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ki(i,t.memoizedState)||(Wr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function bL(){}function wL(e,t){var n=sn,r=Wa(),a=t(),i=!ki(r.memoizedState,a);if(i&&(r.memoizedState=a,Wr=!0),r=r.queue,rN(CL.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Un!==null&&Un.memoizedState.tag&1){if(n.flags|=2048,Op(9,_L.bind(null,n,r,a,t),void 0,null),Wn===null)throw Error(pe(349));Uc&30||SL(n,t,a)}return a}function SL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _L(e,t,n,r){t.value=n,t.getSnapshot=r,EL(t)&&kL(e)}function CL(e,t,n){return n(function(){EL(t)&&kL(e)})}function EL(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ki(e,n)}catch{return!0}}function kL(e){var t=Xo(e,1);t!==null&&_i(t,e,1,-1)}function Wj(e){var t=$i();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jp,lastRenderedState:e},t.queue=e,e=e.dispatch=uY.bind(null,sn,e),[t.memoizedState,e]}function Op(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function NL(){return Wa().memoizedState}function ay(e,t,n,r){var a=$i();sn.flags|=e,a.memoizedState=Op(1|t,n,void 0,r===void 0?null:r)}function Qx(e,t,n,r){var a=Wa();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&eN(r,o.deps)){a.memoizedState=Op(t,n,i,r);return}}sn.flags|=e,a.memoizedState=Op(1|t,n,i,r)}function Vj(e,t){return ay(8390656,8,e,t)}function rN(e,t){return Qx(2048,8,e,t)}function TL(e,t){return Qx(4,2,e,t)}function AL(e,t){return Qx(4,4,e,t)}function PL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jL(e,t,n){return n=n!=null?n.concat([e]):null,Qx(4,4,PL.bind(null,t,e),n)}function aN(){}function OL(e,t){var n=Wa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&eN(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function RL(e,t){var n=Wa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&eN(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function IL(e,t,n){return Uc&21?(ki(n,t)||(n=LF(),sn.lanes|=n,zc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wr=!0),e.memoizedState=n)}function lY(e,t){var n=Pt;Pt=n!==0&&4>n?n:4,e(!0);var r=E1.transition;E1.transition={};try{e(!1),t()}finally{Pt=n,E1.transition=r}}function DL(){return Wa().memoizedState}function cY(e,t,n){var r=ul(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ML(e))$L(t,n);else if(n=gL(e,t,n,r),n!==null){var a=Dr();_i(n,e,r,a),FL(n,t,r)}}function uY(e,t,n){var r=ul(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ML(e))$L(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,ki(s,o)){var l=t.interleaved;l===null?(a.next=a,Xk(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}n=gL(e,t,a,r),n!==null&&(a=Dr(),_i(n,e,r,a),FL(n,t,r))}}function ML(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function $L(e,t){Xh=Ly=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function FL(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dk(e,n)}}var By={readContext:za,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},dY={readContext:za,useCallback:function(e,t){return $i().memoizedState=[e,t===void 0?null:t],e},useContext:za,useEffect:Vj,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ay(4194308,4,PL.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ay(4194308,4,e,t)},useInsertionEffect:function(e,t){return ay(4,2,e,t)},useMemo:function(e,t){var n=$i();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$i();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cY.bind(null,sn,e),[r.memoizedState,e]},useRef:function(e){var t=$i();return e={current:e},t.memoizedState=e},useState:Wj,useDebugValue:aN,useDeferredValue:function(e){return $i().memoizedState=e},useTransition:function(){var e=Wj(!1),t=e[0];return e=lY.bind(null,e[1]),$i().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sn,a=$i();if(Qt){if(n===void 0)throw Error(pe(407));n=n()}else{if(n=t(),Wn===null)throw Error(pe(349));Uc&30||SL(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Vj(CL.bind(null,r,i,e),[e]),r.flags|=2048,Op(9,_L.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=$i(),t=Wn.identifierPrefix;if(Qt){var n=Do,r=Io;n=(r&~(1<<32-Si(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Pp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sY++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fY={readContext:za,useCallback:OL,useContext:za,useEffect:rN,useImperativeHandle:jL,useInsertionEffect:TL,useLayoutEffect:AL,useMemo:RL,useReducer:k1,useRef:NL,useState:function(){return k1(jp)},useDebugValue:aN,useDeferredValue:function(e){var t=Wa();return IL(t,An.memoizedState,e)},useTransition:function(){var e=k1(jp)[0],t=Wa().memoizedState;return[e,t]},useMutableSource:bL,useSyncExternalStore:wL,useId:DL,unstable_isNewReconciler:!1},hY={readContext:za,useCallback:OL,useContext:za,useEffect:rN,useImperativeHandle:jL,useInsertionEffect:TL,useLayoutEffect:AL,useMemo:RL,useReducer:N1,useRef:NL,useState:function(){return N1(jp)},useDebugValue:aN,useDeferredValue:function(e){var t=Wa();return An===null?t.memoizedState=e:IL(t,An.memoizedState,e)},useTransition:function(){var e=N1(jp)[0],t=Wa().memoizedState;return[e,t]},useMutableSource:bL,useSyncExternalStore:wL,useId:DL,unstable_isNewReconciler:!1};function ii(e,t){if(e&&e.defaultProps){t=cn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function n2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:cn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Jx={isMounted:function(e){return(e=e._reactInternals)?ru(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dr(),a=ul(e),i=Uo(r,a);i.payload=t,n!=null&&(i.callback=n),t=ll(e,i,a),t!==null&&(_i(t,e,a,r),ny(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dr(),a=ul(e),i=Uo(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ll(e,i,a),t!==null&&(_i(t,e,a,r),ny(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dr(),r=ul(e),a=Uo(n,r);a.tag=2,t!=null&&(a.callback=t),t=ll(e,a,r),t!==null&&(_i(t,e,r,n),ny(t,e,r))}};function Hj(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Cp(n,r)||!Cp(a,i):!0}function LL(e,t,n){var r=!1,a=bl,i=t.contextType;return typeof i=="object"&&i!==null?i=za(i):(a=Gr(t)?Lc:Cr.current,r=t.contextTypes,i=(r=r!=null)?Hd(e,a):bl),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gj(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Jx.enqueueReplaceState(t,t.state,null)}function r2(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Yk(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=za(i):(i=Gr(t)?Lc:Cr.current,a.context=Hd(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(n2(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Jx.enqueueReplaceState(a,a.state,null),$y(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xd(e,t){try{var n="",r=t;do n+=U7(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function T1(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function a2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pY=typeof WeakMap=="function"?WeakMap:Map;function BL(e,t,n){n=Uo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zy||(zy=!0,p2=r),a2(e,t)},n}function UL(e,t,n){n=Uo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){a2(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){a2(e,t),typeof r!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function qj(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pY;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=TY.bind(null,e,t,n),t.then(e,e))}function Kj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xj(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Uo(-1,1),t.tag=2,ll(n,t,1))),n.lanes|=1),e)}var mY=ls.ReactCurrentOwner,Wr=!1;function Ar(e,t,n,r){t.child=e===null?vL(t,null,n,r):qd(t,e.child,n,r)}function Yj(e,t,n,r,a){n=n.render;var i=t.ref;return md(t,a),r=tN(e,t,n,r,i,a),n=nN(),e!==null&&!Wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Yo(e,t,a)):(Qt&&n&&Wk(t),t.flags|=1,Ar(e,t,r,a),t.child)}function Qj(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!fN(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,zL(e,t,i,r,a)):(e=ly(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Cp,n(o,r)&&e.ref===t.ref)return Yo(e,t,a)}return t.flags|=1,e=dl(i,r),e.ref=t.ref,e.return=t,t.child=e}function zL(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Cp(i,r)&&e.ref===t.ref)if(Wr=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Wr=!0);else return t.lanes=e.lanes,Yo(e,t,a)}return i2(e,t,n,r,a)}function WL(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(nd,ra),ra|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bt(nd,ra),ra|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Bt(nd,ra),ra|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Bt(nd,ra),ra|=r;return Ar(e,t,a,n),t.child}function VL(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function i2(e,t,n,r,a){var i=Gr(n)?Lc:Cr.current;return i=Hd(t,i),md(t,a),n=tN(e,t,n,r,i,a),r=nN(),e!==null&&!Wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Yo(e,t,a)):(Qt&&r&&Wk(t),t.flags|=1,Ar(e,t,n,a),t.child)}function Jj(e,t,n,r,a){if(Gr(n)){var i=!0;Oy(t)}else i=!1;if(md(t,a),t.stateNode===null)iy(e,t),LL(t,n,r),r2(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=za(c):(c=Gr(n)?Lc:Cr.current,c=Hd(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==c)&&Gj(t,o,r,c),Ms=!1;var f=t.memoizedState;o.state=f,$y(t,r,o,a),l=t.memoizedState,s!==r||f!==l||Hr.current||Ms?(typeof u=="function"&&(n2(t,n,u,r),l=t.memoizedState),(s=Ms||Hj(t,n,s,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,yL(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ii(t.type,s),o.props=c,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=za(l):(l=Gr(n)?Lc:Cr.current,l=Hd(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||f!==l)&&Gj(t,o,r,l),Ms=!1,f=t.memoizedState,o.state=f,$y(t,r,o,a);var v=t.memoizedState;s!==d||f!==v||Hr.current||Ms?(typeof p=="function"&&(n2(t,n,p,r),v=t.memoizedState),(c=Ms||Hj(t,n,c,r,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return o2(e,t,n,r,i,a)}function o2(e,t,n,r,a,i){VL(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&$j(t,n,!1),Yo(e,t,i);r=t.stateNode,mY.current=t;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qd(t,e.child,null,i),t.child=qd(t,null,s,i)):Ar(e,t,s,i),t.memoizedState=r.state,a&&$j(t,n,!0),t.child}function HL(e){var t=e.stateNode;t.pendingContext?Mj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mj(e,t.context,!1),Qk(e,t.containerInfo)}function Zj(e,t,n,r,a){return Gd(),Hk(a),t.flags|=256,Ar(e,t,n,r),t.child}var s2={dehydrated:null,treeContext:null,retryLane:0};function l2(e){return{baseLanes:e,cachePool:null,transitions:null}}function GL(e,t,n){var r=t.pendingProps,a=tn.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Bt(tn,a&1),e===null)return e2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tb(o,r,0,null),e=Rc(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=l2(n),t.memoizedState=s2,e):iN(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return vY(e,t,o,r,s,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=dl(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=dl(s,i):(i=Rc(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?l2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=s2,r}return i=e.child,e=i.sibling,r=dl(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function iN(e,t){return t=tb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eg(e,t,n,r){return r!==null&&Hk(r),qd(t,e.child,null,n),e=iN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vY(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=T1(Error(pe(422))),eg(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=tb({mode:"visible",children:r.children},a,0,null),i=Rc(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&qd(t,e.child,null,o),t.child.memoizedState=l2(o),t.memoizedState=s2,i);if(!(t.mode&1))return eg(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(pe(419)),r=T1(i,r,void 0),eg(e,t,o,r)}if(s=(o&e.childLanes)!==0,Wr||s){if(r=Wn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Xo(e,a),_i(r,e,a,-1))}return dN(),r=T1(Error(pe(421))),eg(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=AY.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,da=sl(a.nextSibling),ma=t,Qt=!0,hi=null,e!==null&&(Ta[Aa++]=Io,Ta[Aa++]=Do,Ta[Aa++]=Bc,Io=e.id,Do=e.overflow,Bc=t),t=iN(t,r.children),t.flags|=4096,t)}function eO(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),t2(e.return,t,n)}function A1(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function qL(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Ar(e,t,r.children,n),r=tn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eO(e,n,t);else if(e.tag===19)eO(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bt(tn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Fy(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),A1(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Fy(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}A1(t,!0,n,null,i);break;case"together":A1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function iy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,n=dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gY(e,t,n){switch(t.tag){case 3:HL(t),Gd();break;case 5:xL(t);break;case 1:Gr(t.type)&&Oy(t);break;case 4:Qk(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Bt(Dy,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bt(tn,tn.current&1),t.flags|=128,null):n&t.child.childLanes?GL(e,t,n):(Bt(tn,tn.current&1),e=Yo(e,t,n),e!==null?e.sibling:null);Bt(tn,tn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return qL(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Bt(tn,tn.current),r)break;return null;case 22:case 23:return t.lanes=0,WL(e,t,n)}return Yo(e,t,n)}var KL,c2,XL,YL;KL=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c2=function(){};XL=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,hc(Zi.current);var i=null;switch(n){case"input":a=j_(e,a),r=j_(e,r),i=[];break;case"select":a=cn({},a,{value:void 0}),r=cn({},r,{value:void 0}),i=[];break;case"textarea":a=I_(e,a),r=I_(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Py)}M_(n,r);var o;n=null;for(c in a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var s=a[c];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gp.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(s=a!=null?a[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Vt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};YL=function(e,t,n,r){n!==r&&(t.flags|=4)};function ph(e,t){if(!Qt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yY(e,t,n){var r=t.pendingProps;switch(Vk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(t),null;case 1:return Gr(t.type)&&jy(),hr(t),null;case 3:return r=t.stateNode,Kd(),Kt(Hr),Kt(Cr),Zk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Jv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hi!==null&&(g2(hi),hi=null))),c2(e,t),hr(t),null;case 5:Jk(t);var a=hc(Ap.current);if(n=t.type,e!==null&&t.stateNode!=null)XL(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(pe(166));return hr(t),null}if(e=hc(Zi.current),Jv(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Wi]=t,r[Np]=i,e=(t.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(a=0;a<$h.length;a++)Vt($h[a],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":cj(r,i),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Vt("invalid",r);break;case"textarea":dj(r,i),Vt("invalid",r)}M_(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&Qv(r.textContent,s,e),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Qv(r.textContent,s,e),a=["children",""+s]):gp.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Vt("scroll",r)}switch(n){case"input":Wv(r),uj(r,i,!0);break;case"textarea":Wv(r),fj(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Py)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CF(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Wi]=t,e[Np]=r,KL(e,t,!1,!1),t.stateNode=e;e:{switch(o=$_(n,r),n){case"dialog":Vt("cancel",e),Vt("close",e),a=r;break;case"iframe":case"object":case"embed":Vt("load",e),a=r;break;case"video":case"audio":for(a=0;a<$h.length;a++)Vt($h[a],e);a=r;break;case"source":Vt("error",e),a=r;break;case"img":case"image":case"link":Vt("error",e),Vt("load",e),a=r;break;case"details":Vt("toggle",e),a=r;break;case"input":cj(e,r),a=j_(e,r),Vt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=cn({},r,{value:void 0}),Vt("invalid",e);break;case"textarea":dj(e,r),a=I_(e,r),Vt("invalid",e);break;default:a=r}M_(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?NF(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EF(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yp(e,l):typeof l=="number"&&yp(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Vt("scroll",e):l!=null&&Ak(e,i,l,o))}switch(n){case"input":Wv(e),uj(e,r,!1);break;case"textarea":Wv(e),fj(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xl(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?dd(e,!!r.multiple,i,!1):r.defaultValue!=null&&dd(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Py)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hr(t),null;case 6:if(e&&t.stateNode!=null)YL(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(pe(166));if(n=hc(Ap.current),hc(Zi.current),Jv(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wi]=t,(i=r.nodeValue!==n)&&(e=ma,e!==null))switch(e.tag){case 3:Qv(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qv(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wi]=t,t.stateNode=r}return hr(t),null;case 13:if(Kt(tn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qt&&da!==null&&t.mode&1&&!(t.flags&128))pL(),Gd(),t.flags|=98560,i=!1;else if(i=Jv(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(pe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Wi]=t}else Gd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hr(t),i=!1}else hi!==null&&(g2(hi),hi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||tn.current&1?Pn===0&&(Pn=3):dN())),t.updateQueue!==null&&(t.flags|=4),hr(t),null);case 4:return Kd(),c2(e,t),e===null&&Ep(t.stateNode.containerInfo),hr(t),null;case 10:return Kk(t.type._context),hr(t),null;case 17:return Gr(t.type)&&jy(),hr(t),null;case 19:if(Kt(tn),i=t.memoizedState,i===null)return hr(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ph(i,!1);else{if(Pn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Fy(e),o!==null){for(t.flags|=128,ph(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bt(tn,tn.current&1|2),t.child}e=e.sibling}i.tail!==null&&vn()>Yd&&(t.flags|=128,r=!0,ph(i,!1),t.lanes=4194304)}else{if(!r)if(e=Fy(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ph(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Qt)return hr(t),null}else 2*vn()-i.renderingStartTime>Yd&&n!==1073741824&&(t.flags|=128,r=!0,ph(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=vn(),t.sibling=null,n=tn.current,Bt(tn,r?n&1|2:n&1),t):(hr(t),null);case 22:case 23:return uN(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ra&1073741824&&(hr(t),t.subtreeFlags&6&&(t.flags|=8192)):hr(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function xY(e,t){switch(Vk(t),t.tag){case 1:return Gr(t.type)&&jy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kd(),Kt(Hr),Kt(Cr),Zk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jk(t),null;case 13:if(Kt(tn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));Gd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(tn),null;case 4:return Kd(),null;case 10:return Kk(t.type._context),null;case 22:case 23:return uN(),null;case 24:return null;default:return null}}var tg=!1,vr=!1,bY=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function td(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(e,t,r)}else n.current=null}function u2(e,t,n){try{n()}catch(r){pn(e,t,r)}}var tO=!1;function wY(e,t){if(q_=Ny,e=tL(),zk(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===a&&(s=o),f===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(K_={focusedElem:e,selectionRange:n},Ny=!1,Ae=t;Ae!==null;)if(t=Ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ae=e;else for(;Ae!==null;){t=Ae;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ii(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(w){pn(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ae=e;break}Ae=t.return}return v=tO,tO=!1,v}function Yh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&u2(t,n,i)}a=a.next}while(a!==r)}}function Zx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function d2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function QL(e){var t=e.alternate;t!==null&&(e.alternate=null,QL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wi],delete t[Np],delete t[Q_],delete t[rY],delete t[aY])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JL(e){return e.tag===5||e.tag===3||e.tag===4}function nO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function f2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Py));else if(r!==4&&(e=e.child,e!==null))for(f2(e,t,n),e=e.sibling;e!==null;)f2(e,t,n),e=e.sibling}function h2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(h2(e,t,n),e=e.sibling;e!==null;)h2(e,t,n),e=e.sibling}var Jn=null,ci=!1;function ks(e,t,n){for(n=n.child;n!==null;)ZL(e,t,n),n=n.sibling}function ZL(e,t,n){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(Hx,n)}catch{}switch(n.tag){case 5:vr||td(n,t);case 6:var r=Jn,a=ci;Jn=null,ks(e,t,n),Jn=r,ci=a,Jn!==null&&(ci?(e=Jn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Jn.removeChild(n.stateNode));break;case 18:Jn!==null&&(ci?(e=Jn,n=n.stateNode,e.nodeType===8?S1(e.parentNode,n):e.nodeType===1&&S1(e,n),Sp(e)):S1(Jn,n.stateNode));break;case 4:r=Jn,a=ci,Jn=n.stateNode.containerInfo,ci=!0,ks(e,t,n),Jn=r,ci=a;break;case 0:case 11:case 14:case 15:if(!vr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&u2(n,t,o),a=a.next}while(a!==r)}ks(e,t,n);break;case 1:if(!vr&&(td(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){pn(n,t,s)}ks(e,t,n);break;case 21:ks(e,t,n);break;case 22:n.mode&1?(vr=(r=vr)||n.memoizedState!==null,ks(e,t,n),vr=r):ks(e,t,n);break;default:ks(e,t,n)}}function rO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bY),t.forEach(function(r){var a=PY.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ja(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Jn=s.stateNode,ci=!1;break e;case 3:Jn=s.stateNode.containerInfo,ci=!0;break e;case 4:Jn=s.stateNode.containerInfo,ci=!0;break e}s=s.return}if(Jn===null)throw Error(pe(160));ZL(i,o,a),Jn=null,ci=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(c){pn(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eB(t,e),t=t.sibling}function eB(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ja(t,e),Di(e),r&4){try{Yh(3,e,e.return),Zx(3,e)}catch(m){pn(e,e.return,m)}try{Yh(5,e,e.return)}catch(m){pn(e,e.return,m)}}break;case 1:Ja(t,e),Di(e),r&512&&n!==null&&td(n,n.return);break;case 5:if(Ja(t,e),Di(e),r&512&&n!==null&&td(n,n.return),e.flags&32){var a=e.stateNode;try{yp(a,"")}catch(m){pn(e,e.return,m)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&SF(a,i),$_(s,o);var c=$_(s,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?NF(a,d):u==="dangerouslySetInnerHTML"?EF(a,d):u==="children"?yp(a,d):Ak(a,u,d,c)}switch(s){case"input":O_(a,i);break;case"textarea":_F(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?dd(a,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?dd(a,!!i.multiple,i.defaultValue,!0):dd(a,!!i.multiple,i.multiple?[]:"",!1))}a[Np]=i}catch(m){pn(e,e.return,m)}}break;case 6:if(Ja(t,e),Di(e),r&4){if(e.stateNode===null)throw Error(pe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){pn(e,e.return,m)}}break;case 3:if(Ja(t,e),Di(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sp(t.containerInfo)}catch(m){pn(e,e.return,m)}break;case 4:Ja(t,e),Di(e);break;case 13:Ja(t,e),Di(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(lN=vn())),r&4&&rO(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(vr=(c=vr)||u,Ja(t,e),vr=c):Ja(t,e),Di(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Ae=e,u=e.child;u!==null;){for(d=Ae=u;Ae!==null;){switch(f=Ae,p=f.child,f.tag){case 0:case 11:case 14:case 15:Yh(4,f,f.return);break;case 1:td(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){pn(r,n,m)}}break;case 5:td(f,f.return);break;case 22:if(f.memoizedState!==null){iO(d);continue}}p!==null?(p.return=f,Ae=p):iO(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{a=d.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=kF("display",o))}catch(m){pn(e,e.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){pn(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ja(t,e),Di(e),r&4&&rO(e);break;case 21:break;default:Ja(t,e),Di(e)}}function Di(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(JL(n)){var r=n;break e}n=n.return}throw Error(pe(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(yp(a,""),r.flags&=-33);var i=nO(e);h2(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=nO(e);f2(e,s,o);break;default:throw Error(pe(161))}}catch(l){pn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SY(e,t,n){Ae=e,tB(e)}function tB(e,t,n){for(var r=(e.mode&1)!==0;Ae!==null;){var a=Ae,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||tg;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||vr;s=tg;var c=vr;if(tg=o,(vr=l)&&!c)for(Ae=a;Ae!==null;)o=Ae,l=o.child,o.tag===22&&o.memoizedState!==null?oO(a):l!==null?(l.return=o,Ae=l):oO(a);for(;i!==null;)Ae=i,tB(i),i=i.sibling;Ae=a,tg=s,vr=c}aO(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ae=i):aO(e)}}function aO(e){for(;Ae!==null;){var t=Ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vr||Zx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!vr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ii(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zj(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zj(t,o,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Sp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}vr||t.flags&512&&d2(t)}catch(f){pn(t,t.return,f)}}if(t===e){Ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function iO(e){for(;Ae!==null;){var t=Ae;if(t===e){Ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function oO(e){for(;Ae!==null;){var t=Ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zx(4,t)}catch(l){pn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(l){pn(t,a,l)}}var i=t.return;try{d2(t)}catch(l){pn(t,i,l)}break;case 5:var o=t.return;try{d2(t)}catch(l){pn(t,o,l)}}}catch(l){pn(t,t.return,l)}if(t===e){Ae=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ae=s;break}Ae=t.return}}var _Y=Math.ceil,Uy=ls.ReactCurrentDispatcher,oN=ls.ReactCurrentOwner,$a=ls.ReactCurrentBatchConfig,xt=0,Wn=null,wn=null,or=0,ra=0,nd=jl(0),Pn=0,Rp=null,zc=0,eb=0,sN=0,Qh=null,Br=null,lN=0,Yd=1/0,To=null,zy=!1,p2=null,cl=null,ng=!1,Ys=null,Wy=0,Jh=0,m2=null,oy=-1,sy=0;function Dr(){return xt&6?vn():oy!==-1?oy:oy=vn()}function ul(e){return e.mode&1?xt&2&&or!==0?or&-or:oY.transition!==null?(sy===0&&(sy=LF()),sy):(e=Pt,e!==0||(e=window.event,e=e===void 0?16:GF(e.type)),e):1}function _i(e,t,n,r){if(50<Jh)throw Jh=0,m2=null,Error(pe(185));ev(e,n,r),(!(xt&2)||e!==Wn)&&(e===Wn&&(!(xt&2)&&(eb|=n),Pn===4&&Bs(e,or)),qr(e,r),n===1&&xt===0&&!(t.mode&1)&&(Yd=vn()+500,Yx&&Ol()))}function qr(e,t){var n=e.callbackNode;oX(e,t);var r=ky(e,e===Wn?or:0);if(r===0)n!==null&&mj(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mj(n),t===1)e.tag===0?iY(sO.bind(null,e)):dL(sO.bind(null,e)),tY(function(){!(xt&6)&&Ol()}),n=null;else{switch(BF(r)){case 1:n=Ik;break;case 4:n=$F;break;case 16:n=Ey;break;case 536870912:n=FF;break;default:n=Ey}n=cB(n,nB.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nB(e,t){if(oy=-1,sy=0,xt&6)throw Error(pe(327));var n=e.callbackNode;if(vd()&&e.callbackNode!==n)return null;var r=ky(e,e===Wn?or:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vy(e,r);else{t=r;var a=xt;xt|=2;var i=aB();(Wn!==e||or!==t)&&(To=null,Yd=vn()+500,Oc(e,t));do try{kY();break}catch(s){rB(e,s)}while(!0);qk(),Uy.current=i,xt=a,wn!==null?t=0:(Wn=null,or=0,t=Pn)}if(t!==0){if(t===2&&(a=z_(e),a!==0&&(r=a,t=v2(e,a))),t===1)throw n=Rp,Oc(e,0),Bs(e,r),qr(e,vn()),n;if(t===6)Bs(e,r);else{if(a=e.current.alternate,!(r&30)&&!CY(a)&&(t=Vy(e,r),t===2&&(i=z_(e),i!==0&&(r=i,t=v2(e,i))),t===1))throw n=Rp,Oc(e,0),Bs(e,r),qr(e,vn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(pe(345));case 2:ec(e,Br,To);break;case 3:if(Bs(e,r),(r&130023424)===r&&(t=lN+500-vn(),10<t)){if(ky(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Dr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Y_(ec.bind(null,e,Br,To),t);break}ec(e,Br,To);break;case 4:if(Bs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Si(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_Y(r/1960))-r,10<r){e.timeoutHandle=Y_(ec.bind(null,e,Br,To),r);break}ec(e,Br,To);break;case 5:ec(e,Br,To);break;default:throw Error(pe(329))}}}return qr(e,vn()),e.callbackNode===n?nB.bind(null,e):null}function v2(e,t){var n=Qh;return e.current.memoizedState.isDehydrated&&(Oc(e,t).flags|=256),e=Vy(e,t),e!==2&&(t=Br,Br=n,t!==null&&g2(t)),e}function g2(e){Br===null?Br=e:Br.push.apply(Br,e)}function CY(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!ki(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~sN,t&=~eb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Si(t),r=1<<n;e[n]=-1,t&=~r}}function sO(e){if(xt&6)throw Error(pe(327));vd();var t=ky(e,0);if(!(t&1))return qr(e,vn()),null;var n=Vy(e,t);if(e.tag!==0&&n===2){var r=z_(e);r!==0&&(t=r,n=v2(e,r))}if(n===1)throw n=Rp,Oc(e,0),Bs(e,t),qr(e,vn()),n;if(n===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ec(e,Br,To),qr(e,vn()),null}function cN(e,t){var n=xt;xt|=1;try{return e(t)}finally{xt=n,xt===0&&(Yd=vn()+500,Yx&&Ol())}}function Wc(e){Ys!==null&&Ys.tag===0&&!(xt&6)&&vd();var t=xt;xt|=1;var n=$a.transition,r=Pt;try{if($a.transition=null,Pt=1,e)return e()}finally{Pt=r,$a.transition=n,xt=t,!(xt&6)&&Ol()}}function uN(){ra=nd.current,Kt(nd)}function Oc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eY(n)),wn!==null)for(n=wn.return;n!==null;){var r=n;switch(Vk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jy();break;case 3:Kd(),Kt(Hr),Kt(Cr),Zk();break;case 5:Jk(r);break;case 4:Kd();break;case 13:Kt(tn);break;case 19:Kt(tn);break;case 10:Kk(r.type._context);break;case 22:case 23:uN()}n=n.return}if(Wn=e,wn=e=dl(e.current,null),or=ra=t,Pn=0,Rp=null,sN=eb=zc=0,Br=Qh=null,fc!==null){for(t=0;t<fc.length;t++)if(n=fc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}fc=null}return e}function rB(e,t){do{var n=wn;try{if(qk(),ry.current=By,Ly){for(var r=sn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ly=!1}if(Uc=0,Un=An=sn=null,Xh=!1,Pp=0,oN.current=null,n===null||n.return===null){Pn=1,Rp=t,wn=null;break}e:{var i=e,o=n.return,s=n,l=t;if(t=or,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Kj(o);if(p!==null){p.flags&=-257,Xj(p,o,s,i,t),p.mode&1&&qj(i,c,t),t=p,l=c;var v=t.updateQueue;if(v===null){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}else{if(!(t&1)){qj(i,c,t),dN();break e}l=Error(pe(426))}}else if(Qt&&s.mode&1){var g=Kj(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Xj(g,o,s,i,t),Hk(Xd(l,s));break e}}i=l=Xd(l,s),Pn!==4&&(Pn=2),Qh===null?Qh=[i]:Qh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=BL(i,l,t);Uj(i,y);break e;case 1:s=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(cl===null||!cl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=UL(i,s,t);Uj(i,w);break e}}i=i.return}while(i!==null)}oB(n)}catch(S){t=S,wn===n&&n!==null&&(wn=n=n.return);continue}break}while(!0)}function aB(){var e=Uy.current;return Uy.current=By,e===null?By:e}function dN(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Wn===null||!(zc&268435455)&&!(eb&268435455)||Bs(Wn,or)}function Vy(e,t){var n=xt;xt|=2;var r=aB();(Wn!==e||or!==t)&&(To=null,Oc(e,t));do try{EY();break}catch(a){rB(e,a)}while(!0);if(qk(),xt=n,Uy.current=r,wn!==null)throw Error(pe(261));return Wn=null,or=0,Pn}function EY(){for(;wn!==null;)iB(wn)}function kY(){for(;wn!==null&&!Q7();)iB(wn)}function iB(e){var t=lB(e.alternate,e,ra);e.memoizedProps=e.pendingProps,t===null?oB(e):wn=t,oN.current=null}function oB(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xY(n,t),n!==null){n.flags&=32767,wn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pn=6,wn=null;return}}else if(n=yY(n,t,ra),n!==null){wn=n;return}if(t=t.sibling,t!==null){wn=t;return}wn=t=e}while(t!==null);Pn===0&&(Pn=5)}function ec(e,t,n){var r=Pt,a=$a.transition;try{$a.transition=null,Pt=1,NY(e,t,n,r)}finally{$a.transition=a,Pt=r}return null}function NY(e,t,n,r){do vd();while(Ys!==null);if(xt&6)throw Error(pe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(sX(e,i),e===Wn&&(wn=Wn=null,or=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ng||(ng=!0,cB(Ey,function(){return vd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$a.transition,$a.transition=null;var o=Pt;Pt=1;var s=xt;xt|=4,oN.current=null,wY(e,n),eB(n,e),qX(K_),Ny=!!q_,K_=q_=null,e.current=n,SY(n),J7(),xt=s,Pt=o,$a.transition=i}else e.current=n;if(ng&&(ng=!1,Ys=e,Wy=a),i=e.pendingLanes,i===0&&(cl=null),tX(n.stateNode),qr(e,vn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(zy)throw zy=!1,e=p2,p2=null,e;return Wy&1&&e.tag!==0&&vd(),i=e.pendingLanes,i&1?e===m2?Jh++:(Jh=0,m2=e):Jh=0,Ol(),null}function vd(){if(Ys!==null){var e=BF(Wy),t=$a.transition,n=Pt;try{if($a.transition=null,Pt=16>e?16:e,Ys===null)var r=!1;else{if(e=Ys,Ys=null,Wy=0,xt&6)throw Error(pe(331));var a=xt;for(xt|=4,Ae=e.current;Ae!==null;){var i=Ae,o=i.child;if(Ae.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Ae=c;Ae!==null;){var u=Ae;switch(u.tag){case 0:case 11:case 15:Yh(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ae=d;else for(;Ae!==null;){u=Ae;var f=u.sibling,p=u.return;if(QL(u),u===c){Ae=null;break}if(f!==null){f.return=p,Ae=f;break}Ae=p}}}var v=i.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ae=o;else e:for(;Ae!==null;){if(i=Ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yh(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ae=y;break e}Ae=i.return}}var x=e.current;for(Ae=x;Ae!==null;){o=Ae;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ae=b;else e:for(o=x;Ae!==null;){if(s=Ae,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Zx(9,s)}}catch(S){pn(s,s.return,S)}if(s===o){Ae=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,Ae=w;break e}Ae=s.return}}if(xt=a,Ol(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(Hx,e)}catch{}r=!0}return r}finally{Pt=n,$a.transition=t}}return!1}function lO(e,t,n){t=Xd(n,t),t=BL(e,t,1),e=ll(e,t,1),t=Dr(),e!==null&&(ev(e,1,t),qr(e,t))}function pn(e,t,n){if(e.tag===3)lO(e,e,n);else for(;t!==null;){if(t.tag===3){lO(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))){e=Xd(n,e),e=UL(t,e,1),t=ll(t,e,1),e=Dr(),t!==null&&(ev(t,1,e),qr(t,e));break}}t=t.return}}function TY(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Dr(),e.pingedLanes|=e.suspendedLanes&n,Wn===e&&(or&n)===n&&(Pn===4||Pn===3&&(or&130023424)===or&&500>vn()-lN?Oc(e,0):sN|=n),qr(e,t)}function sB(e,t){t===0&&(e.mode&1?(t=Gv,Gv<<=1,!(Gv&130023424)&&(Gv=4194304)):t=1);var n=Dr();e=Xo(e,t),e!==null&&(ev(e,t,n),qr(e,n))}function AY(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sB(e,n)}function PY(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(pe(314))}r!==null&&r.delete(t),sB(e,n)}var lB;lB=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)Wr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wr=!1,gY(e,t,n);Wr=!!(e.flags&131072)}else Wr=!1,Qt&&t.flags&1048576&&fL(t,Iy,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;iy(e,t),e=t.pendingProps;var a=Hd(t,Cr.current);md(t,n),a=tN(null,t,r,e,a,n);var i=nN();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gr(r)?(i=!0,Oy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Yk(t),a.updater=Jx,t.stateNode=a,a._reactInternals=t,r2(t,r,e,n),t=o2(null,t,r,!0,i,n)):(t.tag=0,Qt&&i&&Wk(t),Ar(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(iy(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=OY(r),e=ii(r,e),a){case 0:t=i2(null,t,r,e,n);break e;case 1:t=Jj(null,t,r,e,n);break e;case 11:t=Yj(null,t,r,e,n);break e;case 14:t=Qj(null,t,r,ii(r.type,e),n);break e}throw Error(pe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ii(r,a),i2(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ii(r,a),Jj(e,t,r,a,n);case 3:e:{if(HL(t),e===null)throw Error(pe(387));r=t.pendingProps,i=t.memoizedState,a=i.element,yL(e,t),$y(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Xd(Error(pe(423)),t),t=Zj(e,t,r,n,a);break e}else if(r!==a){a=Xd(Error(pe(424)),t),t=Zj(e,t,r,n,a);break e}else for(da=sl(t.stateNode.containerInfo.firstChild),ma=t,Qt=!0,hi=null,n=vL(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gd(),r===a){t=Yo(e,t,n);break e}Ar(e,t,r,n)}t=t.child}return t;case 5:return xL(t),e===null&&e2(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,X_(r,a)?o=null:i!==null&&X_(r,i)&&(t.flags|=32),VL(e,t),Ar(e,t,o,n),t.child;case 6:return e===null&&e2(t),null;case 13:return GL(e,t,n);case 4:return Qk(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qd(t,null,r,n):Ar(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ii(r,a),Yj(e,t,r,a,n);case 7:return Ar(e,t,t.pendingProps,n),t.child;case 8:return Ar(e,t,t.pendingProps.children,n),t.child;case 12:return Ar(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Bt(Dy,r._currentValue),r._currentValue=o,i!==null)if(ki(i.value,o)){if(i.children===a.children&&!Hr.current){t=Yo(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Uo(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),t2(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(pe(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),t2(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ar(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,md(t,n),a=za(a),r=r(a),t.flags|=1,Ar(e,t,r,n),t.child;case 14:return r=t.type,a=ii(r,t.pendingProps),a=ii(r.type,a),Qj(e,t,r,a,n);case 15:return zL(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ii(r,a),iy(e,t),t.tag=1,Gr(r)?(e=!0,Oy(t)):e=!1,md(t,n),LL(t,r,a),r2(t,r,a,n),o2(null,t,r,!0,e,n);case 19:return qL(e,t,n);case 22:return WL(e,t,n)}throw Error(pe(156,t.tag))};function cB(e,t){return MF(e,t)}function jY(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(e,t,n,r){return new jY(e,t,n,r)}function fN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function OY(e){if(typeof e=="function")return fN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jk)return 11;if(e===Ok)return 14}return 2}function dl(e,t){var n=e.alternate;return n===null?(n=Ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ly(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")fN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gu:return Rc(n.children,a,i,t);case Pk:o=8,a|=8;break;case N_:return e=Ra(12,n,t,a|2),e.elementType=N_,e.lanes=i,e;case T_:return e=Ra(13,n,t,a),e.elementType=T_,e.lanes=i,e;case A_:return e=Ra(19,n,t,a),e.elementType=A_,e.lanes=i,e;case xF:return tb(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gF:o=10;break e;case yF:o=9;break e;case jk:o=11;break e;case Ok:o=14;break e;case Ds:o=16,r=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=Ra(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Rc(e,t,n,r){return e=Ra(7,e,r,t),e.lanes=n,e}function tb(e,t,n,r){return e=Ra(22,e,r,t),e.elementType=xF,e.lanes=n,e.stateNode={isHidden:!1},e}function P1(e,t,n){return e=Ra(6,e,null,t),e.lanes=n,e}function j1(e,t,n){return t=Ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function RY(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=d1(0),this.expirationTimes=d1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=d1(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function hN(e,t,n,r,a,i,o,s,l){return e=new RY(e,t,n,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ra(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yk(i),e}function IY(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uB(e){if(!e)return bl;e=e._reactInternals;e:{if(ru(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var n=e.type;if(Gr(n))return uL(e,n,t)}return t}function dB(e,t,n,r,a,i,o,s,l){return e=hN(n,r,!0,e,a,i,o,s,l),e.context=uB(null),n=e.current,r=Dr(),a=ul(n),i=Uo(r,a),i.callback=t??null,ll(n,i,a),e.current.lanes=a,ev(e,a,r),qr(e,r),e}function nb(e,t,n,r){var a=t.current,i=Dr(),o=ul(a);return n=uB(n),t.context===null?t.context=n:t.pendingContext=n,t=Uo(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ll(a,t,o),e!==null&&(_i(e,a,o,i),ny(e,a,o)),o}function Hy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pN(e,t){cO(e,t),(e=e.alternate)&&cO(e,t)}function DY(){return null}var fB=typeof reportError=="function"?reportError:function(e){console.error(e)};function mN(e){this._internalRoot=e}rb.prototype.render=mN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));nb(e,t,null,null)};rb.prototype.unmount=mN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wc(function(){nb(null,e,null,null)}),t[Ko]=null}};function rb(e){this._internalRoot=e}rb.prototype.unstable_scheduleHydration=function(e){if(e){var t=WF();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ls.length&&t!==0&&t<Ls[n].priority;n++);Ls.splice(n,0,e),n===0&&HF(e)}};function vN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ab(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uO(){}function MY(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var c=Hy(o);i.call(c)}}var o=dB(t,r,e,0,null,!1,!1,"",uO);return e._reactRootContainer=o,e[Ko]=o.current,Ep(e.nodeType===8?e.parentNode:e),Wc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var c=Hy(l);s.call(c)}}var l=hN(e,0,!1,null,null,!1,!1,"",uO);return e._reactRootContainer=l,e[Ko]=l.current,Ep(e.nodeType===8?e.parentNode:e),Wc(function(){nb(t,l,n,r)}),l}function ib(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Hy(o);s.call(l)}}nb(t,o,e,a)}else o=MY(n,t,e,a,r);return Hy(o)}UF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mh(t.pendingLanes);n!==0&&(Dk(t,n|1),qr(t,vn()),!(xt&6)&&(Yd=vn()+500,Ol()))}break;case 13:Wc(function(){var r=Xo(e,1);if(r!==null){var a=Dr();_i(r,e,1,a)}}),pN(e,1)}};Mk=function(e){if(e.tag===13){var t=Xo(e,134217728);if(t!==null){var n=Dr();_i(t,e,134217728,n)}pN(e,134217728)}};zF=function(e){if(e.tag===13){var t=ul(e),n=Xo(e,t);if(n!==null){var r=Dr();_i(n,e,t,r)}pN(e,t)}};WF=function(){return Pt};VF=function(e,t){var n=Pt;try{return Pt=e,t()}finally{Pt=n}};L_=function(e,t,n){switch(t){case"input":if(O_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Xx(r);if(!a)throw Error(pe(90));wF(r),O_(r,a)}}}break;case"textarea":_F(e,n);break;case"select":t=n.value,t!=null&&dd(e,!!n.multiple,t,!1)}};PF=cN;jF=Wc;var $Y={usingClientEntryPoint:!1,Events:[nv,Yu,Xx,TF,AF,cN]},mh={findFiberByHostInstance:dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FY={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=IF(e),e===null?null:e.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||DY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{Hx=rg.inject(FY),Ji=rg}catch{}}ba.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$Y;ba.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vN(t))throw Error(pe(200));return IY(e,t,null,n)};ba.createRoot=function(e,t){if(!vN(e))throw Error(pe(299));var n=!1,r="",a=fB;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=hN(e,1,!1,null,null,n,!1,r,a),e[Ko]=t.current,Ep(e.nodeType===8?e.parentNode:e),new mN(t)};ba.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=IF(t),e=e===null?null:e.stateNode,e};ba.flushSync=function(e){return Wc(e)};ba.hydrate=function(e,t,n){if(!ab(t))throw Error(pe(200));return ib(null,e,t,!0,n)};ba.hydrateRoot=function(e,t,n){if(!vN(e))throw Error(pe(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=fB;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=dB(t,null,e,1,n??null,a,!1,i,o),e[Ko]=t.current,Ep(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new rb(t)};ba.render=function(e,t,n){if(!ab(t))throw Error(pe(200));return ib(null,e,t,!1,n)};ba.unmountComponentAtNode=function(e){if(!ab(e))throw Error(pe(40));return e._reactRootContainer?(Wc(function(){ib(null,null,e,!1,function(){e._reactRootContainer=null,e[Ko]=null})}),!0):!1};ba.unstable_batchedUpdates=cN;ba.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ab(n))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return ib(e,t,n,!1,r)};ba.version="18.3.1-next-f1338f8080-20240426";function hB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hB)}catch(e){console.error(e)}}hB(),hF.exports=ba;var au=hF.exports;const pB=It(au);var mB,dO=au;mB=dO.createRoot,dO.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ip.apply(this,arguments)}var Qs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qs||(Qs={}));const fO="popstate";function LY(e){e===void 0&&(e={});function t(a,i){let{pathname:o="/",search:s="",hash:l=""}=iu(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),y2("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){let o=a.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=a.location.href,c=l.indexOf("#");s=c===-1?l:l.slice(0,c)}return s+"#"+(typeof i=="string"?i:Gy(i))}function r(a,i){gN(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return UY(t,n,r,e)}function ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BY(){return Math.random().toString(36).substr(2,8)}function hO(e,t){return{usr:e.state,key:e.key,idx:t}}function y2(e,t,n,r){return n===void 0&&(n=null),Ip({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?iu(t):t,{state:n,key:t&&t.key||r||BY()})}function Gy(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function iu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function UY(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=Qs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ip({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){s=Qs.Pop;let g=u(),y=g==null?null:g-c;c=g,l&&l({action:s,location:m.location,delta:y})}function f(g,y){s=Qs.Push;let x=y2(m.location,g,y);n&&n(x,g),c=u()+1;let b=hO(x,c),w=m.createHref(x);try{o.pushState(b,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(w)}i&&l&&l({action:s,location:m.location,delta:1})}function p(g,y){s=Qs.Replace;let x=y2(m.location,g,y);n&&n(x,g),c=u();let b=hO(x,c),w=m.createHref(x);o.replaceState(b,"",w),i&&l&&l({action:s,location:m.location,delta:0})}function v(g){let y=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof g=="string"?g:Gy(g);return x=x.replace(/ $/,"%20"),ln(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return s},get location(){return e(a,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(fO,d),l=g,()=>{a.removeEventListener(fO,d),l=null}},createHref(g){return t(a,g)},createURL:v,encodeLocation(g){let y=v(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(g){return o.go(g)}};return m}var pO;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pO||(pO={}));function zY(e,t,n){return n===void 0&&(n="/"),WY(e,t,n,!1)}function WY(e,t,n,r){let a=typeof t=="string"?iu(t):t,i=Qd(a.pathname||"/",n);if(i==null)return null;let o=vB(e);VY(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=tQ(i);s=ZY(o[l],c,r)}return s}function vB(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ln(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=fl([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(ln(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vB(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:QY(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of gB(i.path))a(i,o,l)}),t}function gB(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=gB(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function VY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:JY(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const HY=/^:[\w-]+$/,GY=3,qY=2,KY=1,XY=10,YY=-2,mO=e=>e==="*";function QY(e,t){let n=e.split("/"),r=n.length;return n.some(mO)&&(r+=YY),t&&(r+=qY),n.filter(a=>!mO(a)).reduce((a,i)=>a+(HY.test(i)?GY:i===""?KY:XY),r)}function JY(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function ZY(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",d=qy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=qy({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:fl([i,d.pathname]),pathnameBase:iQ(fl([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=fl([i,d.pathnameBase]))}return o}function qy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=eQ(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=s[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const v=s[d];return p&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function eQ(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),gN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function tQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function nQ(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?iu(e):e;return{pathname:n?n.startsWith("/")?n:rQ(n,t):t,search:oQ(r),hash:sQ(a)}}function rQ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function O1(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aQ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function yN(e,t){let n=aQ(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xN(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=iu(e):(a=Ip({},e),ln(!a.pathname||!a.pathname.includes("?"),O1("?","pathname","search",a)),ln(!a.pathname||!a.pathname.includes("#"),O1("#","pathname","hash",a)),ln(!a.search||!a.search.includes("#"),O1("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;a.pathname=f.join("/")}s=d>=0?t[d]:"/"}let l=nQ(a,s),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const fl=e=>e.join("/").replace(/\/\/+/g,"/"),iQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yB=["post","put","patch","delete"];new Set(yB);const cQ=["get",...yB];new Set(cQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dp.apply(this,arguments)}const ob=_.createContext(null),xB=_.createContext(null),cs=_.createContext(null),sb=_.createContext(null),us=_.createContext({outlet:null,matches:[],isDataRoute:!1}),bB=_.createContext(null);function uQ(e,t){let{relative:n}=t===void 0?{}:t;Mf()||ln(!1);let{basename:r,navigator:a}=_.useContext(cs),{hash:i,pathname:o,search:s}=lb(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:fl([r,o])),a.createHref({pathname:l,search:s,hash:i})}function Mf(){return _.useContext(sb)!=null}function vo(){return Mf()||ln(!1),_.useContext(sb).location}function wB(e){_.useContext(cs).static||_.useLayoutEffect(e)}function Ha(){let{isDataRoute:e}=_.useContext(us);return e?EQ():dQ()}function dQ(){Mf()||ln(!1);let e=_.useContext(ob),{basename:t,future:n,navigator:r}=_.useContext(cs),{matches:a}=_.useContext(us),{pathname:i}=vo(),o=JSON.stringify(yN(a,n.v7_relativeSplatPath)),s=_.useRef(!1);return wB(()=>{s.current=!0}),_.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let d=xN(c,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:fl([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,o,i,e])}const fQ=_.createContext(null);function hQ(e){let t=_.useContext(us).outlet;return t&&_.createElement(fQ.Provider,{value:e},t)}function lb(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=_.useContext(cs),{matches:a}=_.useContext(us),{pathname:i}=vo(),o=JSON.stringify(yN(a,r.v7_relativeSplatPath));return _.useMemo(()=>xN(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function pQ(e,t){return mQ(e,t)}function mQ(e,t,n,r){Mf()||ln(!1);let{navigator:a}=_.useContext(cs),{matches:i}=_.useContext(us),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=vo(),u;if(t){var d;let g=typeof t=="string"?iu(t):t;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||ln(!1),u=g}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=zY(e,{pathname:p}),m=bQ(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:fl([l,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:fl([l,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return t&&m?_.createElement(sb.Provider,{value:{location:Dp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qs.Pop}},m):m}function vQ(){let e=CQ(),t=lQ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:a},n):null,null)}const gQ=_.createElement(vQ,null);class yQ extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(us.Provider,{value:this.props.routeContext},_.createElement(bB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xQ(e){let{routeContext:t,match:n,children:r}=e,a=_.useContext(ob);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(us.Provider,{value:t},r)}function bQ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,s=(a=n)==null?void 0:a.errors;if(s!=null){let u=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||ln(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,v=!1,m=null,g=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,m=d.route.errorElement||gQ,l&&(c<0&&f===0?(v=!0,g=null):c===f&&(v=!0,g=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=m:v?b=g:d.route.Component?b=_.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,_.createElement(xQ,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?_.createElement(yQ,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var SB=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SB||{}),Ky=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ky||{});function wQ(e){let t=_.useContext(ob);return t||ln(!1),t}function SQ(e){let t=_.useContext(xB);return t||ln(!1),t}function _Q(e){let t=_.useContext(us);return t||ln(!1),t}function _B(e){let t=_Q(),n=t.matches[t.matches.length-1];return n.route.id||ln(!1),n.route.id}function CQ(){var e;let t=_.useContext(bB),n=SQ(Ky.UseRouteError),r=_B(Ky.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function EQ(){let{router:e}=wQ(SB.UseNavigateStable),t=_B(Ky.UseNavigateStable),n=_.useRef(!1);return wB(()=>{n.current=!0}),_.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Dp({fromRouteId:t},i)))},[e,t])}function kQ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function jo(e){let{to:t,replace:n,state:r,relative:a}=e;Mf()||ln(!1);let{future:i,static:o}=_.useContext(cs),{matches:s}=_.useContext(us),{pathname:l}=vo(),c=Ha(),u=xN(t,yN(s,i.v7_relativeSplatPath),l,a==="path"),d=JSON.stringify(u);return _.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:a}),[c,d,a,n,r]),null}function cb(e){return hQ(e.context)}function Tt(e){ln(!1)}function NQ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Qs.Pop,navigator:i,static:o=!1,future:s}=e;Mf()&&ln(!1);let l=t.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:Dp({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=iu(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:v="default"}=r,m=_.useMemo(()=>{let g=Qd(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:p,key:v},navigationType:a}},[l,u,d,f,p,v,a]);return m==null?null:_.createElement(cs.Provider,{value:c},_.createElement(sb.Provider,{children:n,value:m}))}function TQ(e){let{children:t,location:n}=e;return pQ(x2(t),n)}new Promise(()=>{});function x2(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(r,a)=>{if(!_.isValidElement(r))return;let i=[...t,a];if(r.type===_.Fragment){n.push.apply(n,x2(r.props.children,i));return}r.type!==Tt&&ln(!1),!r.props.index||!r.props.children||ln(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=x2(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(this,arguments)}function CB(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function AQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PQ(e,t){return e.button===0&&(!t||t==="_self")&&!AQ(e)}function b2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function jQ(e,t){let n=b2(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const OQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RQ=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],IQ="6";try{window.__reactRouterVersion=IQ}catch{}const DQ=_.createContext({isTransitioning:!1}),MQ="startTransition",vO=kk[MQ];function $Q(e){let{basename:t,children:n,future:r,window:a}=e,i=_.useRef();i.current==null&&(i.current=LY({window:a,v5Compat:!0}));let o=i.current,[s,l]=_.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=_.useCallback(d=>{c&&vO?vO(()=>l(d)):l(d)},[l,c]);return _.useLayoutEffect(()=>o.listen(u),[o,u]),_.useEffect(()=>kQ(r),[r]),_.createElement(NQ,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}const FQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EB=_.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,f=CB(t,OQ),{basename:p}=_.useContext(cs),v,m=!1;if(typeof c=="string"&&LQ.test(c)&&(v=c,FQ))try{let b=new URL(window.location.href),w=c.startsWith("//")?new URL(b.protocol+c):new URL(c),S=Qd(w.pathname,p);w.origin===b.origin&&S!=null?c=S+w.search+w.hash:m=!0}catch{}let g=uQ(c,{relative:a}),y=UQ(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:a,viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||y(b)}return _.createElement("a",Xy({},f,{href:v||g,onClick:m||i?r:x,ref:n,target:l}))}),Js=_.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:s,to:l,viewTransition:c,children:u}=t,d=CB(t,RQ),f=lb(l,{relative:d.relative}),p=vo(),v=_.useContext(xB),{navigator:m,basename:g}=_.useContext(cs),y=v!=null&&WQ(f)&&c===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=p.pathname,w=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(b=b.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&g&&(w=Qd(w,g)||w);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=b===x||!o&&b.startsWith(x)&&b.charAt(S)==="/",E=w!=null&&(w===x||!o&&w.startsWith(x)&&w.charAt(x.length)==="/"),k={isActive:C,isPending:E,isTransitioning:y},N=C?r:void 0,T;typeof i=="function"?T=i(k):T=[i,C?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(k):s;return _.createElement(EB,Xy({},d,{"aria-current":N,className:T,ref:n,style:A,to:l,viewTransition:c}),typeof u=="function"?u(k):u)});var w2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(w2||(w2={}));var gO;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gO||(gO={}));function BQ(e){let t=_.useContext(ob);return t||ln(!1),t}function UQ(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:s}=t===void 0?{}:t,l=Ha(),c=vo(),u=lb(e,{relative:o});return _.useCallback(d=>{if(PQ(d,n)){d.preventDefault();let f=r!==void 0?r:Gy(c)===Gy(u);l(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:s})}},[c,l,u,r,a,n,e,i,o,s])}function zQ(e){let t=_.useRef(b2(e)),n=_.useRef(!1),r=vo(),a=_.useMemo(()=>jQ(r.search,n.current?null:t.current),[r.search]),i=Ha(),o=_.useCallback((s,l)=>{const c=b2(typeof s=="function"?s(a):s);n.current=!0,i("?"+c,l)},[i,a]);return[a,o]}function WQ(e,t){t===void 0&&(t={});let n=_.useContext(DQ);n==null&&ln(!1);let{basename:r}=BQ(w2.useViewTransitionState),a=lb(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Qd(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Qd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qy(a.pathname,o)!=null||qy(a.pathname,i)!=null}var ub=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},VQ={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ws,wk,q3,HQ=(q3=class{constructor(){mt(this,Ws,VQ);mt(this,wk,!1)}setTimeoutProvider(e){Qe(this,Ws,e)}setTimeout(e,t){return ue(this,Ws).setTimeout(e,t)}clearTimeout(e){ue(this,Ws).clearTimeout(e)}setInterval(e,t){return ue(this,Ws).setInterval(e,t)}clearInterval(e){ue(this,Ws).clearInterval(e)}},Ws=new WeakMap,wk=new WeakMap,q3),Yy=new HQ;function GQ(e){setTimeout(e,0)}var db=typeof window>"u"||"Deno"in globalThis;function Pr(){}function qQ(e,t){return typeof e=="function"?e(t):e}function KQ(e){return typeof e=="number"&&e>=0&&e!==1/0}function XQ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function S2(e,t){return typeof e=="function"?e(t):e}function YQ(e,t){return typeof e=="function"?e(t):e}function yO(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:s}=e;if(o){if(r){if(t.queryHash!==bN(o,t.options))return!1}else if(!$p(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||a&&a!==t.state.fetchStatus||i&&!i(t))}function xO(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Mp(t.options.mutationKey)!==Mp(i))return!1}else if(!$p(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function bN(e,t){return((t==null?void 0:t.queryKeyHashFn)||Mp)(e)}function Mp(e){return JSON.stringify(e,(t,n)=>_2(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function $p(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>$p(e[n],t[n])):!1}var QQ=Object.prototype.hasOwnProperty;function kB(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=bO(e)&&bO(t);if(!r&&!(_2(e)&&_2(t)))return t;const i=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),s=o.length,l=r?new Array(s):{};let c=0;for(let u=0;u<s;u++){const d=r?u:o[u],f=e[d],p=t[d];if(f===p){l[d]=f,(r?u<i:QQ.call(e,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[d]=p;continue}const v=kB(f,p,n+1);l[d]=v,v===f&&c++}return i===s&&c===i?e:l}function bO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _2(e){if(!wO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!wO(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wO(e){return Object.prototype.toString.call(e)==="[object Object]"}function JQ(e){return new Promise(t=>{Yy.setTimeout(t,e)})}function ZQ(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?kB(e,t):t}function eJ(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function tJ(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var wN=Symbol();function NB(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===wN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function nJ(e,t,n){let r=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),r||(r=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var kc,Vs,Md,K3,rJ=(K3=class extends ub{constructor(){super();mt(this,kc);mt(this,Vs);mt(this,Md);Qe(this,Md,t=>{if(!db&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ue(this,Vs)||this.setEventListener(ue(this,Md))}onUnsubscribe(){var t;this.hasListeners()||((t=ue(this,Vs))==null||t.call(this),Qe(this,Vs,void 0))}setEventListener(t){var n;Qe(this,Md,t),(n=ue(this,Vs))==null||n.call(this),Qe(this,Vs,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){ue(this,kc)!==t&&(Qe(this,kc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof ue(this,kc)=="boolean"?ue(this,kc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},kc=new WeakMap,Vs=new WeakMap,Md=new WeakMap,K3),TB=new rJ;function aJ(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function iJ(e){var n;let t;if((n=e.then(r=>(t=r,r),Pr))==null||n.catch(Pr),t!==void 0)return{data:t}}function AB(e){return e}function oJ(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function sJ(e,t,n){const r=()=>{var i;const a=(i=e.promise)==null?void 0:i.then(t).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return a==null||a.catch(Pr),a};return{dehydratedAt:Date.now(),state:{...e.state,...e.state.data!==void 0&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,...e.state.status==="pending"&&{promise:r()},...e.meta&&{meta:e.meta}}}function lJ(e){return e.state.isPaused}function cJ(e){return e.state.status==="success"}function uJ(e){return!0}function dJ(e,t={}){var l,c,u,d;const n=t.shouldDehydrateMutation??((l=e.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??lJ,r=e.getMutationCache().getAll().flatMap(f=>n(f)?[oJ(f)]:[]),a=t.shouldDehydrateQuery??((c=e.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??cJ,i=t.shouldRedactErrors??((u=e.getDefaultOptions().dehydrate)==null?void 0:u.shouldRedactErrors)??uJ,o=t.serializeData??((d=e.getDefaultOptions().dehydrate)==null?void 0:d.serializeData)??AB,s=e.getQueryCache().getAll().flatMap(f=>a(f)?[sJ(f,o,i)]:[]);return{mutations:r,queries:s}}function fJ(e,t,n){var l,c;if(typeof t!="object"||t===null)return;const r=e.getMutationCache(),a=e.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=e.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??AB,o=t.mutations||[],s=t.queries||[];o.forEach(({state:u,...d})=>{var f,p;r.build(e,{...(f=e.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(p=n==null?void 0:n.defaultOptions)==null?void 0:p.mutations,...d},u)}),s.forEach(({queryKey:u,state:d,queryHash:f,meta:p,promise:v,dehydratedAt:m})=>{var C,E;const g=v?iJ(v):void 0,y=d.data===void 0?g==null?void 0:g.data:d.data,x=y===void 0?y:i(y);let b=a.get(f);const w=(b==null?void 0:b.state.status)==="pending",S=(b==null?void 0:b.state.fetchStatus)==="fetching";if(b){const k=g&&m!==void 0&&m>b.state.dataUpdatedAt;if(d.dataUpdatedAt>b.state.dataUpdatedAt||k){const{fetchStatus:N,...T}=d;b.setState({...T,data:x})}}else b=a.build(e,{...(C=e.getDefaultOptions().hydrate)==null?void 0:C.queries,...(E=n==null?void 0:n.defaultOptions)==null?void 0:E.queries,queryKey:u,queryHash:f,meta:p},{...d,data:x,fetchStatus:"idle",status:x!==void 0?"success":d.status});v&&!w&&!S&&(m===void 0||m>b.state.dataUpdatedAt)&&b.fetch(void 0,{initialPromise:Promise.resolve(v).then(i)}).catch(Pr)})}var hJ=GQ;function pJ(){let e=[],t=0,n=s=>{s()},r=s=>{s()},a=hJ;const i=s=>{t?e.push(s):a(()=>{n(s)})},o=()=>{const s=e;e=[],s.length&&a(()=>{r(()=>{s.forEach(l=>{n(l)})})})};return{batch:s=>{let l;t++;try{l=s()}finally{t--,t||o()}return l},batchCalls:s=>(...l)=>{i(()=>{s(...l)})},schedule:i,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s},setScheduler:s=>{a=s}}}var jr=pJ(),$d,Hs,Fd,X3,mJ=(X3=class extends ub{constructor(){super();mt(this,$d,!0);mt(this,Hs);mt(this,Fd);Qe(this,Fd,t=>{if(!db&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ue(this,Hs)||this.setEventListener(ue(this,Fd))}onUnsubscribe(){var t;this.hasListeners()||((t=ue(this,Hs))==null||t.call(this),Qe(this,Hs,void 0))}setEventListener(t){var n;Qe(this,Fd,t),(n=ue(this,Hs))==null||n.call(this),Qe(this,Hs,t(this.setOnline.bind(this)))}setOnline(t){ue(this,$d)!==t&&(Qe(this,$d,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return ue(this,$d)}},$d=new WeakMap,Hs=new WeakMap,Fd=new WeakMap,X3),Qy=new mJ;function vJ(e){return Math.min(1e3*2**e,3e4)}function PB(e){return(e??"online")==="online"?Qy.isOnline():!0}var C2=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function jB(e){let t=!1,n=0,r;const a=aJ(),i=()=>a.status!=="pending",o=m=>{var g;if(!i()){const y=new C2(m);f(y),(g=e.onCancel)==null||g.call(e,y)}},s=()=>{t=!0},l=()=>{t=!1},c=()=>TB.isFocused()&&(e.networkMode==="always"||Qy.isOnline())&&e.canRun(),u=()=>PB(e.networkMode)&&e.canRun(),d=m=>{i()||(r==null||r(),a.resolve(m))},f=m=>{i()||(r==null||r(),a.reject(m))},p=()=>new Promise(m=>{var g;r=y=>{(i()||c())&&m(y)},(g=e.onPause)==null||g.call(e)}).then(()=>{var m;r=void 0,i()||(m=e.onContinue)==null||m.call(e)}),v=()=>{if(i())return;let m;const g=n===0?e.initialPromise:void 0;try{m=g??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var C;if(i())return;const x=e.retry??(db?0:3),b=e.retryDelay??vJ,w=typeof b=="function"?b(n,y):b,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,y);if(t||!S){f(y);return}n++,(C=e.onFail)==null||C.call(e,n,y),JQ(w).then(()=>c()?void 0:p()).then(()=>{t?f(y):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r==null||r(),a),cancelRetry:s,continueRetry:l,canStart:u,start:()=>(u()?v():p().then(v),a)}}var Nc,Y3,OB=(Y3=class{constructor(){mt(this,Nc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KQ(this.gcTime)&&Qe(this,Nc,Yy.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(db?1/0:5*60*1e3))}clearGcTimeout(){ue(this,Nc)&&(Yy.clearTimeout(ue(this,Nc)),Qe(this,Nc,void 0))}},Nc=new WeakMap,Y3),Tc,Ld,Na,Ac,Fn,Ym,Pc,si,ko,Q3,gJ=(Q3=class extends OB{constructor(t){super();mt(this,si);mt(this,Tc);mt(this,Ld);mt(this,Na);mt(this,Ac);mt(this,Fn);mt(this,Ym);mt(this,Pc);Qe(this,Pc,!1),Qe(this,Ym,t.defaultOptions),this.setOptions(t.options),this.observers=[],Qe(this,Ac,t.client),Qe(this,Na,ue(this,Ac).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Qe(this,Tc,_O(this.options)),this.state=t.state??ue(this,Tc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ue(this,Fn))==null?void 0:t.promise}setOptions(t){if(this.options={...ue(this,Ym),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=_O(this.options);n.data!==void 0&&(this.setState(SO(n.data,n.dataUpdatedAt)),Qe(this,Tc,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ue(this,Na).remove(this)}setData(t,n){const r=ZQ(this.state.data,t,this.options);return dr(this,si,ko).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){dr(this,si,ko).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=ue(this,Fn))==null?void 0:r.promise;return(a=ue(this,Fn))==null||a.cancel(t),n?n.then(Pr).catch(Pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ue(this,Tc))}isActive(){return this.observers.some(t=>YQ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>S2(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!XQ(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=ue(this,Fn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=ue(this,Fn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ue(this,Na).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(ue(this,Fn)&&(ue(this,Pc)?ue(this,Fn).cancel({revert:!0}):ue(this,Fn).cancelRetry()),this.scheduleGc()),ue(this,Na).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||dr(this,si,ko).call(this,{type:"invalidate"})}async fetch(t,n){var l,c,u,d,f,p,v,m,g,y,x,b;if(this.state.fetchStatus!=="idle"&&((l=ue(this,Fn))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ue(this,Fn))return ue(this,Fn).continueRetry(),ue(this,Fn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const w=this.observers.find(S=>S.options.queryFn);w&&this.setOptions(w.options)}const r=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(Qe(this,Pc,!0),r.signal)})},i=()=>{const w=NB(this.options,n),C=(()=>{const E={client:ue(this,Ac),queryKey:this.queryKey,meta:this.meta};return a(E),E})();return Qe(this,Pc,!1),this.options.persister?this.options.persister(w,C,this):w(C)},s=(()=>{const w={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ue(this,Ac),state:this.state,fetchFn:i};return a(w),w})();(c=this.options.behavior)==null||c.onFetch(s,this),Qe(this,Ld,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&dr(this,si,ko).call(this,{type:"fetch",meta:(d=s.fetchOptions)==null?void 0:d.meta}),Qe(this,Fn,jB({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,onCancel:w=>{w instanceof C2&&w.revert&&this.setState({...ue(this,Ld),fetchStatus:"idle"}),r.abort()},onFail:(w,S)=>{dr(this,si,ko).call(this,{type:"failed",failureCount:w,error:S})},onPause:()=>{dr(this,si,ko).call(this,{type:"pause"})},onContinue:()=>{dr(this,si,ko).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}));try{const w=await ue(this,Fn).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(p=(f=ue(this,Na).config).onSuccess)==null||p.call(f,w,this),(m=(v=ue(this,Na).config).onSettled)==null||m.call(v,w,this.state.error,this),w}catch(w){if(w instanceof C2){if(w.silent)return ue(this,Fn).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw dr(this,si,ko).call(this,{type:"error",error:w}),(y=(g=ue(this,Na).config).onError)==null||y.call(g,w,this),(b=(x=ue(this,Na).config).onSettled)==null||b.call(x,this.state.data,w,this),w}finally{this.scheduleGc()}}},Tc=new WeakMap,Ld=new WeakMap,Na=new WeakMap,Ac=new WeakMap,Fn=new WeakMap,Ym=new WeakMap,Pc=new WeakMap,si=new WeakSet,ko=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...yJ(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,...SO(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Qe(this,Ld,t.manual?a:void 0),a;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),jr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ue(this,Na).notify({query:this,type:"updated",action:t})})},Q3);function yJ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PB(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function SO(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _O(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function CO(e){return{onFetch:(t,n)=>{var u,d,f,p,v;const r=t.options,a=(f=(d=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let s={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const g=b=>{nJ(b,()=>t.signal,()=>m=!0)},y=NB(t.options,t.fetchOptions),x=async(b,w,S)=>{if(m)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:w,direction:S?"backward":"forward",meta:t.options.meta};return g(A),A})(),k=await y(E),{maxPages:N}=t.options,T=S?tJ:eJ;return{pages:T(b.pages,k,N),pageParams:T(b.pageParams,w,N)}};if(a&&i.length){const b=a==="backward",w=b?xJ:EO,S={pages:i,pageParams:o},C=w(r,S);s=await x(S,C,b)}else{const b=e??i.length;do{const w=l===0?o[0]??r.initialPageParam:EO(r,s);if(l>0&&w==null)break;s=await x(s,w),l++}while(l<b)}return s};t.options.persister?t.fetchFn=()=>{var m,g;return(g=(m=t.options).persister)==null?void 0:g.call(m,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function EO(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function xJ(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Qm,Li,Tr,jc,Bi,js,J3,bJ=(J3=class extends OB{constructor(t){super();mt(this,Bi);mt(this,Qm);mt(this,Li);mt(this,Tr);mt(this,jc);Qe(this,Qm,t.client),this.mutationId=t.mutationId,Qe(this,Tr,t.mutationCache),Qe(this,Li,[]),this.state=t.state||wJ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ue(this,Li).includes(t)||(ue(this,Li).push(t),this.clearGcTimeout(),ue(this,Tr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Qe(this,Li,ue(this,Li).filter(n=>n!==t)),this.scheduleGc(),ue(this,Tr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ue(this,Li).length||(this.state.status==="pending"?this.scheduleGc():ue(this,Tr).remove(this))}continue(){var t;return((t=ue(this,jc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k,N;const n=()=>{dr(this,Bi,js).call(this,{type:"continue"})},r={client:ue(this,Qm),meta:this.options.meta,mutationKey:this.options.mutationKey};Qe(this,jc,jB({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(T,A)=>{dr(this,Bi,js).call(this,{type:"failed",failureCount:T,error:A})},onPause:()=>{dr(this,Bi,js).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ue(this,Tr).canRun(this)}));const a=this.state.status==="pending",i=!ue(this,jc).canStart();try{if(a)n();else{dr(this,Bi,js).call(this,{type:"pending",variables:t,isPaused:i}),await((s=(o=ue(this,Tr).config).onMutate)==null?void 0:s.call(o,t,this,r));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t,r));A!==this.state.context&&dr(this,Bi,js).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const T=await ue(this,jc).start();return await((d=(u=ue(this,Tr).config).onSuccess)==null?void 0:d.call(u,T,t,this.state.context,this,r)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,t,this.state.context,r)),await((m=(v=ue(this,Tr).config).onSettled)==null?void 0:m.call(v,T,null,this.state.variables,this.state.context,this,r)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,T,null,t,this.state.context,r)),dr(this,Bi,js).call(this,{type:"success",data:T}),T}catch(T){try{await((b=(x=ue(this,Tr).config).onError)==null?void 0:b.call(x,T,t,this.state.context,this,r))}catch(A){Promise.reject(A)}try{await((S=(w=this.options).onError)==null?void 0:S.call(w,T,t,this.state.context,r))}catch(A){Promise.reject(A)}try{await((E=(C=ue(this,Tr).config).onSettled)==null?void 0:E.call(C,void 0,T,this.state.variables,this.state.context,this,r))}catch(A){Promise.reject(A)}try{await((N=(k=this.options).onSettled)==null?void 0:N.call(k,void 0,T,t,this.state.context,r))}catch(A){Promise.reject(A)}throw dr(this,Bi,js).call(this,{type:"error",error:T}),T}finally{ue(this,Tr).runNext(this)}}},Qm=new WeakMap,Li=new WeakMap,Tr=new WeakMap,jc=new WeakMap,Bi=new WeakSet,js=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),jr.batch(()=>{ue(this,Li).forEach(r=>{r.onMutationUpdate(t)}),ue(this,Tr).notify({mutation:this,type:"updated",action:t})})},J3);function wJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Oo,li,Jm,Z3,SJ=(Z3=class extends ub{constructor(t={}){super();mt(this,Oo);mt(this,li);mt(this,Jm);this.config=t,Qe(this,Oo,new Set),Qe(this,li,new Map),Qe(this,Jm,0)}build(t,n,r){const a=new bJ({client:t,mutationCache:this,mutationId:++Lv(this,Jm)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){ue(this,Oo).add(t);const n=ag(t);if(typeof n=="string"){const r=ue(this,li).get(n);r?r.push(t):ue(this,li).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ue(this,Oo).delete(t)){const n=ag(t);if(typeof n=="string"){const r=ue(this,li).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&ue(this,li).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=ag(t);if(typeof n=="string"){const r=ue(this,li).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=ag(t);if(typeof n=="string"){const a=(r=ue(this,li).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jr.batch(()=>{ue(this,Oo).forEach(t=>{this.notify({type:"removed",mutation:t})}),ue(this,Oo).clear(),ue(this,li).clear()})}getAll(){return Array.from(ue(this,Oo))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>xO(n,r))}findAll(t={}){return this.getAll().filter(n=>xO(t,n))}notify(t){jr.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return jr.batch(()=>Promise.all(t.map(n=>n.continue().catch(Pr))))}},Oo=new WeakMap,li=new WeakMap,Jm=new WeakMap,Z3);function ag(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ui,eF,_J=(eF=class extends ub{constructor(t={}){super();mt(this,Ui);this.config=t,Qe(this,Ui,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??bN(a,n);let o=this.get(i);return o||(o=new gJ({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){ue(this,Ui).has(t.queryHash)||(ue(this,Ui).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=ue(this,Ui).get(t.queryHash);n&&(t.destroy(),n===t&&ue(this,Ui).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){jr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ue(this,Ui).get(t)}getAll(){return[...ue(this,Ui).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>yO(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>yO(t,r)):n}notify(t){jr.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){jr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){jr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ui=new WeakMap,eF),fn,Gs,qs,Bd,Ud,Ks,zd,Wd,tF,RB=(tF=class{constructor(e={}){mt(this,fn);mt(this,Gs);mt(this,qs);mt(this,Bd);mt(this,Ud);mt(this,Ks);mt(this,zd);mt(this,Wd);Qe(this,fn,e.queryCache||new _J),Qe(this,Gs,e.mutationCache||new SJ),Qe(this,qs,e.defaultOptions||{}),Qe(this,Bd,new Map),Qe(this,Ud,new Map),Qe(this,Ks,0)}mount(){Lv(this,Ks)._++,ue(this,Ks)===1&&(Qe(this,zd,TB.subscribe(async e=>{e&&(await this.resumePausedMutations(),ue(this,fn).onFocus())})),Qe(this,Wd,Qy.subscribe(async e=>{e&&(await this.resumePausedMutations(),ue(this,fn).onOnline())})))}unmount(){var e,t;Lv(this,Ks)._--,ue(this,Ks)===0&&((e=ue(this,zd))==null||e.call(this),Qe(this,zd,void 0),(t=ue(this,Wd))==null||t.call(this),Qe(this,Wd,void 0))}isFetching(e){return ue(this,fn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ue(this,Gs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ue(this,fn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=ue(this,fn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(S2(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return ue(this,fn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=ue(this,fn).get(r.queryHash),i=a==null?void 0:a.state.data,o=qQ(t,i);if(o!==void 0)return ue(this,fn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return jr.batch(()=>ue(this,fn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ue(this,fn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=ue(this,fn);jr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=ue(this,fn);return jr.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=jr.batch(()=>ue(this,fn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Pr).catch(Pr)}invalidateQueries(e,t={}){return jr.batch(()=>(ue(this,fn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=jr.batch(()=>ue(this,fn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=ue(this,fn).build(this,t);return n.isStaleByTime(S2(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Pr).catch(Pr)}fetchInfiniteQuery(e){return e.behavior=CO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Pr).catch(Pr)}ensureInfiniteQueryData(e){return e.behavior=CO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Qy.isOnline()?ue(this,Gs).resumePausedMutations():Promise.resolve()}getQueryCache(){return ue(this,fn)}getMutationCache(){return ue(this,Gs)}getDefaultOptions(){return ue(this,qs)}setDefaultOptions(e){Qe(this,qs,e)}setQueryDefaults(e,t){ue(this,Bd).set(Mp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ue(this,Bd).values()],n={};return t.forEach(r=>{$p(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){ue(this,Ud).set(Mp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ue(this,Ud).values()],n={};return t.forEach(r=>{$p(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ue(this,qs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===wN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ue(this,qs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ue(this,fn).clear(),ue(this,Gs).clear()}},fn=new WeakMap,Gs=new WeakMap,qs=new WeakMap,Bd=new WeakMap,Ud=new WeakMap,Ks=new WeakMap,zd=new WeakMap,Wd=new WeakMap,tF),CJ=_.createContext(void 0),IB=({client:e,children:t})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),h.jsx(CJ.Provider,{value:e,children:t})),EJ=_.createContext(!1),kJ=EJ.Provider;function ye(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function kO(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qo(...e){return t=>{let n=!1;const r=e.map(a=>{const i=kO(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():kO(e[a],null)}}}}function ft(...e){return _.useCallback(Qo(...e),e)}function NJ(e,t){const n=_.createContext(t),r=i=>{const{children:o,...s}=i,l=_.useMemo(()=>s,Object.values(s));return h.jsx(n.Provider,{value:l,children:o})};r.displayName=e+"Provider";function a(i){const o=_.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Sa(e,t=[]){let n=[];function r(i,o){const s=_.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...v}=d,m=((y=f==null?void 0:f[e])==null?void 0:y[l])||s,g=_.useMemo(()=>v,Object.values(v));return h.jsx(m.Provider,{value:g,children:p})};c.displayName=i+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[e])==null?void 0:m[l])||s,v=_.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const a=()=>{const i=n.map(o=>_.createContext(o));return function(s){const l=(s==null?void 0:s[e])||i;return _.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return a.scopeName=e,[r,TJ(a,...t)]}function TJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...s,...d}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function wl(e){const t=PJ(e),n=_.forwardRef((r,a)=>{const{children:i,...o}=r,s=_.Children.toArray(i),l=s.find(OJ);if(l){const c=l.props.children,u=s.map(d=>d===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:d);return h.jsx(t,{...o,ref:a,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return h.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var AJ=wl("Slot");function PJ(e){const t=_.forwardRef((n,r)=>{const{children:a,...i}=n;if(_.isValidElement(a)){const o=IJ(a),s=RJ(i,a.props);return a.type!==_.Fragment&&(s.ref=r?Qo(r,o):o),_.cloneElement(a,s)}return _.Children.count(a)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var DB=Symbol("radix.slottable");function jJ(e){const t=({children:n})=>h.jsx(h.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=DB,t}function OJ(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===DB}function RJ(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{const l=i(...s);return a(...s),l}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function IJ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var DJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fe=DJ.reduce((e,t)=>{const n=wl(`Primitive.${t}`),r=_.forwardRef((a,i)=>{const{asChild:o,...s}=a,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function SN(e,t){e&&au.flushSync(()=>e.dispatchEvent(t))}function Xr(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function MJ(e,t=globalThis==null?void 0:globalThis.document){const n=Xr(e);_.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var $J="DismissableLayer",E2="dismissableLayer.update",FJ="dismissableLayer.pointerDownOutside",LJ="dismissableLayer.focusOutside",NO,MB=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ou=_.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...l}=e,c=_.useContext(MB),[u,d]=_.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),v=ft(t,E=>d(E)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),x=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=x>=y,S=UJ(E=>{const k=E.target,N=[...c.branches].some(T=>T.contains(k));!w||N||(a==null||a(E),o==null||o(E),E.defaultPrevented||s==null||s())},f),C=zJ(E=>{const k=E.target;[...c.branches].some(T=>T.contains(k))||(i==null||i(E),o==null||o(E),E.defaultPrevented||s==null||s())},f);return MJ(E=>{x===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},f),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(NO=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),TO(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=NO)}},[u,f,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),TO())},[u,c]),_.useEffect(()=>{const E=()=>p({});return document.addEventListener(E2,E),()=>document.removeEventListener(E2,E)},[]),h.jsx(Fe.div,{...l,ref:v,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:ye(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ye(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ye(e.onPointerDownCapture,S.onPointerDownCapture)})});ou.displayName=$J;var BJ="DismissableLayerBranch",$B=_.forwardRef((e,t)=>{const n=_.useContext(MB),r=_.useRef(null),a=ft(t,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),h.jsx(Fe.div,{...e,ref:a})});$B.displayName=BJ;function UJ(e,t=globalThis==null?void 0:globalThis.document){const n=Xr(e),r=_.useRef(!1),a=_.useRef(()=>{});return _.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let l=function(){FB(FJ,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zJ(e,t=globalThis==null?void 0:globalThis.document){const n=Xr(e),r=_.useRef(!1);return _.useEffect(()=>{const a=i=>{i.target&&!r.current&&FB(LJ,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TO(){const e=new CustomEvent(E2);document.dispatchEvent(e)}function FB(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?SN(a,i):a.dispatchEvent(i)}var WJ=ou,VJ=$B,cr=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},HJ=kk[" useId ".trim().toString()]||(()=>{}),GJ=0;function sr(e){const[t,n]=_.useState(HJ());return cr(()=>{n(r=>r??String(GJ++))},[e]),t?`radix-${t}`:""}const qJ=["top","right","bottom","left"],Sl=Math.min,oa=Math.max,Jy=Math.round,ig=Math.floor,eo=e=>({x:e,y:e}),KJ={left:"right",right:"left",bottom:"top",top:"bottom"},XJ={start:"end",end:"start"};function k2(e,t,n){return oa(e,Sl(t,n))}function Jo(e,t){return typeof e=="function"?e(t):e}function Zo(e){return e.split("-")[0]}function $f(e){return e.split("-")[1]}function _N(e){return e==="x"?"y":"x"}function CN(e){return e==="y"?"height":"width"}const YJ=new Set(["top","bottom"]);function qi(e){return YJ.has(Zo(e))?"y":"x"}function EN(e){return _N(qi(e))}function QJ(e,t,n){n===void 0&&(n=!1);const r=$f(e),a=EN(e),i=CN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Zy(o)),[o,Zy(o)]}function JJ(e){const t=Zy(e);return[N2(e),t,N2(t)]}function N2(e){return e.replace(/start|end/g,t=>XJ[t])}const AO=["left","right"],PO=["right","left"],ZJ=["top","bottom"],eZ=["bottom","top"];function tZ(e,t,n){switch(e){case"top":case"bottom":return n?t?PO:AO:t?AO:PO;case"left":case"right":return t?ZJ:eZ;default:return[]}}function nZ(e,t,n,r){const a=$f(e);let i=tZ(Zo(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(N2)))),i}function Zy(e){return e.replace(/left|right|bottom|top/g,t=>KJ[t])}function rZ(e){return{top:0,right:0,bottom:0,left:0,...e}}function LB(e){return typeof e!="number"?rZ(e):{top:e,right:e,bottom:e,left:e}}function e0(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function jO(e,t,n){let{reference:r,floating:a}=e;const i=qi(t),o=EN(t),s=CN(o),l=Zo(t),c=i==="y",u=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,f=r[s]/2-a[s]/2;let p;switch(l){case"top":p={x:u,y:r.y-a.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-a.width,y:d};break;default:p={x:r.x,y:r.y}}switch($f(t)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const aZ=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:d}=jO(c,r,l),f=r,p={},v=0;for(let m=0;m<s.length;m++){const{name:g,fn:y}=s[m],{x,y:b,data:w,reset:S}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:a,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=x??u,d=b??d,p={...p,[g]:{...p[g],...w}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:u,y:d}=jO(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:a,middlewareData:p}};async function Fp(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Jo(t,e),v=LB(p),g=s[f?d==="floating"?"reference":"floating":d],y=e0(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),w=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},S=e0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:b,strategy:l}):x);return{top:(y.top-S.top+v.top)/w.y,bottom:(S.bottom-y.bottom+v.bottom)/w.y,left:(y.left-S.left+v.left)/w.x,right:(S.right-y.right+v.right)/w.x}}const iZ=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Jo(e,t)||{};if(c==null)return{};const d=LB(u),f={x:n,y:r},p=EN(a),v=CN(p),m=await o.getDimensions(c),g=p==="y",y=g?"top":"left",x=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=i.reference[v]+i.reference[p]-f[p]-i.floating[v],S=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=s.floating[b]||i.floating[v]);const k=w/2-S/2,N=E/2-m[v]/2-1,T=Sl(d[y],N),A=Sl(d[x],N),P=T,I=E-m[v]-A,R=E/2-m[v]/2+k,D=k2(P,R,I),M=!l.arrow&&$f(a)!=null&&R!==D&&i.reference[v]/2-(R<P?T:A)-m[v]/2<0,$=M?R<P?R-P:R-I:0;return{[p]:f[p]+$,data:{[p]:D,centerOffset:R-D-$,...M&&{alignmentOffset:$}},reset:M}}}),oZ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...g}=Jo(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Zo(a),x=qi(s),b=Zo(s)===s,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(b||!m?[Zy(s)]:JJ(s)),C=v!=="none";!f&&C&&S.push(...nZ(s,m,v,w));const E=[s,...S],k=await Fp(t,g),N=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&N.push(k[y]),d){const R=QJ(a,o,w);N.push(k[R[0]],k[R[1]])}if(T=[...T,{placement:a,overflows:N}],!N.every(R=>R<=0)){var A,P;const R=(((A=i.flip)==null?void 0:A.index)||0)+1,D=E[R];if(D&&(!(d==="alignment"?x!==qi(D):!1)||T.every(j=>j.overflows[0]>0&&qi(j.placement)===x)))return{data:{index:R,overflows:T},reset:{placement:D}};let M=(P=T.filter($=>$.overflows[0]<=0).sort(($,j)=>$.overflows[1]-j.overflows[1])[0])==null?void 0:P.placement;if(!M)switch(p){case"bestFit":{var I;const $=(I=T.filter(j=>{if(C){const O=qi(j.placement);return O===x||O==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(O=>O>0).reduce((O,B)=>O+B,0)]).sort((j,O)=>j[1]-O[1])[0])==null?void 0:I[0];$&&(M=$);break}case"initialPlacement":M=s;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function OO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function RO(e){return qJ.some(t=>e[t]>=0)}const sZ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Jo(e,t);switch(r){case"referenceHidden":{const i=await Fp(t,{...a,elementContext:"reference"}),o=OO(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RO(o)}}}case"escaped":{const i=await Fp(t,{...a,altBoundary:!0}),o=OO(i,n.floating);return{data:{escapedOffsets:o,escaped:RO(o)}}}default:return{}}}}},BB=new Set(["left","top"]);async function lZ(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Zo(n),s=$f(n),l=qi(n)==="y",c=BB.has(o)?-1:1,u=i&&l?-1:1,d=Jo(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof v=="number"&&(p=s==="end"?v*-1:v),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const cZ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,l=await lZ(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:o}}}}},uZ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:g=>{let{x:y,y:x}=g;return{x:y,y:x}}},...l}=Jo(e,t),c={x:n,y:r},u=await Fp(t,l),d=qi(Zo(a)),f=_N(d);let p=c[f],v=c[d];if(i){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=p+u[g],b=p-u[y];p=k2(x,p,b)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",x=v+u[g],b=v-u[y];v=k2(x,v,b)}const m=s.fn({...t,[f]:p,[d]:v});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:o}}}}}},dZ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=Jo(e,t),u={x:n,y:r},d=qi(a),f=_N(d);let p=u[f],v=u[d];const m=Jo(s,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",w=i.reference[f]-i.floating[b]+g.mainAxis,S=i.reference[f]+i.reference[b]-g.mainAxis;p<w?p=w:p>S&&(p=S)}if(c){var y,x;const b=f==="y"?"width":"height",w=BB.has(Zo(a)),S=i.reference[d]-i.floating[b]+(w&&((y=o.offset)==null?void 0:y[d])||0)+(w?0:g.crossAxis),C=i.reference[d]+i.reference[b]+(w?0:((x=o.offset)==null?void 0:x[d])||0)-(w?g.crossAxis:0);v<S?v=S:v>C&&(v=C)}return{[f]:p,[d]:v}}}},fZ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:l=()=>{},...c}=Jo(e,t),u=await Fp(t,c),d=Zo(a),f=$f(a),p=qi(a)==="y",{width:v,height:m}=i.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,b=v-u.left-u.right,w=Sl(m-u[g],x),S=Sl(v-u[y],b),C=!t.middlewareData.shift;let E=w,k=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=x),C&&!f){const T=oa(u.left,0),A=oa(u.right,0),P=oa(u.top,0),I=oa(u.bottom,0);p?k=v-2*(T!==0||A!==0?T+A:oa(u.left,u.right)):E=m-2*(P!==0||I!==0?P+I:oa(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:E});const N=await o.getDimensions(s.floating);return v!==N.width||m!==N.height?{reset:{rects:!0}}:{}}}};function fb(){return typeof window<"u"}function Ff(e){return UB(e)?(e.nodeName||"").toLowerCase():"#document"}function va(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function go(e){var t;return(t=(UB(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function UB(e){return fb()?e instanceof Node||e instanceof va(e).Node:!1}function Ni(e){return fb()?e instanceof Element||e instanceof va(e).Element:!1}function co(e){return fb()?e instanceof HTMLElement||e instanceof va(e).HTMLElement:!1}function IO(e){return!fb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof va(e).ShadowRoot}const hZ=new Set(["inline","contents"]);function av(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Ti(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!hZ.has(a)}const pZ=new Set(["table","td","th"]);function mZ(e){return pZ.has(Ff(e))}const vZ=[":popover-open",":modal"];function hb(e){return vZ.some(t=>{try{return e.matches(t)}catch{return!1}})}const gZ=["transform","translate","scale","rotate","perspective"],yZ=["transform","translate","scale","rotate","perspective","filter"],xZ=["paint","layout","strict","content"];function kN(e){const t=NN(),n=Ni(e)?Ti(e):e;return gZ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||yZ.some(r=>(n.willChange||"").includes(r))||xZ.some(r=>(n.contain||"").includes(r))}function bZ(e){let t=_l(e);for(;co(t)&&!Jd(t);){if(kN(t))return t;if(hb(t))return null;t=_l(t)}return null}function NN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wZ=new Set(["html","body","#document"]);function Jd(e){return wZ.has(Ff(e))}function Ti(e){return va(e).getComputedStyle(e)}function pb(e){return Ni(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _l(e){if(Ff(e)==="html")return e;const t=e.assignedSlot||e.parentNode||IO(e)&&e.host||go(e);return IO(t)?t.host:t}function zB(e){const t=_l(e);return Jd(t)?e.ownerDocument?e.ownerDocument.body:e.body:co(t)&&av(t)?t:zB(t)}function Lp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=zB(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=va(a);if(i){const s=T2(o);return t.concat(o,o.visualViewport||[],av(a)?a:[],s&&n?Lp(s):[])}return t.concat(a,Lp(a,[],n))}function T2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function WB(e){const t=Ti(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=co(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Jy(n)!==i||Jy(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function TN(e){return Ni(e)?e:e.contextElement}function gd(e){const t=TN(e);if(!co(t))return eo(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=WB(t);let o=(i?Jy(n.width):n.width)/r,s=(i?Jy(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const SZ=eo(0);function VB(e){const t=va(e);return!NN()||!t.visualViewport?SZ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _Z(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==va(e)?!1:t}function Vc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=TN(e);let o=eo(1);t&&(r?Ni(r)&&(o=gd(r)):o=gd(e));const s=_Z(i,n,r)?VB(i):eo(0);let l=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,u=a.width/o.x,d=a.height/o.y;if(i){const f=va(i),p=r&&Ni(r)?va(r):r;let v=f,m=T2(v);for(;m&&r&&p!==v;){const g=gd(m),y=m.getBoundingClientRect(),x=Ti(m),b=y.left+(m.clientLeft+parseFloat(x.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(x.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=b,c+=w,v=va(m),m=T2(v)}}return e0({width:u,height:d,x:l,y:c})}function AN(e,t){const n=pb(e).scrollLeft;return t?t.left+n:Vc(go(e)).left+n}function HB(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:AN(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function CZ(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=go(r),s=t?hb(t.floating):!1;if(r===o||s&&i)return n;let l={scrollLeft:0,scrollTop:0},c=eo(1);const u=eo(0),d=co(r);if((d||!d&&!i)&&((Ff(r)!=="body"||av(o))&&(l=pb(r)),co(r))){const p=Vc(r);c=gd(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!d&&!i?HB(o,l,!0):eo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function EZ(e){return Array.from(e.getClientRects())}function kZ(e){const t=go(e),n=pb(e),r=e.ownerDocument.body,a=oa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=oa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+AN(e);const s=-n.scrollTop;return Ti(r).direction==="rtl"&&(o+=oa(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function NZ(e,t){const n=va(e),r=go(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,l=0;if(a){i=a.width,o=a.height;const c=NN();(!c||c&&t==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:s,y:l}}const TZ=new Set(["absolute","fixed"]);function AZ(e,t){const n=Vc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=co(e)?gd(e):eo(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,l=a*i.x,c=r*i.y;return{width:o,height:s,x:l,y:c}}function DO(e,t,n){let r;if(t==="viewport")r=NZ(e,n);else if(t==="document")r=kZ(go(e));else if(Ni(t))r=AZ(t,n);else{const a=VB(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return e0(r)}function GB(e,t){const n=_l(e);return n===t||!Ni(n)||Jd(n)?!1:Ti(n).position==="fixed"||GB(n,t)}function PZ(e,t){const n=t.get(e);if(n)return n;let r=Lp(e,[],!1).filter(s=>Ni(s)&&Ff(s)!=="body"),a=null;const i=Ti(e).position==="fixed";let o=i?_l(e):e;for(;Ni(o)&&!Jd(o);){const s=Ti(o),l=kN(o);!l&&s.position==="fixed"&&(a=null),(i?!l&&!a:!l&&s.position==="static"&&!!a&&TZ.has(a.position)||av(o)&&!l&&GB(e,o))?r=r.filter(u=>u!==o):a=s,o=_l(o)}return t.set(e,r),r}function jZ(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?hb(t)?[]:PZ(t,this._c):[].concat(n),r],s=o[0],l=o.reduce((c,u)=>{const d=DO(t,u,a);return c.top=oa(d.top,c.top),c.right=Sl(d.right,c.right),c.bottom=Sl(d.bottom,c.bottom),c.left=oa(d.left,c.left),c},DO(t,s,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function OZ(e){const{width:t,height:n}=WB(e);return{width:t,height:n}}function RZ(e,t,n){const r=co(t),a=go(t),i=n==="fixed",o=Vc(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=eo(0);function c(){l.x=AN(a)}if(r||!r&&!i)if((Ff(t)!=="body"||av(a))&&(s=pb(t)),r){const p=Vc(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else a&&c();i&&!r&&a&&c();const u=a&&!r&&!i?HB(a,s):eo(0),d=o.left+s.scrollLeft-l.x-u.x,f=o.top+s.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function R1(e){return Ti(e).position==="static"}function MO(e,t){if(!co(e)||Ti(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return go(e)===n&&(n=n.ownerDocument.body),n}function qB(e,t){const n=va(e);if(hb(e))return n;if(!co(e)){let a=_l(e);for(;a&&!Jd(a);){if(Ni(a)&&!R1(a))return a;a=_l(a)}return n}let r=MO(e,t);for(;r&&mZ(r)&&R1(r);)r=MO(r,t);return r&&Jd(r)&&R1(r)&&!kN(r)?n:r||bZ(e)||n}const IZ=async function(e){const t=this.getOffsetParent||qB,n=this.getDimensions,r=await n(e.floating);return{reference:RZ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function DZ(e){return Ti(e).direction==="rtl"}const MZ={convertOffsetParentRelativeRectToViewportRelativeRect:CZ,getDocumentElement:go,getClippingRect:jZ,getOffsetParent:qB,getElementRects:IZ,getClientRects:EZ,getDimensions:OZ,getScale:gd,isElement:Ni,isRTL:DZ};function KB(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $Z(e,t){let n=null,r;const a=go(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(s||t(),!f||!p)return;const v=ig(d),m=ig(a.clientWidth-(u+f)),g=ig(a.clientHeight-(d+p)),y=ig(u),b={rootMargin:-v+"px "+-m+"px "+-g+"px "+-y+"px",threshold:oa(0,Sl(1,l))||1};let w=!0;function S(C){const E=C[0].intersectionRatio;if(E!==l){if(!w)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!KB(c,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return o(!0),i}function FZ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=TN(e),u=a||i?[...c?Lp(c):[],...Lp(t)]:[];u.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=c&&s?$Z(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[x]=y;x&&x.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let v,m=l?Vc(e):null;l&&g();function g(){const y=Vc(e);m&&!KB(m,y)&&n(),m=y,v=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(x=>{a&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const LZ=cZ,BZ=uZ,UZ=oZ,zZ=fZ,WZ=sZ,$O=iZ,VZ=dZ,HZ=(e,t,n)=>{const r=new Map,a={platform:MZ,...n},i={...a.platform,_c:r};return aZ(e,t,{...a,platform:i})};var GZ=typeof document<"u",qZ=function(){},cy=GZ?_.useLayoutEffect:qZ;function t0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!t0(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!t0(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function XB(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function FO(e,t){const n=XB(e);return Math.round(t*n)/n}function I1(e){const t=_.useRef(e);return cy(()=>{t.current=e}),t}function KZ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,d]=_.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=_.useState(r);t0(f,r)||p(r);const[v,m]=_.useState(null),[g,y]=_.useState(null),x=_.useCallback(j=>{j!==C.current&&(C.current=j,m(j))},[]),b=_.useCallback(j=>{j!==E.current&&(E.current=j,y(j))},[]),w=i||v,S=o||g,C=_.useRef(null),E=_.useRef(null),k=_.useRef(u),N=l!=null,T=I1(l),A=I1(a),P=I1(c),I=_.useCallback(()=>{if(!C.current||!E.current)return;const j={placement:t,strategy:n,middleware:f};A.current&&(j.platform=A.current),HZ(C.current,E.current,j).then(O=>{const B={...O,isPositioned:P.current!==!1};R.current&&!t0(k.current,B)&&(k.current=B,au.flushSync(()=>{d(B)}))})},[f,t,n,A,P]);cy(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[c]);const R=_.useRef(!1);cy(()=>(R.current=!0,()=>{R.current=!1}),[]),cy(()=>{if(w&&(C.current=w),S&&(E.current=S),w&&S){if(T.current)return T.current(w,S,I);I()}},[w,S,I,T,N]);const D=_.useMemo(()=>({reference:C,floating:E,setReference:x,setFloating:b}),[x,b]),M=_.useMemo(()=>({reference:w,floating:S}),[w,S]),$=_.useMemo(()=>{const j={position:n,left:0,top:0};if(!M.floating)return j;const O=FO(M.floating,u.x),B=FO(M.floating,u.y);return s?{...j,transform:"translate("+O+"px, "+B+"px)",...XB(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:B}},[n,s,M.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:I,refs:D,elements:M,floatingStyles:$}),[u,I,D,M,$])}const XZ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?$O({element:r.current,padding:a}).fn(n):{}:r?$O({element:r,padding:a}).fn(n):{}}}},YZ=(e,t)=>({...LZ(e),options:[e,t]}),QZ=(e,t)=>({...BZ(e),options:[e,t]}),JZ=(e,t)=>({...VZ(e),options:[e,t]}),ZZ=(e,t)=>({...UZ(e),options:[e,t]}),eee=(e,t)=>({...zZ(e),options:[e,t]}),tee=(e,t)=>({...WZ(e),options:[e,t]}),nee=(e,t)=>({...XZ(e),options:[e,t]});var ree="Arrow",YB=_.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return h.jsx(Fe.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});YB.displayName=ree;var aee=YB;function PN(e){const[t,n]=_.useState(void 0);return cr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var jN="Popper",[QB,Rl]=Sa(jN),[iee,JB]=QB(jN),ZB=e=>{const{__scopePopper:t,children:n}=e,[r,a]=_.useState(null);return h.jsx(iee,{scope:t,anchor:r,onAnchorChange:a,children:n})};ZB.displayName=jN;var e5="PopperAnchor",t5=_.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=JB(e5,n),o=_.useRef(null),s=ft(t,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:h.jsx(Fe.div,{...a,ref:s})});t5.displayName=e5;var ON="PopperContent",[oee,see]=QB(ON),n5=_.forwardRef((e,t)=>{var Z,K,Q,ie,V,q;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:v,...m}=e,g=JB(ON,n),[y,x]=_.useState(null),b=ft(t,de=>x(de)),[w,S]=_.useState(null),C=PN(w),E=(C==null?void 0:C.width)??0,k=(C==null?void 0:C.height)??0,N=r+(i!=="center"?"-"+i:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},A=Array.isArray(c)?c:[c],P=A.length>0,I={padding:T,boundary:A.filter(cee),altBoundary:P},{refs:R,floatingStyles:D,placement:M,isPositioned:$,middlewareData:j}=KZ({strategy:"fixed",placement:N,whileElementsMounted:(...de)=>FZ(...de,{animationFrame:p==="always"}),elements:{reference:g.anchor},middleware:[YZ({mainAxis:a+k,alignmentAxis:o}),l&&QZ({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?JZ():void 0,...I}),l&&ZZ({...I}),eee({...I,apply:({elements:de,rects:he,availableWidth:ae,availableHeight:le})=>{const{width:ge,height:_e}=he.reference,Re=de.floating.style;Re.setProperty("--radix-popper-available-width",`${ae}px`),Re.setProperty("--radix-popper-available-height",`${le}px`),Re.setProperty("--radix-popper-anchor-width",`${ge}px`),Re.setProperty("--radix-popper-anchor-height",`${_e}px`)}}),w&&nee({element:w,padding:s}),uee({arrowWidth:E,arrowHeight:k}),f&&tee({strategy:"referenceHidden",...I})]}),[O,B]=i5(M),G=Xr(v);cr(()=>{$&&(G==null||G())},[$,G]);const L=(Z=j.arrow)==null?void 0:Z.x,W=(K=j.arrow)==null?void 0:K.y,J=((Q=j.arrow)==null?void 0:Q.centerOffset)!==0,[ee,ne]=_.useState();return cr(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:$?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(ie=j.transformOrigin)==null?void 0:ie.x,(V=j.transformOrigin)==null?void 0:V.y].join(" "),...((q=j.hide)==null?void 0:q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(oee,{scope:n,placedSide:O,onArrowChange:S,arrowX:L,arrowY:W,shouldHideArrow:J,children:h.jsx(Fe.div,{"data-side":O,"data-align":B,...m,ref:b,style:{...m.style,animation:$?void 0:"none"}})})})});n5.displayName=ON;var r5="PopperArrow",lee={top:"bottom",right:"left",bottom:"top",left:"right"},a5=_.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=see(r5,r),o=lee[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(aee,{...a,ref:n,style:{...a.style,display:"block"}})})});a5.displayName=r5;function cee(e){return e!==null}var uee=e=>({name:"transformOrigin",options:e,fn(t){var g,y,x;const{placement:n,rects:r,middlewareData:a}=t,o=((g=a.arrow)==null?void 0:g.centerOffset)!==0,s=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=i5(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=a.arrow)==null?void 0:y.x)??0)+s/2,p=(((x=a.arrow)==null?void 0:x.y)??0)+l/2;let v="",m="";return c==="bottom"?(v=o?d:`${f}px`,m=`${-l}px`):c==="top"?(v=o?d:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(v=`${r.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:v,y:m}}}});function i5(e){const[t,n="center"]=e.split("-");return[t,n]}var RN=ZB,iv=t5,mb=n5,vb=a5,dee="Portal",Lf=_.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=_.useState(!1);cr(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?pB.createPortal(h.jsx(Fe.div,{...r,ref:t}),o):null});Lf.displayName=dee;function fee(e,t){return _.useReducer((n,r)=>t[n][r]??n,e)}var Jr=e=>{const{present:t,children:n}=e,r=hee(t),a=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=ft(r.ref,pee(a));return typeof n=="function"||r.isPresent?_.cloneElement(a,{ref:i}):null};Jr.displayName="Presence";function hee(e){const[t,n]=_.useState(),r=_.useRef(null),a=_.useRef(e),i=_.useRef("none"),o=e?"mounted":"unmounted",[s,l]=fee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=og(r.current);i.current=s==="mounted"?c:"none"},[s]),cr(()=>{const c=r.current,u=a.current;if(u!==e){const f=i.current,p=og(c);e?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),cr(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=p=>{const m=og(r.current).includes(p.animationName);if(p.target===t&&m&&(l("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},f=p=>{p.target===t&&(i.current=og(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function og(e){return(e==null?void 0:e.animationName)||"none"}function pee(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var mee=kk[" useInsertionEffect ".trim().toString()]||cr;function uo({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=vee({defaultProp:t,onChange:n}),s=e!==void 0,l=s?e:a;{const u=_.useRef(e!==void 0);_.useEffect(()=>{const d=u.current;d!==s&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=s},[s,r])}const c=_.useCallback(u=>{var d;if(s){const f=gee(u)?u(e):u;f!==e&&((d=o.current)==null||d.call(o,f))}else i(u)},[s,e,i,o]);return[l,c]}function vee({defaultProp:e,onChange:t}){const[n,r]=_.useState(e),a=_.useRef(n),i=_.useRef(t);return mee(()=>{i.current=t},[t]),_.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function gee(e){return typeof e=="function"}var o5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yee="VisuallyHidden",gb=_.forwardRef((e,t)=>h.jsx(Fe.span,{...e,ref:t,style:{...o5,...e.style}}));gb.displayName=yee;var xee=gb,[yb,cVe]=Sa("Tooltip",[Rl]),IN=Rl(),s5="TooltipProvider",bee=700,LO="tooltip.open",[wee,l5]=yb(s5),c5=e=>{const{__scopeTooltip:t,delayDuration:n=bee,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=_.useRef(!0),s=_.useRef(!1),l=_.useRef(0);return _.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(wee,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:_.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};c5.displayName=s5;var u5="Tooltip",[uVe,xb]=yb(u5),A2="TooltipTrigger",See=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=xb(A2,n),i=l5(A2,n),o=IN(n),s=_.useRef(null),l=ft(t,s,a.onTriggerChange),c=_.useRef(!1),u=_.useRef(!1),d=_.useCallback(()=>c.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(iv,{asChild:!0,...o,children:h.jsx(Fe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:ye(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ye(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ye(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ye(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:ye(e.onBlur,a.onClose),onClick:ye(e.onClick,a.onClose)})})});See.displayName=A2;var _ee="TooltipPortal",[dVe,Cee]=yb(_ee,{forceMount:void 0}),Zd="TooltipContent",d5=_.forwardRef((e,t)=>{const n=Cee(Zd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=xb(Zd,e.__scopeTooltip);return h.jsx(Jr,{present:r||o.open,children:o.disableHoverableContent?h.jsx(f5,{side:a,...i,ref:t}):h.jsx(Eee,{side:a,...i,ref:t})})}),Eee=_.forwardRef((e,t)=>{const n=xb(Zd,e.__scopeTooltip),r=l5(Zd,e.__scopeTooltip),a=_.useRef(null),i=ft(t,a),[o,s]=_.useState(null),{trigger:l,onClose:c}=n,u=a.current,{onPointerInTransitChange:d}=r,f=_.useCallback(()=>{s(null),d(!1)},[d]),p=_.useCallback((v,m)=>{const g=v.currentTarget,y={x:v.clientX,y:v.clientY},x=Pee(y,g.getBoundingClientRect()),b=jee(y,x),w=Oee(m.getBoundingClientRect()),S=Iee([...b,...w]);s(S),d(!0)},[d]);return _.useEffect(()=>()=>f(),[f]),_.useEffect(()=>{if(l&&u){const v=g=>p(g,u),m=g=>p(g,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",m)}}},[l,u,p,f]),_.useEffect(()=>{if(o){const v=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},x=(l==null?void 0:l.contains(g))||(u==null?void 0:u.contains(g)),b=!Ree(y,o);x?f():b&&(f(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,f]),h.jsx(f5,{...e,ref:i})}),[kee,Nee]=yb(u5,{isInside:!1}),Tee=jJ("TooltipContent"),f5=_.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,l=xb(Zd,n),c=IN(n),{onClose:u}=l;return _.useEffect(()=>(document.addEventListener(LO,u),()=>document.removeEventListener(LO,u)),[u]),_.useEffect(()=>{if(l.trigger){const d=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),h.jsx(ou,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(mb,{"data-state":l.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(Tee,{children:r}),h.jsx(kee,{scope:n,isInside:!0,children:h.jsx(xee,{id:l.contentId,role:"tooltip",children:a||r})})]})})});d5.displayName=Zd;var h5="TooltipArrow",Aee=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=IN(n);return Nee(h5,n).isInside?null:h.jsx(vb,{...a,...r,ref:t})});Aee.displayName=h5;function Pee(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jee(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Oee(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function Ree(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],c=s.x,u=s.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(a=!a)}return a}function Iee(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Dee(t)}function Dee(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Mee=c5,p5=d5;function m5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=m5(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function vt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=m5(e))&&(r&&(r+=" "),r+=t);return r}const DN="-",$ee=e=>{const t=Lee(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(DN);return s[0]===""&&s.length!==1&&s.shift(),v5(s,t)||Fee(o)},getConflictingClassGroupIds:(o,s)=>{const l=n[o]||[];return s&&r[o]?[...l,...r[o]]:l}}},v5=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?v5(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(DN);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},BO=/^\[(.+)\]$/,Fee=e=>{if(BO.test(e)){const t=BO.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Lee=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Uee(Object.entries(e.classGroups),n).forEach(([i,o])=>{P2(o,r,i,t)}),r},P2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:UO(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(Bee(a)){P2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{P2(o,UO(t,i),n,r)})})},UO=(e,t)=>{let n=e;return t.split(DN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Bee=e=>e.isThemeGetter,Uee=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,s])=>[t+o,s])):i);return[n,a]}):e,zee=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},g5="!",Wee=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=s=>{const l=[];let c=0,u=0,d;for(let g=0;g<s.length;g++){let y=s[g];if(c===0){if(y===a&&(r||s.slice(g,g+i)===t)){l.push(s.slice(u,g)),u=g+i;continue}if(y==="/"){d=g;continue}}y==="["?c++:y==="]"&&c--}const f=l.length===0?s:s.substring(u),p=f.startsWith(g5),v=p?f.substring(1):f,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return n?s=>n({className:s,parseClassName:o}):o},Vee=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Hee=e=>({cache:zee(e.cacheSize),parseClassName:Wee(e),...$ee(e)}),Gee=/\s+/,qee=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Gee);let s="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let v=!!p,m=r(v?f.substring(0,p):f);if(!m){if(!v){s=c+(s.length>0?" "+s:s);continue}if(m=r(f),!m){s=c+(s.length>0?" "+s:s);continue}v=!1}const g=Vee(u).join(":"),y=d?g+g5:g,x=y+m;if(i.includes(x))continue;i.push(x);const b=a(m,v);for(let w=0;w<b.length;++w){const S=b[w];i.push(y+S)}s=c+(s.length>0?" "+s:s)}return s};function Kee(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=y5(t))&&(r&&(r+=" "),r+=n);return r}const y5=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=y5(e[r]))&&(n&&(n+=" "),n+=t);return n};function Xee(e,...t){let n,r,a,i=o;function o(l){const c=t.reduce((u,d)=>d(u),e());return n=Hee(c),r=n.cache.get,a=n.cache.set,i=s,s(l)}function s(l){const c=r(l);if(c)return c;const u=qee(l,n);return a(l,u),u}return function(){return i(Kee.apply(null,arguments))}}const Wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},x5=/^\[(?:([a-z-]+):)?(.+)\]$/i,Yee=/^\d+\/\d+$/,Qee=new Set(["px","full","screen"]),Jee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ete=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tte=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nte=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_o=e=>yd(e)||Qee.has(e)||Yee.test(e),Ns=e=>Bf(e,"length",ute),yd=e=>!!e&&!Number.isNaN(Number(e)),D1=e=>Bf(e,"number",yd),vh=e=>!!e&&Number.isInteger(Number(e)),rte=e=>e.endsWith("%")&&yd(e.slice(0,-1)),nt=e=>x5.test(e),Ts=e=>Jee.test(e),ate=new Set(["length","size","percentage"]),ite=e=>Bf(e,ate,b5),ote=e=>Bf(e,"position",b5),ste=new Set(["image","url"]),lte=e=>Bf(e,ste,fte),cte=e=>Bf(e,"",dte),gh=()=>!0,Bf=(e,t,n)=>{const r=x5.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},ute=e=>Zee.test(e)&&!ete.test(e),b5=()=>!1,dte=e=>tte.test(e),fte=e=>nte.test(e),hte=()=>{const e=Wt("colors"),t=Wt("spacing"),n=Wt("blur"),r=Wt("brightness"),a=Wt("borderColor"),i=Wt("borderRadius"),o=Wt("borderSpacing"),s=Wt("borderWidth"),l=Wt("contrast"),c=Wt("grayscale"),u=Wt("hueRotate"),d=Wt("invert"),f=Wt("gap"),p=Wt("gradientColorStops"),v=Wt("gradientColorStopPositions"),m=Wt("inset"),g=Wt("margin"),y=Wt("opacity"),x=Wt("padding"),b=Wt("saturate"),w=Wt("scale"),S=Wt("sepia"),C=Wt("skew"),E=Wt("space"),k=Wt("translate"),N=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",nt,t],P=()=>[nt,t],I=()=>["",_o,Ns],R=()=>["auto",yd,nt],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",nt],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[yd,nt];return{cacheSize:500,separator:":",theme:{colors:[gh],spacing:[_o,Ns],blur:["none","",Ts,nt],brightness:G(),borderColor:[e],borderRadius:["none","","full",Ts,nt],borderSpacing:P(),borderWidth:I(),contrast:G(),grayscale:O(),hueRotate:G(),invert:O(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[rte,Ns],inset:A(),margin:A(),opacity:G(),padding:P(),saturate:G(),scale:G(),sepia:O(),skew:G(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[Ts]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),nt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vh,nt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",vh,nt]}],"grid-cols":[{"grid-cols":[gh]}],"col-start-end":[{col:["auto",{span:["full",vh,nt]},nt]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[gh]}],"row-start-end":[{row:["auto",{span:[vh,nt]},nt]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,t]}],"min-w":[{"min-w":[nt,t,"min","max","fit"]}],"max-w":[{"max-w":[nt,t,"none","full","min","max","fit","prose",{screen:[Ts]},Ts]}],h:[{h:[nt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ts,Ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",D1]}],"font-family":[{font:[gh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",yd,D1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_o,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_o,Ns]}],"underline-offset":[{"underline-offset":["auto",_o,nt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),ote]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ite]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lte]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[_o,nt]}],"outline-w":[{outline:[_o,Ns]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[_o,Ns]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ts,cte]}],"shadow-color":[{shadow:[gh]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ts,nt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[vh,nt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[_o,Ns,D1]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pte=Xee(hte);function Te(...e){return pte(vt(e))}const mte=Mee,vte=_.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(p5,{ref:r,sideOffset:t,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));vte.displayName=p5.displayName;const gte=1,yte=1e6;let M1=0;function xte(){return M1=(M1+1)%Number.MAX_SAFE_INTEGER,M1.toString()}const $1=new Map,zO=e=>{if($1.has(e))return;const t=setTimeout(()=>{$1.delete(e),Zh({type:"REMOVE_TOAST",toastId:e})},yte);$1.set(e,t)},bte=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,gte)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?zO(n):e.toasts.forEach(r=>{zO(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},uy=[];let dy={toasts:[]};function Zh(e){dy=bte(dy,e),uy.forEach(t=>{t(dy)})}function wte({...e}){const t=xte(),n=a=>Zh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Zh({type:"DISMISS_TOAST",toastId:t});return Zh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function ds(){const[e,t]=_.useState(dy);return _.useEffect(()=>(uy.push(t),()=>{const n=uy.indexOf(t);n>-1&&uy.splice(n,1)}),[e]),{...e,toast:wte,dismiss:n=>Zh({type:"DISMISS_TOAST",toastId:n})}}function bb(e){const t=e+"CollectionProvider",[n,r]=Sa(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:y}=m,x=z.useRef(null),b=z.useRef(new Map).current;return h.jsx(a,{scope:g,itemMap:b,collectionRef:x,children:y})};o.displayName=t;const s=e+"CollectionSlot",l=wl(s),c=z.forwardRef((m,g)=>{const{scope:y,children:x}=m,b=i(s,y),w=ft(g,b.collectionRef);return h.jsx(l,{ref:w,children:x})});c.displayName=s;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=wl(u),p=z.forwardRef((m,g)=>{const{scope:y,children:x,...b}=m,w=z.useRef(null),S=ft(g,w),C=i(u,y);return z.useEffect(()=>(C.itemMap.set(w,{ref:w,...b}),()=>void C.itemMap.delete(w))),h.jsx(f,{[d]:"",ref:S,children:x})});p.displayName=u;function v(m){const g=i(e+"CollectionConsumer",m);return z.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((C,E)=>b.indexOf(C.ref.current)-b.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},v,r]}var MN="ToastProvider",[$N,Ste,_te]=bb("Toast"),[w5,fVe]=Sa("Toast",[_te]),[Cte,wb]=w5(MN),S5=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[s,l]=_.useState(null),[c,u]=_.useState(0),d=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${MN}\`. Expected non-empty \`string\`.`),h.jsx($N.Provider,{scope:t,children:h.jsx(Cte,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:c,viewport:s,onViewportChange:l,onToastAdd:_.useCallback(()=>u(p=>p+1),[]),onToastRemove:_.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};S5.displayName=MN;var _5="ToastViewport",Ete=["F8"],j2="toast.viewportPause",O2="toast.viewportResume",C5=_.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Ete,label:a="Notifications ({hotkey})",...i}=e,o=wb(_5,n),s=Ste(n),l=_.useRef(null),c=_.useRef(null),u=_.useRef(null),d=_.useRef(null),f=ft(t,d,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;_.useEffect(()=>{const g=y=>{var b;r.length!==0&&r.every(w=>y[w]||y.code===w)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),_.useEffect(()=>{const g=l.current,y=d.current;if(v&&g&&y){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(j2);y.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(O2);y.dispatchEvent(C),o.isClosePausedRef.current=!1}},w=C=>{!g.contains(C.relatedTarget)&&b()},S=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",x),g.addEventListener("focusout",w),g.addEventListener("pointermove",x),g.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",x),g.removeEventListener("focusout",w),g.removeEventListener("pointermove",x),g.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const m=_.useCallback(({tabbingDirection:g})=>{const x=s().map(b=>{const w=b.ref.current,S=[w,...Fte(w)];return g==="forwards"?S:S.reverse()});return(g==="forwards"?x.reverse():x).flat()},[s]);return _.useEffect(()=>{const g=d.current;if(g){const y=x=>{var S,C,E;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const k=document.activeElement,N=x.shiftKey;if(x.target===g&&N){(S=c.current)==null||S.focus();return}const P=m({tabbingDirection:N?"backwards":"forwards"}),I=P.findIndex(R=>R===k);F1(P.slice(I+1))?x.preventDefault():N?(C=c.current)==null||C.focus():(E=u.current)==null||E.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[s,m]),h.jsxs(VJ,{ref:l,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&h.jsx(R2,{ref:c,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});F1(g)}}),h.jsx($N.Slot,{scope:n,children:h.jsx(Fe.ol,{tabIndex:-1,...i,ref:f})}),v&&h.jsx(R2,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});F1(g)}})]})});C5.displayName=_5;var E5="ToastFocusProxy",R2=_.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=wb(E5,n);return h.jsx(gb,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var c;const s=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(s))&&r()}})});R2.displayName=E5;var ov="Toast",kte="toast.swipeStart",Nte="toast.swipeMove",Tte="toast.swipeCancel",Ate="toast.swipeEnd",k5=_.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[s,l]=uo({prop:r,defaultProp:a??!0,onChange:i,caller:ov});return h.jsx(Jr,{present:n||s,children:h.jsx(Ote,{open:s,...o,ref:t,onClose:()=>l(!1),onPause:Xr(e.onPause),onResume:Xr(e.onResume),onSwipeStart:ye(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(e.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ye(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(e.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});k5.displayName=ov;var[Pte,jte]=w5(ov,{onClose(){}}),Ote=_.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:s,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...v}=e,m=wb(ov,n),[g,y]=_.useState(null),x=ft(t,R=>y(R)),b=_.useRef(null),w=_.useRef(null),S=a||m.duration,C=_.useRef(0),E=_.useRef(S),k=_.useRef(0),{onToastAdd:N,onToastRemove:T}=m,A=Xr(()=>{var D;(g==null?void 0:g.contains(document.activeElement))&&((D=m.viewport)==null||D.focus()),o()}),P=_.useCallback(R=>{!R||R===1/0||(window.clearTimeout(k.current),C.current=new Date().getTime(),k.current=window.setTimeout(A,R))},[A]);_.useEffect(()=>{const R=m.viewport;if(R){const D=()=>{P(E.current),c==null||c()},M=()=>{const $=new Date().getTime()-C.current;E.current=E.current-$,window.clearTimeout(k.current),l==null||l()};return R.addEventListener(j2,M),R.addEventListener(O2,D),()=>{R.removeEventListener(j2,M),R.removeEventListener(O2,D)}}},[m.viewport,S,l,c,P]),_.useEffect(()=>{i&&!m.isClosePausedRef.current&&P(S)},[i,S,m.isClosePausedRef,P]),_.useEffect(()=>(N(),()=>T()),[N,T]);const I=_.useMemo(()=>g?R5(g):null,[g]);return m.viewport?h.jsxs(h.Fragment,{children:[I&&h.jsx(Rte,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),h.jsx(Pte,{scope:n,onClose:A,children:au.createPortal(h.jsx($N.ItemSlot,{scope:n,children:h.jsx(WJ,{asChild:!0,onEscapeKeyDown:ye(s,()=>{m.isFocusedToastEscapeKeyDownRef.current||A(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Fe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...v,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ye(e.onKeyDown,R=>{R.key==="Escape"&&(s==null||s(R.nativeEvent),R.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:ye(e.onPointerDown,R=>{R.button===0&&(b.current={x:R.clientX,y:R.clientY})}),onPointerMove:ye(e.onPointerMove,R=>{if(!b.current)return;const D=R.clientX-b.current.x,M=R.clientY-b.current.y,$=!!w.current,j=["left","right"].includes(m.swipeDirection),O=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,B=j?O(0,D):0,G=j?0:O(0,M),L=R.pointerType==="touch"?10:2,W={x:B,y:G},J={originalEvent:R,delta:W};$?(w.current=W,sg(Nte,d,J,{discrete:!1})):WO(W,m.swipeDirection,L)?(w.current=W,sg(kte,u,J,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(D)>L||Math.abs(M)>L)&&(b.current=null)}),onPointerUp:ye(e.onPointerUp,R=>{const D=w.current,M=R.target;if(M.hasPointerCapture(R.pointerId)&&M.releasePointerCapture(R.pointerId),w.current=null,b.current=null,D){const $=R.currentTarget,j={originalEvent:R,delta:D};WO(D,m.swipeDirection,m.swipeThreshold)?sg(Ate,p,j,{discrete:!0}):sg(Tte,f,j,{discrete:!0}),$.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),Rte=e=>{const{__scopeToast:t,children:n,...r}=e,a=wb(ov,t),[i,o]=_.useState(!1),[s,l]=_.useState(!1);return Mte(()=>o(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),s?null:h.jsx(Lf,{asChild:!0,children:h.jsx(gb,{...r,children:i&&h.jsxs(h.Fragment,{children:[a.label," ",n]})})})},Ite="ToastTitle",N5=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return h.jsx(Fe.div,{...r,ref:t})});N5.displayName=Ite;var Dte="ToastDescription",T5=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return h.jsx(Fe.div,{...r,ref:t})});T5.displayName=Dte;var A5="ToastAction",P5=_.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?h.jsx(O5,{altText:n,asChild:!0,children:h.jsx(FN,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${A5}\`. Expected non-empty \`string\`.`),null)});P5.displayName=A5;var j5="ToastClose",FN=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=jte(j5,n);return h.jsx(O5,{asChild:!0,children:h.jsx(Fe.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,a.onClose)})})});FN.displayName=j5;var O5=_.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return h.jsx(Fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function R5(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),$te(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...R5(r))}}),t}function sg(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?SN(a,i):a.dispatchEvent(i)}var WO=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function Mte(e=()=>{}){const t=Xr(e);cr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function $te(e){return e.nodeType===e.ELEMENT_NODE}function Fte(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function F1(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Lte=S5,I5=C5,D5=k5,M5=N5,$5=T5,F5=P5,L5=FN;const VO=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,HO=vt,sv=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return HO(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=VO(u)||VO(d);return a[c][f]}),s=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...p}=u;return Object.entries(p).every(v=>{let[m,g]=v;return Array.isArray(g)?g.includes({...i,...s}[m]):{...i,...s}[m]===g})?[...c,d,f]:c},[]);return HO(e,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B5=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ute={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},l)=>_.createElement("svg",{ref:l,...Ute,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:B5("lucide",a),...s},[...o.map(([c,u])=>_.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,t)=>{const n=_.forwardRef(({className:r,...a},i)=>_.createElement(zte,{ref:i,iconNode:t,className:B5(`lucide-${Bte(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=De("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=De("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=De("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=De("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=De("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=De("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=De("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=De("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=De("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=De("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=De("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=De("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=De("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=De("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=De("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=De("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=De("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=De("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=De("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=De("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=De("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=De("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=De("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=De("ScanFace",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=De("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=De("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=De("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=De("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fne=Lte,H5=_.forwardRef(({className:e,...t},n)=>h.jsx(I5,{ref:n,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));H5.displayName=I5.displayName;const hne=sv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),G5=_.forwardRef(({className:e,variant:t,...n},r)=>h.jsx(D5,{ref:r,className:Te(hne({variant:t}),e),...n}));G5.displayName=D5.displayName;const pne=_.forwardRef(({className:e,...t},n)=>h.jsx(F5,{ref:n,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));pne.displayName=F5.displayName;const q5=_.forwardRef(({className:e,...t},n)=>h.jsx(L5,{ref:n,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:h.jsx(Eb,{className:"h-4 w-4"})}));q5.displayName=L5.displayName;const K5=_.forwardRef(({className:e,...t},n)=>h.jsx(M5,{ref:n,className:Te("text-sm font-semibold",e),...t}));K5.displayName=M5.displayName;const X5=_.forwardRef(({className:e,...t},n)=>h.jsx($5,{ref:n,className:Te("text-sm opacity-90",e),...t}));X5.displayName=$5.displayName;function mne(){const{toasts:e}=ds();return h.jsxs(fne,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return h.jsxs(G5,{...i,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(K5,{children:n}),r&&h.jsx(X5,{children:r})]}),a,h.jsx(q5,{})]},t)}),h.jsx(H5,{})]})}var XO=["light","dark"],vne="(prefers-color-scheme: dark)",gne=_.createContext(void 0),yne={setTheme:e=>{},themes:[]},xne=()=>{var e;return(e=_.useContext(gne))!=null?e:yne};_.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:s,nonce:l})=>{let c=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=a?XO.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,m=!1,g=!0)=>{let y=o?o[v]:v,x=m?v+"|| ''":`'${y}'`,b="";return a&&g&&!m&&XO.includes(v)&&(b+=`d.style.colorScheme = '${v}';`),n==="class"?m||y?b+=`c.add(${x})`:b+="null":y&&(b+=`d[s](n,${x})`),b},p=e?`!function(){${u}${f(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${vne}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return _.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var bne=e=>{switch(e){case"success":return _ne;case"info":return Ene;case"warning":return Cne;case"error":return kne;default:return null}},wne=Array(12).fill(0),Sne=({visible:e,className:t})=>z.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},z.createElement("div",{className:"sonner-spinner"},wne.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),_ne=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Cne=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ene=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kne=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Nne=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Tne=()=>{let[e,t]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},F2=1,Ane=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;let{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:F2++,o=this.toasts.find(l=>l.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:s,title:r}):l):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:t,dismiss:!0})),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let a=t instanceof Promise?t:t(),i=r!==void 0,o,s=a.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(jne(c)&&!c.ok){i=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,d=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:d})}else if(n.success!==void 0){i=!1;let u=typeof n.success=="function"?await n.success(c):n.success,d=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,u)=>s.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{let r=(n==null?void 0:n.id)||F2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Lr=new Ane,Pne=(e,t)=>{let n=(t==null?void 0:t.id)||F2++;return Lr.addToast({title:e,...t,id:n}),n},jne=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",One=Pne,Rne=()=>Lr.toasts,Ine=()=>Lr.getActiveToasts(),at=Object.assign(One,{success:Lr.success,info:Lr.info,warning:Lr.warning,error:Lr.error,custom:Lr.custom,message:Lr.message,promise:Lr.promise,dismiss:Lr.dismiss,loading:Lr.loading},{getHistory:Rne,getToasts:Ine});function Dne(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Dne(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function cg(e){return e.label!==void 0}var Mne=3,$ne="32px",Fne="16px",YO=4e3,Lne=356,Bne=14,Une=20,zne=200;function Za(...e){return e.filter(Boolean).join(" ")}function Wne(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var Vne=e=>{var t,n,r,a,i,o,s,l,c,u,d;let{invert:f,toast:p,unstyled:v,interacting:m,setHeights:g,visibleToasts:y,heights:x,index:b,toasts:w,expanded:S,removeToast:C,defaultRichColors:E,closeButton:k,style:N,cancelButtonStyle:T,actionButtonStyle:A,className:P="",descriptionClassName:I="",duration:R,position:D,gap:M,loadingIcon:$,expandByDefault:j,classNames:O,icons:B,closeButtonAriaLabel:G="Close toast",pauseWhenPageIsHidden:L}=e,[W,J]=z.useState(null),[ee,ne]=z.useState(null),[Z,K]=z.useState(!1),[Q,ie]=z.useState(!1),[V,q]=z.useState(!1),[de,he]=z.useState(!1),[ae,le]=z.useState(!1),[ge,_e]=z.useState(0),[Re,He]=z.useState(0),Me=z.useRef(p.duration||R||YO),st=z.useRef(null),xe=z.useRef(null),me=b===0,Ee=b+1<=y,X=p.type,be=p.dismissible!==!1,oe=p.className||"",Ie=p.descriptionClassName||"",Dt=z.useMemo(()=>x.findIndex(tt=>tt.toastId===p.id)||0,[x,p.id]),qn=z.useMemo(()=>{var tt;return(tt=p.closeButton)!=null?tt:k},[p.closeButton,k]),Nr=z.useMemo(()=>p.duration||R||YO,[p.duration,R]),ur=z.useRef(0),Kn=z.useRef(0),So=z.useRef(0),Ii=z.useRef(null),[Ss,c7]=D.split("-"),ej=z.useMemo(()=>x.reduce((tt,Ot,Yt)=>Yt>=Dt?tt:tt+Ot.height,0),[x,Dt]),tj=Tne(),u7=p.invert||f,a1=X==="loading";Kn.current=z.useMemo(()=>Dt*M+ej,[Dt,ej]),z.useEffect(()=>{Me.current=Nr},[Nr]),z.useEffect(()=>{K(!0)},[]),z.useEffect(()=>{let tt=xe.current;if(tt){let Ot=tt.getBoundingClientRect().height;return He(Ot),g(Yt=>[{toastId:p.id,height:Ot,position:p.position},...Yt]),()=>g(Yt=>Yt.filter(Xa=>Xa.toastId!==p.id))}},[g,p.id]),z.useLayoutEffect(()=>{if(!Z)return;let tt=xe.current,Ot=tt.style.height;tt.style.height="auto";let Yt=tt.getBoundingClientRect().height;tt.style.height=Ot,He(Yt),g(Xa=>Xa.find(Ya=>Ya.toastId===p.id)?Xa.map(Ya=>Ya.toastId===p.id?{...Ya,height:Yt}:Ya):[{toastId:p.id,height:Yt,position:p.position},...Xa])},[Z,p.title,p.description,g,p.id]);let _s=z.useCallback(()=>{ie(!0),_e(Kn.current),g(tt=>tt.filter(Ot=>Ot.toastId!==p.id)),setTimeout(()=>{C(p)},zne)},[p,C,g,Kn]);z.useEffect(()=>{if(p.promise&&X==="loading"||p.duration===1/0||p.type==="loading")return;let tt;return S||m||L&&tj?(()=>{if(So.current<ur.current){let Ot=new Date().getTime()-ur.current;Me.current=Me.current-Ot}So.current=new Date().getTime()})():Me.current!==1/0&&(ur.current=new Date().getTime(),tt=setTimeout(()=>{var Ot;(Ot=p.onAutoClose)==null||Ot.call(p,p),_s()},Me.current)),()=>clearTimeout(tt)},[S,m,p,X,L,tj,_s]),z.useEffect(()=>{p.delete&&_s()},[_s,p.delete]);function d7(){var tt,Ot,Yt;return B!=null&&B.loading?z.createElement("div",{className:Za(O==null?void 0:O.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":X==="loading"},B.loading):$?z.createElement("div",{className:Za(O==null?void 0:O.loader,(Ot=p==null?void 0:p.classNames)==null?void 0:Ot.loader,"sonner-loader"),"data-visible":X==="loading"},$):z.createElement(Sne,{className:Za(O==null?void 0:O.loader,(Yt=p==null?void 0:p.classNames)==null?void 0:Yt.loader),visible:X==="loading"})}return z.createElement("li",{tabIndex:0,ref:xe,className:Za(P,oe,O==null?void 0:O.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[X],(n=p==null?void 0:p.classNames)==null?void 0:n[X]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:E,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":Z,"data-promise":!!p.promise,"data-swiped":ae,"data-removed":Q,"data-visible":Ee,"data-y-position":Ss,"data-x-position":c7,"data-index":b,"data-front":me,"data-swiping":V,"data-dismissible":be,"data-type":X,"data-invert":u7,"data-swipe-out":de,"data-swipe-direction":ee,"data-expanded":!!(S||j&&Z),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${Q?ge:Kn.current}px`,"--initial-height":j?"auto":`${Re}px`,...N,...p.style},onDragEnd:()=>{q(!1),J(null),Ii.current=null},onPointerDown:tt=>{a1||!be||(st.current=new Date,_e(Kn.current),tt.target.setPointerCapture(tt.pointerId),tt.target.tagName!=="BUTTON"&&(q(!0),Ii.current={x:tt.clientX,y:tt.clientY}))},onPointerUp:()=>{var tt,Ot,Yt,Xa;if(de||!be)return;Ii.current=null;let Ya=Number(((tt=xe.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Cs=Number(((Ot=xe.current)==null?void 0:Ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ql=new Date().getTime()-((Yt=st.current)==null?void 0:Yt.getTime()),Qa=W==="x"?Ya:Cs,Es=Math.abs(Qa)/ql;if(Math.abs(Qa)>=Une||Es>.11){_e(Kn.current),(Xa=p.onDismiss)==null||Xa.call(p,p),ne(W==="x"?Ya>0?"right":"left":Cs>0?"down":"up"),_s(),he(!0),le(!1);return}q(!1),J(null)},onPointerMove:tt=>{var Ot,Yt,Xa,Ya;if(!Ii.current||!be||((Ot=window.getSelection())==null?void 0:Ot.toString().length)>0)return;let Cs=tt.clientY-Ii.current.y,ql=tt.clientX-Ii.current.x,Qa=(Yt=e.swipeDirections)!=null?Yt:Wne(D);!W&&(Math.abs(ql)>1||Math.abs(Cs)>1)&&J(Math.abs(ql)>Math.abs(Cs)?"x":"y");let Es={x:0,y:0};W==="y"?(Qa.includes("top")||Qa.includes("bottom"))&&(Qa.includes("top")&&Cs<0||Qa.includes("bottom")&&Cs>0)&&(Es.y=Cs):W==="x"&&(Qa.includes("left")||Qa.includes("right"))&&(Qa.includes("left")&&ql<0||Qa.includes("right")&&ql>0)&&(Es.x=ql),(Math.abs(Es.x)>0||Math.abs(Es.y)>0)&&le(!0),(Xa=xe.current)==null||Xa.style.setProperty("--swipe-amount-x",`${Es.x}px`),(Ya=xe.current)==null||Ya.style.setProperty("--swipe-amount-y",`${Es.y}px`)}},qn&&!p.jsx?z.createElement("button",{"aria-label":G,"data-disabled":a1,"data-close-button":!0,onClick:a1||!be?()=>{}:()=>{var tt;_s(),(tt=p.onDismiss)==null||tt.call(p,p)},className:Za(O==null?void 0:O.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=B==null?void 0:B.close)!=null?i:Nne):null,p.jsx||_.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:z.createElement(z.Fragment,null,X||p.icon||p.promise?z.createElement("div",{"data-icon":"",className:Za(O==null?void 0:O.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||d7():null,p.type!=="loading"?p.icon||(B==null?void 0:B[X])||bne(X):null):null,z.createElement("div",{"data-content":"",className:Za(O==null?void 0:O.content,(s=p==null?void 0:p.classNames)==null?void 0:s.content)},z.createElement("div",{"data-title":"",className:Za(O==null?void 0:O.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?z.createElement("div",{"data-description":"",className:Za(I,Ie,O==null?void 0:O.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),_.isValidElement(p.cancel)?p.cancel:p.cancel&&cg(p.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:tt=>{var Ot,Yt;cg(p.cancel)&&be&&((Yt=(Ot=p.cancel).onClick)==null||Yt.call(Ot,tt),_s())},className:Za(O==null?void 0:O.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,_.isValidElement(p.action)?p.action:p.action&&cg(p.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||A,onClick:tt=>{var Ot,Yt;cg(p.action)&&((Yt=(Ot=p.action).onClick)==null||Yt.call(Ot,tt),!tt.defaultPrevented&&_s())},className:Za(O==null?void 0:O.actionButton,(d=p==null?void 0:p.classNames)==null?void 0:d.actionButton)},p.action.label):null))};function QO(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Hne(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",s=i?Fne:$ne;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(s)}),n}var Gne=_.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:s,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:f,style:p,visibleToasts:v=Mne,toastOptions:m,dir:g=QO(),gap:y=Bne,loadingIcon:x,icons:b,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:S}=e,[C,E]=z.useState([]),k=z.useMemo(()=>Array.from(new Set([r].concat(C.filter(L=>L.position).map(L=>L.position)))),[C,r]),[N,T]=z.useState([]),[A,P]=z.useState(!1),[I,R]=z.useState(!1),[D,M]=z.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=z.useRef(null),j=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=z.useRef(null),B=z.useRef(!1),G=z.useCallback(L=>{E(W=>{var J;return(J=W.find(ee=>ee.id===L.id))!=null&&J.delete||Lr.dismiss(L.id),W.filter(({id:ee})=>ee!==L.id)})},[]);return z.useEffect(()=>Lr.subscribe(L=>{if(L.dismiss){E(W=>W.map(J=>J.id===L.id?{...J,delete:!0}:J));return}setTimeout(()=>{pB.flushSync(()=>{E(W=>{let J=W.findIndex(ee=>ee.id===L.id);return J!==-1?[...W.slice(0,J),{...W[J],...L},...W.slice(J+1)]:[L,...W]})})})}),[]),z.useEffect(()=>{if(u!=="system"){M(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let L=window.matchMedia("(prefers-color-scheme: dark)");try{L.addEventListener("change",({matches:W})=>{M(W?"dark":"light")})}catch{L.addListener(({matches:J})=>{try{M(J?"dark":"light")}catch(ee){console.error(ee)}})}},[u]),z.useEffect(()=>{C.length<=1&&P(!1)},[C]),z.useEffect(()=>{let L=W=>{var J,ee;a.every(ne=>W[ne]||W.code===ne)&&(P(!0),(J=$.current)==null||J.focus()),W.code==="Escape"&&(document.activeElement===$.current||(ee=$.current)!=null&&ee.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[a]),z.useEffect(()=>{if($.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,B.current=!1)}},[$.current]),z.createElement("section",{ref:t,"aria-label":`${w} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((L,W)=>{var J;let[ee,ne]=L.split("-");return C.length?z.createElement("ol",{key:L,dir:g==="auto"?QO():g,tabIndex:-1,ref:$,className:s,"data-sonner-toaster":!0,"data-theme":D,"data-y-position":ee,"data-lifted":A&&C.length>1&&!i,"data-x-position":ne,style:{"--front-toast-height":`${((J=N[0])==null?void 0:J.height)||0}px`,"--width":`${Lne}px`,"--gap":`${y}px`,...p,...Hne(l,c)},onBlur:Z=>{B.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(B.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||B.current||(B.current=!0,O.current=Z.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{I||P(!1)},onDragEnd:()=>P(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},C.filter(Z=>!Z.position&&W===0||Z.position===L).map((Z,K)=>{var Q,ie;return z.createElement(Vne,{key:Z.id,icons:b,index:K,toast:Z,defaultRichColors:d,duration:(Q=m==null?void 0:m.duration)!=null?Q:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:v,closeButton:(ie=m==null?void 0:m.closeButton)!=null?ie:o,interacting:I,position:L,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:G,toasts:C.filter(V=>V.position==Z.position),heights:N.filter(V=>V.position==Z.position),setHeights:T,expandByDefault:i,gap:y,loadingIcon:x,expanded:A,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const qne=({...e})=>{const{theme:t="system"}=xne();return h.jsx(Gne,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Vi=function(){return Vi=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vi.apply(this,arguments)};function Uf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Kne(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):a(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})}function Xne(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}const Yne=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class UN extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Qne extends UN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class JO extends UN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ZO extends UN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var L2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(L2||(L2={}));class Jne{constructor(t,{headers:n={},customFetch:r,region:a=L2.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=Yne(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Kne(this,arguments,void 0,function*(n,r={}){var a;let i,o;try{const{headers:s,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const v=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let m;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=c):typeof c=="string"?(f["Content-Type"]="text/plain",m=c):typeof FormData<"u"&&c instanceof FormData?m=c:(f["Content-Type"]="application/json",m=JSON.stringify(c)):m=c;let g=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(g=o.signal,u.addEventListener("abort",()=>o.abort())):g=o.signal);const y=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:m,signal:g}).catch(S=>{throw new Qne(S)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new JO(y);if(!y.ok)throw new ZO(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"||b==="application/pdf"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(s){return{data:null,error:s,response:s instanceof ZO||s instanceof JO?s.context:void 0}}finally{i&&clearTimeout(i)}})}}var Zne=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ere=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,s=null,l=null,c=i.status,u=i.statusText;if(i.ok){var d,f;if(n.method!=="HEAD"){var p;const y=await i.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?s=y:s=JSON.parse(y))}const m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),g=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&g&&g.length>1&&(l=parseInt(g[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(o={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,u="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var v;const m=await i.text();try{o=JSON.parse(m),Array.isArray(o)&&i.status===404&&(s=[],o=null,c=200,u="OK")}catch{i.status===404&&m===""?(c=204,u="No Content"):o={message:m}}if(o&&n.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new Zne(o)}return{error:o,data:s,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let s="";const l=i==null?void 0:i.cause;if(l){var c,u,d,f;const v=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",m=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";s=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,s+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${v}`,m&&(s+=` (${m})`),l!=null&&l.stack&&(s+=`
${l.stack}`)}else{var p;s=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},tre=class extends ere{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:i="text"}={}){var o;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${s};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const eR=new RegExp("[,()]");var Mu=class extends tre{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&eR.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&eR.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},nre=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},a=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(s=>/\s/.test(s)&&!i?"":(s==='"'&&(i=!i),s)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Mu({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,s)=>o.concat(Object.keys(s)),[]);if(i.length>0){const o=[...new Set(i)].map(s=>`"${s}"`);this.url.searchParams.set("columns",o.join(","))}}return new Mu({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const s=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(s.length>0){const l=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Mu({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Mu({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Mu({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},rre=class Y5{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new nre(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Y5(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let s;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(s=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(s="POST",c=n);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new Mu({method:s,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class are{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ire="2.89.0",ore=`realtime-js/${ire}`,Q5="1.0.0",sre="2.0.0",tR=Q5,B2=1e4,lre=1e3,cre=100;var $s;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($s||($s={}));var kn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kn||(kn={}));var ui;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ui||(ui={}));var U2;(function(e){e.websocket="websocket"})(U2||(U2={}));var lc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(lc||(lc={}));class ure{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const a=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,r;const a=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var a,i;const o=t.topic,s=(a=t.ref)!==null&&a!==void 0?a:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+o.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(p),m=0;v.setUint8(m++,this.KINDS.userBroadcastPush),v.setUint8(m++,l.length),v.setUint8(m++,s.length),v.setUint8(m++,o.length),v.setUint8(m++,c.length),v.setUint8(m++,d.length),v.setUint8(m++,n),Array.from(l,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(s,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(c,y=>v.setUint8(m++,y.charCodeAt(0))),Array.from(d,y=>v.setUint8(m++,y.charCodeAt(0)));var g=new Uint8Array(p.byteLength+r.byteLength);return g.set(new Uint8Array(p),0),g.set(new Uint8Array(r),p.byteLength),g.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[a,i,o,s,l]=r;return n({join_ref:a,ref:i,topic:o,event:s,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(t.slice(l,l+a));l=l+a;const u=r.decode(t.slice(l,l+i));l=l+i;const d=r.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),p=s===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,v={type:this.BROADCAST_EVENT,event:u,payload:p};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class J5{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ft;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ft||(Ft={}));const nR=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=dre(o,e,t,a),i),{}):{}},dre=(e,t,n,r)=>{const a=t.find(s=>s.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?Z5(i,o):z2(o)},Z5=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return mre(t,n)}switch(e){case Ft.bool:return fre(t);case Ft.float4:case Ft.float8:case Ft.int2:case Ft.int4:case Ft.int8:case Ft.numeric:case Ft.oid:return hre(t);case Ft.json:case Ft.jsonb:return pre(t);case Ft.timestamp:return vre(t);case Ft.abstime:case Ft.date:case Ft.daterange:case Ft.int4range:case Ft.int8range:case Ft.money:case Ft.reltime:case Ft.text:case Ft.time:case Ft.timestamptz:case Ft.timetz:case Ft.tsrange:case Ft.tstzrange:return z2(t);default:return z2(t)}},z2=e=>e,fre=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hre=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pre=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},mre=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(s=>Z5(t,s))}return e},vre=e=>typeof e=="string"?e.replace(" ","T"):e,eU=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class L1{constructor(t,n,r={},a=B2){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var rR;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(rR||(rR={}));class rp{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rp.syncState(this.state,a,i,o),this.pendingDiffs.forEach(l=>{this.state=rp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=rp.syncDiff(this.state,a,i,o),s())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),s={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(g=>g.presence_ref),p=d.map(g=>g.presence_ref),v=u.filter(g=>p.indexOf(g.presence_ref)<0),m=d.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(s[c]=v),m.length>0&&(l[c]=m)}else s[c]=u}),this.syncDiff(i,{joins:s,leaves:l},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(s,l)=>{var c;const u=(c=t[s])!==null&&c!==void 0?c:[];if(t[s]=this.cloneDeep(l),u.length>0){const d=t[s].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);t[s].unshift(...f)}r(s,u,l)}),this.map(o,(s,l)=>{let c=t[s];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[s]=c,a(s,c,l),c.length===0&&delete t[s]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var aR;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(aR||(aR={}));var ap;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ap||(ap={}));var Ao;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ao||(Ao={}));class rd{constructor(t,n={config:{}},r){var a,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new L1(this,ui.join,this.params,this.timeout),this.rejoinTimer=new J5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new rp(this),this.broadcastEndpointURL=eU(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==kn.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[ap.PRESENCE]&&this.bindings[ap.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ao.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ao.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Ao.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(v=m==null?void 0:m.length)!==null&&v!==void 0?v:0,y=[];for(let x=0;x<g;x++){const b=m[x],{filter:{event:w,schema:S,table:C,filter:E}}=b,k=p&&p[x];if(k&&k.event===w&&rd.isFilterValueEqual(k.schema,S)&&rd.isFilterValueEqual(k.table,C)&&rd.isFilterValueEqual(k.filter,E))y.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=kn.errored,t==null||t(Ao.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Ao.SUBSCRIBED);return}}).receive("error",p=>{this.state=kn.errored,t==null||t(Ao.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ao.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===kn.joined&&t===ap.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const c=await s.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,s,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new L1(this,ui.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new L1(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>cre){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:s,error:l,leave:c,join:u}=ui;if(r&&[s,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,m,g;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(m=p.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,m,g,y,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,S=(v=p.filter)===null||v===void 0?void 0:v.event;return w&&((m=n.ids)===null||m===void 0?void 0:m.includes(w))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const w=(x=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:m,table:g,commit_timestamp:y,type:x,errors:b}=v;f=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:y,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(v))}p.callback(f,r)})}_isClosed(){return this.state===kn.closed}_isJoined(){return this.state===kn.joined}_isJoining(){return this.state===kn.joining}_isLeaving(){return this.state===kn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&rd.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ui.close,{},t)}_onError(t){this._on(ui.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=nR(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=nR(t.columns,t.old_record)),n}}const B1=()=>{},ug={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gre=[1e3,2e3,5e3,1e4],yre=1e4,xre=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bre{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=B2,this.transport=null,this.heartbeatIntervalMs=ug.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=B1,this.ref=0,this.reconnectTimer=null,this.vsn=tR,this.logger=B1,this.conn=null,this.sendBuffer=[],this.serializer=new ure,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${U2.websocket}`,this.httpEndpoint=eU(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=are.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $s.connecting:return lc.Connecting;case $s.open:return lc.Open;case $s.closing:return lc.Closing;default:return lc.Closed}}isConnected(){return this.connectionState()===lc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new rd(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(lre,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ug.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,s=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${a} ${s}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===$s.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$s.open||this.conn.readyState===$s.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ui.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([xre],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const i={access_token:n,version:ore};n&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ui.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new J5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ug.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,s,l,c,u,d,f,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:B2,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:ug.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=t==null?void 0:t.heartbeatCallback)!==null&&s!==void 0?s:B1,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:tR,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:v=>gre[v-1]||yre,this.vsn){case Q5:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(v,m)=>m(JSON.stringify(v)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(v,m)=>m(JSON.parse(v));break;case sre:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Wp=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function wre(e,t,n){const r=new URL(t,e);if(n)for(const[a,i]of Object.entries(n))i!==void 0&&r.searchParams.set(a,i);return r.toString()}async function Sre(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function _re(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:a,body:i,headers:o}){const s=wre(e.baseUrl,r,a),l=await Sre(e.auth),c=await t(s,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&u?JSON.parse(u):u;if(!c.ok){const p=d?f:void 0,v=p==null?void 0:p.error;throw new Wp((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function dg(e){return e.join("")}var Cre=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:dg(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dg(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dg(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dg(e.namespace)}`}),!0}catch(t){if(t instanceof Wp&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Wp&&n.status===409)return;throw n}}};function bu(e){return e.join("")}var Ere=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bu(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Wp&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Wp&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},kre=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=_re({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Cre(this.client,t),this.tableOps=new Ere(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},kb=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Nre=class extends kb{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},W2=class extends kb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const zN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Tre=()=>Response,V2=e=>{if(Array.isArray(e))return e.map(n=>V2(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=V2(r)}),t},Are=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Pre=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function jre(e,t){if(Vp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ore(e){var t=jre(e,"string");return Vp(t)=="symbol"?t:t+""}function Rre(e,t,n){return(t=Ore(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iR(Object(n),!0).forEach(function(r){Rre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const U1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Ire=async(e,t,n)=>{e instanceof await Tre()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const a=e.status||500,i=(r==null?void 0:r.statusCode)||a+"";t(new Nre(U1(r),a,i))}).catch(r=>{t(new W2(U1(r),r))}):t(new W2(U1(e),e))},Dre=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(Are(r)?(a.headers=Xe({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Xe(Xe({},a),n))};async function lv(e,t,n,r,a,i){return new Promise((o,s)=>{e(n,Dre(t,r,a,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ire(l,s,r))})}async function Hp(e,t,n,r){return lv(e,"GET",t,n,r)}async function oi(e,t,n,r,a){return lv(e,"POST",t,r,a,n)}async function H2(e,t,n,r,a){return lv(e,"PUT",t,r,a,n)}async function Mre(e,t,n,r){return lv(e,"HEAD",t,Xe(Xe({},n),{},{noResolveJson:!0}),r)}async function WN(e,t,n,r,a){return lv(e,"DELETE",t,r,a,n)}var $re=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zt(t))return{data:null,error:t};throw t}}};let tU;tU=Symbol.toStringTag;var Fre=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[tU]="BlobDownloadBuilder",this.promise=null}asStream(){return new $re(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zt(t))return{data:null,error:t};throw t}}};const Lre={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Bre=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=zN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var a=this;try{let i;const o=Xe(Xe({},oR),r);let s=Xe(Xe({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",a.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(l))):(i=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=a.toBase64(a.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(s=Xe(Xe({},s),r.headers));const c=a._removeEmptyFolders(t),u=a._getFinalPath(c),d=await(e=="PUT"?H2:oi)(a.fetch,`${a.url}/object/${u}`,i,Xe({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Zt(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),s=new URL(a.url+`/object/upload/sign/${o}`);s.searchParams.set("token",t);try{let l;const c=Xe({upsert:oR.upsert},r),u=Xe(Xe({},a.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(await H2(a.fetch,s.toString(),l,{headers:u})).Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Zt(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const a=Xe({},n.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await oi(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(n.url+i.url),s=o.searchParams.get("token");if(!s)throw new kb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await oi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}}async copy(e,t,n){var r=this;try{return{data:{path:(await oi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var r=this;try{let a=r._getFinalPath(e),i=await oi(r.fetch,`${r.url}/object/sign/${a}`,Xe({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var r=this;try{const a=await oi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Xe(Xe({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=r?`?${r}`:"",i=this._getFinalPath(e),o=()=>Hp(this.fetch,`${this.url}/${n}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Fre(o,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:V2(await Hp(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Mre(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Zt(r)&&r instanceof W2){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&r.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${s}`)}}}async remove(e){var t=this;try{return{data:await WN(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const a=Xe(Xe(Xe({},Lre),t),{},{prefix:e||""});return{data:await oi(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},n),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const r=Xe({},e);return{data:await oi(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const nU="2.89.0",rU={"X-Client-Info":`storage-js/${nU}`};var Ure=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const a=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Xe(Xe({},rU),t),this.fetch=zN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Hp(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Hp(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await oi(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await H2(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await oi(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await WN(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},zre=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xe(Xe({},rU),t),this.fetch=zN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await oi(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),a=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Hp(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await WN(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!Pre(e))throw new kb("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new kre({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...s)=>{try{return{data:await o.apply(a,s),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const VN={"X-Client-Info":`storage-js/${nU}`,"Content-Type":"application/json"};var aU=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function la(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var z1=class extends aU{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Wre=class extends aU{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const HN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Vre=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sR=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Hre=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new z1(sR(i),r,o))}).catch(()=>{const i=r+"";t(new z1(a.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new z1(a.statusText||`HTTP ${r} error`,r,i))}}else t(new Wre(sR(e),e))},Gre=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(Vre(r)?(a.headers=Xe({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Xe(Xe({},a),n)):a};async function qre(e,t,n,r,a,i){return new Promise((o,s)=>{e(n,Gre(t,r,a,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Hre(l,s,r))})}async function ca(e,t,n,r,a){return qre(e,"POST",t,r,a,n)}var Kre=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xe(Xe({},VN),t),this.fetch=HN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await ca(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(la(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await ca(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(la(r))return{data:null,error:r};throw r}}},Xre=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xe(Xe({},VN),t),this.fetch=HN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ca(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ca(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ca(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}},Yre=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xe(Xe({},VN),t),this.fetch=HN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await ca(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await ca(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(la(n))return{data:null,error:n};throw n}}},Qre=class extends Yre{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Jre(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Jre=class extends Kre{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Zre(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Zre=class extends Xre{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Xe(Xe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},eae=class extends Ure{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Bre(this.url,this.headers,e,this.fetch)}get vectors(){return new Qre(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zre(this.url+"/iceberg",this.headers,this.fetch)}};const iU="2.89.0",$u=30*1e3,G2=3,W1=G2*$u,tae="http://localhost:9999",nae="supabase.auth.token",rae={"X-Client-Info":`gotrue-js/${iU}`},q2="X-Supabase-Api-Version",oU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aae=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iae=10*60*1e3;class Gp extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class oae extends Gp{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function sae(e){return Ve(e)&&e.name==="AuthApiError"}class cc extends Gp{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class fs extends Gp{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class ta extends fs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lae(e){return Ve(e)&&e.name==="AuthSessionMissingError"}class wu extends fs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fg extends fs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hg extends fs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cae(e){return Ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class lR extends fs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uae extends fs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class K2 extends fs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function V1(e){return Ve(e)&&e.name==="AuthRetryableFetchError"}class cR extends fs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class X2 extends fs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const i0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uR=` 	
\r=`.split(""),dae=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<uR.length;t+=1)e[uR[t].charCodeAt(0)]=-2;for(let t=0;t<i0.length;t+=1)e[i0[t].charCodeAt(0)]=t;return e})();function dR(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(i0[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(i0[r]),t.queuedBits-=6}}function sU(e,t,n){const r=dae[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fR(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{pae(o,r,n)};for(let o=0;o<e.length;o+=1)sU(e.charCodeAt(o),a,i);return t.join("")}function fae(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function hae(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}fae(r,t)}}function pae(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Sd(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)sU(e.charCodeAt(a),n,r);return new Uint8Array(t)}function mae(e){const t=[];return hae(e,n=>t.push(n)),new Uint8Array(t)}function vc(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>dR(a,n,r)),dR(null,n,r),t.join("")}function vae(e){return Math.round(Date.now()/1e3)+e}function gae(){return Symbol("auth-callback")}const Yn=()=>typeof window<"u"&&typeof document<"u",Kl={tested:!1,writable:!1},lU=()=>{if(!Yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kl.tested)return Kl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kl.tested=!0,Kl.writable=!0}catch{Kl.tested=!0,Kl.writable=!1}return Kl.writable};function yae(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const cU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),xae=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fu=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Xl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Xn=async(e,t)=>{await e.removeItem(t)};class Nb{constructor(){this.promise=new Nb.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Nb.promiseConstructor=Promise;function H1(e){const t=e.split(".");if(t.length!==3)throw new X2("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!aae.test(t[r]))throw new X2("JWT not in base64url format");return{header:JSON.parse(fR(t[0])),payload:JSON.parse(fR(t[1])),signature:Sd(t[2]),raw:{header:t[0],payload:t[1]}}}async function bae(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wae(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Sae(e){return("0"+e.toString(16)).substr(-2)}function _ae(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,Sae).join("")}async function Cae(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Eae(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Cae(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Su(e,t,n=!1){const r=_ae();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Fu(e,`${t}-code-verifier`,a);const i=await Eae(r);return[i,r===i?"plain":"s256"]}const kae=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nae(e){const t=e.headers.get(q2);if(!t||!t.match(kae))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Tae(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Aae(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Pae=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _u(e){if(!Pae.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function G1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jae(e,t){return new Proxy(e,{get:(n,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,a)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,a)}})}function hR(e){return JSON.parse(JSON.stringify(e))}const tc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oae=[502,503,504];async function pR(e){var t;if(!xae(e))throw new K2(tc(e),0);if(Oae.includes(e.status))throw new K2(tc(e),e.status);let n;try{n=await e.json()}catch(i){throw new cc(tc(i),i)}let r;const a=Nae(e);if(a&&a.getTime()>=oU["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new cR(tc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ta}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new cR(tc(n),e.status,n.weak_password.reasons);throw new oae(tc(n),e.status||500,r)}const Rae=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Ke(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[q2]||(i[q2]=oU["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Iae(e,t,n+s,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Iae(e,t,n,r,a,i){const o=Rae(t,r,a,i);let s;try{s=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new K2(tc(l),0)}if(s.ok||await pR(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await pR(l)}}function ni(e){var t;let n=null;$ae(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=vae(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function mR(e){const t=ni(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Dae(e){return{data:e,error:null}}function Mae(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=Uf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function vR(e){return e}function $ae(e){return e.access_token&&e.refresh_token&&e.expires_in}const q1=["global","local","others"];class Fae{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=cU(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=q1[0]){if(q1.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${q1.join(", ")}`);try{return await Ke(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Uf(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Mae,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ke(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:vR});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);c[`${g}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Ve(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){_u(t);try{return await Ke(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){_u(t);try{return await Ke(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Us})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){_u(t);try{return await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){_u(t.userId);try{const{data:n,error:r}=await Ke(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(t){_u(t.userId),_u(t.id);try{return{data:await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,a,i,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:vR});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);c[`${g}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Ve(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await Ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}function gR(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Cu={debug:!!(globalThis&&lU()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uU extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Lae extends uU{}async function Bae(e,t,n){Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Lae(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Uae(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function dU(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function zae(e){return parseInt(e,16)}function Wae(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Vae(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:s,requestId:l,resources:c,scheme:u,uri:d,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=dU(e.address),v=u?`${u}://${r}`:r,m=e.statement?`${e.statement}
`:"",g=`${v} wants you to sign in with your Ethereum account:
${p}

${m}`;let y=`URI: ${d}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),s&&(y+=`
Not Before: ${s.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}y+=x}return`${g}
${y}`}class xn extends Error{constructor({message:t,code:n,cause:r,name:a}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=a??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class o0 extends xn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function Hae({error:e,options:t}){var n,r,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new xn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new xn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new xn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new xn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new xn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new xn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new xn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new xn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(fU(o)){if(i.rp.id!==o)return new xn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new xn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new xn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Gae({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new xn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new xn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(fU(r)){if(n.rpId!==r)return new xn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new xn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class qae{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Kae=new qae;function Xae(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=Uf(e,["challenge","user","excludeCredentials"]),i=Sd(t).buffer,o=Object.assign(Object.assign({},n),{id:Sd(n.id).buffer}),s=Object.assign(Object.assign({},a),{challenge:i,user:o});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];s.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Sd(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function Yae(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Uf(e,["challenge","allowCredentials"]),a=Sd(t).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const s=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},s),{id:Sd(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return i}function Qae(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vc(new Uint8Array(e.response.attestationObject)),clientDataJSON:vc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Jae(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vc(new Uint8Array(a.authenticatorData)),clientDataJSON:vc(new Uint8Array(a.clientDataJSON)),signature:vc(new Uint8Array(a.signature)),userHandle:a.userHandle?vc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fU(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function yR(){var e,t;return!!(Yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Zae(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new o0("Browser returned unexpected credential type",t)}:{data:null,error:new o0("Empty credential response",t)}}catch(t){return{data:null,error:Hae({error:t,options:e})}}}async function eie(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new o0("Browser returned unexpected credential type",t)}:{data:null,error:new o0("Empty credential response",t)}}catch(t){return{data:null,error:Gae({error:t,options:e})}}}const tie={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nie={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function s0(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const s=r[i];t(s)?r[i]=s0(s,o):r[i]=s0(o)}else r[i]=o}return r}function rie(e,t){return s0(tie,e,t||{})}function aie(e,t){return s0(nie,e,t||{})}class iie{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:a},i){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:s};const l=a??Kae.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=rie(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await Zae({publicKey:c,signal:l});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=aie(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await eie(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new cc("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new Gp("rpId is required for WebAuthn authentication")};try{if(!yR())return{data:null,error:new cc("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:i});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new cc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new Gp("rpId is required for WebAuthn registration")};try{if(!yR())return{data:null,error:new cc("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:s};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new cc("Unexpected error in register",o)}}}}Uae();const oie={url:tae,storageKey:nae,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rae,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function xR(e,t,n){return await n()}const Eu={};class qp{get jwks(){var t,n;return(n=(t=Eu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Eu[this.storageKey]=Object.assign(Object.assign({},Eu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Eu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Eu[this.storageKey]=Object.assign(Object.assign({},Eu[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},oie),t);if(this.storageKey=i.storageKey,this.instanceID=(n=qp.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,qp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Yn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Fae({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=cU(i.fetch),this.lock=i.lock||xR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Yn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Bae:this.lock=xR,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iie(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:lU()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gR(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=gR(this.memoryStorage)),Yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${iU}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Yn()&&(n=yae(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Yn()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),cae(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:s}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?this._returnResult({error:n}):this._returnResult({error:new cc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ni}),{data:o,error:s}=i;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:u,password:d,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Su(this.storage,this.storageKey)),i=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:ni})}else if("phone"in t){const{phone:u,password:d,options:f}=t;i=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ni})}else throw new fg("You must provide either an email or phone number and a password");const{data:o,error:s}=i;if(s||!o)return await Xn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:s}=t;n=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:mR})}else if("phone"in t){const{phone:i,password:o,options:s}=t;n=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:mR})}else throw new fg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const i=new wu;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,a,i,o,s,l,c,u,d,f;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:m,wallet:g,statement:y,options:x}=t;let b;if(Yn())if(typeof g=="object")b=g;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")b=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=g}const w=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),S=await b.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=dU(S[0]);let E=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const N=await b.request({method:"eth_chainId"});E=zae(N)}const k={domain:w.host,address:C,statement:y,uri:w.href,version:"1",chainId:E,nonce:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=Vae(k),v=await b.request({method:"personal_sign",params:[Wae(p),C]})}try{const{data:m,error:g}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ni});if(g)throw g;if(!m||!m.session||!m.user){const y=new wu;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:g})}catch(m){if(Ve(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var n,r,a,i,o,s,l,c,u,d,f,p;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:g,wallet:y,statement:x,options:b}=t;let w;if(Yn())if(typeof y=="object")w=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))w=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const S=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const C=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),x?{statement:x}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:g,error:y}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:vc(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ni});if(y)throw y;if(!g||!g.session||!g.user){const x=new wu;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(Ve(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(t){const n=await Xl(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new uae;const{data:i,error:o}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ni});if(await Xn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const s=new wu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,s=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ni}),{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new wu;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:s,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Su(this.storage,this.storageKey));const{error:d}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:s,options:l}=t,{data:c,error:u}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(a=l==null?void 0:l.data)!==null&&a!==void 0?a:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new fg("You must provide either an email or phone number.")}catch(s){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:s}=await Ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ni});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,r,a,i,o;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Su(this.storage,this.storageKey));const c=await Ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:Dae});return!((i=c.data)===null||i===void 0)&&i.url&&Yn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(s){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ta;const{error:a}=await Ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await Ke(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:s}=await Ke(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s})}throw new fg("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Xl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<W1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=G1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=jae(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async n=>{var r,a,i;const{data:o,error:s}=n;if(s)throw s;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(n){if(Ve(n))return lae(n)&&(await this._removeSession(),await Xn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new ta;const o=a.session;let s=null,l=null;this.flowType==="pkce"&&t.email!=null&&([s,l]=await Su(this.storage,this.storageKey));const{data:c,error:u}=await Ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Us});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ta;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=H1(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{data:s,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};i=s}else{const{data:s,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:s}=n;if(s)throw s;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ta;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Yn())throw new hg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new hg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new lR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lR("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:s,expires_at:l,token_type:c}=t;if(!i||!s||!o||!c)throw new hg("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=$u&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const v=f-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:m,error:g}=await this._getUser(i);if(g)throw g;const y={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:s}=await this.admin.signOut(o,t);if(s&&!(sae(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return t!=="others"&&(await this._removeSession(),await Xn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=gae(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Su(this.storage,this.storageKey,!0));try{return await Ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,s,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ke(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Yn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:o,provider:s,token:l,access_token:c,nonce:u}=t,d=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ni}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new wu}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(a){if(await Xn(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await Ke(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wae(async a=>(a>0&&await bae(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ni})),(a,i)=>{const o=200*Math.pow(2,a);return i&&V1(i)&&Date.now()+o-r<$u})}catch(r){if(this._debug(n,"error",r),Ve(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Xl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Fu(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:G1()}else if(a&&!a.user&&!a.user){const o=await Xl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Xn(this.storage,this.storageKey+"-user"),await Fu(this.storage,this.storageKey,a)):a.user=G1()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<W1;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${W1}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),V1(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(a.access_token);!s&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Nb;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ta;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const s={data:i.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(i){if(this._debug(a,"error",i),Ve(i)){const o={data:null,error:i};return V1(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let s=0;s<i.length;s+=1)console.error(i[s]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Xn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fu(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=hR(a);await Fu(this.storage,this.storageKey,i)}else{const a=hR(n);await Fu(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Xn(this.storage,this.storageKey),await Xn(this.storage,this.storageKey+"-code-verifier"),await Xn(this.storage,this.storageKey+"-user"),this.userStorage&&await Xn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),$u);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/$u);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${$u}ms, refresh threshold is ${G2} ticks`),a<=G2&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof uU)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Su(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(s.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?this._returnResult({data:null,error:i}):await Ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await Ke(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((a=l==null?void 0:l.totp)===null||a===void 0)&&a.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Qae(t.webauthn.credential_response):Jae(t.webauthn.credential_response)})}:{code:t.code}),{data:s,error:l}=await Ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await Ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Xae(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Yae(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=H1(r.access_token);let o=null;i.aal&&(o=i.aal);let s=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(s="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await Ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ta})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ta});const o=await Ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&Yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ta});const o=await Ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&Yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Ke(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ta})})}catch(t){if(Ve(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?(await Ke(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ta})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(s=>s.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(s=>s.kid===t),r&&this.jwks_cached_at+iae>a)return r;const{data:i,error:o}=await Ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(s=>s.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});r=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:s,payload:l}}=H1(r);n!=null&&n.allowExpired||Tae(i.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=Aae(a.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,mae(`${s}.${l}`)))throw new X2("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}}qp.nextInstanceID={};const sie=qp,lie="2.89.0";let Fh="";typeof Deno<"u"?Fh="deno":typeof document<"u"?Fh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fh="react-native":Fh="node";const cie={"X-Client-Info":`supabase-js-${Fh}/${lie}`},uie={headers:cie},die={schema:"public"},fie={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hie={};function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function pie(e,t){if(Kp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mie(e){var t=pie(e,"string");return Kp(t)=="symbol"?t:t+""}function vie(e,t,n){return(t=mie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bR(Object(n),!0).forEach(function(r){vie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const gie=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yie=()=>Headers,xie=(e,t,n)=>{const r=gie(n),a=yie();return async(i,o)=>{var s;const l=(s=await t())!==null&&s!==void 0?s:e;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,hn(hn({},o),{},{headers:c}))}};function bie(e){return e.endsWith("/")?e:e+"/"}function wie(e,t){var n,r;const{db:a,auth:i,realtime:o,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,f={db:hn(hn({},l),a),auth:hn(hn({},c),i),realtime:hn(hn({},u),o),storage:{},global:hn(hn(hn({},d),s),{},{headers:hn(hn({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Sie(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(bie(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var _ie=class extends sie{constructor(e){super(e)}},Cie=class{constructor(e,t,n){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const i=Sie(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,s={db:die,realtime:hie,auth:hn(hn({},fie),{},{storageKey:o}),global:uie},l=wie(n??{},s);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=l.global.headers)!==null&&a!==void 0?a:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=xie(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(hn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new rre(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new eae(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Jne(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:i,flowType:o,lock:s,debug:l,throwOnError:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _ie({url:this.authUrl.href,headers:hn(hn({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,flowType:o,lock:s,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new bre(this.realtimeUrl.href,hn(hn({},e),{},{params:hn(hn({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Eie=(e,t,n)=>new Cie(e,t,n);function kie(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}kie()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nie="https://egfxtyqndejaniczctup.supabase.co",Tie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVnZnh0eXFuZGVqYW5pY3pjdHVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcyNDY0NDcsImV4cCI6MjA4MjgyMjQ0N30.CsCYKbpn7ngnZ5uZ0Hks1G3xFj9z_NqK5rczeQKuX4E",ze=Eie(Nie,Tie,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),GN=_.createContext({});function qN(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const hU=typeof window<"u",pU=hU?_.useLayoutEffect:_.useEffect,Tb=_.createContext(null);function KN(e,t){e.indexOf(t)===-1&&e.push(t)}function XN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ho=(e,t,n)=>n>t?t:n<e?e:n;let Ab=()=>{},tf=()=>{};const es={},mU=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function vU(e){return typeof e=="object"&&e!==null}const gU=e=>/^0[^.\s]+$/u.test(e);function YN(e){let t;return()=>(t===void 0&&(t=e()),t)}const La=e=>e,Aie=(e,t)=>n=>t(e(n)),cv=(...e)=>e.reduce(Aie),Xp=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class QN{constructor(){this.subscriptions=[]}add(t){return KN(this.subscriptions,t),()=>XN(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const no=e=>e*1e3,Ia=e=>e/1e3;function yU(e,t){return t?e*(1e3/t):0}const xU=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Pie=1e-7,jie=12;function Oie(e,t,n,r,a){let i,o,s=0;do o=t+(n-t)/2,i=xU(o,r,a)-e,i>0?n=o:t=o;while(Math.abs(i)>Pie&&++s<jie);return o}function uv(e,t,n,r){if(e===t&&n===r)return La;const a=i=>Oie(i,0,1,e,n);return i=>i===0||i===1?i:xU(a(i),t,r)}const bU=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wU=e=>t=>1-e(1-t),SU=uv(.33,1.53,.69,.99),JN=wU(SU),_U=bU(JN),CU=e=>(e*=2)<1?.5*JN(e):.5*(2-Math.pow(2,-10*(e-1))),ZN=e=>1-Math.sin(Math.acos(e)),EU=wU(ZN),kU=bU(ZN),Rie=uv(.42,0,1,1),Iie=uv(0,0,.58,1),NU=uv(.42,0,.58,1),Die=e=>Array.isArray(e)&&typeof e[0]!="number",TU=e=>Array.isArray(e)&&typeof e[0]=="number",wR={linear:La,easeIn:Rie,easeInOut:NU,easeOut:Iie,circIn:ZN,circInOut:kU,circOut:EU,backIn:JN,backInOut:_U,backOut:SU,anticipate:CU},Mie=e=>typeof e=="string",SR=e=>{if(TU(e)){tf(e.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,r,a]=e;return uv(t,n,r,a)}else if(Mie(e))return tf(wR[e]!==void 0,`Invalid easing type '${e}'`,"invalid-easing-type"),wR[e];return e},pg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],_R={value:null,addProjectionMetrics:null};function $ie(e,t){let n=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){o.has(d)&&(u.schedule(d),e()),l++,d(s)}const u={schedule:(d,f=!1,p=!1)=>{const m=p&&a?n:r;return f&&o.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(s=d,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(c),t&&_R.value&&_R.value.frameloop[t].push(l),l=0,n.clear(),a=!1,i&&(i=!1,u.process(d))}};return u}const Fie=40;function AU(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=pg.reduce((b,w)=>(b[w]=$ie(i,t?w:void 0),b),{}),{setup:s,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:f,render:p,postRender:v}=o,m=()=>{const b=es.useManualTiming?a.timestamp:performance.now();n=!1,es.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(b-a.timestamp,Fie),1)),a.timestamp=b,a.isProcessing=!0,s.process(a),l.process(a),c.process(a),u.process(a),d.process(a),f.process(a),p.process(a),v.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,a.isProcessing||e(m)};return{schedule:pg.reduce((b,w)=>{const S=o[w];return b[w]=(C,E=!1,k=!1)=>(n||g(),S.schedule(C,E,k)),b},{}),cancel:b=>{for(let w=0;w<pg.length;w++)o[pg[w]].cancel(b)},state:a,steps:o}}const{schedule:Xt,cancel:Cl,state:Zn,steps:K1}=AU(typeof requestAnimationFrame<"u"?requestAnimationFrame:La,!0);let my;function Lie(){my=void 0}const Or={now:()=>(my===void 0&&Or.set(Zn.isProcessing||es.useManualTiming?Zn.timestamp:performance.now()),my),set:e=>{my=e,queueMicrotask(Lie)}},PU=e=>t=>typeof t=="string"&&t.startsWith(e),jU=PU("--"),Bie=PU("var(--"),eT=e=>Bie(e)?Uie.test(e.split("/*")[0].trim()):!1,Uie=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function CR(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const zf={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Yp={...zf,transform:e=>ho(0,1,e)},mg={...zf,default:1},ip=e=>Math.round(e*1e5)/1e5,tT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zie(e){return e==null}const Wie=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nT=(e,t)=>n=>!!(typeof n=="string"&&Wie.test(n)&&n.startsWith(e)||t&&!zie(n)&&Object.prototype.hasOwnProperty.call(n,t)),OU=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,o,s]=r.match(tT);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},Vie=e=>ho(0,255,e),X1={...zf,transform:e=>Math.round(Vie(e))},gc={test:nT("rgb","red"),parse:OU("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+X1.transform(e)+", "+X1.transform(t)+", "+X1.transform(n)+", "+ip(Yp.transform(r))+")"};function Hie(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Y2={test:nT("#"),parse:Hie,transform:gc.transform},dv=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Os=dv("deg"),ro=dv("%"),Ne=dv("px"),Gie=dv("vh"),qie=dv("vw"),ER={...ro,parse:e=>ro.parse(e)/100,transform:e=>ro.transform(e*100)},ad={test:nT("hsl","hue"),parse:OU("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ro.transform(ip(t))+", "+ro.transform(ip(n))+", "+ip(Yp.transform(r))+")"},bn={test:e=>gc.test(e)||Y2.test(e)||ad.test(e),parse:e=>gc.test(e)?gc.parse(e):ad.test(e)?ad.parse(e):Y2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?gc.transform(e):ad.transform(e),getAnimatableNone:e=>{const t=bn.parse(e);return t.alpha=0,bn.transform(t)}},Kie=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Xie(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(tT))==null?void 0:t.length)||0)+(((n=e.match(Kie))==null?void 0:n.length)||0)>0}const RU="number",IU="color",Yie="var",Qie="var(",kR="${}",Jie=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qp(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const s=t.replace(Jie,l=>(bn.test(l)?(r.color.push(i),a.push(IU),n.push(bn.parse(l))):l.startsWith(Qie)?(r.var.push(i),a.push(Yie),n.push(l)):(r.number.push(i),a.push(RU),n.push(parseFloat(l))),++i,kR)).split(kR);return{values:n,split:s,indexes:r,types:a}}function DU(e){return Qp(e).values}function MU(e){const{split:t,types:n}=Qp(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const s=n[o];s===RU?i+=ip(a[o]):s===IU?i+=bn.transform(a[o]):i+=a[o]}return i}}const Zie=e=>typeof e=="number"?0:bn.test(e)?bn.getAnimatableNone(e):e;function eoe(e){const t=DU(e);return MU(e)(t.map(Zie))}const El={test:Xie,parse:DU,createTransformer:MU,getAnimatableNone:eoe};function Y1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function toe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;a=Y1(l,s,e+1/3),i=Y1(l,s,e),o=Y1(l,s,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function l0(e,t){return n=>n>0?t:e}const rn=(e,t,n)=>e+(t-e)*n,Q1=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},noe=[Y2,gc,ad],roe=e=>noe.find(t=>t.test(e));function NR(e){const t=roe(e);if(Ab(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let n=t.parse(e);return t===ad&&(n=toe(n)),n}const TR=(e,t)=>{const n=NR(e),r=NR(t);if(!n||!r)return l0(e,t);const a={...n};return i=>(a.red=Q1(n.red,r.red,i),a.green=Q1(n.green,r.green,i),a.blue=Q1(n.blue,r.blue,i),a.alpha=rn(n.alpha,r.alpha,i),gc.transform(a))},Q2=new Set(["none","hidden"]);function aoe(e,t){return Q2.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function ioe(e,t){return n=>rn(e,t,n)}function rT(e){return typeof e=="number"?ioe:typeof e=="string"?eT(e)?l0:bn.test(e)?TR:loe:Array.isArray(e)?$U:typeof e=="object"?bn.test(e)?TR:ooe:l0}function $U(e,t){const n=[...e],r=n.length,a=e.map((i,o)=>rT(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=a[o](i);return n}}function ooe(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=rT(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function soe(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],s=e.values[o]??0;n[a]=s,r[i]++}return n}const loe=(e,t)=>{const n=El.createTransformer(t),r=Qp(e),a=Qp(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Q2.has(e)&&!a.values.length||Q2.has(t)&&!r.values.length?aoe(e,t):cv($U(soe(r,a),a.values),n):(Ab(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),l0(e,t))};function FU(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?rn(e,t,n):rT(e)(e,t)}const coe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Xt.update(t,n),stop:()=>Cl(t),now:()=>Zn.isProcessing?Zn.timestamp:Or.now()}},LU=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},c0=2e4;function aT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<c0;)t+=n,r=e.next(t);return t>=c0?1/0:t}function uoe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(aT(r),c0);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:Ia(a)}}const doe=5;function BU(e,t,n){const r=Math.max(t-doe,0);return yU(n-e(r),t-r)}const en={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},J1=.001;function foe({duration:e=en.duration,bounce:t=en.bounce,velocity:n=en.velocity,mass:r=en.mass}){let a,i;Ab(e<=no(en.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-t;o=ho(en.minDamping,en.maxDamping,o),e=ho(en.minDuration,en.maxDuration,Ia(e)),o<1?(a=c=>{const u=c*o,d=u*e,f=u-n,p=J2(c,o),v=Math.exp(-d);return J1-f/p*v},i=c=>{const d=c*o*e,f=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*e,v=Math.exp(-d),m=J2(Math.pow(c,2),o);return(-a(c)+J1>0?-1:1)*((f-p)*v)/m}):(a=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-J1+u*d},i=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const s=5/e,l=poe(a,i,s);if(e=no(e),isNaN(l))return{stiffness:en.stiffness,damping:en.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:e}}}const hoe=12;function poe(e,t,n){let r=n;for(let a=1;a<hoe;a++)r=r-e(r)/t(r);return r}function J2(e,t){return e*Math.sqrt(1-t*t)}const moe=["duration","bounce"],voe=["stiffness","damping","mass"];function AR(e,t){return t.some(n=>e[n]!==void 0)}function goe(e){let t={velocity:en.velocity,stiffness:en.stiffness,damping:en.damping,mass:en.mass,isResolvedFromDuration:!1,...e};if(!AR(e,voe)&&AR(e,moe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*ho(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:en.mass,stiffness:a,damping:i}}else{const n=foe(e);t={...t,...n,mass:en.mass},t.isResolvedFromDuration=!0}return t}function u0(e=en.visualDuration,t=en.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],s={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=goe({...n,velocity:-Ia(n.velocity||0)}),v=f||0,m=c/(2*Math.sqrt(l*u)),g=o-i,y=Ia(Math.sqrt(l/u)),x=Math.abs(g)<5;r||(r=x?en.restSpeed.granular:en.restSpeed.default),a||(a=x?en.restDelta.granular:en.restDelta.default);let b;if(m<1){const S=J2(y,m);b=C=>{const E=Math.exp(-m*y*C);return o-E*((v+m*y*g)/S*Math.sin(S*C)+g*Math.cos(S*C))}}else if(m===1)b=S=>o-Math.exp(-y*S)*(g+(v+y*g)*S);else{const S=y*Math.sqrt(m*m-1);b=C=>{const E=Math.exp(-m*y*C),k=Math.min(S*C,300);return o-E*((v+m*y*g)*Math.sinh(k)+S*g*Math.cosh(k))/S}}const w={calculatedDuration:p&&d||null,next:S=>{const C=b(S);if(p)s.done=S>=d;else{let E=S===0?v:0;m<1&&(E=S===0?no(v):BU(b,S,C));const k=Math.abs(E)<=r,N=Math.abs(o-C)<=a;s.done=k&&N}return s.value=s.done?o:C,s},toString:()=>{const S=Math.min(aT(w),c0),C=LU(E=>w.next(S*E).value,S,30);return S+"ms "+C},toTransition:()=>{}};return w}u0.applyToOptions=e=>{const t=uoe(e,100,u0);return e.ease=t.ease,e.duration=no(t.duration),e.type="keyframes",e};function Z2({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:s,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],f={done:!1,value:d},p=k=>s!==void 0&&k<s||l!==void 0&&k>l,v=k=>s===void 0?l:l===void 0||Math.abs(s-k)<Math.abs(l-k)?s:l;let m=n*t;const g=d+m,y=o===void 0?g:o(g);y!==g&&(m=y-d);const x=k=>-m*Math.exp(-k/r),b=k=>y+x(k),w=k=>{const N=x(k),T=b(k);f.done=Math.abs(N)<=c,f.value=f.done?y:T};let S,C;const E=k=>{p(f.value)&&(S=k,C=u0({keyframes:[f.value,v(f.value)],velocity:BU(b,k,f.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:k=>{let N=!1;return!C&&S===void 0&&(N=!0,w(k),E(k)),S!==void 0&&k>=S?C.next(k-S):(!N&&w(k),f)}}}function yoe(e,t,n){const r=[],a=n||es.mix||FU,i=e.length-1;for(let o=0;o<i;o++){let s=a(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||La:t;s=cv(l,s)}r.push(s)}return r}function xoe(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(tf(i===t.length,"Both input and output ranges must be the same length","range-length"),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=yoe(t,r,a),l=s.length,c=u=>{if(o&&u<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=Xp(e[d],e[d+1],u);return s[d](f)};return n?u=>c(ho(e[0],e[i-1],u)):c}function boe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Xp(0,t,r);e.push(rn(n,1,a))}}function woe(e){const t=[0];return boe(t,e.length-1),t}function Soe(e,t){return e.map(n=>n*t)}function _oe(e,t){return e.map(()=>t||NU).splice(0,e.length-1)}function op({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=Die(r)?r.map(SR):SR(r),i={done:!1,value:t[0]},o=Soe(n&&n.length===t.length?n:woe(t),e),s=xoe(o,t,{ease:Array.isArray(a)?a:_oe(t,a)});return{calculatedDuration:e,next:l=>(i.value=s(l),i.done=l>=e,i)}}const Coe=e=>e!==null;function iT(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(Coe),s=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Eoe={decay:Z2,inertia:Z2,tween:op,keyframes:op,spring:u0};function UU(e){typeof e.type=="string"&&(e.type=Eoe[e.type])}class oT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const koe=e=>e/100;class sT extends oT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==Or.now()&&this.tick(Or.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;UU(t);const{type:n=op,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:s}=t;const l=n||op;l!==op&&typeof s[0]!="number"&&(this.mixKeyframes=cv(koe,FU(s[0],s[1])),s=[0,100]);const c=l({...t,keyframes:s});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...s].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=aT(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:s,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:f,repeatDelay:p,type:v,onUpdate:m,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let b=this.currentTime,w=r;if(d){const k=Math.min(this.currentTime,a)/s;let N=Math.floor(k),T=k%1;!T&&k>=1&&(T=1),T===1&&N--,N=Math.min(N,d+1),!!(N%2)&&(f==="reverse"?(T=1-T,p&&(T-=p/s)):f==="mirror"&&(w=o)),b=ho(0,1,T)*s}const S=x?{done:!1,value:u[0]}:w.next(b);i&&(S.value=i(S.value));let{done:C}=S;!x&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&v!==Z2&&(S.value=iT(u,this.options,g,this.speed)),m&&m(S.value),E&&this.finish(),S}then(t,n){return this.finished.then(t,n)}get duration(){return Ia(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ia(t)}get time(){return Ia(this.currentTime)}set time(t){var n;t=no(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Or.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ia(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:t=coe,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Or.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Noe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const yc=e=>e*180/Math.PI,eC=e=>{const t=yc(Math.atan2(e[1],e[0]));return tC(t)},Toe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:eC,rotateZ:eC,skewX:e=>yc(Math.atan(e[1])),skewY:e=>yc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},tC=e=>(e=e%360,e<0&&(e+=360),e),PR=eC,jR=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),OR=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Aoe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jR,scaleY:OR,scale:e=>(jR(e)+OR(e))/2,rotateX:e=>tC(yc(Math.atan2(e[6],e[5]))),rotateY:e=>tC(yc(Math.atan2(-e[2],e[0]))),rotateZ:PR,rotate:PR,skewX:e=>yc(Math.atan(e[4])),skewY:e=>yc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function nC(e){return e.includes("scale")?1:0}function rC(e,t){if(!e||e==="none")return nC(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=Aoe,a=n;else{const s=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Toe,a=s}if(!a)return nC(t);const i=r[t],o=a[1].split(",").map(joe);return typeof i=="function"?i(o):o[i]}const Poe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return rC(n,t)};function joe(e){return parseFloat(e.trim())}const Wf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vf=new Set(Wf),RR=e=>e===zf||e===Ne,Ooe=new Set(["x","y","z"]),Roe=Wf.filter(e=>!Ooe.has(e));function Ioe(e){const t=[];return Roe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Zs={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>rC(t,"x"),y:(e,{transform:t})=>rC(t,"y")};Zs.translateX=Zs.x;Zs.translateY=Zs.y;const Ic=new Set;let aC=!1,iC=!1,oC=!1;function zU(){if(iC){const e=Array.from(Ic).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=Ioe(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,o])=>{var s;(s=r.getValue(i))==null||s.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}iC=!1,aC=!1,Ic.forEach(e=>e.complete(oC)),Ic.clear()}function WU(){Ic.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(iC=!0)})}function Doe(){oC=!0,WU(),zU(),oC=!1}class lT{constructor(t,n,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ic.add(this),aC||(aC=!0,Xt.read(WU),Xt.resolveKeyframes(zU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const s=r.readValue(n,o);s!=null&&(t[0]=s)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}Noe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ic.delete(this)}cancel(){this.state==="scheduled"&&(Ic.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Moe=e=>e.startsWith("--");function $oe(e,t,n){Moe(t)?e.style.setProperty(t,n):e.style[t]=n}const Foe=YN(()=>window.ScrollTimeline!==void 0),Loe={};function Boe(e,t){const n=YN(e);return()=>Loe[t]??n()}const VU=Boe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lh=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,IR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lh([0,.65,.55,1]),circOut:Lh([.55,0,1,.45]),backIn:Lh([.31,.01,.66,-.59]),backOut:Lh([.33,1.53,.69,.99])};function HU(e,t){if(e)return typeof e=="function"?VU()?LU(e,t):"ease-out":TU(e)?Lh(e):Array.isArray(e)?e.map(n=>HU(n,t)||IR.easeOut):IR[e]}function Uoe(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:s="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=HU(s,a);Array.isArray(d)&&(u.easing=d);const f={delay:r,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function GU(e){return typeof e=="function"&&"applyToOptions"in e}function zoe({type:e,...t}){return GU(e)&&VU()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Woe extends oT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:s,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,tf(typeof t.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const c=zoe(t);this.animation=Uoe(n,r,a,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=iT(a,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(u):$oe(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ia(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ia(t)}get time(){return Ia(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=no(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Foe()?(this.animation.timeline=t,La):n(this)}}const qU={anticipate:CU,backInOut:_U,circInOut:kU};function Voe(e){return e in qU}function Hoe(e){typeof e.ease=="string"&&Voe(e.ease)&&(e.ease=qU[e.ease])}const Z1=10;class Goe extends Woe{constructor(t){Hoe(t),UU(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const s=new sT({...o,autoplay:!1}),l=Math.max(Z1,Or.now()-this.startTime),c=ho(0,Z1,l-Z1);n.setWithVelocity(s.sample(Math.max(0,l-c)).value,s.sample(l).value,c),s.stop()}}const DR=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(El.test(e)||e==="0")&&!e.startsWith("url("));function qoe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Koe(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=DR(a,t),s=DR(i,t);return Ab(o===s,`You are trying to animate ${t} from "${a}" to "${i}". "${o?i:a}" is not an animatable value.`,"value-not-animatable"),!o||!s?!1:qoe(e)||(n==="spring"||GU(n))&&r}function sC(e){e.duration=0,e.type="keyframes"}const Xoe=new Set(["opacity","clipPath","filter","transform"]),Yoe=YN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Qoe(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return Yoe()&&n&&Xoe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const Joe=40;class Zoe extends oT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:s,name:l,motionValue:c,element:u,...d}){var v;super(),this.stop=()=>{var m,g;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=Or.now();const f={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...d},p=(u==null?void 0:u.KeyframeResolver)||lT;this.keyframeResolver=new p(s,(m,g,y)=>this.onKeyframesResolved(m,g,f,!y),l,c,u),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:s,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=Or.now(),Koe(t,i,o,s)||((es.instantAnimations||!l)&&(u==null||u(iT(t,r,n))),t[0]=t[t.length-1],sC(r),r.repeat=0);const f={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Joe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!c&&Qoe(f)?new Goe({...f,element:f.motionValue.owner.current}):new sT(f);p.finished.then(()=>this.notifyFinished()).catch(La),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Doe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const ese=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tse(e){const t=ese.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}const nse=4;function KU(e,t,n=1){tf(n<=nse,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,a]=tse(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return mU(o)?parseFloat(o):o}return eT(a)?KU(a,t,n+1):a}function cT(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const rse={type:"spring",stiffness:500,damping:25,restSpeed:10},ase=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ise={type:"keyframes",duration:.8},ose={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sse=(e,{keyframes:t})=>t.length>2?ise:Vf.has(e)?e.startsWith("scale")?ase(t[1]):rse:ose;function lse({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const cse=e=>e!==null;function use(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(cse),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}function XU(e,t,n,r=0,a=1){const i=Array.from(e).sort((c,u)=>c.sortNodePosition(u)).indexOf(t),o=e.size,s=(o-1)*r;return typeof n=="function"?n(i,o):a===1?i*r:s-i*r}const uT=(e,t,n,r={},a,i)=>o=>{const s=cT(r,e)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-no(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-c,onUpdate:f=>{t.set(f),s.onUpdate&&s.onUpdate(f)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:i?void 0:a};lse(s)||Object.assign(u,sse(e,u)),u.duration&&(u.duration=no(u.duration)),u.repeatDelay&&(u.repeatDelay=no(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(sC(u),u.delay===0&&(d=!0)),(es.instantAnimations||es.skipAnimations)&&(d=!0,sC(u),u.delay=0),u.allowFlatten=!s.type&&!s.ease,d&&!i&&t.get()!==void 0){const f=use(u.keyframes,s);if(f!==void 0){Xt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return s.isSync?new sT(u):new Zoe(u)},YU=new Set(["width","height","top","left","right","bottom",...Wf]),MR=30,dse=e=>!isNaN(parseFloat(e));class fse{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=Or.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Or.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=dse(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new QN);const r=this.events[t].add(n);return t==="change"?()=>{r(),Xt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Or.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>MR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MR);return yU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nf(e,t){return new fse(e,t)}function $R(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function dT(e,t,n,r){if(typeof t=="function"){const[a,i]=$R(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=$R(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function _d(e,t,n){const r=e.getProps();return dT(r,t,n!==void 0?n:r.custom,e)}const lC=e=>Array.isArray(e);function hse(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,nf(n))}function pse(e){return lC(e)?e[e.length-1]||0:e}function mse(e,t){const n=_d(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const o in i){const s=pse(i[o]);hse(e,o,s)}}const Sr=e=>!!(e&&e.getVelocity);function vse(e){return!!(Sr(e)&&e.add)}function cC(e,t){const n=e.getValue("willChange");if(vse(n))return n.add(t);if(!n&&es.WillChange){const r=new es.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function fT(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const gse="framerAppearId",QU="data-"+fT(gse);function JU(e){return e.props[QU]}function yse({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function ZU(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...s}=t;r&&(i=r);const l=[],c=a&&e.animationState&&e.animationState.getState()[a];for(const u in s){const d=e.getValue(u,e.latestValues[u]??null),f=s[u];if(f===void 0||c&&yse(c,u))continue;const p={delay:n,...cT(i||{},u)},v=d.get();if(v!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===v&&!p.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const y=JU(e);if(y){const x=window.MotionHandoffAnimation(y,u,Xt);x!==null&&(p.startTime=x,m=!0)}}cC(e,u),d.start(uT(u,d,f,e.shouldReduceMotion&&YU.has(u)?{type:!1}:p,e,m));const g=d.animation;g&&l.push(g)}return o&&Promise.all(l).then(()=>{Xt.update(()=>{o&&mse(e,o)})}),l}function uC(e,t,n={}){var l;const r=_d(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(ZU(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=a;return xse(e,t,c,u,d,f,n)}:()=>Promise.resolve(),{when:s}=a;if(s){const[c,u]=s==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function xse(e,t,n=0,r=0,a=0,i=1,o){const s=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),s.push(uC(l,t,{...o,delay:n+(typeof r=="function"?0:r)+XU(e.variantChildren,l,r,a,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}function bse(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>uC(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=uC(e,t,n);else{const a=typeof t=="function"?_d(e,t,n.custom):t;r=Promise.all(ZU(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const wse={test:e=>e==="auto",parse:e=>e},ez=e=>t=>t.test(e),tz=[zf,Ne,ro,Os,qie,Gie,wse],FR=e=>tz.find(ez(e));function Sse(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gU(e):!0}const _se=new Set(["brightness","contrast","saturate","opacity"]);function Cse(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(tT)||[];if(!r)return e;const a=n.replace(r,"");let i=_se.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const Ese=/\b([a-z-]*)\(.*?\)/gu,dC={...El,getAnimatableNone:e=>{const t=e.match(Ese);return t?t.map(Cse).join(" "):e}},LR={...zf,transform:Math.round},kse={rotate:Os,rotateX:Os,rotateY:Os,rotateZ:Os,scale:mg,scaleX:mg,scaleY:mg,scaleZ:mg,skew:Os,skewX:Os,skewY:Os,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Yp,originX:ER,originY:ER,originZ:Ne},hT={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,inset:Ne,insetBlock:Ne,insetBlockStart:Ne,insetBlockEnd:Ne,insetInline:Ne,insetInlineStart:Ne,insetInlineEnd:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,paddingBlock:Ne,paddingBlockStart:Ne,paddingBlockEnd:Ne,paddingInline:Ne,paddingInlineStart:Ne,paddingInlineEnd:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,marginBlock:Ne,marginBlockStart:Ne,marginBlockEnd:Ne,marginInline:Ne,marginInlineStart:Ne,marginInlineEnd:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...kse,zIndex:LR,fillOpacity:Yp,strokeOpacity:Yp,numOctaves:LR},Nse={...hT,color:bn,backgroundColor:bn,outlineColor:bn,fill:bn,stroke:bn,borderColor:bn,borderTopColor:bn,borderRightColor:bn,borderBottomColor:bn,borderLeftColor:bn,filter:dC,WebkitFilter:dC},nz=e=>Nse[e];function rz(e,t){let n=nz(e);return n!==dC&&(n=El),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Tse=new Set(["auto","none","0"]);function Ase(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!Tse.has(i)&&Qp(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=rz(n,a)}class Pse extends lT{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),eT(d))){const f=KU(d,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!YU.has(r)||t.length!==2)return;const[a,i]=t,o=FR(a),s=FR(i),l=CR(a),c=CR(i);if(l!==c&&Zs[r]){this.needsMeasurement=!0;return}if(o!==s)if(RR(o)&&RR(s))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Zs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Sse(t[a]))&&r.push(a);r.length&&Ase(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var s;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Zs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(s=this.removedTransforms)!=null&&s.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function jse(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const az=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function iz(e){return vU(e)&&"offsetHeight"in e}const{schedule:pT,cancel:pVe}=AU(queueMicrotask,!1),ri={x:!1,y:!1};function oz(){return ri.x||ri.y}function Ose(e){return e==="x"||e==="y"?ri[e]?null:(ri[e]=!0,()=>{ri[e]=!1}):ri.x||ri.y?null:(ri.x=ri.y=!0,()=>{ri.x=ri.y=!1})}function sz(e,t){const n=jse(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function BR(e){return!(e.pointerType==="touch"||oz())}function Rse(e,t,n={}){const[r,a,i]=sz(e,n),o=s=>{if(!BR(s))return;const{target:l}=s,c=t(l,s);if(typeof c!="function"||!l)return;const u=d=>{BR(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,a)};return r.forEach(s=>{s.addEventListener("pointerenter",o,a)}),i}const lz=(e,t)=>t?e===t?!0:lz(e,t.parentElement):!1,mT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Ise=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cz(e){return Ise.has(e.tagName)||e.isContentEditable===!0}const vy=new WeakSet;function UR(e){return t=>{t.key==="Enter"&&e(t)}}function eS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Dse=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=UR(()=>{if(vy.has(n))return;eS(n,"down");const a=UR(()=>{eS(n,"up")}),i=()=>eS(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function zR(e){return mT(e)&&!oz()}function Mse(e,t,n={}){const[r,a,i]=sz(e,n),o=s=>{const l=s.currentTarget;if(!zR(s))return;vy.add(l);const c=t(l,s),u=(p,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),vy.has(l)&&vy.delete(l),zR(p)&&typeof c=="function"&&c(p,{success:v})},d=p=>{u(p,l===window||l===document||n.useGlobalTarget||lz(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,a),window.addEventListener("pointercancel",f,a)};return r.forEach(s=>{(n.useGlobalTarget?window:s).addEventListener("pointerdown",o,a),iz(s)&&(s.addEventListener("focus",c=>Dse(c,a)),!cz(s)&&!s.hasAttribute("tabindex")&&(s.tabIndex=0))}),i}function uz(e){return vU(e)&&"ownerSVGElement"in e}function $se(e){return uz(e)&&e.tagName==="svg"}const Fse=[...tz,bn,El],Lse=e=>Fse.find(ez(e)),WR=()=>({translate:0,scale:1,origin:0,originPoint:0}),id=()=>({x:WR(),y:WR()}),VR=()=>({min:0,max:0}),Tn=()=>({x:VR(),y:VR()}),fC={current:null},dz={current:!1},Bse=typeof window<"u";function Use(){if(dz.current=!0,!!Bse)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fC.current=e.matches;e.addEventListener("change",t),t()}else fC.current=!1}const zse=new WeakMap;function Pb(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Jp(e){return typeof e=="string"||Array.isArray(e)}const vT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gT=["initial",...vT];function jb(e){return Pb(e.animate)||gT.some(t=>Jp(e[t]))}function fz(e){return!!(jb(e)||e.variants)}function Wse(e,t,n){for(const r in t){const a=t[r],i=n[r];if(Sr(a))e.addValue(r,a);else if(Sr(i))e.addValue(r,nf(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,nf(o!==void 0?o:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const HR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let d0={};function hz(e){d0=e}function Vse(){return d0}class Hse{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Or.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Xt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=s,this.blockInitialAnimation=!!i,this.isControllingVariants=jb(n),this.isVariantNode=fz(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&Sr(p)&&p.set(l[f])}}mount(t){var n;this.current=t,zse.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(dz.current||Use(),this.shouldReduceMotion=fC.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Cl(this.notifyUpdate),Cl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Vf.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Xt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in d0){const n=d0[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<HR.length;r++){const a=HR[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=Wse(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=nf(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(mU(r)||gU(r))?r=parseFloat(r):!Lse(r)&&El.test(n)&&(r=rz(t,n)),this.setBaseTarget(t,Sr(r)?r.get():r)),Sr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=dT(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Sr(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new QN),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){pT.render(this.render)}}class Il{constructor(t){this.isMounted=!1,this.node=t}update(){}}class pz extends Hse{constructor(){super(...arguments),this.KeyframeResolver=Pse}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Sr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mz({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Gse({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qse(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tS(e){return e===void 0||e===1}function hC({scale:e,scaleX:t,scaleY:n}){return!tS(e)||!tS(t)||!tS(n)}function nc(e){return hC(e)||vz(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function vz(e){return GR(e.x)||GR(e.y)}function GR(e){return e&&e!=="0%"}function f0(e,t,n){const r=e-n,a=t*r;return n+a}function qR(e,t,n,r,a){return a!==void 0&&(e=f0(e,a,r)),f0(e,n,r)+t}function pC(e,t=0,n=1,r,a){e.min=qR(e.min,t,n,r,a),e.max=qR(e.max,t,n,r,a)}function gz(e,{x:t,y:n}){pC(e.x,t.translate,t.scale,t.originPoint),pC(e.y,n.translate,n.scale,n.originPoint)}const KR=.999999999999,XR=1.0000000000001;function Kse(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let s=0;s<a;s++){i=n[s],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&sd(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,gz(e,o)),r&&nc(i.latestValues)&&sd(e,i.latestValues))}t.x<XR&&t.x>KR&&(t.x=1),t.y<XR&&t.y>KR&&(t.y=1)}function od(e,t){e.min=e.min+t,e.max=e.max+t}function YR(e,t,n,r,a=.5){const i=rn(e.min,e.max,a);pC(e,t,n,i,r)}function sd(e,t){YR(e.x,t.x,t.scaleX,t.scale,t.originX),YR(e.y,t.y,t.scaleY,t.scale,t.originY)}function yz(e,t){return mz(qse(e.getBoundingClientRect(),t))}function Xse(e,t,n){const r=yz(e,n),{scroll:a}=t;return a&&(od(r.x,a.offset.x),od(r.y,a.offset.y)),r}const Yse={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Qse=Wf.length;function Jse(e,t,n){let r="",a=!0;for(let i=0;i<Qse;i++){const o=Wf[i],s=e[o];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(o.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=az(s,hT[o]);if(!l){a=!1;const u=Yse[o]||o;r+=`${u}(${c}) `}n&&(t[o]=c)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function yT(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,s=!1;for(const l in t){const c=t[l];if(Vf.has(l)){o=!0;continue}else if(jU(l)){a[l]=c;continue}else{const u=az(c,hT[l]);l.startsWith("origin")?(s=!0,i[l]=u):r[l]=u}}if(t.transform||(o||n?r.transform=Jse(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}function xz(e,{style:t,vars:n},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a==null||a.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function QR(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const yh={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ne.test(e))e=parseFloat(e);else return e;const n=QR(e,t.target.x),r=QR(e,t.target.y);return`${n}% ${r}%`}},Zse={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=El.parse(e);if(a.length>5)return r;const i=El.createTransformer(e),o=typeof a[0]!="number"?1:0,s=n.x.scale*t.x,l=n.y.scale*t.y;a[0+o]/=s,a[1+o]/=l;const c=rn(s,l,.5);return typeof a[2+o]=="number"&&(a[2+o]/=c),typeof a[3+o]=="number"&&(a[3+o]/=c),i(a)}},mC={borderRadius:{...yh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yh,borderTopRightRadius:yh,borderBottomLeftRadius:yh,borderBottomRightRadius:yh,boxShadow:Zse};function bz(e,{layout:t,layoutId:n}){return Vf.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!mC[e]||e==="opacity")}function xT(e,t,n){var o;const r=e.style,a=t==null?void 0:t.style,i={};if(!r)return i;for(const s in r)(Sr(r[s])||a&&Sr(a[s])||bz(s,e)||((o=n==null?void 0:n.getValue(s))==null?void 0:o.liveStyle)!==void 0)&&(i[s]=r[s]);return i}function ele(e){return window.getComputedStyle(e)}class tle extends pz{constructor(){super(...arguments),this.type="html",this.renderInstance=xz}readValueFromInstance(t,n){var r;if(Vf.has(n))return(r=this.projection)!=null&&r.isProjecting?nC(n):Poe(t,n);{const a=ele(t),i=(jU(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return yz(t,n)}build(t,n,r){yT(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return xT(t,n,r)}}const nle={offset:"stroke-dashoffset",array:"stroke-dasharray"},rle={offset:"strokeDashoffset",array:"strokeDasharray"};function ale(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?nle:rle;e[i.offset]=Ne.transform(-r);const o=Ne.transform(t),s=Ne.transform(n);e[i.array]=`${o} ${s}`}const ile=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function wz(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...s},l,c,u){if(yT(e,s,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox);for(const p of ile)d[p]!==void 0&&(f[p]=d[p],delete d[p]);t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),a!==void 0&&ale(d,a,i,o,!1)}const Sz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),_z=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ole(e,t,n,r){xz(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(Sz.has(a)?a:fT(a),t.attrs[a])}function Cz(e,t,n){const r=xT(e,t,n);for(const a in e)if(Sr(e[a])||Sr(t[a])){const i=Wf.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}class sle extends pz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Vf.has(n)){const r=nz(n);return r&&r.default||0}return n=Sz.has(n)?n:fT(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Cz(t,n,r)}build(t,n,r){wz(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){ole(t,n,r,a)}mount(t){this.isSVGTag=_z(t.tagName),super.mount(t)}}const lle=gT.length;function Ez(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Ez(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<lle;n++){const r=gT[n],a=e.props[r];(Jp(a)||a===!1)&&(t[r]=a)}return t}function kz(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const cle=[...vT].reverse(),ule=vT.length;function dle(e){return t=>Promise.all(t.map(({animation:n,options:r})=>bse(e,n,r)))}function fle(e){let t=dle(e),n=JR(),r=!0;const a=l=>(c,u)=>{var f;const d=_d(e,u,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:v,...m}=d;c={...c,...m,...v}}return c};function i(l){t=l(e)}function o(l){const{props:c}=e,u=Ez(e.parent)||{},d=[],f=new Set;let p={},v=1/0;for(let g=0;g<ule;g++){const y=cle[g],x=n[y],b=c[y]!==void 0?c[y]:u[y],w=Jp(b),S=y===l?x.isActive:null;S===!1&&(v=g);let C=b===u[y]&&b!==c[y]&&w;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...p},!x.isActive&&S===null||!b&&!x.prevProp||Pb(b)||typeof b=="boolean")continue;const E=hle(x.prevProp,b);let k=E||y===l&&x.isActive&&!C&&w||g>v&&w,N=!1;const T=Array.isArray(b)?b:[b];let A=T.reduce(a(y),{});S===!1&&(A={});const{prevResolvedValues:P={}}=x,I={...P,...A},R=$=>{k=!0,f.has($)&&(N=!0,f.delete($)),x.needsAnimating[$]=!0;const j=e.getValue($);j&&(j.liveStyle=!1)};for(const $ in I){const j=A[$],O=P[$];if(p.hasOwnProperty($))continue;let B=!1;lC(j)&&lC(O)?B=!kz(j,O):B=j!==O,B?j!=null?R($):f.add($):j!==void 0&&f.has($)?R($):x.protectedKeys[$]=!0}x.prevProp=b,x.prevResolvedValues=A,x.isActive&&(p={...p,...A}),r&&e.blockInitialAnimation&&(k=!1);const D=C&&E;k&&(!D||N)&&d.push(...T.map($=>{const j={type:y};if(typeof $=="string"&&r&&!D&&e.manuallyAnimateOnMount&&e.parent){const{parent:O}=e,B=_d(O,$);if(O.enteringChildren&&B){const{delayChildren:G}=B.transition||{};j.delay=XU(O.enteringChildren,e,G)}}return{animation:$,options:j}}))}if(f.size){const g={};if(typeof c.initial!="boolean"){const y=_d(e,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(g.transition=y.transition)}f.forEach(y=>{const x=e.getBaseTarget(y),b=e.getValue(y);b&&(b.liveStyle=!0),g[y]=x??null}),d.push({animation:g})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function s(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:o,setActive:s,setAnimateFunction:i,getState:()=>n,reset:()=>{n=JR()}}}function hle(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!kz(t,e):!1}function Yl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JR(){return{animate:Yl(!0),whileInView:Yl(),whileHover:Yl(),whileTap:Yl(),whileDrag:Yl(),whileFocus:Yl(),exit:Yl()}}const Nz=1e-4,ple=1-Nz,mle=1+Nz,Tz=.01,vle=0-Tz,gle=0+Tz;function Rr(e){return e.max-e.min}function yle(e,t,n){return Math.abs(e-t)<=n}function ZR(e,t,n,r=.5){e.origin=r,e.originPoint=rn(t.min,t.max,e.origin),e.scale=Rr(n)/Rr(t),e.translate=rn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=ple&&e.scale<=mle||isNaN(e.scale))&&(e.scale=1),(e.translate>=vle&&e.translate<=gle||isNaN(e.translate))&&(e.translate=0)}function sp(e,t,n,r){ZR(e.x,t.x,n.x,r?r.originX:void 0),ZR(e.y,t.y,n.y,r?r.originY:void 0)}function eI(e,t,n){e.min=n.min+t.min,e.max=e.min+Rr(t)}function xle(e,t,n){eI(e.x,t.x,n.x),eI(e.y,t.y,n.y)}function tI(e,t,n){e.min=t.min-n.min,e.max=e.min+Rr(t)}function h0(e,t,n){tI(e.x,t.x,n.x),tI(e.y,t.y,n.y)}function nI(e,t,n,r,a){return e-=t,e=f0(e,1/n,r),a!==void 0&&(e=f0(e,1/a,r)),e}function ble(e,t=0,n=1,r=.5,a,i=e,o=e){if(ro.test(t)&&(t=parseFloat(t),t=rn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let s=rn(i.min,i.max,r);e===i&&(s-=t),e.min=nI(e.min,t,n,s,a),e.max=nI(e.max,t,n,s,a)}function rI(e,t,[n,r,a],i,o){ble(e,t[n],t[r],t[a],t.scale,i,o)}const wle=["x","scaleX","originX"],Sle=["y","scaleY","originY"];function aI(e,t,n,r){rI(e.x,t,wle,n?n.x:void 0,r?r.x:void 0),rI(e.y,t,Sle,n?n.y:void 0,r?r.y:void 0)}function iI(e,t){e.min=t.min,e.max=t.max}function ei(e,t){iI(e.x,t.x),iI(e.y,t.y)}function oI(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sI(e){return e.translate===0&&e.scale===1}function Az(e){return sI(e.x)&&sI(e.y)}function lI(e,t){return e.min===t.min&&e.max===t.max}function _le(e,t){return lI(e.x,t.x)&&lI(e.y,t.y)}function cI(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Pz(e,t){return cI(e.x,t.x)&&cI(e.y,t.y)}function uI(e){return Rr(e.x)/Rr(e.y)}function dI(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function ka(e){return[e("x"),e("y")]}function Cle(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const jz=["TopLeft","TopRight","BottomLeft","BottomRight"],Ele=jz.length,fI=e=>typeof e=="string"?parseFloat(e):e,hI=e=>typeof e=="number"||Ne.test(e);function kle(e,t,n,r,a,i){a?(e.opacity=rn(0,n.opacity??1,Nle(r)),e.opacityExit=rn(t.opacity??1,0,Tle(r))):i&&(e.opacity=rn(t.opacity??1,n.opacity??1,r));for(let o=0;o<Ele;o++){const s=`border${jz[o]}Radius`;let l=pI(t,s),c=pI(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||hI(l)===hI(c)?(e[s]=Math.max(rn(fI(l),fI(c),r),0),(ro.test(c)||ro.test(l))&&(e[s]+="%")):e[s]=c}(t.rotate||n.rotate)&&(e.rotate=rn(t.rotate||0,n.rotate||0,r))}function pI(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Nle=Oz(0,.5,EU),Tle=Oz(.5,.95,La);function Oz(e,t,n){return r=>r<e?0:r>t?1:n(Xp(e,t,r))}function Ale(e,t){const n=Or.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Cl(r),e(i-t))};return Xt.setup(r,!0),()=>Cl(r)}function Zp(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function gy(e){return Sr(e)?e.get():e}function Ple(e,t,n){const r=Sr(e)?e:nf(e);return r.start(uT("",r,t,n)),r.animation}const jle=(e,t)=>e.depth-t.depth;class Ole{constructor(){this.children=[],this.isDirty=!1}add(t){KN(this.children,t),this.isDirty=!0}remove(t){XN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jle),this.isDirty=!1,this.children.forEach(t)}}class Rle{constructor(){this.members=[]}add(t){KN(this.members,t),t.scheduleRender()}remove(t){if(XN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const yy={hasAnimatedSinceResize:!0,hasEverUpdated:!1},nS=["","X","Y","Z"],Ile=1e3;let Dle=0;function rS(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Rz(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=JU(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Xt,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Rz(r)}function Iz({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},s=t==null?void 0:t()){this.id=Dle++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Fle),this.nodes.forEach(zle),this.nodes.forEach(Wle),this.nodes.forEach(Lle)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ole)}addEventListener(o,s){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new QN),this.eventHandlers.get(o).add(s)}notifyListeners(o,...s){const l=this.eventHandlers.get(o);l&&l.notify(...s)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=uz(o)&&!$se(o),this.instance=o;const{layoutId:s,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||s)&&(this.isLayoutDirty=!0),e){let u,d=0;const f=()=>this.root.updateBlockedByResize=!1;Xt.read(()=>{d=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,u&&u(),u=Ale(f,250),yy.hasAnimatedSinceResize&&(yy.hasAnimatedSinceResize=!1,this.nodes.forEach(gI)))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&c&&(s||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||Kle,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=c.getProps(),y=!this.targetLayout||!Pz(this.targetLayout,p),x=!d&&f;if(this.options.layoutRoot||this.resumeFrom||x||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...cT(v,"layout"),onPlay:m,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(u,x)}else d||gI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vle),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Rz(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ule),this.nodes.forEach(Mle),this.nodes.forEach($le)):this.nodes.forEach(vI),this.clearAllSnapshots();const s=Or.now();Zn.delta=ho(0,1e3/60,s-Zn.timestamp),Zn.timestamp=s,Zn.isProcessing=!0,K1.update.process(Zn),K1.preRender.process(Zn),K1.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ble),this.sharedNodes.forEach(Hle)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rr(this.snapshot.measuredBox.x)&&!Rr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(s=!1),s&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!Az(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(s||nc(this.latestValues)||u)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return o&&(l=this.removeTransform(l)),Xle(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Tn();const s=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Yle))){const{scroll:u}=this.root;u&&(od(s.x,u.offset.x),od(s.y,u.offset.y))}return s}removeElementScroll(o){var l;const s=Tn();if(ei(s,o),(l=this.scroll)!=null&&l.wasRoot)return s;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&ei(s,o),od(s.x,d.offset.x),od(s.y,d.offset.y))}return s}applyTransform(o,s=!1){const l=Tn();ei(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&sd(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),nc(u.latestValues)&&sd(l,u.latestValues)}return nc(this.latestValues)&&sd(l,this.latestValues),l}removeTransform(o){const s=Tn();ei(s,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!nc(c.latestValues))continue;hC(c.latestValues)&&c.updateSnapshot();const u=Tn(),d=c.measurePageBox();ei(u,d),aI(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return nc(this.latestValues)&&aI(s,this.latestValues),s}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==s;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!this.layout||!(u||d))return;this.resolvedRelativeTargetAt=Zn.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tn(),this.targetWithTransforms=Tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xle(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ei(this.target,this.layout.layoutBox),gz(this.target,this.targetDelta)):ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hC(this.parent.latestValues)||vz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,s,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),h0(this.relativeTargetOrigin,s,l),ei(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),s=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;ei(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;Kse(this.layoutCorrected,this.treeScale,this.path,s),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Tn());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oI(this.prevProjectionDelta.x,this.projectionDelta.x),oI(this.prevProjectionDelta.y,this.projectionDelta.y)),sp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!dI(this.projectionDelta.x,this.prevProjectionDelta.x)||!dI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var s;if((s=this.options.visualElement)==null||s.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=id(),this.projectionDelta=id(),this.projectionDeltaWithTransform=id()}setAnimationOrigin(o,s=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=id();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const f=Tn(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,m=p!==v,g=this.getStack(),y=!g||g.members.length<=1,x=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(qle));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const S=w/1e3;yI(d.x,o.x,S),yI(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(h0(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gle(this.relativeTarget,this.relativeTargetOrigin,f,S),b&&_le(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Tn()),ei(b,this.relativeTarget)),m&&(this.animationValues=u,kle(u,c,this.latestValues,S,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var s,l,c;this.notifyListeners("animationStart"),(s=this.currentAnimation)==null||s.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xt.update(()=>{yy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=nf(0)),this.currentAnimation=Ple(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ile),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:u}=o;if(!(!s||!l||!c)){if(this!==o&&this.layout&&c&&Dz(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Tn();const d=Rr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Rr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}ei(s,l),sd(s,u),sp(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(o,s){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rle),this.sharedNodes.get(o).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())==null?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())==null?void 0:s.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let s=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&rS("z",o,c,this.animationValues);for(let u=0;u<nS.length;u++)rS(`rotate${nS[u]}`,o,c,this.animationValues),rS(`skew${nS[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,s){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=gy(s==null?void 0:s.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=gy(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!nc(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=Cle(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const v in mC){if(u[v]===void 0)continue;const{correct:m,applyTo:g,isCSSVariable:y}=mC[v],x=d==="none"?u[v]:m(u[v],c);if(g){const b=g.length;for(let w=0;w<b;w++)o[g[w]]=x}else y?this.options.visualElement.renderState.vars[v]=x:o[v]=x}this.options.layoutId&&(o.pointerEvents=c===this?gy(s==null?void 0:s.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var s;return(s=o.currentAnimation)==null?void 0:s.stop()}),this.root.nodes.forEach(mI),this.root.sharedNodes.clear()}}}function Mle(e){e.updateLayout()}function $le(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?ka(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=Rr(f);f.min=r[d].min,f.max=f.min+p}):Dz(i,t.layoutBox,r)&&ka(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=Rr(r[d]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const s=id();sp(s,r,t.layoutBox);const l=id();o?sp(l,e.applyTransform(a,!0),t.measuredBox):sp(l,r,t.layoutBox);const c=!Az(s);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const v=Tn();h0(v,t.layoutBox,f.layoutBox);const m=Tn();h0(m,r,p.layoutBox),Pz(v,m)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Fle(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Lle(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ble(e){e.clearSnapshot()}function mI(e){e.clearMeasurements()}function vI(e){e.isLayoutDirty=!1}function Ule(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function gI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function zle(e){e.resolveTargetDelta()}function Wle(e){e.calcProjection()}function Vle(e){e.resetSkewAndRotation()}function Hle(e){e.removeLeadSnapshot()}function yI(e,t,n){e.translate=rn(t.translate,0,n),e.scale=rn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function xI(e,t,n,r){e.min=rn(t.min,n.min,r),e.max=rn(t.max,n.max,r)}function Gle(e,t,n,r){xI(e.x,t.x,n.x,r),xI(e.y,t.y,n.y,r)}function qle(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Kle={duration:.45,ease:[.4,0,.1,1]},bI=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),wI=bI("applewebkit/")&&!bI("chrome/")?Math.round:La;function SI(e){e.min=wI(e.min),e.max=wI(e.max)}function Xle(e){SI(e.x),SI(e.y)}function Dz(e,t,n){return e==="position"||e==="preserve-aspect"&&!yle(uI(t),uI(n),.2)}function Yle(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Qle=Iz({attachResizeListener:(e,t)=>Zp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aS={current:void 0},Mz=Iz({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!aS.current){const e=new Qle({});e.mount(window),e.setOptions({layoutScroll:!0}),aS.current=e}return aS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),bT=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function _I(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Jle(...e){return t=>{let n=!1;const r=e.map(a=>{const i=_I(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():_I(e[a],null)}}}}function Zle(...e){return _.useCallback(Jle(...e),e)}class ece extends _.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=iz(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tce({children:e,isPresent:t,anchorX:n,root:r}){var u;const a=_.useId(),i=_.useRef(null),o=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=_.useContext(bT),l=((u=e.props)==null?void 0:u.ref)??(e==null?void 0:e.ref),c=Zle(i,l);return _.useInsertionEffect(()=>{const{width:d,height:f,top:p,left:v,right:m}=o.current;if(t||!i.current||!d||!f)return;const g=n==="left"?`left: ${v}`:`right: ${m}`;i.current.dataset.motionPopId=a;const y=document.createElement("style");s&&(y.nonce=s);const x=r??document.head;return x.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${g}px !important;
            top: ${p}px !important;
          }
        `),()=>{x.contains(y)&&x.removeChild(y)}},[t]),h.jsx(ece,{isPresent:t,childRef:i,sizeRef:o,children:_.cloneElement(e,{ref:c})})}const nce=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:s,root:l})=>{const c=qN(rce),u=_.useId();let d=!0,f=_.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:p=>{c.set(p,!0);for(const v of c.values())if(!v)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return i&&d&&(f={...f}),_.useMemo(()=>{c.forEach((p,v)=>c.set(v,!1))},[n]),_.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(e=h.jsx(tce,{isPresent:n,anchorX:s,root:l,children:e})),h.jsx(Tb.Provider,{value:f,children:e})};function rce(){return new Map}function $z(e=!0){const t=_.useContext(Tb);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=_.useId();_.useEffect(()=>{if(e)return a(i)},[e]);const o=_.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const vg=e=>e.key||"";function CI(e){const t=[];return _.Children.forEach(e,n=>{_.isValidElement(n)&&t.push(n)}),t}const Fz=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:s="left",root:l})=>{const[c,u]=$z(o),d=_.useMemo(()=>CI(e),[e]),f=o&&!c?[]:d.map(vg),p=_.useRef(!0),v=_.useRef(d),m=qN(()=>new Map),g=_.useRef(new Set),[y,x]=_.useState(d),[b,w]=_.useState(d);pU(()=>{p.current=!1,v.current=d;for(let E=0;E<b.length;E++){const k=vg(b[E]);f.includes(k)?(m.delete(k),g.current.delete(k)):m.get(k)!==!0&&m.set(k,!1)}},[b,f.length,f.join("-")]);const S=[];if(d!==y){let E=[...d];for(let k=0;k<b.length;k++){const N=b[k],T=vg(N);f.includes(T)||(E.splice(k,0,N),S.push(N))}return i==="wait"&&S.length&&(E=S),w(CI(E)),x(d),null}const{forceRender:C}=_.useContext(GN);return h.jsx(h.Fragment,{children:b.map(E=>{const k=vg(E),N=o&&!c?!1:d===b||f.includes(k),T=()=>{if(g.current.has(k))return;if(g.current.add(k),m.has(k))m.set(k,!0);else return;let A=!0;m.forEach(P=>{P||(A=!1)}),A&&(C==null||C(),w(v.current),o&&(u==null||u()),r&&r())};return h.jsx(nce,{isPresent:N,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:l,onExitComplete:N?void 0:T,anchorX:s,children:E},k)})})},Lz=_.createContext({strict:!1}),EI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let kI=!1;function ace(){if(kI)return;const e={};for(const t in EI)e[t]={isEnabled:n=>EI[t].some(r=>!!n[r])};hz(e),kI=!0}function Bz(){return ace(),Vse()}function ice(e){const t=Bz();for(const n in e)t[n]={...t[n],...e[n]};hz(t)}const oce=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function p0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||oce.has(e)}let Uz=e=>!p0(e);function sce(e){typeof e=="function"&&(Uz=t=>t.startsWith("on")?!p0(t):e(t))}try{sce(require("@emotion/is-prop-valid").default)}catch{}function lce(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(Uz(a)||n===!0&&p0(a)||!t&&!p0(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const Ob=_.createContext({});function cce(e,t){if(jb(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Jp(n)?n:void 0,animate:Jp(r)?r:void 0}}return e.inherit!==!1?t:{}}function uce(e){const{initial:t,animate:n}=cce(e,_.useContext(Ob));return _.useMemo(()=>({initial:t,animate:n}),[NI(t),NI(n)])}function NI(e){return Array.isArray(e)?e.join(" "):e}const wT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zz(e,t,n){for(const r in t)!Sr(t[r])&&!bz(r,n)&&(e[r]=t[r])}function dce({transformTemplate:e},t){return _.useMemo(()=>{const n=wT();return yT(n,t,e),Object.assign({},n.vars,n.style)},[t])}function fce(e,t){const n=e.style||{},r={};return zz(r,n,e),Object.assign(r,dce(e,t)),r}function hce(e,t){const n={},r=fce(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Wz=()=>({...wT(),attrs:{}});function pce(e,t,n,r){const a=_.useMemo(()=>{const i=Wz();return wz(i,t,_z(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};zz(i,e.style,e),a.style={...i,...a.style}}return a}const mce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ST(e){return typeof e!="string"||e.includes("-")?!1:!!(mce.indexOf(e)>-1||/[A-Z]/u.test(e))}function vce(e,t,n,{latestValues:r},a,i=!1,o){const l=(o??ST(e)?pce:hce)(t,r,a,e),c=lce(t,typeof e=="string",i),u=e!==_.Fragment?{...c,...l,ref:n}:{},{children:d}=t,f=_.useMemo(()=>Sr(d)?d.get():d,[d]);return _.createElement(e,{...u,children:f})}function gce({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:yce(n,r,a,e),renderState:t()}}function yce(e,t,n,r){const a={},i=r(e,{});for(const f in i)a[f]=gy(i[f]);let{initial:o,animate:s}=e;const l=jb(e),c=fz(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),s===void 0&&(s=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?s:o;if(d&&typeof d!="boolean"&&!Pb(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const v=dT(e,f[p]);if(v){const{transitionEnd:m,transition:g,...y}=v;for(const x in y){let b=y[x];if(Array.isArray(b)){const w=u?b.length-1:0;b=b[w]}b!==null&&(a[x]=b)}for(const x in m)a[x]=m[x]}}}return a}const Vz=e=>(t,n)=>{const r=_.useContext(Ob),a=_.useContext(Tb),i=()=>gce(e,t,r,a);return n?i():qN(i)},xce=Vz({scrapeMotionValuesFromProps:xT,createRenderState:wT}),bce=Vz({scrapeMotionValuesFromProps:Cz,createRenderState:Wz}),wce=Symbol.for("motionComponentSymbol");function Sce(e,t,n){const r=_.useRef(n);_.useInsertionEffect(()=>{r.current=n});const a=_.useRef(null);return _.useCallback(i=>{var s;i&&((s=e.onMount)==null||s.call(e,i)),t&&(i?t.mount(i):t.unmount());const o=r.current;if(typeof o=="function")if(i){const l=o(i);typeof l=="function"&&(a.current=l)}else a.current?(a.current(),a.current=null):o(i);else o&&(o.current=i)},[t])}const Hz=_.createContext({});function Bh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function _ce(e,t,n,r,a,i){var g,y;const{visualElement:o}=_.useContext(Ob),s=_.useContext(Lz),l=_.useContext(Tb),c=_.useContext(bT).reducedMotion,u=_.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c,isSVG:i}));const d=u.current,f=_.useContext(Hz);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&Cce(u.current,n,a,f);const p=_.useRef(!1);_.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const v=n[QU],m=_.useRef(!!v&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,v))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,v)));return pU(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),_.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,v)}),m.current=!1),d.enteringChildren=void 0)}),d}function Cce(e,t,n,r){const{layoutId:a,layout:i,drag:o,dragConstraints:s,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Gz(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||s&&Bh(s),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function Gz(e){if(e)return e.options.allowProjection!==!1?e.projection:Gz(e.parent)}function iS(e,{forwardMotionProps:t=!1,type:n}={},r,a){r&&ice(r);const i=n?n==="svg":ST(e),o=i?bce:xce;function s(c,u){let d;const f={..._.useContext(bT),...c,layoutId:Ece(c)},{isStatic:p}=f,v=uce(c),m=o(c,p);if(!p&&hU){kce();const g=Nce(f);d=g.MeasureLayout,v.visualElement=_ce(e,m,f,a,g.ProjectionNode,i)}return h.jsxs(Ob.Provider,{value:v,children:[d&&v.visualElement?h.jsx(d,{visualElement:v.visualElement,...f}):null,vce(e,c,Sce(m,v.visualElement,u),m,p,t,i)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=_.forwardRef(s);return l[wce]=e,l}function Ece({layoutId:e}){const t=_.useContext(GN).id;return t&&e!==void 0?t+"-"+e:e}function kce(e,t){_.useContext(Lz).strict}function Nce(e){const t=Bz(),{drag:n,layout:r}=t;if(!n&&!r)return{};const a={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function Tce(e,t){if(typeof Proxy>"u")return iS;const n=new Map,r=(i,o)=>iS(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,iS(o,void 0,e,t)),n.get(o))})}const Ace=(e,t)=>t.isSVG??ST(e)?new sle(t):new tle(t,{allowProjection:e!==_.Fragment});class Pce extends Il{constructor(t){super(t),t.animationState||(t.animationState=fle(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pb(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let jce=0;class Oce extends Il{constructor(){super(...arguments),this.id=jce++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Rce={animation:{Feature:Pce},exit:{Feature:Oce}};function fv(e){return{point:{x:e.pageX,y:e.pageY}}}const Ice=e=>t=>mT(t)&&e(t,fv(t));function lp(e,t,n,r){return Zp(e,t,Ice(n),r)}const qz=({current:e})=>e?e.ownerDocument.defaultView:null,TI=(e,t)=>Math.abs(e-t);function Dce(e,t){const n=TI(e.x,t.x),r=TI(e.y,t.y);return Math.sqrt(n**2+r**2)}const AI=new Set(["auto","scroll"]);class Kz{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:s}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=sS(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,m=Dce(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!m)return;const{point:g}=p,{timestamp:y}=Zn;this.history.push({...g,timestamp:y});const{onStart:x,onMove:b}=this.handlers;v||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,v)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=oS(v,this.transformPagePoint),Xt.update(this.updatePoint,!0)},this.handlePointerUp=(p,v)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=sS(p.type==="pointercancel"?this.lastMoveEventInfo:oS(v,this.transformPagePoint),this.history);this.startEvent&&m&&m(p,x),g&&g(p,x)},!mT(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const l=fv(t),c=oS(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Zn;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(t,sS(c,this.history)),this.removeListeners=cv(lp(this.contextWindow,"pointermove",this.handlePointerMove),lp(this.contextWindow,"pointerup",this.handlePointerUp),lp(this.contextWindow,"pointercancel",this.handlePointerUp)),s&&this.startScrollTracking(s)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(AI.has(r.overflowX)||AI.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,a=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:a.x-n.x,y:a.y-n.y};i.x===0&&i.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,a),Xt.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Cl(this.updatePoint)}}function oS(e,t){return t?{point:t(e.point)}:e}function PI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sS({point:e},t){return{point:e,delta:PI(e,Xz(t)),offset:PI(e,Mce(t)),velocity:$ce(t,.1)}}function Mce(e){return e[0]}function Xz(e){return e[e.length-1]}function $ce(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=Xz(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>no(t)));)n--;if(!r)return{x:0,y:0};const i=Ia(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fce(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?rn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?rn(n,e,r.max):Math.min(e,n)),e}function jI(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Lce(e,{top:t,left:n,bottom:r,right:a}){return{x:jI(e.x,n,a),y:jI(e.y,t,r)}}function OI(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Bce(e,t){return{x:OI(e.x,t.x),y:OI(e.y,t.y)}}function Uce(e,t){let n=.5;const r=Rr(e),a=Rr(t);return a>r?n=Xp(t.min,t.max-r,e.min):r>a&&(n=Xp(e.min,e.max-a,t.min)),ho(0,1,n)}function zce(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const vC=.35;function Wce(e=vC){return e===!1?e=0:e===!0&&(e=vC),{x:RI(e,"left","right"),y:RI(e,"top","bottom")}}function RI(e,t,n){return{min:II(e,t),max:II(e,n)}}function II(e,t){return typeof e=="number"?e:e[t]||0}const Vce=new WeakMap;class Hce{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=d=>{n?(this.stopAnimation(),this.snapToCursor(fv(d).point)):this.pauseAnimation()},o=(d,f)=>{this.stopAnimation();const{drag:p,dragPropagation:v,onDragStart:m}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ose(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ka(y=>{let x=this.getAxisMotionValue(y).get()||0;if(ro.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[y];w&&(x=Rr(w)*(parseFloat(x)/100))}}this.originPoint[y]=x}),m&&Xt.postRender(()=>m(d,f)),cC(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:m,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=f;if(v&&this.currentDirection===null){this.currentDirection=Gce(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),g&&g(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ka(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Kz(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:qz(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&Xt.postRender(()=>s(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!gg(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Fce(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Bh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Lce(r.layoutBox,t):this.constraints=!1,this.elastic=Wce(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ka(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zce(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Bh(t))return!1;const r=t.current;tf(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Xse(r,a.root,this.visualElement.getTransformPagePoint());let o=Bce(a.layout.layoutBox,i);if(n){const s=n(Gse(o));this.hasMutatedConstraints=!!s,s&&(o=mz(s))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=ka(u=>{if(!gg(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=a?200:1e6,p=a?40:1e7,v={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(s)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return cC(this.visualElement,t),r.start(uT(t,r,0,n,this.visualElement,!1))}stopAnimation(){ka(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ka(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ka(n=>{const{drag:r}=this.getProps();if(!gg(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:s}=a.layout.layoutBox[n],l=i.get()||0;i.set(t[n]-rn(o,s,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bh(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ka(o=>{const s=this.getAxisMotionValue(o);if(s&&this.constraints!==!1){const l=s.get();a[o]=Uce({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ka(o=>{if(!gg(o,t,null))return;const s=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];s.set(rn(l,c,a[o]))})}addListeners(){if(!this.visualElement.current)return;Vce.set(this.visualElement,this);const t=this.visualElement.current,n=lp(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&!cz(l.target)&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Bh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Xt.read(r);const o=Zp(window,"resize",()=>this.scalePositionWithinConstraints()),s=a.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ka(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=vC,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:s}}}function gg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Gce(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class qce extends Il{constructor(t){super(t),this.removeGroupControls=La,this.removeListeners=La,this.controls=new Hce(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||La}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const DI=e=>(t,n)=>{e&&Xt.postRender(()=>e(t,n))};class Kce extends Il{constructor(){super(...arguments),this.removePointerDownListener=La}onPointerDown(t){this.session=new Kz(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:DI(t),onStart:DI(n),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Xt.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=lp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let lS=!1;class Xce extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),lS&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,lS=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Xt.postRender(()=>{const s=o.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;lS=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Yz(e){const[t,n]=$z(),r=_.useContext(GN);return h.jsx(Xce,{...e,layoutGroup:r,switchLayoutGroup:_.useContext(Hz),isPresent:t,safeToRemove:n})}const Yce={pan:{Feature:Kce},drag:{Feature:qce,ProjectionNode:Mz,MeasureLayout:Yz}};function MI(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&Xt.postRender(()=>i(t,fv(t)))}class Qce extends Il{mount(){const{current:t}=this.node;t&&(this.unmount=Rse(t,(n,r)=>(MI(this.node,r,"Start"),a=>MI(this.node,a,"End"))))}unmount(){}}class Jce extends Il{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cv(Zp(this.node.current,"focus",()=>this.onFocus()),Zp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $I(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&Xt.postRender(()=>i(t,fv(t)))}class Zce extends Il{mount(){const{current:t}=this.node;t&&(this.unmount=Mse(t,(n,r)=>($I(this.node,r,"Start"),(a,{success:i})=>$I(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gC=new WeakMap,cS=new WeakMap,eue=e=>{const t=gC.get(e.target);t&&t(e)},tue=e=>{e.forEach(eue)};function nue({root:e,...t}){const n=e||document;cS.has(n)||cS.set(n,{});const r=cS.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(tue,{root:e,...t})),r[a]}function rue(e,t,n){const r=nue(t);return gC.set(e,n),r.observe(e),()=>{gC.delete(e),r.unobserve(e)}}const aue={some:0,all:1};class iue extends Il{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:aue[a]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return rue(this.node.current,o,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(oue(t,n))&&this.startObserver()}unmount(){}}function oue({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const sue={inView:{Feature:iue},tap:{Feature:Zce},focus:{Feature:Jce},hover:{Feature:Qce}},lue={layout:{ProjectionNode:Mz,MeasureLayout:Yz}},cue={...Rce,...sue,...Yce,...lue},pi=Tce(cue,Ace),Qz=_.createContext(void 0),uS=async(e,t,n)=>{const r=new Promise((a,i)=>setTimeout(()=>i(new Error(n)),t));return Promise.race([e,r])},Jz=()=>{const[e,t]=_.useState(0),n=["Register your face once...","Teacher takes a class photo...","Boom! Attendance is done.","No more manual roll calls...","No more shouting in class.","Revolutionizing tracking..."];return _.useEffect(()=>{const r=setInterval(()=>{t(a=>(a+1)%n.length)},2500);return()=>clearInterval(r)},[n.length]),h.jsxs("div",{className:"relative flex h-screen w-full flex-col items-center justify-center overflow-hidden bg-black text-white",children:[h.jsxs("div",{className:"absolute inset-0 z-0",children:[h.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-500/10 rounded-full blur-[120px] animate-pulse"}),h.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[120px] animate-pulse delay-700"})]}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-12",children:[h.jsxs("div",{className:"relative h-24 w-24 flex items-center justify-center",children:[h.jsx(pi.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 rounded-full border border-indigo-500/30"}),h.jsx(pi.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 rounded-full bg-indigo-500/20 blur-xl"}),h.jsx("div",{className:"relative flex items-center gap-1",children:[0,1,2].map(r=>h.jsx(pi.div,{animate:{height:[8,24,8],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:r*.2,ease:"easeInOut"},className:"w-1.5 bg-indigo-500 rounded-full"},r))})]}),h.jsxs("div",{className:"flex flex-col items-center gap-4 text-center px-6",children:[h.jsx(pi.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-4xl font-black tracking-tighter bg-gradient-to-b from-white to-gray-500 bg-clip-text text-transparent",children:"AttendU"}),h.jsx("div",{className:"h-8 flex items-center justify-center overflow-hidden",children:h.jsx(Fz,{mode:"wait",children:h.jsx(pi.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},className:"text-indigo-400 font-bold text-sm tracking-wide uppercase",children:n[e]},e)})})]}),h.jsxs(pi.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-4 flex items-center gap-3 rounded-full bg-white/5 px-6 py-2.5 border border-white/10 backdrop-blur-md",children:[h.jsx("div",{className:"h-2 w-2 rounded-full bg-indigo-500 animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.8)]"}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-400",children:"Initializing System"})]})]}),h.jsx("div",{className:"absolute bottom-10 left-0 w-full text-center",children:h.jsxs("p",{className:"text-[10px] uppercase tracking-[0.4em] text-white/20 font-black",children:["Developed by ",h.jsx("a",{href:"https://www.facebook.com/zeeshanzeehad/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-indigo-400 transition-colors",children:"Zihad (The Dev)"})]})})]})};function uue({children:e}){const[t,n]=_.useState(()=>{const E=localStorage.getItem("auth_user");return E?JSON.parse(E):null}),[r,a]=_.useState(()=>localStorage.getItem("auth_role")),[i,o]=_.useState(()=>localStorage.getItem("auth_isAuthenticated")==="true"),s=E=>{n(E),E?localStorage.setItem("auth_user",JSON.stringify(E)):localStorage.removeItem("auth_user")},l=E=>{a(E),E?localStorage.setItem("auth_role",E):localStorage.removeItem("auth_role")},c=E=>{o(E),localStorage.setItem("auth_isAuthenticated",E.toString())},[u,d]=_.useState(()=>localStorage.getItem("selectedRole")),f=E=>{d(E),E?localStorage.setItem("selectedRole",E):localStorage.removeItem("selectedRole")},[p,v]=_.useState(null),[m,g]=_.useState(!i),y=z.useRef(!1),x=async(E,k=0)=>{var N,T;if(y.current)return!0;y.current=!0;try{const{data:A,error:P}=await uS(ze.from("profiles").select("*, students(id, face_registered, section_id), teachers(id)").eq("id",E.id).maybeSingle(),5e3,"Profile fetch delayed");if(P||!A)return k<2?(y.current=!1,await new Promise(D=>setTimeout(D,200)),await x(E,k+1)):!1;const I=A.role;let R={};return I==="student"&&((N=A.students)!=null&&N[0])?R={student_id:A.students[0].id,section_id:A.students[0].section_id,face_registered:A.students[0].face_registered}:I==="teacher"&&((T=A.teachers)!=null&&T[0])&&(R={teacher_id:A.teachers[0].id}),s({...E,...A,...R,students:void 0,teachers:void 0}),l(I),c(!0),!0}catch{return!1}finally{y.current=!1}};_.useEffect(()=>{let E=!0,k=!1;const N=setTimeout(()=>{E&&m&&g(!1)},12e3),T=async I=>{E&&(I?await x(I.user):(s(null),l(null),c(!1)),E&&(g(!1),k=!0))};(async()=>{try{const{data:{session:I}}=await ze.auth.getSession();E&&!k&&await T(I)}catch{E&&g(!1)}})();const{data:{subscription:P}}=ze.auth.onAuthStateChange(async(I,R)=>{E&&await T(R)});return()=>{E=!1,clearTimeout(N),P.unsubscribe()}},[]);const b=async(E,k)=>{try{const{data:N,error:T}=await uS(ze.auth.signInWithPassword({email:E,password:k}),15e3,"Login timeout");if(T)return{success:!1,error:T.message};if(N.user){const{data:A}=await ze.from("profiles").select("role").eq("id",N.user.id).maybeSingle();if(A&&u&&A.role!==u)return await ze.auth.signOut(),{success:!1,error:`Access Denied: You are a ${A.role}.`};if(!await x(N.user))return{success:!1,error:"Profile sync failed"}}return{success:!0}}catch(N){return{success:!1,error:N.message}}},w=async E=>{try{const k=E.email.trim(),N=E.password,{data:T,error:A}=await uS(ze.auth.signUp({email:k,password:N,options:{data:{name:E.name,role:E.role}}}),15e3,"Signup timeout");if(A){if(A.message.includes("already registered")){const{data:R,error:D}=await ze.auth.signInWithPassword({email:k,password:N});if(!D&&R.user){const{data:M}=await ze.from("profiles").select("id").eq("id",R.user.id).maybeSingle();if(!M){const $=R.user.id,{error:j}=await ze.from("profiles").insert([{id:$,email:k,name:E.name,role:E.role}]);return j?{success:!1,error:"Repair failed (profile): "+j.message}:(E.role==="student"?await ze.from("students").insert([{profile_id:$,student_id:E.studentId,section_id:E.section_id,is_active:!0}]):E.role==="teacher"&&await ze.from("teachers").insert([{profile_id:$,faculty_id:E.facultyId,is_active:!0}]),await x(R.user),{success:!0,userId:$})}}return{success:!1,error:"This email is already registered. Please login instead."}}return{success:!1,error:A.message}}if(!T.user)return{success:!1,error:"Signup failed"};const P=T.user.id,{error:I}=await ze.from("profiles").insert([{id:P,email:E.email,name:E.name,role:E.role}]);return I?{success:!1,error:I.message}:(E.role==="student"?await ze.from("students").insert([{profile_id:P,student_id:E.studentId,section_id:E.section_id,is_active:!0}]):E.role==="teacher"&&await ze.from("teachers").insert([{profile_id:P,faculty_id:E.facultyId,is_active:!0}]),{success:!0,userId:P})}catch(k){return{success:!1,error:k.message}}},S=async()=>{n(null),a(null),o(!1),d(null);const E=["auth_user","auth_role","auth_isAuthenticated","selectedRole","sb-attendance-auth-token"];for(let k=0;k<localStorage.length;k++){const N=localStorage.key(k);N&&(N.startsWith("cache_")||N.startsWith("auth_")||N.includes("supabase.auth"))&&E.push(N)}E.forEach(k=>localStorage.removeItem(k));try{await ze.auth.signOut()}catch(k){console.error("Signout error:",k)}finally{window.location.href="/"}},C=async(E,k)=>{try{const N={face_registered:!0,face_embedding:k?JSON.stringify(k):null},{error:T}=await ze.from("students").update(N).eq("profile_id",E);if(T)throw T;if(t&&t.id===E){const A={...t,face_registered:!0};s(A)}return{success:!0}}catch(N){return{success:!1,error:N.message}}};return m?h.jsx(Jz,{}):h.jsx(Qz.Provider,{value:{user:t,role:r,loading:m,isAuthenticated:i,selectedRole:u,setSelectedRole:f,login:b,signup:w,logout:S,pendingStudentId:p,setPendingStudentId:v,completeFaceRegistration:C},children:e})}function kr(){const e=_.useContext(Qz);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const due=new RB;function fue({children:e}){return h.jsx(IB,{client:due,children:h.jsx(uue,{children:h.jsxs(mte,{children:[e,h.jsx(mne,{}),h.jsx(qne,{})]})})})}const hue=sv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=_.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?AJ:"button";return h.jsx(o,{className:Te(hue({variant:t,size:n,className:e})),ref:i,...a})});we.displayName="Button";function pue(){return h.jsxs("div",{className:"relative h-screen w-full overflow-hidden bg-black",children:[h.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(rgba(100, 100, 100, 0.15) 1px, transparent 1px),
            linear-gradient(90deg, rgba(100, 100, 100, 0.15) 1px, transparent 1px)
          `,backgroundSize:"60px 60px"}}),h.jsx("div",{className:"relative z-10 flex h-full w-full flex-col items-center justify-center px-4 pb-24 sm:px-6 sm:pb-20",children:h.jsxs(pi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[h.jsxs("h1",{className:"mb-6 text-4xl font-black uppercase leading-tight tracking-tight text-white sm:mb-8 sm:text-5xl md:mb-10 md:text-7xl lg:mb-12 lg:text-8xl xl:text-9xl",children:["Face Recognition",h.jsx("br",{}),"Attendance System"]}),h.jsx("p",{className:"mx-auto mb-6 max-w-3xl px-2 text-sm leading-relaxed text-gray-400 sm:mb-8 sm:px-4 sm:text-base md:mb-10 md:text-lg lg:mb-12 lg:text-xl lg:leading-relaxed",children:"AI-powered biometric attendance tracking. Instant verification, zero manual entries, complete automation for educational institutions."}),h.jsx(EB,{to:"/role-selection",className:"mt-2 inline-block sm:mt-3 md:mt-4 lg:mt-6",children:h.jsx(we,{size:"lg",className:"h-11 px-6 text-xs font-bold uppercase tracking-wider hover:bg-indigo-700 sm:h-12 sm:px-8 sm:text-sm md:h-14 md:px-10 md:text-base lg:h-16 lg:px-12 lg:text-lg",children:"Get Started"})})]})}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10 border-t border-white/10 bg-black/50 px-4 py-3 backdrop-blur-sm sm:px-6 sm:py-4",children:h.jsxs("div",{className:"mx-auto grid max-w-7xl grid-cols-1 items-center gap-4 sm:grid-cols-3",children:[h.jsx("div",{className:"order-2 text-center sm:order-1 sm:text-left",children:h.jsxs("p",{className:"text-[10px] text-gray-500 sm:text-xs",children:[" ",new Date().getFullYear()," AttendU. All rights reserved."]})}),h.jsxs("div",{className:"order-1 flex items-center justify-center gap-2 sm:order-2",children:[h.jsx("span",{className:"text-[10px] font-medium tracking-wider uppercase text-gray-500 sm:text-[11px]",children:"Developed by"}),h.jsxs(pi.a,{href:"https://www.facebook.com/zeeshanzeehad/",target:"_blank",rel:"noopener noreferrer",initial:{opacity:.5},animate:{opacity:[.8,1,.8],textShadow:["0 0 4px rgba(99, 102, 241, 0.2)","0 0 15px rgba(99, 102, 241, 0.8)","0 0 4px rgba(99, 102, 241, 0.2)"],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"text-[12px] font-black tracking-widest uppercase text-white sm:text-[14px] cursor-pointer",style:{fontFamily:"'Outfit', sans-serif"},children:["Zihad ",h.jsx("span",{className:"text-indigo-400 drop-shadow-[0_0_8px_rgba(99,102,241,0.5)]",children:"(The dev)"})]})]}),h.jsxs("div",{className:"order-3 flex items-center justify-center gap-6 sm:justify-end",children:[h.jsx("a",{href:"https://github.com/zeehadzeeshan",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 transition-all duration-300 hover:text-white hover:scale-110",children:h.jsx(ene,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),h.jsx("a",{href:"https://www.facebook.com/zeeshanzeehad/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 transition-all duration-300 hover:text-white hover:scale-110",children:h.jsx(Jte,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),h.jsx("a",{href:"https://www.linkedin.com/in/md-zihaduzzaman",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 transition-all duration-300 hover:text-white hover:scale-110",children:h.jsx(ane,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})})]})}function mue(){return h.jsx(pue,{})}function FI(e,[t,n]){return Math.min(n,Math.max(t,e))}var vue=_.createContext(void 0);function Rb(e){const t=_.useContext(vue);return e||t||"ltr"}var dS=0;function Ib(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??LI()),document.body.insertAdjacentElement("beforeend",e[1]??LI()),dS++,()=>{dS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),dS--}},[])}function LI(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fS="focusScope.autoFocusOnMount",hS="focusScope.autoFocusOnUnmount",BI={bubbles:!1,cancelable:!0},gue="FocusScope",hv=_.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,l]=_.useState(null),c=Xr(a),u=Xr(i),d=_.useRef(null),f=ft(t,m=>l(m)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let m=function(b){if(p.paused||!s)return;const w=b.target;s.contains(w)?d.current=w:Rs(d.current,{select:!0})},g=function(b){if(p.paused||!s)return;const w=b.relatedTarget;w!==null&&(s.contains(w)||Rs(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Rs(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const x=new MutationObserver(y);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),x.disconnect()}}},[r,s,p.paused]),_.useEffect(()=>{if(s){zI.add(p);const m=document.activeElement;if(!s.contains(m)){const y=new CustomEvent(fS,BI);s.addEventListener(fS,c),s.dispatchEvent(y),y.defaultPrevented||(yue(_ue(Zz(s)),{select:!0}),document.activeElement===m&&Rs(s))}return()=>{s.removeEventListener(fS,c),setTimeout(()=>{const y=new CustomEvent(hS,BI);s.addEventListener(hS,u),s.dispatchEvent(y),y.defaultPrevented||Rs(m??document.body,{select:!0}),s.removeEventListener(hS,u),zI.remove(p)},0)}}},[s,c,u,p]);const v=_.useCallback(m=>{if(!n&&!r||p.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const x=m.currentTarget,[b,w]=xue(x);b&&w?!m.shiftKey&&y===w?(m.preventDefault(),n&&Rs(b,{select:!0})):m.shiftKey&&y===b&&(m.preventDefault(),n&&Rs(w,{select:!0})):y===x&&m.preventDefault()}},[n,r,p.paused]);return h.jsx(Fe.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});hv.displayName=gue;function yue(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Rs(r,{select:t}),document.activeElement!==n)return}function xue(e){const t=Zz(e),n=UI(t,e),r=UI(t.reverse(),e);return[n,r]}function Zz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function UI(e,t){for(const n of e)if(!bue(n,{upTo:t}))return n}function bue(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wue(e){return e instanceof HTMLInputElement&&"select"in e}function Rs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&wue(e)&&t&&e.select()}}var zI=Sue();function Sue(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=WI(e,t),e.unshift(t)},remove(t){var n;e=WI(e,t),(n=e[0])==null||n.resume()}}}function WI(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function _ue(e){return e.filter(t=>t.tagName!=="A")}function _T(e){const t=_.useRef({value:e,previous:e});return _.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Cue=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ku=new WeakMap,yg=new WeakMap,xg={},pS=0,eW=function(e){return e&&(e.host||eW(e.parentNode))},Eue=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=eW(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},kue=function(e,t,n,r){var a=Eue(t,Array.isArray(e)?e:[e]);xg[n]||(xg[n]=new WeakMap);var i=xg[n],o=[],s=new Set,l=new Set(a),c=function(d){!d||s.has(d)||(s.add(d),c(d.parentNode))};a.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))u(f);else try{var p=f.getAttribute(r),v=p!==null&&p!=="false",m=(ku.get(f)||0)+1,g=(i.get(f)||0)+1;ku.set(f,m),i.set(f,g),o.push(f),m===1&&v&&yg.set(f,!0),g===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(t),s.clear(),pS++,function(){o.forEach(function(d){var f=ku.get(d)-1,p=i.get(d)-1;ku.set(d,f),i.set(d,p),f||(yg.has(d)||d.removeAttribute(r),yg.delete(d)),p||d.removeAttribute(n)}),pS--,pS||(ku=new WeakMap,ku=new WeakMap,yg=new WeakMap,xg={})}},Db=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Cue(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),kue(r,a,n,"aria-hidden")):function(){return null}},xy="right-scroll-bar-position",by="width-before-scroll-bar",Nue="with-scroll-bars-hidden",Tue="--removed-body-scroll-bar-size";function mS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Aue(e,t){var n=_.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Pue=typeof window<"u"?_.useLayoutEffect:_.useEffect,VI=new WeakMap;function jue(e,t){var n=Aue(null,function(r){return e.forEach(function(a){return mS(a,r)})});return Pue(function(){var r=VI.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||mS(s,null)}),i.forEach(function(s){a.has(s)||mS(s,o)})}VI.set(n,e)},[e]),n}function Oue(e){return e}function Rue(e,t){t===void 0&&(t=Oue);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return a}function Iue(e){e===void 0&&(e={});var t=Rue(null);return t.options=Vi({async:!0,ssr:!1},e),t}var tW=function(e){var t=e.sideCar,n=Uf(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Vi({},n))};tW.isSideCarExport=!0;function Due(e,t){return e.useMedium(t),tW}var nW=Iue(),vS=function(){},Mb=_.forwardRef(function(e,t){var n=_.useRef(null),r=_.useState({onScrollCapture:vS,onWheelCapture:vS,onTouchMoveCapture:vS}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,p=e.noRelative,v=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,b=e.gapMode,w=Uf(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,C=jue([n,t]),E=Vi(Vi({},w),a);return _.createElement(_.Fragment,null,u&&_.createElement(S,{sideCar:nW,removeScrollBar:c,shards:d,noRelative:p,noIsolation:v,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?_.cloneElement(_.Children.only(s),Vi(Vi({},E),{ref:C})):_.createElement(x,Vi({},E,{className:l,ref:C}),s))});Mb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mb.classNames={fullWidth:by,zeroRight:xy};var Mue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $ue(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Mue();return t&&e.setAttribute("nonce",t),e}function Fue(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Lue(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Bue=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$ue())&&(Fue(t,n),Lue(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Uue=function(){var e=Bue();return function(t,n){_.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},rW=function(){var e=Uue(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},zue={left:0,top:0,right:0,gap:0},gS=function(e){return parseInt(e||"",10)||0},Wue=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[gS(n),gS(r),gS(a)]},Vue=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zue;var t=Wue(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Hue=rW(),Cd="data-scroll-locked",Gue=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Nue,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Cd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xy,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(by,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(xy," .").concat(xy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(by," .").concat(by,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Cd,`] {
    `).concat(Tue,": ").concat(s,`px;
  }
`)},HI=function(){var e=parseInt(document.body.getAttribute(Cd)||"0",10);return isFinite(e)?e:0},que=function(){_.useEffect(function(){return document.body.setAttribute(Cd,(HI()+1).toString()),function(){var e=HI()-1;e<=0?document.body.removeAttribute(Cd):document.body.setAttribute(Cd,e.toString())}},[])},Kue=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;que();var i=_.useMemo(function(){return Vue(a)},[a]);return _.createElement(Hue,{styles:Gue(i,!t,a,n?"":"!important")})},yC=!1;if(typeof window<"u")try{var bg=Object.defineProperty({},"passive",{get:function(){return yC=!0,!0}});window.addEventListener("test",bg,bg),window.removeEventListener("test",bg,bg)}catch{yC=!1}var Nu=yC?{passive:!1}:!1,Xue=function(e){return e.tagName==="TEXTAREA"},aW=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Xue(e)&&n[t]==="visible")},Yue=function(e){return aW(e,"overflowY")},Que=function(e){return aW(e,"overflowX")},GI=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=iW(e,r);if(a){var i=oW(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Jue=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Zue=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},iW=function(e,t){return e==="v"?Yue(t):Que(t)},oW=function(e,t){return e==="v"?Jue(t):Zue(t)},ede=function(e,t){return e==="h"&&t==="rtl"?-1:1},tde=function(e,t,n,r,a){var i=ede(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,l=t.contains(s),c=!1,u=o>0,d=0,f=0;do{if(!s)break;var p=oW(e,s),v=p[0],m=p[1],g=p[2],y=m-g-i*v;(v||y)&&iW(e,s)&&(d+=y,f+=v);var x=s.parentNode;s=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!a)||!u&&(Math.abs(f)<1||!a))&&(c=!0),c},wg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qI=function(e){return[e.deltaX,e.deltaY]},KI=function(e){return e&&"current"in e?e.current:e},nde=function(e,t){return e[0]===t[0]&&e[1]===t[1]},rde=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ade=0,Tu=[];function ide(e){var t=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),a=_.useState(ade++)[0],i=_.useState(rW)[0],o=_.useRef(e);_.useEffect(function(){o.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var m=Xne([e.lockRef.current],(e.shards||[]).map(KI),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=_.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=wg(m),x=n.current,b="deltaX"in m?m.deltaX:x[0]-y[0],w="deltaY"in m?m.deltaY:x[1]-y[1],S,C=m.target,E=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var k=GI(E,C);if(!k)return!0;if(k?S=E:(S=E==="v"?"h":"v",k=GI(E,C)),!k)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=S),!S)return!0;var N=r.current||S;return tde(N,g,m,N==="h"?b:w,!0)},[]),l=_.useCallback(function(m){var g=m;if(!(!Tu.length||Tu[Tu.length-1]!==i)){var y="deltaY"in g?qI(g):wg(g),x=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&nde(S.delta,y)})[0];if(x&&x.should){g.cancelable&&g.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(KI).filter(Boolean).filter(function(S){return S.contains(g.target)}),w=b.length>0?s(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),c=_.useCallback(function(m,g,y,x){var b={name:m,delta:g,target:y,should:x,shadowParent:ode(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),u=_.useCallback(function(m){n.current=wg(m),r.current=void 0},[]),d=_.useCallback(function(m){c(m.type,qI(m),m.target,s(m,e.lockRef.current))},[]),f=_.useCallback(function(m){c(m.type,wg(m),m.target,s(m,e.lockRef.current))},[]);_.useEffect(function(){return Tu.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Nu),document.addEventListener("touchmove",l,Nu),document.addEventListener("touchstart",u,Nu),function(){Tu=Tu.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Nu),document.removeEventListener("touchmove",l,Nu),document.removeEventListener("touchstart",u,Nu)}},[]);var p=e.removeScrollBar,v=e.inert;return _.createElement(_.Fragment,null,v?_.createElement(i,{styles:rde(a)}):null,p?_.createElement(Kue,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ode(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sde=Due(nW,ide);var pv=_.forwardRef(function(e,t){return _.createElement(Mb,Vi({},e,{ref:t,sideCar:sde}))});pv.classNames=Mb.classNames;var lde=[" ","Enter","ArrowUp","ArrowDown"],cde=[" ","Enter"],Hc="Select",[$b,Fb,ude]=bb(Hc),[Hf,vVe]=Sa(Hc,[ude,Rl]),Lb=Rl(),[dde,Dl]=Hf(Hc),[fde,hde]=Hf(Hc),sW=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:v}=e,m=Lb(t),[g,y]=_.useState(null),[x,b]=_.useState(null),[w,S]=_.useState(!1),C=Rb(c),[E,k]=uo({prop:r,defaultProp:a??!1,onChange:i,caller:Hc}),[N,T]=uo({prop:o,defaultProp:s,onChange:l,caller:Hc}),A=_.useRef(null),P=g?v||!!g.closest("form"):!0,[I,R]=_.useState(new Set),D=Array.from(I).map(M=>M.props.value).join(";");return h.jsx(RN,{...m,children:h.jsxs(dde,{required:p,scope:t,trigger:g,onTriggerChange:y,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:S,contentId:sr(),value:N,onValueChange:T,open:E,onOpenChange:k,dir:C,triggerPointerDownPosRef:A,disabled:f,children:[h.jsx($b.Provider,{scope:t,children:h.jsx(fde,{scope:e.__scopeSelect,onNativeOptionAdd:_.useCallback(M=>{R($=>new Set($).add(M))},[]),onNativeOptionRemove:_.useCallback(M=>{R($=>{const j=new Set($);return j.delete(M),j})},[]),children:n})}),P?h.jsxs(jW,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:N,onChange:M=>T(M.target.value),disabled:f,form:v,children:[N===void 0?h.jsx("option",{value:""}):null,Array.from(I)]},D):null]})})};sW.displayName=Hc;var lW="SelectTrigger",cW=_.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Lb(n),o=Dl(lW,n),s=o.disabled||r,l=ft(t,o.onTriggerChange),c=Fb(n),u=_.useRef("touch"),[d,f,p]=RW(m=>{const g=c().filter(b=>!b.disabled),y=g.find(b=>b.value===o.value),x=IW(g,m,y);x!==void 0&&o.onValueChange(x.value)}),v=m=>{s||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(iv,{asChild:!0,...i,children:h.jsx(Fe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":OW(o.value)?"":void 0,...a,ref:l,onClick:ye(a.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&v(m)}),onPointerDown:ye(a.onPointerDown,m=>{u.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(v(m),m.preventDefault())}),onKeyDown:ye(a.onKeyDown,m=>{const g=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(g&&m.key===" ")&&lde.includes(m.key)&&(v(),m.preventDefault())})})})});cW.displayName=lW;var uW="SelectValue",dW=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,l=Dl(uW,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=ft(t,l.onValueNodeChange);return cr(()=>{c(u)},[c,u]),h.jsx(Fe.span,{...s,ref:d,style:{pointerEvents:"none"},children:OW(l.value)?h.jsx(h.Fragment,{children:o}):i})});dW.displayName=uW;var pde="SelectIcon",fW=_.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return h.jsx(Fe.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});fW.displayName=pde;var mde="SelectPortal",hW=e=>h.jsx(Lf,{asChild:!0,...e});hW.displayName=mde;var Gc="SelectContent",pW=_.forwardRef((e,t)=>{const n=Dl(Gc,e.__scopeSelect),[r,a]=_.useState();if(cr(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?au.createPortal(h.jsx(mW,{scope:e.__scopeSelect,children:h.jsx($b.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),i):null}return h.jsx(vW,{...e,ref:t})});pW.displayName=Gc;var ai=10,[mW,Ml]=Hf(Gc),vde="SelectContentImpl",gde=wl("SelectContent.RemoveScroll"),vW=_.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:g,...y}=e,x=Dl(Gc,n),[b,w]=_.useState(null),[S,C]=_.useState(null),E=ft(t,Z=>w(Z)),[k,N]=_.useState(null),[T,A]=_.useState(null),P=Fb(n),[I,R]=_.useState(!1),D=_.useRef(!1);_.useEffect(()=>{if(b)return Db(b)},[b]),Ib();const M=_.useCallback(Z=>{const[K,...Q]=P().map(q=>q.ref.current),[ie]=Q.slice(-1),V=document.activeElement;for(const q of Z)if(q===V||(q==null||q.scrollIntoView({block:"nearest"}),q===K&&S&&(S.scrollTop=0),q===ie&&S&&(S.scrollTop=S.scrollHeight),q==null||q.focus(),document.activeElement!==V))return},[P,S]),$=_.useCallback(()=>M([k,b]),[M,k,b]);_.useEffect(()=>{I&&$()},[I,$]);const{onOpenChange:j,triggerPointerDownPosRef:O}=x;_.useEffect(()=>{if(b){let Z={x:0,y:0};const K=ie=>{var V,q;Z={x:Math.abs(Math.round(ie.pageX)-(((V=O.current)==null?void 0:V.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((q=O.current)==null?void 0:q.y)??0))}},Q=ie=>{Z.x<=10&&Z.y<=10?ie.preventDefault():b.contains(ie.target)||j(!1),document.removeEventListener("pointermove",K),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",K),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",Q,{capture:!0})}}},[b,j,O]),_.useEffect(()=>{const Z=()=>j(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[j]);const[B,G]=RW(Z=>{const K=P().filter(V=>!V.disabled),Q=K.find(V=>V.ref.current===document.activeElement),ie=IW(K,Z,Q);ie&&setTimeout(()=>ie.ref.current.focus())}),L=_.useCallback((Z,K,Q)=>{const ie=!D.current&&!Q;(x.value!==void 0&&x.value===K||ie)&&(N(Z),ie&&(D.current=!0))},[x.value]),W=_.useCallback(()=>b==null?void 0:b.focus(),[b]),J=_.useCallback((Z,K,Q)=>{const ie=!D.current&&!Q;(x.value!==void 0&&x.value===K||ie)&&A(Z)},[x.value]),ee=r==="popper"?xC:gW,ne=ee===xC?{side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:g}:{};return h.jsx(mW,{scope:n,content:b,viewport:S,onViewportChange:C,itemRefCallback:L,selectedItem:k,onItemLeave:W,itemTextRefCallback:J,focusSelectedItem:$,selectedItemText:T,position:r,isPositioned:I,searchRef:B,children:h.jsx(pv,{as:gde,allowPinchZoom:!0,children:h.jsx(hv,{asChild:!0,trapped:x.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:ye(a,Z=>{var K;(K=x.trigger)==null||K.focus({preventScroll:!0}),Z.preventDefault()}),children:h.jsx(ou,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(ee,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Z=>Z.preventDefault(),...y,...ne,onPlaced:()=>R(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ye(y.onKeyDown,Z=>{const K=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!K&&Z.key.length===1&&G(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ie=P().filter(V=>!V.disabled).map(V=>V.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const V=Z.target,q=ie.indexOf(V);ie=ie.slice(q+1)}setTimeout(()=>M(ie)),Z.preventDefault()}})})})})})})});vW.displayName=vde;var yde="SelectItemAlignedPosition",gW=_.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Dl(Gc,n),o=Ml(Gc,n),[s,l]=_.useState(null),[c,u]=_.useState(null),d=ft(t,E=>u(E)),f=Fb(n),p=_.useRef(!1),v=_.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:x}=o,b=_.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&m&&g&&y){const E=i.trigger.getBoundingClientRect(),k=c.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(i.dir!=="rtl"){const V=T.left-k.left,q=N.left-V,de=E.left-q,he=E.width+de,ae=Math.max(he,k.width),le=window.innerWidth-ai,ge=FI(q,[ai,Math.max(ai,le-ae)]);s.style.minWidth=he+"px",s.style.left=ge+"px"}else{const V=k.right-T.right,q=window.innerWidth-N.right-V,de=window.innerWidth-E.right-q,he=E.width+de,ae=Math.max(he,k.width),le=window.innerWidth-ai,ge=FI(q,[ai,Math.max(ai,le-ae)]);s.style.minWidth=he+"px",s.style.right=ge+"px"}const A=f(),P=window.innerHeight-ai*2,I=m.scrollHeight,R=window.getComputedStyle(c),D=parseInt(R.borderTopWidth,10),M=parseInt(R.paddingTop,10),$=parseInt(R.borderBottomWidth,10),j=parseInt(R.paddingBottom,10),O=D+M+I+j+$,B=Math.min(g.offsetHeight*5,O),G=window.getComputedStyle(m),L=parseInt(G.paddingTop,10),W=parseInt(G.paddingBottom,10),J=E.top+E.height/2-ai,ee=P-J,ne=g.offsetHeight/2,Z=g.offsetTop+ne,K=D+M+Z,Q=O-K;if(K<=J){const V=A.length>0&&g===A[A.length-1].ref.current;s.style.bottom="0px";const q=c.clientHeight-m.offsetTop-m.offsetHeight,de=Math.max(ee,ne+(V?W:0)+q+$),he=K+de;s.style.height=he+"px"}else{const V=A.length>0&&g===A[0].ref.current;s.style.top="0px";const de=Math.max(J,D+m.offsetTop+(V?L:0)+ne)+Q;s.style.height=de+"px",m.scrollTop=K-J+m.offsetTop}s.style.margin=`${ai}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,s,c,m,g,y,i.dir,r]);cr(()=>b(),[b]);const[w,S]=_.useState();cr(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const C=_.useCallback(E=>{E&&v.current===!0&&(b(),x==null||x(),v.current=!1)},[b,x]);return h.jsx(bde,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:h.jsx(Fe.div,{...a,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});gW.displayName=yde;var xde="SelectPopperPosition",xC=_.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=ai,...i}=e,o=Lb(n);return h.jsx(mb,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xC.displayName=xde;var[bde,CT]=Hf(Gc,{}),bC="SelectViewport",yW=_.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Ml(bC,n),o=CT(bC,n),s=ft(t,i.onViewportChange),l=_.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx($b.Slot,{scope:n,children:h.jsx(Fe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ye(a.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const v=window.innerHeight-ai*2,m=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),y=Math.max(m,g);if(y<v){const x=y+p,b=Math.min(v,x),w=x-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});yW.displayName=bC;var xW="SelectGroup",[wde,Sde]=Hf(xW),_de=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=sr();return h.jsx(wde,{scope:n,id:a,children:h.jsx(Fe.div,{role:"group","aria-labelledby":a,...r,ref:t})})});_de.displayName=xW;var bW="SelectLabel",wW=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Sde(bW,n);return h.jsx(Fe.div,{id:a.id,...r,ref:t})});wW.displayName=bW;var m0="SelectItem",[Cde,SW]=Hf(m0),_W=_.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=Dl(m0,n),l=Ml(m0,n),c=s.value===r,[u,d]=_.useState(i??""),[f,p]=_.useState(!1),v=ft(t,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,a)}),m=sr(),g=_.useRef("touch"),y=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Cde,{scope:n,value:r,disabled:a,textId:m,isSelected:c,onItemTextChange:_.useCallback(x=>{d(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx($b.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:h.jsx(Fe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:ye(o.onFocus,()=>p(!0)),onBlur:ye(o.onBlur,()=>p(!1)),onClick:ye(o.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:ye(o.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:ye(o.onPointerDown,x=>{g.current=x.pointerType}),onPointerMove:ye(o.onPointerMove,x=>{var b;g.current=x.pointerType,a?(b=l.onItemLeave)==null||b.call(l):g.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:ye(o.onKeyDown,x=>{var w;((w=l.searchRef)==null?void 0:w.current)!==""&&x.key===" "||(cde.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});_W.displayName=m0;var Uh="SelectItemText",CW=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=Dl(Uh,n),s=Ml(Uh,n),l=SW(Uh,n),c=hde(Uh,n),[u,d]=_.useState(null),f=ft(t,y=>d(y),l.onItemTextChange,y=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,v=_.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return cr(()=>(m(v),()=>g(v)),[m,g,v]),h.jsxs(h.Fragment,{children:[h.jsx(Fe.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?au.createPortal(i.children,o.valueNode):null]})});CW.displayName=Uh;var EW="SelectItemIndicator",kW=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return SW(EW,n).isSelected?h.jsx(Fe.span,{"aria-hidden":!0,...r,ref:t}):null});kW.displayName=EW;var wC="SelectScrollUpButton",NW=_.forwardRef((e,t)=>{const n=Ml(wC,e.__scopeSelect),r=CT(wC,e.__scopeSelect),[a,i]=_.useState(!1),o=ft(t,r.onScrollButtonChange);return cr(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?h.jsx(AW,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});NW.displayName=wC;var SC="SelectScrollDownButton",TW=_.forwardRef((e,t)=>{const n=Ml(SC,e.__scopeSelect),r=CT(SC,e.__scopeSelect),[a,i]=_.useState(!1),o=ft(t,r.onScrollButtonChange);return cr(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?h.jsx(AW,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});TW.displayName=SC;var AW=_.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Ml("SelectScrollButton",n),o=_.useRef(null),s=Fb(n),l=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),cr(()=>{var u;const c=s().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),h.jsx(Fe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ye(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ye(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ye(a.onPointerLeave,()=>{l()})})}),Ede="SelectSeparator",PW=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Fe.div,{"aria-hidden":!0,...r,ref:t})});PW.displayName=Ede;var _C="SelectArrow",kde=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Lb(n),i=Dl(_C,n),o=Ml(_C,n);return i.open&&o.position==="popper"?h.jsx(vb,{...a,...r,ref:t}):null});kde.displayName=_C;var Nde="SelectBubbleInput",jW=_.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=_.useRef(null),i=ft(r,a),o=_T(t);return _.useEffect(()=>{const s=a.current;if(!s)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const d=new Event("change",{bubbles:!0});u.call(s,t),s.dispatchEvent(d)}},[o,t]),h.jsx(Fe.select,{...n,style:{...o5,...n.style},ref:i,defaultValue:t})});jW.displayName=Nde;function OW(e){return e===""||e===void 0}function RW(e){const t=Xr(e),n=_.useRef(""),r=_.useRef(0),a=_.useCallback(o=>{const s=n.current+o;t(s),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function IW(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Tde(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function Tde(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Ade=sW,DW=cW,Pde=dW,jde=fW,Ode=hW,MW=pW,Rde=yW,$W=wW,FW=_W,Ide=CW,Dde=kW,LW=NW,BW=TW,UW=PW;const _t=Ade,Ct=Pde,bt=_.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(DW,{ref:r,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(jde,{asChild:!0,children:h.jsx(LN,{className:"h-4 w-4 opacity-50"})})]}));bt.displayName=DW.displayName;const zW=_.forwardRef(({className:e,...t},n)=>h.jsx(LW,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(Kte,{className:"h-4 w-4"})}));zW.displayName=LW.displayName;const WW=_.forwardRef(({className:e,...t},n)=>h.jsx(BW,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(LN,{className:"h-4 w-4"})}));WW.displayName=BW.displayName;const wt=_.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>h.jsx(Ode,{children:h.jsxs(MW,{ref:a,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(zW,{}),h.jsx(Rde,{className:Te("p-1",n==="popper"&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(WW,{})]})}));wt.displayName=MW.displayName;const Mde=_.forwardRef(({className:e,...t},n)=>h.jsx($W,{ref:n,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Mde.displayName=$W.displayName;const it=_.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(FW,{ref:r,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Dde,{children:h.jsx(Sb,{className:"h-4 w-4"})})}),h.jsx(Ide,{children:t})]}));it.displayName=FW.displayName;const $de=_.forwardRef(({className:e,...t},n)=>h.jsx(UW,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));$de.displayName=UW.displayName;const Et=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Et.displayName="Card";const zn=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));zn.displayName="CardHeader";const rr=_.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:Te("text-2xl font-semibold leading-none tracking-tight",e),...t}));rr.displayName="CardTitle";const zo=_.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));zo.displayName="CardDescription";const Ut=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Te("p-6 pt-0",e),...t}));Ut.displayName="CardContent";const VW=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Te("flex items-center p-6 pt-0",e),...t}));VW.displayName="CardFooter";const Gf=({variant:e="dark"})=>{const t=e==="dark";return h.jsx("footer",{className:`w-full py-6 px-4 border-t mt-auto ${t?"border-white/10 bg-black/50 backdrop-blur-sm":"border-gray-200 bg-gray-50/80 backdrop-blur-sm"}`,children:h.jsx("div",{className:`max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-center gap-4 text-sm ${t?"text-gray-400":"text-gray-600"}`,children:h.jsxs("div",{className:`flex items-center gap-1.5 font-medium group transition-colors ${t?"hover:text-white":"hover:text-gray-900"}`,children:[h.jsx("span",{children:"Developed by"}),h.jsx("a",{href:"https://www.facebook.com/zeeshanzeehad/",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 font-bold hover:text-indigo-300 transition-colors",children:"Zihad (The Dev)"}),h.jsx(tne,{className:"w-3.5 h-3.5 text-rose-500 fill-rose-500 animate-pulse"})]})})})},Fde=()=>{const e=Ha(),{setSelectedRole:t,isAuthenticated:n,role:r}=kr(),[a,i]=_.useState("");_.useEffect(()=>{n&&r&&(r==="admin"?e("/admin/dashboard",{replace:!0}):r==="teacher"?e("/teacher/dashboard",{replace:!0}):r==="student"&&e("/student/attendance",{replace:!0}))},[n,r,e]);const o=()=>{a&&(a==="admin"?(t("admin"),e("/admin/login")):(t(a),e("/auth")))};return h.jsxs("div",{className:"relative min-h-screen w-full bg-black flex flex-col",children:[h.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(rgba(100, 100, 100, 0.15) 1px, transparent 1px),
            linear-gradient(90deg, rgba(100, 100, 100, 0.15) 1px, transparent 1px)
          `,backgroundSize:"60px 60px"}}),h.jsx("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center p-4",children:h.jsx("div",{className:"w-full max-w-md animate-fade-in",children:h.jsxs(Et,{className:"border border-white/10 bg-black/40 shadow-xl backdrop-blur-xl ring-1 ring-white/5",children:[h.jsx(zn,{className:"text-center space-y-2 pb-6 pt-8",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx(rr,{className:"text-2xl md:text-3xl font-bold tracking-tight text-white",children:"Welcome Back"}),h.jsx(zo,{className:"text-base text-gray-400",children:"Please select your role to continue"})]})}),h.jsxs(Ut,{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium leading-none text-gray-300",children:"I am a..."}),h.jsxs(_t,{onValueChange:s=>i(s),children:[h.jsx(bt,{className:"h-12 border-white/10 bg-white/5 text-white text-base transition-all duration-200 hover:bg-white/10 focus:ring-2 focus:ring-indigo-500/50",children:h.jsx(Ct,{placeholder:"Select your role"})}),h.jsxs(wt,{className:"border-white/10 bg-black/95 backdrop-blur-xl",children:[h.jsx(it,{value:"student",className:"h-10 cursor-pointer text-white hover:bg-white/10 focus:bg-white/10",children:"Student"}),h.jsx(it,{value:"teacher",className:"h-10 cursor-pointer text-white hover:bg-white/10 focus:bg-white/10",children:"Teacher"}),h.jsx(it,{value:"admin",className:"h-10 cursor-pointer text-white hover:bg-white/10 focus:bg-white/10",children:"Administrator"})]})]})]}),h.jsx(we,{className:"w-full h-11 text-base font-medium bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-indigo-500/25 transition-all duration-300",size:"lg",onClick:o,disabled:!a,children:"Continue"})]})]})})}),h.jsx(Gf,{})]})},Ce={signUp:async(e,t,n)=>await ze.auth.signUp({email:e,password:t,options:{data:n}}),signIn:async(e,t)=>await ze.auth.signInWithPassword({email:e,password:t}),signOut:async()=>await ze.auth.signOut(),getFaculties:async()=>{const{data:e,error:t}=await ze.from("faculties").select("*").order("name");if(t)throw t;return e},createFaculty:async e=>{const{data:t,error:n}=await ze.from("faculties").insert([{name:e}]).select().single();if(n)throw n;return t},getBatches:async e=>{let t=ze.from("batches").select("*").order("name");e&&(t=t.eq("faculty_id",e));const{data:n,error:r}=await t;if(r)throw r;return n},createBatch:async(e,t)=>{const{data:n,error:r}=await ze.from("batches").insert([{faculty_id:e,name:t}]).select().single();if(r)throw r;return n},getSections:async e=>{let t=ze.from("sections").select("*").order("name");e&&(t=t.eq("batch_id",e));const{data:n,error:r}=await t;if(r)throw r;return n},createSection:async(e,t)=>{const{data:n,error:r}=await ze.from("sections").insert([{batch_id:e,name:t}]).select().single();if(r)throw r;return n},endSemester:async e=>{const{error:t}=await ze.rpc("end_semester",{dept_id:e});if(t)throw t},getCourseCatalog:async(e,t)=>{let n=ze.from("course_catalog").select("*, faculty:faculties(name)").order("semester_level").order("subject_name");e&&(n=n.eq("faculty_id",e)),t&&(n=n.eq("semester_level",t));const{data:r,error:a}=await n;if(a)throw a;return r},createCatalogSubject:async(e,t,n,r)=>{const{data:a,error:i}=await ze.from("course_catalog").insert([{faculty_id:e,semester_level:t,subject_name:n,subject_code:r}]).select().single();if(i)throw i;return a},deleteCatalogSubject:async e=>{const{error:t}=await ze.from("course_catalog").delete().eq("id",e);if(t)throw t},getSubjectsForSection:async e=>{const{data:t,error:n}=await ze.from("sections").select("batch_id, batch:batches(faculty_id, current_semester)").eq("id",e).single();if(n)throw n;if(!t||!t.batch)return[];const r=t.batch,{data:a,error:i}=await ze.from("course_catalog").select("*").eq("faculty_id",r.faculty_id).eq("semester_level",r.current_semester).order("subject_name");if(i)throw i;return a},getSubjects:async e=>{let t=[];return e?(t=await Ce.getSubjectsForSection(e),t.map(n=>({id:n.id,name:n.subject_name,code:n.subject_code,section_id:e}))):(t=await Ce.getCourseCatalog(),t.map(n=>({id:n.id,name:n.subject_name,code:n.subject_code,faculty_id:n.faculty_id,semester_level:n.semester_level})))},getProfiles:async e=>{let t=ze.from("profiles").select("*");e&&(t=t.eq("role",e));const{data:n,error:r}=await t;if(r)throw r;return n},getStudents:async()=>{const{data:e,error:t}=await ze.from("students").select(`
      *,
      profile:profiles!profile_id(email, name, role),
      section:sections(name,
        batch:batches(name, faculty_id, current_semester)
      )
    `);if(t)throw t;return e},getTeachers:async()=>{const{data:e,error:t}=await ze.from("teachers").select(`
        *,
        profile:profiles!profile_id(email, name, role)
      `);if(t)throw t;return e},getTeacherByProfileId:async e=>{const{data:t,error:n}=await ze.from("teachers").select("*").eq("profile_id",e).maybeSingle();if(n)throw n;return t},getStudentByProfileId:async e=>{const{data:t,error:n}=await ze.from("students").select("*, section:sections(*, batch:batches(*, faculty:faculties(name)))").eq("profile_id",e).maybeSingle();if(n)throw n;return t},getTeacherAssignments:async e=>{const{data:t,error:n}=await ze.from("teacher_assignments").select(`
        *,
        course_catalog:course_catalog_id (*),
        section:sections(
          *,
          batch:batches(*)
        )
      `).eq("teacher_id",e);if(n)throw n;return t},createTeacherAssignment:async(e,t,n)=>{const{data:r,error:a}=await ze.from("teacher_assignments").insert([{teacher_id:e,section_id:t,course_catalog_id:n}]).select(`
        *,
        course_catalog:course_catalog_id (*),
        section:sections(
          *,
          batch:batches(*)
        )
      `).single();if(a)throw a;return r},deleteTeacherAssignment:async e=>{const{error:t}=await ze.from("teacher_assignments").delete().eq("id",e);if(t)throw t},getStudentsBySection:async e=>{const{data:t,error:n}=await ze.from("students").select(`
        *,
        profile:profiles!profile_id(email, name),
        face_embedding
      `).eq("section_id",e);if(n)throw n;return t},completeFaceRegistration:async(e,t)=>{const{error:n}=await ze.from("students").update({face_registered:!0,is_active:!0,face_embedding:t?JSON.stringify(t):null}).eq("profile_id",e);if(n)throw n},resetStudentFace:async e=>{const{error:t}=await ze.from("students").update({face_registered:!1,face_embedding:null}).eq("id",e);if(t)throw t;await Ce.syncFaces()},getRoutines:async e=>{let t=ze.from("routines").select(`
      *,
      course_catalog:course_catalog_id (
        subject_name,
        subject_code
      ),
      section:sections(
          name,
          batch:batches(name, faculty_id, current_semester)
      ),
      teacher:teachers!teacher_id(
        profile:profiles!profile_id(name)
      ) 
    `);e!=null&&e.teacher_id&&(t=t.eq("teacher_id",e.teacher_id)),e!=null&&e.section_id&&(t=t.eq("section_id",e.section_id)),e!=null&&e.day&&(t=t.eq("day_of_week",e.day));const{data:n,error:r}=await t;if(r)throw r;return n},createRoutine:async e=>{const{data:t,error:n}=await ze.from("routines").insert([e]).select().single();if(n)throw n;return t},markAttendance:async e=>{const{data:t,error:n}=await ze.from("attendance_logs").insert(e).select();if(n)throw n;return t},logAttendance:async e=>await ze.from("attendance_logs").insert(e),getAttendance:async e=>{let t=ze.from("attendance_logs").select("*").order("created_at",{ascending:!1});e!=null&&e.student_id&&(t=t.eq("student_id",e.student_id)),e!=null&&e.routine_id&&(t=t.eq("routine_id",e.routine_id));const{data:n,error:r}=await t;if(r)throw r;return n},getSessionCount:async(e,t)=>{const{data:n,error:r}=await ze.from("attendance_logs").select("date").eq("course_catalog_id",e).eq("section_id",t);if(r)throw r;return n?new Set(n.map(i=>i.date)).size:0},checkSessionExists:async(e,t,n)=>{const{count:r,error:a}=await ze.from("attendance_logs").select("*",{count:"exact",head:!0}).eq("course_catalog_id",e).eq("section_id",t).eq("date",n);if(a)throw a;return(r||0)>0},getAttendanceHistory:async e=>{let t=ze.from("attendance_logs").select(`
      *,
      student:students(
        id,
        student_id,
        profile:profiles(name)
      ),
      course_catalog:course_catalog_id(subject_name, subject_code),
      section:sections!inner(
        id,
        name, 
        batch:batches!inner(
          id,
          name,
          current_semester,
          faculty:faculties!inner(id, name)
        )
      )
    `).order("date",{ascending:!1});e!=null&&e.teacher_id&&(t=t.eq("teacher_id",e.teacher_id)),e!=null&&e.student_id&&(t=t.eq("student_id",e.student_id)),e!=null&&e.section_id&&(t=t.eq("section_id",e.section_id)),e!=null&&e.date&&(t=t.eq("date",e.date)),e!=null&&e.batch_id&&(t=t.eq("section.batch_id",e.batch_id)),e!=null&&e.faculty_id&&(t=t.eq("section.batch.faculty_id",e.faculty_id));const{data:n,error:r}=await t;if(r)throw r;return n},deleteResource:async(e,t)=>{const{error:n}=await ze.from(e).delete().eq("id",t);if(n)throw n},updateResource:async(e,t,n)=>{const{error:r}=await ze.from(e).update(n).eq("id",t);if(r)throw r},getStats:async()=>{const[e,t,n,r,a]=await Promise.all([ze.from("students").select("*",{count:"exact",head:!0}),ze.from("teachers").select("*",{count:"exact",head:!0}),ze.from("batches").select("*",{count:"exact",head:!0}),ze.from("course_catalog").select("*",{count:"exact",head:!0}),ze.from("routines").select("*",{count:"exact",head:!0})]),{data:i}=await ze.from("students").select("id, section:sections(batch:batches(faculty:faculties(name)))"),o={};i==null||i.forEach(l=>{var u,d,f;const c=((f=(d=(u=l.section)==null?void 0:u.batch)==null?void 0:d.faculty)==null?void 0:f.name)||"Other";o[c]=(o[c]||0)+1});const s=Object.entries(o).map(([l,c])=>({name:l,students:c}));return{totalStudents:e.count||0,totalTeachers:t.count||0,totalBatches:n.count||0,totalSubjects:r.count||0,todaySessions:a.count||0,distribution:s,attendanceTrend:[{day:"Mon",count:45},{day:"Tue",count:52},{day:"Wed",count:48},{day:"Thu",count:61},{day:"Fri",count:55},{day:"Sat",count:32},{day:"Sun",count:12}]}},registerFaceEmbedding:async e=>{const t="https://arefintitly-attendu-server.hf.space";try{const r=new FormData;r.append("image",e,"face.jpg");const a=new AbortController,i=setTimeout(()=>a.abort(),6e4);console.log(` Sending face registration request (Blob size: ${e.size} bytes)...`);const o=await fetch(`${t}/api/face/register`,{method:"POST",body:r,signal:a.signal});if(clearTimeout(i),!o.ok){const l=await o.text();throw console.error(` Registration API failed (${o.status}):`,l),new Error("Face registration failed. Please ensure your face is well-lit and clear.")}const s=await o.json();return console.log(" Registration API response:",s),s}catch(r){throw r.name==="AbortError"?(console.error("Request timed out after 60s"),new Error("Connection timed out. Backend might be waking up from sleep (Render free tier). Please try again in 30 seconds.")):(console.error("Error calling Python backend:",r),r)}},recognizeFaces:async e=>{const t="https://arefintitly-attendu-server.hf.space";try{if(!(e instanceof Blob))throw console.error(" recognizeFaces: parameter 1 is not a Blob",e),new Error("Internal Error: Invalid image data captured.");const n=new FormData;n.append("image",e,"capture.jpg"),console.log(` Sending recognition request (Image: ${e.size} bytes)`);const r=await fetch(`${t}/api/face/recognize`,{method:"POST",body:n});if(!r.ok){const i=await r.text();throw console.error(` Recognition API failed (${r.status}):`,i),new Error("Face recognition service is currently unavailable.")}const a=await r.json();return console.log(" Recognition API response (Multi-Face):",a),{detected_faces:a.detected_faces||0,matches:a.matches||[]}}catch(n){throw console.error("Error calling Python backend:",n),n}},verifyFace:async(e,t)=>{const n="https://arefintitly-attendu-server.hf.space";try{const r=new FormData;r.append("image",e,"verify.jpg"),r.append("known_embedding",JSON.stringify(t));const a=await fetch(`${n}/api/face/verify`,{method:"POST",body:r});if(!a.ok){const o=await a.json();throw new Error(o.detail||"Face verification failed")}return await a.json()}catch(r){throw console.error("Error calling Python backend:",r),r}},syncFaces:async()=>{const e="https://arefintitly-attendu-server.hf.space";try{await fetch(`${e}/api/face/sync`,{method:"POST"}),console.log(" Triggered backend FAISS sync")}catch(t){console.error("Failed to trigger sync:",t)}}},lt=_.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));lt.displayName="Input";var Lde="Label",HW=_.forwardRef((e,t)=>h.jsx(Fe.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));HW.displayName=Lde;var GW=HW;const Bde=sv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),We=_.forwardRef(({className:e,...t},n)=>h.jsx(GW,{ref:n,className:Te(Bde(),e),...t}));We.displayName=GW.displayName;var yS="rovingFocusGroup.onEntryFocus",Ude={bubbles:!1,cancelable:!0},mv="RovingFocusGroup",[CC,qW,zde]=bb(mv),[Wde,Bb]=Sa(mv,[zde]),[Vde,Hde]=Wde(mv),KW=_.forwardRef((e,t)=>h.jsx(CC.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(CC.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Gde,{...e,ref:t})})}));KW.displayName=mv;var Gde=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=_.useRef(null),p=ft(t,f),v=Rb(i),[m,g]=uo({prop:o,defaultProp:s??null,onChange:l,caller:mv}),[y,x]=_.useState(!1),b=Xr(c),w=qW(n),S=_.useRef(!1),[C,E]=_.useState(0);return _.useEffect(()=>{const k=f.current;if(k)return k.addEventListener(yS,b),()=>k.removeEventListener(yS,b)},[b]),h.jsx(Vde,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:m,onItemFocus:_.useCallback(k=>g(k),[g]),onItemShiftTab:_.useCallback(()=>x(!0),[]),onFocusableItemAdd:_.useCallback(()=>E(k=>k+1),[]),onFocusableItemRemove:_.useCallback(()=>E(k=>k-1),[]),children:h.jsx(Fe.div,{tabIndex:y||C===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:ye(e.onMouseDown,()=>{S.current=!0}),onFocus:ye(e.onFocus,k=>{const N=!S.current;if(k.target===k.currentTarget&&N&&!y){const T=new CustomEvent(yS,Ude);if(k.currentTarget.dispatchEvent(T),!T.defaultPrevented){const A=w().filter(M=>M.focusable),P=A.find(M=>M.active),I=A.find(M=>M.id===m),D=[P,I,...A].filter(Boolean).map(M=>M.ref.current);QW(D,u)}}S.current=!1}),onBlur:ye(e.onBlur,()=>x(!1))})})}),XW="RovingFocusGroupItem",YW=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,l=sr(),c=i||l,u=Hde(XW,n),d=u.currentTabStopId===c,f=qW(n),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:m}=u;return _.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),h.jsx(CC.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:h.jsx(Fe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:ye(e.onMouseDown,g=>{r?u.onItemFocus(c):g.preventDefault()}),onFocus:ye(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:ye(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=Xde(g,u.orientation,u.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=f().filter(w=>w.focusable).map(w=>w.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const w=b.indexOf(g.currentTarget);b=u.loop?Yde(b,w+1):b.slice(w+1)}setTimeout(()=>QW(b))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});YW.displayName=XW;var qde={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Kde(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Xde(e,t,n){const r=Kde(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qde[r]}function QW(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Yde(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var JW=KW,ZW=YW,Ub="Tabs",[Qde,gVe]=Sa(Ub,[Bb]),e6=Bb(),[Jde,ET]=Qde(Ub),t6=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:l="automatic",...c}=e,u=Rb(s),[d,f]=uo({prop:r,onChange:a,defaultProp:i??"",caller:Ub});return h.jsx(Jde,{scope:n,baseId:sr(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Fe.div,{dir:u,"data-orientation":o,...c,ref:t})})});t6.displayName=Ub;var n6="TabsList",r6=_.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=ET(n6,n),o=e6(n);return h.jsx(JW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:h.jsx(Fe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});r6.displayName=n6;var a6="TabsTrigger",i6=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=ET(a6,n),s=e6(n),l=l6(o.baseId,r),c=c6(o.baseId,r),u=r===o.value;return h.jsx(ZW,{asChild:!0,...s,focusable:!a,active:u,children:h.jsx(Fe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:ye(e.onMouseDown,d=>{!a&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ye(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ye(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!a&&d&&o.onValueChange(r)})})})});i6.displayName=a6;var o6="TabsContent",s6=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=ET(o6,n),l=l6(s.baseId,r),c=c6(s.baseId,r),u=r===s.value,d=_.useRef(u);return _.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Jr,{present:a||u,children:({present:f})=>h.jsx(Fe.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&i})})});s6.displayName=o6;function l6(e,t){return`${e}-trigger-${t}`}function c6(e,t){return`${e}-content-${t}`}var Zde=t6,u6=r6,d6=i6,f6=s6;const kT=Zde,zb=_.forwardRef(({className:e,...t},n)=>h.jsx(u6,{ref:n,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));zb.displayName=u6.displayName;const Mo=_.forwardRef(({className:e,...t},n)=>h.jsx(d6,{ref:n,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Mo.displayName=d6.displayName;const $o=_.forwardRef(({className:e,...t},n)=>h.jsx(f6,{ref:n,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));$o.displayName=f6.displayName;const efe=()=>{const e=Ha(),{login:t,signup:n,selectedRole:r,user:a}=kr(),{toast:i}=ds(),[o,s]=_.useState("login"),[l,c]=_.useState(!1),[u,d]=_.useState(!1),[f,p]=_.useState(!1),[v,m]=_.useState(null),[g,y]=_.useState([]),[x,b]=_.useState([]),[w,S]=_.useState([]),[C,E]=_.useState([]),[k,N]=_.useState(""),[T,A]=_.useState(""),[P,I]=_.useState(""),[R,D]=_.useState(""),[M,$]=_.useState(""),[j,O]=_.useState(""),[B,G]=_.useState(""),[L,W]=_.useState(""),[J,ee]=_.useState(""),[ne,Z]=_.useState(""),[K,Q]=_.useState(""),[ie,V]=_.useState(""),[q,de]=_.useState(""),[he,ae]=_.useState(""),[le,ge]=_.useState(""),[_e,Re]=_.useState([]),[He,Me]=_.useState({batchId:"",sectionId:"",subjectId:""});_.useEffect(()=>{(async()=>{p(!0),m(null);try{const[Ie,Dt,qn]=await Promise.all([Ce.getFaculties(),Ce.getBatches(),Ce.getSections()]);y(Ie||[]),b(Dt||[]),S(qn||[])}catch(Ie){m(Ie.message||"Network Error")}finally{p(!1)}})()},[]),_.useEffect(()=>{if(a&&!u){const oe=a;oe.role==="student"?oe.face_registered?e("/student/attendance"):e("/face-registration"):oe.role==="teacher"?e("/teacher/dashboard"):oe.role==="admin"&&e("/admin/dashboard")}},[a,e,u]);const st=async oe=>{oe.preventDefault(),d(!0);const Ie=await t(k,T);Ie.success?(i({title:"Welcome Back!",description:"Logged in successfully."}),d(!1),e(r==="student"?"/student/attendance":r==="teacher"?"/teacher/dashboard":"/admin/dashboard")):(i({title:"Login Failed",description:Ie.error,variant:"destructive"}),d(!1))},xe=async oe=>{if(oe.preventDefault(),!M.endsWith("@diu.edu.bd")){i({title:"Invalid Email Domain",description:"Students must use a @diu.edu.bd email address.",variant:"destructive"});return}if(J!==ne){i({title:"Passwords do not match",variant:"destructive"});return}if(J.length<8){i({title:"Password too weak",description:"Password must be at least 8 characters.",variant:"destructive"});return}d(!0);const Ie=await n({email:M.trim(),password:J,name:P.trim(),role:"student",studentId:R.trim(),section_id:L});Ie.success?(i({title:"Account Created",description:"Logging you in..."}),(await t(M,J)).success||(i({title:"Automatic Login Failed",description:"Please login manually.",variant:"destructive"}),s("login")),d(!1)):(i({title:"Signup Failed",description:Ie.error,variant:"destructive"}),d(!1))},me=async oe=>{if(oe.preventDefault(),he!==le){i({title:"Passwords do not match",variant:"destructive"});return}if(he.length<8){i({title:"Password too weak",description:"Password must be at least 8 characters.",variant:"destructive"});return}d(!0);const Ie=await n({email:ie.trim(),password:he,name:K.trim(),role:"teacher",facultyId:q,assignments:_e});Ie.success?(i({title:"Account Created",description:"Logging you in..."}),(await t(ie,he)).success||(i({title:"Automatic Login Failed",description:"Please login manually.",variant:"destructive"}),s("login")),d(!1)):(i({title:"Signup Failed",description:Ie.error,variant:"destructive"}),d(!1))},Ee=oe=>x.filter(Ie=>Ie.faculty_id===oe),X=oe=>w.filter(Ie=>Ie.batch_id===oe);_.useEffect(()=>{if(He.batchId){const oe=x.find(Ie=>Ie.id===He.batchId);oe&&Ce.getCourseCatalog(oe.faculty_id,oe.current_semester).then(Ie=>E(Ie||[])).catch(Ie=>console.error(Ie))}else E([])},[He.batchId,x]);const be=()=>{He.batchId&&He.sectionId&&He.subjectId&&(Re([..._e,He]),Me({batchId:"",sectionId:"",subjectId:""}))};return h.jsxs("div",{className:"relative min-h-screen flex flex-col bg-black",children:[h.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(rgba(100, 100, 100, 0.15) 1px, transparent 1px),
            linear-gradient(90deg, rgba(100, 100, 100, 0.15) 1px, transparent 1px)
          `,backgroundSize:"60px 60px"}}),h.jsx("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center p-4 overflow-y-auto",children:h.jsxs("div",{className:"w-full max-w-md my-8 animate-fade-in",children:[h.jsxs(we,{variant:"ghost",className:"mb-4 text-gray-400 hover:text-white hover:bg-white/5 transition-colors group",onClick:()=>e(-1),children:[h.jsx(n0,{className:"w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"}),"Back"]}),h.jsxs(Et,{className:"w-full border border-white/10 bg-black/40 shadow-2xl overflow-hidden rounded-3xl backdrop-blur-xl ring-1 ring-white/5",children:[h.jsxs(zn,{className:"text-center pb-4 pt-8 bg-gradient-to-b from-primary/10 to-transparent",children:[h.jsx(rr,{className:"text-3xl font-bold tracking-tight capitalize py-1 text-white",children:o==="login"?`Login as ${r}`:`Sign up as ${r}`}),h.jsxs(zo,{className:"text-base font-medium text-gray-400",children:["Access your ",h.jsx("span",{className:"font-bold text-indigo-400 capitalize",children:r})," portal",v&&h.jsx("div",{className:"text-destructive text-sm mt-3 font-semibold bg-destructive/10 p-3 rounded-lg border border-destructive/20",children:v})]})]}),h.jsx(Ut,{className:"px-6 pb-8 pt-2",children:h.jsxs(kT,{value:o,onValueChange:s,className:"w-full",children:[h.jsxs(zb,{className:"grid w-full grid-cols-2 h-12 p-1 bg-white/5 rounded-xl mb-8 border border-white/10",children:[h.jsx(Mo,{value:"login",className:"text-sm font-semibold pt-[0.6rem] pb-[0.5rem] rounded-[0.5rem] transition-all data-[state=active]:bg-white/10 data-[state=active]:text-indigo-400 data-[state=active]:shadow-sm text-gray-400",children:"Login"}),h.jsx(Mo,{value:"signup",className:"text-sm font-semibold pt-[0.6rem] pb-[0.5rem] rounded-[0.5rem] transition-all data-[state=active]:bg-white/10 data-[state=active]:text-indigo-400 data-[state=active]:shadow-sm text-gray-400",children:"Sign Up"})]}),h.jsx($o,{value:"login",children:h.jsxs("form",{onSubmit:st,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(We,{htmlFor:"email",className:"text-gray-300",children:"Email"}),h.jsx(lt,{id:"email",type:"email",placeholder:"m@example.com",value:k,onChange:oe=>N(oe.target.value),required:!0,className:"h-11 border-white/10 bg-white/5 text-white placeholder:text-gray-500 focus:border-indigo-500/50 focus:ring-indigo-500/50"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(We,{htmlFor:"password",className:"text-gray-300",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(lt,{id:"password",type:l?"text":"password",value:T,onChange:oe=>A(oe.target.value),required:!0,className:"h-11 border-white/10 bg-white/5 text-white placeholder:text-gray-500 focus:border-indigo-500/50 focus:ring-indigo-500/50"}),h.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>c(!l),children:l?h.jsx(fy,{className:"h-4 w-4"}):h.jsx(hy,{className:"h-4 w-4"})})]})]}),h.jsx(we,{type:"submit",className:"w-full h-11 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-indigo-500/20 transition-all font-semibold capitalize mt-2 text-base",disabled:u,children:u?"Processing...":`Login as ${r}`})]})}),h.jsx($o,{value:"signup",children:r==="student"?h.jsxs("form",{onSubmit:xe,className:"space-y-3",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Full Name"}),h.jsx(lt,{value:P,onChange:oe=>I(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Student ID (Roll)"}),h.jsx(lt,{value:R,onChange:oe=>D(oe.target.value),required:!0,placeholder:"e.g. 253-35-108",className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Email"}),h.jsx(lt,{type:"email",value:M,onChange:oe=>$(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(lt,{type:l?"text":"password",value:J,onChange:oe=>ee(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"}),h.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>c(!l),children:l?h.jsx(fy,{className:"h-4 w-4"}):h.jsx(hy,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Confirm Password"}),h.jsx(lt,{type:l?"text":"password",value:ne,onChange:oe=>Z(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Department"}),h.jsxs(_t,{value:j,onValueChange:O,children:[h.jsx(bt,{className:"h-10 border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Select Dept"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:g.map(oe=>h.jsx(it,{value:oe.id,className:"hover:bg-white/5",children:oe.name},oe.id))})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Batch"}),h.jsxs(_t,{value:B,onValueChange:G,disabled:!j,children:[h.jsx(bt,{className:"h-10 border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Batch"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:Ee(j).map(oe=>h.jsxs(it,{value:oe.id,className:"hover:bg-white/5",children:[oe.name," (Sem ",oe.current_semester,")"]},oe.id))})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Section"}),h.jsxs(_t,{value:L,onValueChange:W,disabled:!B,children:[h.jsx(bt,{className:"h-10 border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Sec"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:X(B).map(oe=>h.jsx(it,{value:oe.id,className:"hover:bg-white/5",children:oe.name},oe.id))})]})]})]}),h.jsx(we,{type:"submit",className:"w-full mt-4 h-11 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-indigo-500/20 transition-all font-semibold capitalize text-base",disabled:u||f,children:u?"Creating Account...":"Sign Up as Student"})]}):h.jsxs("form",{onSubmit:me,className:"space-y-3",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Full Name"}),h.jsx(lt,{value:K,onChange:oe=>Q(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Email"}),h.jsx(lt,{type:"email",value:ie,onChange:oe=>V(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(lt,{type:l?"text":"password",value:he,onChange:oe=>ae(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"}),h.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>c(!l),children:l?h.jsx(fy,{className:"h-4 w-4"}):h.jsx(hy,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Confirm Password"}),h.jsx(lt,{type:l?"text":"password",value:le,onChange:oe=>ge(oe.target.value),required:!0,className:"h-10 border-white/10 bg-white/5 text-white placeholder:text-gray-500"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(We,{className:"text-gray-300",children:"Department"}),h.jsxs(_t,{value:q,onValueChange:de,children:[h.jsx(bt,{className:"h-10 border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Select Dept"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:g.map(oe=>h.jsx(it,{value:oe.id,className:"hover:bg-white/5",children:oe.name},oe.id))})]})]}),h.jsxs("div",{className:"border p-4 rounded-xl space-y-3 bg-white/5 border-dashed border-white/10",children:[h.jsx(We,{className:"text-xs font-bold uppercase text-gray-400 tracking-widest text-center block",children:"Access Assignments"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs(_t,{value:He.batchId,onValueChange:oe=>Me({...He,batchId:oe}),children:[h.jsx(bt,{className:"h-9 text-xs border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Batch"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:x.map(oe=>h.jsx(it,{value:oe.id,className:"hover:bg-white/5",children:oe.name},oe.id))})]}),h.jsxs(_t,{value:He.sectionId,onValueChange:oe=>Me({...He,sectionId:oe}),children:[h.jsx(bt,{className:"h-9 text-xs border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Section"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:X(He.batchId).map(oe=>h.jsx(it,{value:oe.id,className:"hover:bg-white/5",children:oe.name},oe.id))})]})]}),h.jsxs(_t,{value:He.subjectId,onValueChange:oe=>Me({...He,subjectId:oe}),children:[h.jsx(bt,{className:"h-9 text-xs border-white/10 bg-white/5 text-white",children:h.jsx(Ct,{placeholder:"Subject"})}),h.jsx(wt,{className:"bg-slate-900 border-white/10 text-white",children:C.map(oe=>h.jsx(it,{value:oe.id,className:"hover:bg-white/5",children:oe.subject_name},oe.id))})]}),h.jsx(we,{type:"button",size:"sm",variant:"secondary",className:"w-full h-8 text-xs font-bold bg-white/10 hover:bg-white/20 text-white border-none",onClick:be,disabled:!He.subjectId,children:"Add to Schedule"}),_e.length>0&&h.jsxs("div",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest mt-1 text-center bg-indigo-500/10 py-1 rounded",children:[_e.length," Assignments Added"]})]}),h.jsx(we,{type:"submit",className:"w-full mt-4 h-11 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-indigo-500/20 transition-all font-semibold capitalize text-base",disabled:u||f,children:u?"Creating Account...":"Sign Up as Teacher"})]})})]})})]})]})}),h.jsx(Gf,{})]})},tfe=()=>{const e=Ha(),{setSelectedRole:t,login:n,isAuthenticated:r,role:a}=kr(),{toast:i}=ds(),[o,s]=_.useState(!1),[l,c]=_.useState(!1),[u,d]=_.useState(""),[f,p]=_.useState("");_.useEffect(()=>{t("admin")},[t]),_.useEffect(()=>{r&&a==="admin"&&e("/admin/dashboard")},[r,a,e]);const v=async m=>{m.preventDefault(),c(!0);try{const g=await n(u,f);g.success?i({title:"Admin login successful",description:"Welcome, Administrator!"}):i({title:"Login failed",description:g.error,variant:"destructive"})}catch(g){i({title:"Unexpected error",description:g.message,variant:"destructive"})}finally{c(!1)}};return h.jsxs("div",{className:"relative min-h-screen bg-black flex flex-col items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(rgba(100, 100, 100, 0.15) 1px, transparent 1px),
            linear-gradient(90deg, rgba(100, 100, 100, 0.15) 1px, transparent 1px)
          `,backgroundSize:"60px 60px"}}),h.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center w-full max-w-md animate-fade-in",children:[h.jsxs(we,{variant:"ghost",className:"self-start mb-6 text-gray-400 hover:bg-white/5 hover:text-white transition-colors",onClick:()=>e(-1),children:[h.jsx(n0,{className:"w-4 h-4 mr-2"}),"Back"]}),h.jsxs(Et,{className:"w-full border border-white/10 bg-black/40 shadow-2xl backdrop-blur-xl overflow-hidden ring-1 ring-white/5",children:[h.jsxs(zn,{className:"text-center pb-2",children:[h.jsx(rr,{className:"text-3xl font-bold tracking-tight text-white",children:"Login as Admin"}),h.jsx(zo,{className:"text-gray-400",children:"Authorized personnel only"})]}),h.jsx(Ut,{className:"pt-6",children:h.jsxs("form",{onSubmit:v,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(We,{htmlFor:"email",className:"text-gray-300",children:"Admin Email"}),h.jsx(lt,{id:"email",type:"email",placeholder:"admin@university.edu",value:u,onChange:m=>d(m.target.value),required:!0,className:"h-11 border-white/10 bg-white/5 text-white placeholder:text-gray-500 focus:border-indigo-500/50 focus:ring-indigo-500/50"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(We,{htmlFor:"password",className:"text-gray-300",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(lt,{id:"password",type:o?"text":"password",placeholder:"Enter admin password",value:f,onChange:m=>p(m.target.value),required:!0,className:"h-11 border-white/10 bg-white/5 text-white placeholder:text-gray-500 focus:border-indigo-500/50 focus:ring-indigo-500/50"}),h.jsx(we,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 text-gray-400 hover:bg-transparent hover:text-white",onClick:()=>s(!o),children:o?h.jsx(fy,{className:"h-4 w-4"}):h.jsx(hy,{className:"h-4 w-4"})})]})]}),h.jsx(we,{type:"submit",className:"w-full h-11 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg hover:shadow-indigo-500/20 transition-all font-semibold mt-2",disabled:l,children:l?"Signing in...":"Login as Admin"})]})})]})]}),h.jsx(Gf,{})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var h6=function(e,t){return(h6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])})(e,t)};function Ai(e,t){function n(){this.constructor=e}h6(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function je(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(c){try{l(r.next(c))}catch(u){i(u)}}function s(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){c.done?a(c.value):new n(function(u){u(c.value)}).then(o,s)}l((r=r.apply(e,[])).next())})}function Oe(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(u[0]===6&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(d){u=[6,d],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var nfe=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+a+"."),this.set(t,a)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,a=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return rfe(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),s=o[0],l=o[1];t.urlFlags[s]=function(c,u){if((u=u.toLowerCase())==="true"||u==="false")return u==="true";if(""+ +u===u)return+u;throw new Error("Could not parse value flag value "+u+" for flag "+c+".")}(s,l)})}},e}();function rfe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function se(){return p6}var p6=null,v0=new Map,EC=new Map;function m6(e,t){var n=g6(e,t);return v0.get(n)}function afe(e){return EC.get(e)}function XI(e){for(var t=v0.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function v6(e){var t=e.kernelName,n=e.backendName,r=g6(t,n);if(v0.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");v0.set(r,e)}function ife(e){var t=e.kernelName;EC.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),EC.set(t,e)}function g6(e,t){return t+"_"+e}function kC(e,t,n){return Math.max(e,Math.min(t,n))}function y6(e){return e%2==0?e:e+1}function ofe(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function U(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function At(e,t,n){n===void 0&&(n=""),U(Vn(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function qf(e){U(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function rf(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||ao(e)&&!n)for(var r=0;r<e.length;++r)rf(e[r],t,n);else t.push(e);return t}function $e(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Vn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function gn(e){return e%1==0}function sfe(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function NC(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Ed(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function YI(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,a){var i=0,o=function(){if(e())r();else{i++;var s=t(i);n!=null&&i>=n?a():setTimeout(o,s)}};o()})}function lfe(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function Mn(e,t){var n=t.length;return U((e=e==null?t.map(function(r,a){return a}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),U(e.every(function(r){return gn(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function uc(e,t){for(var n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:Mn(t,e).sort(),o=0,s=0;s<e.length;++s){if(i!=null){if(i[o]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(i[o]==null||i[o]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function em(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function g0(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function cfe(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function ufe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function dfe(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function ao(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function x6(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function ffe(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function NT(e){return typeof e=="string"||e instanceof String}function hfe(e){return typeof e=="boolean"}function pfe(e){return typeof e=="number"}function vv(e){return Array.isArray(e)?vv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":pfe(e)?"float32":NT(e)?"string":hfe(e)?"bool":"float32"}function TC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function AC(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function io(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function b6(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=rf(e)),n&&cfe(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)Math.round(e[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function QI(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,a){return r*a});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(a,i,o){var s=new Array;if(i.length===1)for(var l=i[0],c=0;c<l;c++)s[c]=o[a+c];else{l=i[0];var u=i.slice(1),d=u.reduce(function(f,p){return f*p});for(c=0;c<l;c++)s[c]=r(a+c*d,u,o)}return s}(0,e,t)}function w6(e,t){for(var n=gv(e,t),r=0;r<n.length;r++)n[r]=1;return n}function gv(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function zi(){return se().platform.now()}function S6(e){e.forEach(function(t){U(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function mfe(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",se().platform.encode(e,t)}function y0(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",se().platform.decode(e,t)}function JI(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function vfe(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}var gfe=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new yfe)}return e.prototype.profileKernel=function(t,n,r){var a,i=this,o=this.backendTimer.time(function(){a=r()});return a.forEach(function(s){s.data().then(function(l){(function(c,u,d){if(u!=="float32")return!1;for(var f=0;f<c.length;f++){var p=c[f];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+d+"'"),!0}})(l,s.dtype,t),o.then(function(c){var u="";c.getExtraProfileInfo!=null&&(u=c.getExtraProfileInfo()),i.logger.logKernelProfile(t,s,l,c.kernelMs,n,u)})})}),a},e}(),yfe=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,i,o){var s=typeof a=="number"?Ed(a+"ms",9):a.error,l=Ed(t,25),c=n.rank,u=n.size,d=Ed(n.shape.toString(),14),f="";for(var p in i){var v=i[p].shape||n.shape,m=v.length;f+=p+": "+m+"D "+(m>0?v:"")+" "}console.log("%c"+l+"	%c"+s+"	%c"+c+"D "+d+"	%c"+u+"	%c"+f+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),ZI=20,xh=3,xS=7;function xfe(e,t,n,r){var a=io(t),i=function(c,u,d,f){var p=$e(u),v=f[f.length-1],m=new Array(v).fill(0),g=u.length,y=d==="complex64"?wh(c):c;if(g>1)for(var x=0;x<p/v;x++)for(var b=x*v,w=0;w<v;w++)m[w]=Math.max(m[w],bh(y[b+w],0,d).length);return m}(e,t,n,a),o=t.length,s=function c(u,d,f,p,v,m){m===void 0&&(m=!0);var g=f==="complex64"?2:1,y=d[0],x=d.length;if(x===0)return f==="complex64"?[bh(wh(u)[0],0,f)]:f==="bool"?[_6(u[0])]:[u[0].toString()];if(x===1){if(y>ZI){var b=xh*g,w=Array.from(u.slice(0,b)),S=Array.from(u.slice((y-xh)*g,y*g));return f==="complex64"&&(w=wh(w),S=wh(S)),["["+w.map(function(D,M){return bh(D,v[M],f)}).join(", ")+", ..., "+S.map(function(D,M){return bh(D,v[y-xh+M],f)}).join(", ")+"]"]}return["["+(f==="complex64"?wh(u):Array.from(u)).map(function(D,M){return bh(D,v[M],f)}).join(", ")+"]"]}var C=d.slice(1),E=p.slice(1),k=p[0]*g,N=[];if(y>ZI){for(var T=0;T<xh;T++){var A=(P=T*k)+k;N.push.apply(N,c(u.slice(P,A),C,f,E,v,!1))}for(N.push("..."),T=y-xh;T<y;T++)A=(P=T*k)+k,N.push.apply(N,c(u.slice(P,A),C,f,E,v,T===y-1))}else for(T=0;T<y;T++){var P;A=(P=T*k)+k,N.push.apply(N,c(u.slice(P,A),C,f,E,v,T===y-1))}var I=x===2?",":"";for(N[0]="["+N[0]+I,T=1;T<N.length-1;T++)N[T]=" "+N[T]+I;var R=`,
`;for(T=2;T<x;T++)R+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(m?"":R),N}(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(s.map(function(c){return"    "+c}).join(`
`)),l.join(`
`)}function bh(e,t,n){return Ed(Array.isArray(e)?parseFloat(e[0].toFixed(xS))+" + "+parseFloat(e[1].toFixed(xS))+"j":NT(e)?"'"+e+"'":n==="bool"?_6(e):parseFloat(e.toFixed(xS)).toString(),t)}function _6(e){return e===0?"false":"true"}function wh(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var tm=function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=$e(t),r!=null){var i=r.length;U(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||g0(n,this.size),this.strides=io(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),U(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var l=t[t.length-1],c=0;c<t.length-1;++c)l+=this.strides[c]*t[c];return this.values[l]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Hi().makeTensor(this.values,this.shape,this.dtype)},e}(),Hi=null,re=null,C6=null,nn=function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=$e(t),this.strides=io(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,a){return this.throwIfDisposed(),this.reshape([t,n,r,a])},e.prototype.as5D=function(t,n,r,a,i){return this.throwIfDisposed(),this.reshape([t,n,r,a,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),re.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return je(this,void 0,void 0,function(){var t;return Oe(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,re.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return re.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return je(this,void 0,void 0,function(){var t;return Oe(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,QI(this.shape,t)]}})})},e.prototype.arraySync=function(){return QI(this.shape,this.dataSync())},e.prototype.data=function(){return je(this,void 0,void 0,function(){var t,n;return Oe(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Hi().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(a){return y0(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Hi().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return y0(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return je(this,void 0,void 0,function(){var t;return Oe(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Hi().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Hi().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),re.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),re.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),re.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),re.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),re.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),re.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),re.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),xfe(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),re.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),re.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),re.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),re.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),re.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),re.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),re.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),re.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),re.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),re.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),re.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),re.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,a,i){return r===void 0&&(r=.001),C6("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,i,a,r)},e.prototype.batchNorm=function(t,n,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),re.batchNorm(this,t,n,r,a,i)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),re.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),re.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),re.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),re.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),re.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),re.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),re.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),re.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),re.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),re.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),re.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),re.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),re.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),re.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),re.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),re.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),re.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),re.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),re.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),re.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),re.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),re.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),re.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),re.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),re.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),re.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),re.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),re.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),re.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),re.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),re.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),re.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),re.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),re.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),re.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),re.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),re.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),re.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),re.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),re.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),re.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),re.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),re.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),re.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),re.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),re.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),re.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),re.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),re.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),re.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),re.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),re.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),re.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),re.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),re.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),re.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),re.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),re.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),re.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),re.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),re.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),re.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),re.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),re.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),re.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),re.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),re.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),re.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),re.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),re.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),re.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),re.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),re.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),re.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),re.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),re.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),re.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),re.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),re.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),re.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),re.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),re.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),re.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),re.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),re.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),re.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),re.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),re.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),re.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),re.conv1d(this,t,n,r,a,i,o)},e.prototype.conv2d=function(t,n,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),re.conv2d(this,t,n,r,a,i,o)},e.prototype.conv2dTranspose=function(t,n,r,a,i){return this.throwIfDisposed(),re.conv2dTranspose(this,t,n,r,a,i)},e.prototype.depthwiseConv2D=function(t,n,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),re.depthwiseConv2d(this,t,n,r,a,i,o)},e.prototype.separableConv2d=function(t,n,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),re.separableConv2d(this,t,n,r,a,i,o)},e.prototype.avgPool=function(t,n,r,a){return this.throwIfDisposed(),re.avgPool(this,t,n,r,a)},e.prototype.maxPool=function(t,n,r,a){return this.throwIfDisposed(),re.maxPool(this,t,n,r,a)},e.prototype.localResponseNormalization=function(t,n,r,a){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5),re.localResponseNormalization(this,t,n,r,a)},e.prototype.pool=function(t,n,r,a,i){return this.throwIfDisposed(),re.pool(this,t,n,r,a,i)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Hi().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),re.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),re.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),re.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),re.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,a,i,o,s,l){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),this.throwIfDisposed(),re.stridedSlice(this,t,n,r,a,i,o,s,l)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),re.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),re.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),re.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),re.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),re.spectral.irfft(this)},e}();Object.defineProperty(nn,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var eD,PC,jC,OC,RC,af=function(e){function t(n,r,a,i){var o=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return o.trainable=r,o.name=a,o}return Ai(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Vn(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Hi().disposeTensor(this),this.dataId=n.dataId,Hi().incRef(this,null)},t.prototype.dispose=function(){Hi().disposeVariable(this),this.isDisposedInternal=!0},t}(nn);Object.defineProperty(af,Symbol.hasInstance,{value:function(e){return e instanceof nn&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(eD||(eD={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(PC||(PC={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(jC||(jC={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(OC||(OC={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(RC||(RC={}));var bfe={float32:OC,int32:PC,bool:jC,complex64:RC};function tr(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return bfe[e][t]}function bS(e){return tr(e,"int32")}function un(e,t){if(e.dtype===t.dtype)return[e,t];var n=tr(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function wfe(e,t){U(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function E6(e){var t=[];return function n(r,a,i){if(r!=null){if(r instanceof nn)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var l in s){var c=s[l];i.has(c)||(i.add(c),n(c,a,i))}}}}(e,t,new Set),t}var wS,tD=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),Sfe=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new tD}return e.prototype.ready=function(){return je(this,void 0,void 0,function(){var t,n,r;return Oe(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,a.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return je(this,void 0,void 0,function(){var n,r,a;return Oe(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new gfe(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;XI(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;XI(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then(function(s){return!(i<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n);a.disposeData(n),r.backend=t,t.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,a=this,i=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(a){return{x:function(){return a.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,a,i){return this.runKernelFunc(null,n,null,t,r,a,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(l){i+=l.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,a,i,o,s){var l,c=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var u=[],d=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var f,p=function(x){d&&(u=x.map(function(b){return c.keep(c.clone(b))}))},v=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,y=m6(a,this.backendName);return f=y!=null?function(){var x=c.backend.numDataIds();g=y.kernelFunc({inputs:n,attrs:i,backend:c.backend});var b=Array.isArray(g)?g:[g];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(a,x,b);var w=b.map(function(C){var E=C.dataId,k=C.shape,N=C.dtype;return c.makeTensorFromDataId(E,k,N)}),S=w.filter(function(C,E){return s[E]});return p((o||[]).slice().concat(S)),w}:function(){var x=c.backend.numDataIds();g=c.tidy(function(){return t(c.backend,p)});var b=Array.isArray(g)?g:[g];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(a,x,b),b},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){l=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(a,n,function(){return f()}):f()}),d&&this.addTapeNode(a,n,l,r,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(x){return n[x].shape}),outputShapes:l.map(function(x){return x.shape})}),Array.isArray(g)?l:l[0]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=t;r==="string"&&NT(t[0])&&(i=t.map(function(u){return mfe(u)}));var o=a.write(i,n,r),s=new nn(n,r,o,this.nextTensorId());if(this.incRef(s,a),r==="string"){var l=this.state.tensorInfo.get(o),c=ffe(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){var i=new nn(n,r=r||"float32",t,this.nextTensorId());return this.incRef(i,a),i},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.asType(a));var i=new af(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(a=t.size*x6(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof af||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return je(this,void 0,void 0,function(){var n,r;return Oe(this,function(a){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},l=afe(t);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=function(c){return c=c.map(function(u,d){if(u==null){var f=r[d],p=gv(f.size,f.dtype);return o.makeTensor(p,f.shape,f.dtype)}return u}),a(c.length>1?c:c[0],i)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=E6(t),a=new Set(r.map(function(l){return l.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(l){l.kept||l.scopeId!==s.id||n.track(l)})},e.prototype.gradients=function(t,n,r,a){var i=this;if(a===void 0&&(a=!1),U(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});U(o instanceof nn,function(){return"The result y returned by f() must be a tensor."});var s=function(l,c,u){for(var d={},f={},p=0;p<c.length;p++)d[c[p].id]=!0;for(p=0;p<l.length;p++){var v=(C=l[p]).inputs;for(var m in v){for(var g=v[m],y=!1,x=0;x<c.length;x++)if(d[g.id]){C.outputs.forEach(function(T){return d[T.id]=!0}),y=!0,f[C.id]=!0;break}if(y)break}}var b={};b[u.id]=!0;var w={};for(p=l.length-1;p>=0;p--)for(v=(C=l[p]).inputs,x=0;x<C.outputs.length;x++)if(b[C.outputs[x].id]){for(var m in v)b[v[m].id]=!0,w[C.id]=!0;break}var S=[];for(p=0;p<l.length;p++){var C;if(f[(C=l[p]).id]&&w[C.id]){var E={};for(var m in C.inputs){var k=C.inputs[m];d[k.id]&&(E[m]=k)}var N=Object.assign({},C);N.inputs=E,N.outputs=C.outputs,S.push(N)}}return S}(this.state.activeTape,n,o);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l,c,u={};u[o.id]=r??(l=o.shape,c=w6($e(l),"float32"),Y.makeTensor(c,l,"float32")),function(f,p,v){for(var m=function(y){var x=p[y],b=[];if(x.outputs.forEach(function(E){var k=f[E.id];k!=null?b.push(k):b.push(null)}),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var w=x.gradient(b),S=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var k=v(function(){return w[E]()});if(k.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+k.dtype+"'");var N=x.inputs[E];if(!Vn(k.shape,N.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+k.shape+"', which does not match the shape of the input '"+N.shape+"'");if(f[N.id]==null)f[N.id]=k;else{var T=f[N.id];f[N.id]=T.add(k),T.dispose()}};for(var C in x.inputs)S(C)},g=p.length-1;g>=0;g--)m(g)}(u,s,function(f){return i.tidy(f)});var d=n.map(function(f){return u[f.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(f){for(var p=0,v=f.saved;p<v.length;p++)v[p].dispose()}),i.state.activeTape=null),{value:o,grads:d}})},e.prototype.customGrad=function(t){var n=this;return U(TC(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];U(a.every(function(s){return s instanceof nn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return a.forEach(function(s,l){o[l]=s}),n.runKernelFunc(function(s,l){return U((r=t.apply(void 0,a.concat([l]))).value instanceof nn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),U(TC(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,l){var c=r.gradFunc(s,l),u=Array.isArray(c)?c:[c];U(u.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),U(u.every(function(f){return f instanceof nn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return u.forEach(function(f,p){d[p]=function(){return f}}),d})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return je(this,void 0,void 0,function(){var n,r;return Oe(this,function(a){switch(a.label){case 0:return n=zi(),[4,this.backend.time(t)];case 1:return(r=a.sent()).wallMs=zi()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new tD,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Y=function(){var e=function(){if(wS==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}wS=n}return wS}();if(e._tfengine==null){var t=new nfe(e);e._tfengine=new Sfe(t)}return function(n){p6=n}(e._tfengine.ENV),Hi=function(){return e._tfengine},e._tfengine}();function k6(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Co=se();Co.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Co.registerFlag("IS_BROWSER",function(){return k6()}),Co.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Co.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Co.registerFlag("PROD",function(){return!1}),Co.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Co.getBool("DEBUG")}),Co.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Co.registerFlag("IS_TEST",function(){return!1});var nm,fa,sa,rc={},SS={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function _fe(e,t){rc[e]=t}function yo(e){e in rc||(rc[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete rc[n]},!1),n===1?r.getContext("webgl",SS)||r.getContext("experimental-webgl",SS):r.getContext("webgl2",SS)}(e));var t=rc[e];return t.isContextLost()?(delete rc[e],yo(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),rc[e])}function Wb(e,t){return[t,e]}function cp(e){var t=$e(e);return NC(Math.ceil(t/4))}function yv(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function TT(e,t){var n,r,a,i,o,s,l,c,u,d=e;return se().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,a=d.RGBA16F,i=d.RGBA32F,o=d.RED,s=4,l=1,c=d.HALF_FLOAT,u=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=d.RGBA,o=e.RGBA,s=4,l=4,c=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:u}}function Le(e,t,n){var r=n();return t&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+Nfe(a,i))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(nm||(nm={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(fa||(fa={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(sa||(sa={}));var Cfe=596e-10,Efe=65504;function kfe(e){return!!(se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||Cfe<Math.abs(e)&&Math.abs(e)<Efe)}function Nfe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Sg(e,t,n){return hs(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Tfe(e,t,n){var r=hs(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Le(e,t,function(){return e.shaderSource(r,n)}),Le(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Afe(e,t,n){var r=hs(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Le(e,t,function(){return e.shaderSource(r,n)}),Le(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(a,i){var o=Pfe.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var s=+o[1],l=a.split(`
`),c=l.length.toString().length+2,u=l.map(function(g,y){return Ed((y+1).toString(),c)+g}),d=0,f=0;f<u.length;f++)d=Math.max(u[f].length,d);var p=u.slice(0,s-1),v=u.slice(s-1,s),m=u.slice(s);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+Ed(v[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var _S,CS,Pfe=/ERROR: [0-9]+:([0-9]+):/g;function jfe(e,t){return hs(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function Ofe(e,t,n){if(Le(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function ES(e,t,n){if(Le(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Rfe(e,t,n){var r=hs(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Le(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Le(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Ife(e,t,n){var r=hs(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Le(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Le(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Dfe(e,t){return hs(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function Mfe(e,t){var n=se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function $fe(e,t){return hs(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function nD(e,t,n,r,a,i,o,s){var l=e.getAttribLocation(n,r);return l!==-1&&(Le(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),Le(e,t,function(){return e.vertexAttribPointer(l,i,e.FLOAT,!1,o,s)}),Le(e,t,function(){return e.enableVertexAttribArray(l)}),!0)}function Ffe(e,t,n,r){Wfe(e,r),Le(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Le(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function Lfe(e,t,n,r){return hs(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Bfe(e,t,n){return e.getUniformLocation(t,n)}function Ufe(e,t,n,r,a,i){Le(e,t,function(){return Ffe(e,t,r,i)}),Le(e,t,function(){return e.uniform1i(a,i)})}function kS(e,t,n,r){Le(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Le(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function rD(e,t,n){Le(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Le(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function _g(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+zfe(e,t))}function zfe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function hs(e,t,n,r){var a=Le(e,t,function(){return n()});if(a==null)throw new Error(r);return a}function Wfe(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function x0(e,t){return t===void 0&&(t=2),$e(e.slice(0,e.length-t))}function b0(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function NS(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[x0(e)].concat(b0(e))),t}function Vfe(e,t){var n;t===void 0&&(t=!1);var r=se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(c,u){return u>=e.length-2?y6(e[u]):e[u]})).length===1&&(e=[2,e[0]])),e.length!==2){var a=uc(e);e=a.newShape}var i=$e(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=x0(e),s=2,l=2;return e.length&&(s=(n=b0(e))[0],l=n[1]),NC(i=o*(s/2)*(l/2)).map(function(c){return 2*c})}return NC(i)}function Cg(e){return e%2==0}function Eg(e,t){if(Vn(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Cg(n)&&Cg(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Cg(e[0])&&Cg(t[0])}function Hfe(e){if(_S==null){var t=yo(e);_S=t.getParameter(t.MAX_TEXTURE_SIZE)}return _S}function Gfe(e){if(CS==null){var t=yo(e);CS=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,CS)}function qfe(e){if(e===0)return 0;var t=yo(e);return Da(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Da(t,"EXT_disjoint_timer_query")?1:0}function Da(e,t){return e.getExtension(t)!=null}function aD(e){try{if(yo(e)!=null)return!0}catch{return!1}return!1}function Kfe(e){if(e===0)return!1;var t=yo(e);if(e===1){if(!Da(t,"OES_texture_float"))return!1}else if(!Da(t,"EXT_color_buffer_float"))return!1;return IC(t)}function Xfe(e){if(e===0)return!1;var t=yo(e);if(e!==1){if(Da(t,"EXT_color_buffer_float"))return IC(t);if(Da(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=TT(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var l=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),l}(t,n)}return!1}return!!Da(t,"OES_texture_float")&&!!Da(t,"WEBGL_color_buffer_float")&&IC(t)}function IC(e){var t=TT(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Yfe(e){return e===2&&yo(e).fenceSync!=null}var Ye=se();function N6(e){se().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ke(e,t){return Y.tidy(e,t)}function Kr(e){E6(e).forEach(function(t){return t.dispose()})}function Qfe(e){return Y.keep(e)}function w0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];se().getBool("IS_TEST")||console.warn.apply(console,e)}function $l(e,t){var n=e;if(ao(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ao(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&se().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,o,s){if(s=s||[],!Array.isArray(i)&&!ao(i))return void U(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});U(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),U(i.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var l=o.slice(1),c=0;c<i.length;++c)a(i[c],l,s.concat(c))}(e,r,[]),r}function iD(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function F(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof nn)return iD(r,e.dtype,t,n),e;var a=vv(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),iD(r,a,t,n),e==null||!ao(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=$l(e,a);ao(e)||Array.isArray(e)||(e=[e]);var s=a!=="string"?b6(e,a,se().getBool("DEBUG")):rf(e,[],!0);return Y.makeTensor(s,o,a)}function S0(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(a,i){return F(a,t+"["+i+"]",n)},r)}function T6(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Jfe(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function mr(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);return[n,t.map(function(i){return e[i]})]}function Yr(e,t){return Jfe(e,t.map(function(n){return 1}),t)}function ia(e,t,n){U(T6(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function xo(e,t){if(T6(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(a){return n.push(a)}),n}function AT(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function bo(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Zfe(e,t){var n=e[0].length;e.forEach(function(a,i){U(a.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),U(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(a,i){for(var o=0;o<n;o++)U(o===t||a[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function of(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function H(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Y.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Y.endScope(s),s}catch(l){throw Y.endScope(null),l}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}Ye.registerFlag("HAS_WEBGL",function(){return Ye.getNumber("WEBGL_VERSION")>0}),Ye.registerFlag("WEBGL_VERSION",function(){return aD(2)?2:aD(1)?1:0}),Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ye.get("WEBGL_VERSION")===2}),Ye.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ye.registerFlag("WEBGL_PACK",function(){return Ye.getBool("HAS_WEBGL")}),Ye.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_CLIP",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_PACK_REDUCE",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_CONV_IM2COL",function(){return Ye.getBool("WEBGL_PACK")}),Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Hfe(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Gfe(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Ye.getNumber("WEBGL_VERSION");return e===0?0:qfe(e)}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Kfe(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ye.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Xfe(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Yfe(Ye.getNumber("WEBGL_VERSION"))}),Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),C6=N6;var er=H({complex_:function(e,t){var n=F(e,"real","complex"),r=F(t,"imag","complex");return At(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Y.runKernelFunc(function(a){return a.complex(n,r)},{$real:n,$imag:r})}}),Oa=H({real_:function(e){var t=F(e,"input","real");return Y.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),Gi=H({imag_:function(e){var t=F(e,"input","imag");return Y.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function nr(e,t,n){return Fl(e,t,$l(e,n),n)}function Fl(e,t,n,r){if(r==null&&(r=vv(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ao(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){S6(t);var a=$e(t),i=$e(n);U(a===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i});for(var o=0;o<n.length;++o){var s=n[o],l=o!==n.length-1||s!==$e(t.slice(o));U(n[o]===t[o]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return ao(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?b6(e,r,se().getBool("DEBUG")):rf(e,[],!0),Y.makeTensor(e,t,r)}function Se(e,t){if((ao(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ao(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Fl(e,[],[],t)}function Sn(e,t){qf(e);var n=$l(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Fl(e,null,n,t)}function hl(e,t,n){if(qf(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=$l(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fl(e,t,r,n)}function PT(e,t,n){if(qf(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=$l(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fl(e,t,r,n)}function Ur(e,t,n){if(qf(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=$l(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fl(e,t,r,n)}function ehe(e,t,n){if(qf(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=$l(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fl(e,t,r,n)}function the(e,t,n){if(qf(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=$l(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Fl(e,t=t||r,r,n)}function nhe(e,t,n,r){return t===void 0&&(t=!0),Y.makeVariable(e,t,n,r)}function Kf(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Kf(e,"float32"),r=Gt(e,"float32");return er(n,r)}var a=w6($e(e),t);return Y.makeTensor(a,e,t)}function Gt(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Gt(e,"float32"),r=Gt(e,"float32");return er(n,r)}var a=gv($e(e),t);return Y.makeTensor(a,e,t)}function oo(e,t,n){return Y.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function rhe(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Y.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function _0(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Gt([0],r);var a=gv(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return Sn(a,r)}var A6=H({onesLike_:function(e){var t=F(e,"x","onesLike");if(t.dtype==="complex64"){var n=A6(Oa(t)),r=gt(Gi(t));return er(n,r)}return Y.runKernelFunc(function(a){return a.onesLike(t)},{$x:t},function(a,i){return{$x:function(){return gt(a)}}})}}),gt=H({zerosLike_:function(e){var t=F(e,"x","zerosLike");return Y.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return gt(n)}}})}}),On=H({concat_:function(e,t){t===void 0&&(t=0),U(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=S0(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),t=Mn(t,n[0].shape)[0];var r=of(n.map(function(s){return s.shape}),t);if($e(r)===0)return nr([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var a=n.map(function(s){return s.shape});Zfe(a,t);var i=n,o={axis:t};return Y.runKernelFunc(function(s){return s.concat(n,t)},i,function(s){var l=a.map(function(c){return c[t]});return jT(s,l,t).map(function(c){return function(){return c}})},"Concat",o)}}),ahe=H({concat1d_:function(e){return On(e,0)}}),ihe=H({concat2d_:function(e,t){return On(e,t)}}),ohe=H({concat3d_:function(e,t){return On(e,t)}}),she=H({concat4d_:function(e,t){return On(e,t)}}),jT=H({split_:function(e,t,n){n===void 0&&(n=0);var r,a=F(e,"x","split");return n=Mn(n,a.shape)[0],typeof t=="number"?(U(a.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(a.shape[n]/t)):(U(a.shape[n]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),Y.runKernelFunc(function(i){return i.split(a,r,n)},{$x:a},function(i){return{$x:function(){return On(i,n)}}})}});function su(e,t){return e(t={exports:{}},t.exports),t.exports}var lhe=su(function(e){(function(t,n,r){function a(s){var l,c=this,u=(l=4022871197,function(d){d=d.toString();for(var f=0;f<d.length;f++){var p=.02519603282416938*(l+=d.charCodeAt(f));p-=l=p>>>0,l=(p*=l)>>>0,l+=4294967296*(p-=l)}return 23283064365386963e-26*(l>>>0)});c.next=function(){var d=2091639*c.s0+23283064365386963e-26*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=0|d)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(s),c.s0<0&&(c.s0+=1),c.s1-=u(s),c.s1<0&&(c.s1+=1),c.s2-=u(s),c.s2<0&&(c.s2+=1),u=null}function i(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function o(s,l){var c=new a(s),u=l&&l.state,d=c.next;return d.int32=function(){return 4294967296*c.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.alea=o})(0,e)}),che=su(function(e){(function(t,n,r){function a(s){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(0|s)?l.x=s:c+=s;for(var u=0;u<c.length+64;u++)l.x^=0|c.charCodeAt(u),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var c=new a(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(0,e)}),uhe=su(function(e){(function(t,n,r){function a(s){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^d^d<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(0|s)?l.x=s:c+=s;for(var u=0;u<c.length+64;u++)l.x^=0|c.charCodeAt(u),u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var c=new a(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(0,e)}),dhe=su(function(e){(function(t,n,r){function a(s){var l=this;l.next=function(){var c,u,d=l.x,f=l.i;return c=d[f],u=(c^=c>>>7)^c<<24,u^=(c=d[f+1&7])^c>>>10,u^=(c=d[f+3&7])^c>>>3,u^=(c=d[f+4&7])^c<<7,c=d[f+7&7],u^=(c^=c<<13)^c<<9,d[f]=u,l.i=f+1&7,u},function(c,u){var d,f=[];if(u===(0|u))f[0]=u;else for(u=""+u,d=0;d<u.length;++d)f[7&d]=f[7&d]<<15^u.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var c=new a(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=c.next,d.quick=d,u&&(u.x&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(0,e)}),fhe=su(function(e){(function(t,n,r){function a(s){var l=this;l.next=function(){var c,u,d=l.w,f=l.X,p=l.i;return l.w=d=d+1640531527|0,u=f[p+34&127],c=f[p=p+1&127],u^=u<<13,c^=c<<17,u^=u>>>15,c^=c>>>12,u=f[p]=u^c,l.i=p,u+(d^d>>>16)|0},function(c,u){var d,f,p,v,m,g=[],y=128;for(u===(0|u)?(f=u,u=null):(u+="\0",f=0,y=Math.max(y,u.length)),p=0,v=-32;v<y;++v)u&&(f^=u.charCodeAt((v+32)%u.length)),v===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,v>=0&&(m=m+1640531527|0,p=(d=g[127&v]^=f+m)==0?p+1:0);for(p>=128&&(g[127&(u&&u.length||0)]=-1),p=127,v=512;v>0;--v)f=g[p+34&127],d=g[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[p]=f^d;c.w=m,c.X=g,c.i=p}(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var c=new a(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=c.next,d.quick=d,u&&(u.X&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(0,e)}),hhe=su(function(e){(function(t,n,r){function a(s){var l=this,c="";l.next=function(){var d=l.b,f=l.c,p=l.d,v=l.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^v,v=v-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^v,l.a=v-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=0|s):c+=s;for(var u=0;u<c.length+20;u++)l.b^=0|c.charCodeAt(u),l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var c=new a(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(0,e)}),ac=su(function(e){(function(t,n){var r,a=this,i=256,o=6,s="random",l=n.pow(i,o),c=n.pow(2,52),u=2*c,d=i-1;function f(y,x,b){var w=[],S=m(function k(N,T){var A,P=[],I=typeof N;if(T&&I=="object")for(A in N)try{P.push(k(N[A],T-1))}catch{}return P.length?P:I=="string"?N:N+"\0"}((x=x==1?{entropy:!0}:x||{}).entropy?[y,g(t)]:y??function(){try{var k;return r&&(k=r.randomBytes)?k=k(i):(k=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(k)),g(k)}catch{var N=a.navigator,T=N&&N.plugins;return[+new Date,a,T,a.screen,g(t)]}}(),3),w),C=new p(w),E=function(){for(var k=C.g(o),N=l,T=0;k<c;)k=(k+T)*i,N*=i,T=C.g(1);for(;k>=u;)k/=2,N/=2,T>>>=1;return(k+T)/N};return E.int32=function(){return 0|C.g(4)},E.quick=function(){return C.g(4)/4294967296},E.double=E,m(g(C.S),t),(x.pass||b||function(k,N,T,A){return A&&(A.S&&v(A,C),k.state=function(){return v(C,{})}),T?(n[s]=k,N):k})(E,S,"global"in x?x.global:this==n,x.state)}function p(y){var x,b=y.length,w=this,S=0,C=w.i=w.j=0,E=w.S=[];for(b||(y=[b++]);S<i;)E[S]=S++;for(S=0;S<i;S++)E[S]=E[C=d&C+y[S%b]+(x=E[S])],E[C]=x;(w.g=function(k){for(var N,T=0,A=w.i,P=w.j,I=w.S;k--;)N=I[A=d&A+1],T=T*i+I[d&(I[A]=I[P=d&P+N])+(I[P]=N)];return w.i=A,w.j=P,T})(i)}function v(y,x){return x.i=y.i,x.j=y.j,x.S=y.S.slice(),x}function m(y,x){for(var b,w=y+"",S=0;S<w.length;)x[d&S]=d&(b^=19*x[d&S])+w.charCodeAt(S++);return g(x)}function g(y){return String.fromCharCode.apply(0,y)}if(n["seed"+s]=f,m(n.random(),t),e.exports){e.exports=f;try{r=require("crypto")}catch{}}})([],Math)});ac.alea=lhe,ac.xor128=che,ac.xorwow=uhe,ac.xorshift7=dhe,ac.xor4096=fhe,ac.tychei=hhe;var Vb=ac.alea,OT=function(){function e(t,n,r,a,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Vb(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,a=!1;!a;){var i=void 0,o=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(s>=1||s===0);var l=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*l,r=this.mean+this.stdDev*o*l,this.truncated&&!this.isValidTruncated(n)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),phe=function(){function e(t,n,r,a){this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Vb(i.toString()),this.randn=new OT(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,n=1-.331*(t=a*a)*t,r=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),mhe=function(){function e(t,n,r,a){var i=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=Vb(a)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function et(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",S6(e),new tm(e,t,n)}function vhe(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var P6=H({batchToSpaceND_:function(e,t,n){var r=F(e,"x","batchToSpaceND"),a=t.reduce(function(i,o){return i*o});return U(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),U(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),U(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a}),Y.runKernelFunc(function(i){return i.batchToSpaceND(r,t,n)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(t,n)}}})}}),ghe=H({broadcastTo_:function(e,t){var n=F(e,"broadcastTo","x"),r=n.shape;if(t.some(function(l){return!(l>0)||l%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])i[o]=1;else if(n.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map(function(l,c){return l>1?c:-1}).filter(function(l){return l>=0});return s.length===0?n.clone():Y.runKernelFunc(function(l){return l.tile(n,i)},{input:n},function(l){return{input:function(){return l.sum(s,!0)}}})}}),yhe=H({cast_:function(e,t){var n=F(e,"x","cast");if(!ufe(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return Y.runKernelFunc(function(a){return a.cast(n,t)},{x:n},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),xhe=H({clone_:function(e){var t=F(e,"x","clone",null);return Y.runKernelFunc(function(){return Y.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),bhe=H({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=F(e,"x","cumsum"),i=xo([t|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var s=bo(1,a.rank)[0],l=Y.runKernelFunc(function(c){return c.cumsum(o,s,n,r)},{permutedX:o},function(c){return{permutedX:function(){return c.cumsum(t,n,!r)}}});return i!=null&&(l=l.transpose(i)),l}}),whe=H({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=F(e,"x","depthToSpace"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];return U(a*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),U(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+r.shape}),U(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape}),Y.runKernelFunc(function(s){return s.depthToSpace(r,t,n)},{$x:r})}}),Pa=H({expandDims_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","expandDims",null);U(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(U(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),gi(n,r)}}),j6=H({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var a=et([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return kd(Pa(s,0),[n[0],1,1]);if(n.length===2)return kd(Pa(Pa(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return kd(Pa(Pa(Pa(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),She=H({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var a=F(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=o===1?a.as2D(1,-1):a,l=Y.runKernelFunc(function(c){return c.multinomial(s,r,t,n)},{logits2D:s});return o===1?l.as1D():l}}),DC=H({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=F(e,"indices","oneHot","int32"),i=a.shape.concat([t]);return a=a.flatten(),Y.runKernelFunc(function(o){return o.oneHot(a,t,n,r)},{$indices:a},function(o){return{$indices:function(){return Gt(a.shape,"float32")}}}).reshape(i)}}),lu=H({pad_:function(e,t,n){n===void 0&&(n=0);var r=F(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return Y.runKernelFunc(function(i){return i.pad(r,t,n)},{x:r},function(i){var o=t.map(function(s){return s[0]});return{x:function(){return i.slice(o,r.shape)}}},"PadV2",a)}}),_he=H({pad1d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),lu(e,[t],n)}}),Che=H({pad2d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),lu(e,t,n)}}),Ehe=H({pad3d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),lu(e,t,n)}}),khe=H({pad4d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),lu(e,t,n)}}),Nhe=H({rand_:function(e,t,n){var r=$e(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return Y.makeTensor(a,e,n)}}),The=H({randomNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new OT(t,n,r,!1,a),o=et(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Ahe=H({randomGamma_:function(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new phe(t,n,r,a),o=et(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),O6=H({randomUniform_:function(e,t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=et(e,r),o=new mhe(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),gi=H({reshape_:function(e,t){var n=F(e,"x","reshape",null);t=lfe(t,n.size),U(n.size===$e(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return Y.runKernelFunc(function(a){return a.reshape(n,t)},{x:n},function(a){return{x:function(){return a.reshape(n.shape)}}},"Reshape",r)}}),R6=H({spaceToBatchND_:function(e,t,n){var r=F(e,"x","spaceToBatchND");return U(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),U(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),U(r.shape.reduce(function(a,i,o){return o>0&&o<=t.length?a&&(i+n[o-1][0]+n[o-1][1])%t[o-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),Y.runKernelFunc(function(a){return a.spaceToBatchND(r,t,n)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(t,n)}}})}}),I6=H({squeeze_:function(e,t){var n=F(e,"x","squeeze");return gi(n,uc(n.shape,t).newShape)}}),ga=H({stack_:function(e,t){t===void 0&&(t=0);var n=S0(e,"tensors","stack");if(U(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;U(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){At(a,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){U(i===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=n.map(function(s){return s.expandDims(t)});return On(o,t)}}),kd=H({tile_:function(e,t){var n=F(e,"x","tile",null);U(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],a={reps:t};return Y.runKernelFunc(function(i,o){var s=i.tile(n,t);return o([n]),s},{x:n},function(i,o){var s=o[0];return{x:function(){var l=gt(s);if(s.rank===1)for(var c=0;c<t[0];++c)l=l.add(i.slice([c*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(c=0;c<t[0];++c)for(var u=0;u<t[1];++u)l=l.add(i.slice([c*s.shape[0],u*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(c=0;c<t[0];++c)for(u=0;u<t[1];++u)for(var d=0;d<t[2];++d)l=l.add(i.slice([c*s.shape[0],u*s.shape[1],d*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(c=0;c<t[0];++c)for(u=0;u<t[1];++u)for(d=0;d<t[2];++d)for(var f=0;f<t[3];++f)l=l.add(i.slice([c*s.shape[0],u*s.shape[1],d*s.shape[2],f*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return l}}},"Tile",a,r)}}),Phe=H({truncatedNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new OT(t,n,r,!0,a),o=et(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Rn=H({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=F(e,"x","unstack");U(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return Y.runKernelFunc(function(a){return a.unstack(n,t)},{x:n},function(a){return{x:function(){return ga(a,t)}}},"Unpack",r)}}),jhe=function(e,t){return je(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,d;return Oe(this,function(f){switch(f.label){case 0:return n=F(e,"x","setdiff1d"),r=F(t,"y","setdiff1d"),U(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),U(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),U(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return a=f.sent(),[4,r.data()];case 2:for(i=f.sent(),o=new Set(i),s=0,u=0;u<a.length;u++)o.has(a[u])||s++;for(l=new tm([s],n.dtype),c=new tm([s],"int32"),u=0,d=0;u<a.length;u++)o.has(a[u])||(l.values[d]=a[u],c.values[d]=u,d++);return[2,[l.toTensor(),c.toTensor()]]}})})};function C0(e,t,n,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function E0(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function k0(e,t,n,r){r===void 0&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function D6(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function M6(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function $6(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();var l=1;for(i=r;i<e.rank;++i)l*=o[i],s.push(o[i]);var c=io(e.shape).map(function(u){return u/l}).concat([1]).slice(0,r);return[s,a,l,c]}var F6=30;function TS(e){return e<=F6?e:AC(e,Math.floor(Math.sqrt(e)))}function Ohe(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+n.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function Rhe(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Ohe(n,t,e)}function N0(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var l=a<1?1:a;return{sliceRank:a,numUpdates:$e(t.shape)/l,sliceSize:o,strides:io(n.slice(0,a)).concat([1]),outputSize:$e(n)}}function Ihe(e,t,n){U(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),U(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(i){U(t[i]+n[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+n[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},a=0;a<e.rank;++a)r(a)}function oD(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function RT(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Dhe(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=kC(0,i,s-1)}function Mhe(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=o>0?kC(0,i,s):kC(-1,i,s-1)}function L6(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function B6(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function $he(e,t){U(TC(e),function(){return"The f passed in variableGrads(f) must be a function"}),U(t==null||Array.isArray(t)&&t.every(function(u){return u instanceof af}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],Y.registeredVariables)t.push(Y.registeredVariables[r]);var a=n?t.filter(function(u){return!u.trainable}):null,i=t.length;U((t=t.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=Y.gradients(e,t,null,!0),s=o.value,l=o.grads;U(l.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),U(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var c={};return t.forEach(function(u,d){l[d]!=null&&(c[u.name]=l[d])}),a!=null&&a.forEach(function(u){return c[u.name]=null}),{value:s,grads:c}}function Hb(e){return Y.customGrad(e)}var ps=H({softmax_:function(e,t){t===void 0&&(t=-1);var n=F(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Y.runKernelFunc(function(r,a){var i=r.softmax(n,t);return a([i]),i},{logits:n},function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),Fhe=H({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=F(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Hb(function(r,a){var i=r.max(t,!0),o=r.sub(i),s=o.toFloat().sub(o.exp().sum(t,!0).log());return a([s]),{value:s,gradFunc:function(l,c){var u=c[0].exp();return l.sub(l.sum(t,!0).mul(u))}}})(n)}}),U6=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),z6=function(){function e(){}return e.prototype.time=function(t){return te("time")},e.prototype.read=function(t){return te("read")},e.prototype.readSync=function(t){return te("readSync")},e.prototype.numDataIds=function(){return te("numDataIds")},e.prototype.disposeData=function(t){return te("disposeData")},e.prototype.write=function(t,n,r){return te("write")},e.prototype.move=function(t,n,r,a){return te("move")},e.prototype.memory=function(){return te("memory")},e.prototype.floatPrecision=function(){return te("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,a){return te("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,te("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return te("slice")},e.prototype.stridedSlice=function(t,n,r,a){return te("stridedSlice")},e.prototype.unstack=function(t,n){return te("unstack")},e.prototype.reverse=function(t,n){return te("reverse")},e.prototype.concat=function(t,n){return te("concat")},e.prototype.neg=function(t){return te("neg")},e.prototype.add=function(t,n){return te("add")},e.prototype.addN=function(t){return te("addN")},e.prototype.subtract=function(t,n){return te("subtract")},e.prototype.multiply=function(t,n){return te("multiply")},e.prototype.realDivide=function(t,n){return te("realDivide")},e.prototype.floorDiv=function(t,n){return te("floorDiv")},e.prototype.sum=function(t,n){return te("sum")},e.prototype.prod=function(t,n){return te("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return te("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return te("argMin")},e.prototype.argMax=function(t,n){return te("argMax")},e.prototype.equal=function(t,n){return te("equal")},e.prototype.notEqual=function(t,n){return te("notEqual")},e.prototype.less=function(t,n){return te("less")},e.prototype.lessEqual=function(t,n){return te("lessEqual")},e.prototype.greater=function(t,n){return te("greater")},e.prototype.greaterEqual=function(t,n){return te("greaterEqual")},e.prototype.logicalNot=function(t){return te("logicalNot")},e.prototype.logicalAnd=function(t,n){return te("logicalAnd")},e.prototype.logicalOr=function(t,n){return te("logicalOr")},e.prototype.where=function(t){return te("where")},e.prototype.select=function(t,n,r){return te("select")},e.prototype.topk=function(t,n,r){return te("topk")},e.prototype.min=function(t,n){return te("min")},e.prototype.minimum=function(t,n){return te("minimum")},e.prototype.mod=function(t,n){return te("mod")},e.prototype.max=function(t,n){return te("max")},e.prototype.maximum=function(t,n){return te("maximum")},e.prototype.all=function(t,n){return te("all")},e.prototype.any=function(t,n){return te("any")},e.prototype.squaredDifference=function(t,n){return te("squaredDifference")},e.prototype.ceil=function(t){return te("ceil")},e.prototype.floor=function(t){return te("floor")},e.prototype.round=function(t){return te("round")},e.prototype.sign=function(t){return te("sign")},e.prototype.isNaN=function(t){return te("isNaN")},e.prototype.isInf=function(t){return te("isInf")},e.prototype.isFinite=function(t){return te("isFinite")},e.prototype.pow=function(t,n){return te("pow")},e.prototype.exp=function(t){return te("exp")},e.prototype.expm1=function(t){return te("expm1")},e.prototype.softmax=function(t,n){return te("softmax")},e.prototype.log=function(t){return te("log")},e.prototype.log1p=function(t){return te("log1p")},e.prototype.sqrt=function(t){return te("sqrt")},e.prototype.rsqrt=function(t){return te("rsqrt")},e.prototype.square=function(t){return te("square")},e.prototype.reciprocal=function(t){return te("reciprocal")},e.prototype.relu=function(t){return te("relu")},e.prototype.relu6=function(t){return te("relu6")},e.prototype.prelu=function(t,n){return te("prelu")},e.prototype.elu=function(t){return te("elu")},e.prototype.eluDer=function(t,n){return te("eluDer")},e.prototype.selu=function(t){return te("selu")},e.prototype.int=function(t){return te("int")},e.prototype.clip=function(t,n,r){return te("clip")},e.prototype.abs=function(t){return te("abs")},e.prototype.complexAbs=function(t){return te("complexAbs")},e.prototype.sigmoid=function(t){return te("sigmoid")},e.prototype.softplus=function(t){return te("softplus")},e.prototype.sin=function(t){return te("sin")},e.prototype.cos=function(t){return te("cos")},e.prototype.tan=function(t){return te("tan")},e.prototype.asin=function(t){return te("asin")},e.prototype.acos=function(t){return te("acos")},e.prototype.atan=function(t){return te("atan")},e.prototype.atan2=function(t,n){return te("atan2")},e.prototype.sinh=function(t){return te("sinh")},e.prototype.cosh=function(t){return te("cosh")},e.prototype.tanh=function(t){return te("tanh")},e.prototype.asinh=function(t){return te("asinh")},e.prototype.acosh=function(t){return te("acosh")},e.prototype.atanh=function(t){return te("atanh")},e.prototype.erf=function(t){return te("erf")},e.prototype.step=function(t,n){return te("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,te("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return te("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return te("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return te("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,te("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return te("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return te("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return te("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return te("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return te("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return te("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return te("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,a){return te("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return te("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return te("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return te("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return te("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return te("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,a){return te("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return te("reshape")},e.prototype.cast=function(t,n){return te("cast")},e.prototype.tile=function(t,n){return te("tile")},e.prototype.pad=function(t,n,r){return te("pad")},e.prototype.transpose=function(t,n){return te("transpose")},e.prototype.gather=function(t,n,r){return te("gather")},e.prototype.gatherND=function(t,n){return te("gatherND")},e.prototype.scatterND=function(t,n,r){return te("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return te("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return te("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,a){return te("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return te("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,a){return te("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return te("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,a,i,o){return te("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,a,i){return te("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,a,i,o,s){return te("LRNGrad")},e.prototype.multinomial=function(t,n,r,a){return te("multinomial")},e.prototype.oneHot=function(t,n,r,a){return te("oneHot")},e.prototype.cumsum=function(t,n,r,a){return te("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,a,i){return te("nonMaxSuppression")},e.prototype.fft=function(t){return te("fft")},e.prototype.ifft=function(t){return te("ifft")},e.prototype.complex=function(t,n){return te("complex")},e.prototype.real=function(t){return te("real")},e.prototype.imag=function(t){return te("imag")},e.prototype.cropAndResize=function(t,n,r,a,i,o){return te("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return te("depthToSpace")},e.prototype.split=function(t,n,r){return te("split")},e.prototype.sparseToDense=function(t,n,r,a){return te("sparseToDense")},e.prototype.diag=function(t){return te("diag")},e.prototype.fill=function(t,n,r){return te("fill")},e.prototype.onesLike=function(t){return te("onesLike")},e.prototype.zerosLike=function(t){return te("zerosLike")},e.prototype.linspace=function(t,n,r){return te("linspace")},e.prototype.dispose=function(){return te("dispose")},e}();function te(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function el(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function In(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function dt(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=t[t.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function rm(e,t,n,r,a,i,o){o===void 0&&(o="channelsLast");var s,l=P0(t),c=l[0],u=l[1];if(o==="channelsLast")s=[c,u,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[c,u,e[1],e[1]]}return cu(e,s,n,r,a,i,!1,o)}function T0(e,t,n,r,a,i,o){o===void 0&&(o="NDHWC");var s,l,c=MC(t),u=c[0],d=c[1],f=c[2];if(o==="NDHWC")l="channelsLast",s=[u,d,f,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);l="channelsFirst",s=[u,d,f,e[1],e[1]]}return A0(e,s,n,r,a,!1,l,i)}function cu(e,t,n,r,a,i,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1],c=l[0],u=l[1],d=l[2],f=l[3];if(s==="channelsLast")c=e[0],u=e[1],d=e[2],f=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);c=e[0],f=e[1],u=e[2],d=e[3]}var p,v=t[0],m=t[1],g=t[3],y=P0(n),x=y[0],b=y[1],w=P0(r),S=w[0],C=w[1],E=Nd(v,S),k=Nd(m,C),N=function(R,D,M,$,j,O,B,G){var L,W,J;if(typeof R=="number"){L={top:R,bottom:R,left:R,right:R,type:R===0?"VALID":"NUMBER"};var ee=function(V,q,de,he,ae){he==null&&(he=W6(V,q,de));var le=V[0],ge=V[1],_e=up((le-q+2*he)/de+1,ae);U(gn(_e),function(){return"The output # of rows ("+_e+") must be an integer. Change the stride and/or zero pad parameters"});var Re=up((ge-q+2*he)/de+1,ae);return U(gn(Re),function(){return"The output # of columns ("+Re+") must be an integer. Change the stride and/or zero pad parameters"}),[_e,Re]}([D,M],O,$,R,G);W=ee[0],J=ee[1]}else if(R==="same"){W=Math.ceil(D/$),J=Math.ceil(M/j);var ne=Math.max(0,(W-1)*$+O-D),Z=Math.max(0,(J-1)*j+B-M),K=Math.floor(ne/2),Q=ne-K,ie=Math.floor(Z/2);L={top:K,bottom:Q,left:ie,right:Z-ie,type:"SAME"}}else{if(R!=="valid")throw Error("Unknown padding parameter: "+R);L={top:0,bottom:0,left:0,right:0,type:"VALID"},W=Math.ceil((D-O+1)/$),J=Math.ceil((M-B+1)/j)}return{padInfo:L,outHeight:W,outWidth:J}}(a,u,d,x,b,E,k,i),T=N.padInfo,A=N.outHeight,P=N.outWidth,I=o?g*f:g;return s==="channelsFirst"?p=[c,I,A,P]:s==="channelsLast"&&(p=[c,A,P,I]),{batchSize:c,dataFormat:s,inHeight:u,inWidth:d,inChannels:f,outHeight:A,outWidth:P,outChannels:I,padInfo:T,strideHeight:x,strideWidth:b,filterHeight:v,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:k,dilationHeight:S,dilationWidth:C,inShape:e,outShape:p,filterShape:t}}function A0(e,t,n,r,a,i,o,s){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var l=[-1,-1,-1,-1,-1],c=l[0],u=l[1],d=l[2],f=l[3],p=l[4];if(o==="channelsLast")c=e[0],u=e[1],d=e[2],f=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);c=e[0],p=e[1],u=e[2],d=e[3],f=e[4]}var v,m=t[0],g=t[1],y=t[2],x=t[4],b=MC(n),w=b[0],S=b[1],C=b[2],E=MC(r),k=E[0],N=E[1],T=E[2],A=Nd(m,k),P=Nd(g,N),I=Nd(y,T),R=function(B,G,L,W,J,ee,ne,Z,K,Q,ie){var V,q,de,he;if(typeof B=="number"){V={top:B,bottom:B,left:B,right:B,front:B,back:B,type:B===0?"VALID":"NUMBER"};var ae=function(me,Ee,X,be,oe,Ie){oe==null&&(oe=W6(me,Ee,be));var Dt=me[0],qn=me[1],Nr=me[2],ur=up((Dt-Ee+2*oe)/be+1,Ie);U(gn(ur),function(){return"The output # of depths ("+ur+") must be an integer. Change the stride and/or zero pad parameters"});var Kn=up((qn-Ee+2*oe)/be+1,Ie);U(gn(Kn),function(){return"The output # of rows ("+Kn+") must be an integer. Change the stride and/or zero pad parameters"});var So=up((Nr-Ee+2*oe)/be+1,Ie);return U(gn(So),function(){return"The output # of columns ("+So+") must be an integer. Change the stride and/or zero pad parameters"}),[ur,Kn,So,X]}([G,L,W,1],Z,1,J,B,ie);q=ae[0],de=ae[1],he=ae[2]}else if(B==="same"){q=Math.ceil(G/J),de=Math.ceil(L/ee),he=Math.ceil(W/ne);var le=(q-1)*J+Z-G,ge=(de-1)*ee+K-L,_e=(he-1)*ne+Q-W,Re=Math.floor(le/2),He=le-Re,Me=Math.floor(ge/2),st=ge-Me,xe=Math.floor(_e/2);V={top:Me,bottom:st,left:xe,right:_e-xe,front:Re,back:He,type:"SAME"}}else{if(B!=="valid")throw Error("Unknown padding parameter: "+B);V={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},q=Math.ceil((G-Z+1)/J),de=Math.ceil((L-K+1)/ee),he=Math.ceil((W-Q+1)/ne)}return{padInfo:V,outDepth:q,outHeight:de,outWidth:he}}(a,u,d,f,w,S,C,A,P,I,s),D=R.padInfo,M=R.outDepth,$=R.outHeight,j=R.outWidth,O=i?x*p:x;return o==="channelsFirst"?v=[c,O,M,$,j]:o==="channelsLast"&&(v=[c,M,$,j,O]),{batchSize:c,dataFormat:o,inDepth:u,inHeight:d,inWidth:f,inChannels:p,outDepth:M,outHeight:$,outWidth:j,outChannels:O,padInfo:D,strideDepth:w,strideHeight:S,strideWidth:C,filterDepth:m,filterHeight:g,filterWidth:y,effectiveFilterDepth:A,effectiveFilterHeight:P,effectiveFilterWidth:I,dilationDepth:k,dilationHeight:N,dilationWidth:T,inShape:e,outShape:v,filterShape:t}}function W6(e,t,n,r){r===void 0&&(r=1);var a=Nd(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function P0(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function MC(e){return typeof e=="number"?[e,e,e]:e}function Nd(e,t){return t<=1?e:e+(e-1)*(t-1)}function up(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function sf(e){var t=P0(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function Qr(e,t){return sf(e)||sf(t)}function IT(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function V6(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Gt(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!dfe(e.dtype,t))return Y.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return n.int(e);if(t==="bool"){var s=Se(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function $C(e,t){return Y.makeTensorFromDataId(e.dataId,t,e.dtype)}function H6(e,t,n){var r=(t-e)/(n-1),a=gv(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return Sn(a,"float32")}function FC(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function sD(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Lhe(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Bhe(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Uhe(e,t,n){var r=function(i,o,s){return function(l,c,u){for(var d=0,f=l.length,p=0,v=!1;d<f;){var m=u(c,l[p=d+(f-d>>>1)]);m>0?d=p+1:(f=p,v=!m)}return v?d:-d-1}(i,o,s||zhe)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function zhe(e,t){return e>t?1:e<t?-1:0}function DT(e,t,n,r,a){return G6(e,t,n,r,a,0).selectedIndices}function MT(e,t,n,r,a,i){var o=G6(e,t,n,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function G6(e,t,n,r,a,i,o,s){s===void 0&&(s=!1);for(var l=Array.from(t).map(function(w,S){return{score:w,boxIndex:S,suppressBeginIndex:0}}).filter(function(w){return w.score>a}).sort(lD),c=i>0?-.5/i:0,u=[],d=[];u.length<n&&l.length>0;){var f=l.pop(),p=f.score,v=f.boxIndex,m=f.suppressBeginIndex;if(p<a)break;for(var g=!1,y=u.length-1;y>=m;--y){var x=Whe(e,v,u[y]);if(x>=r){g=!0;break}if(f.score=f.score*Vhe(r,c,x),f.score<=a)break}f.suppressBeginIndex=u.length,g||(f.score===p?(u.push(v),d.push(f.score)):f.score>a&&Uhe(l,f,lD))}var b=u.length;return s&&(u.fill(0,b),d.fill(0,b)),{selectedIndices:Sn(u,"int32"),selectedScores:Sn(d,"float32"),numValidOutputs:Se(b,"int32")}}function Whe(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-i)*(l-o),v=(d-c)*(f-u);if(p<=0||v<=0)return 0;var m=Math.max(i,c),g=Math.max(o,u),y=Math.min(s,d),x=Math.min(l,f),b=Math.max(y-m,0)*Math.max(x-g,0);return b/(p+v-b)}function Vhe(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function lD(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function q6(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map(function(i){a[n]=i;var o=e.slice(r,a);return r[n]+=i,o})}function K6(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=et(n,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var l=e.locToIndex(o);a.values[r]=e.values[l]}return a.toTensor()}function X6(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],l=o[1],c=em(n,s*r),u=em("int32",s*r),d=0;d<s;d++){for(var f=d*l,p=e.subarray(f,f+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});v.sort(function(w,S){return S.value-w.value});var g=d*r,y=c.subarray(g,g+r),x=u.subarray(g,g+r);for(m=0;m<r;m++)y[m]=v[m].value,x[m]=v[m].index}var b=t.slice();return b[b.length-1]=r,[nr(c,b,n),nr(u,b,"int32")]}function $T(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=et(e,"int32"),i=et([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}var Hhe=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(a,i){return"T"+i});var n=[];this.variableNames.forEach(function(a){n.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},Ghe=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(a,i){return"T"+i});var n=[];this.variableNames.forEach(function(a){n.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},qhe=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s=t==="max"?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Y6(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function zr(e,t){return t===1?[e]:Y6(e,t)}function br(){var e,t,n,r,a,i,o,s,l,c;return se().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function xc(e,t,n){n===void 0&&(n="index");var r=io(t);return r.map(function(a,i){return"int "+e[i]+" = "+n+" / "+a+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+a:"index -= "+e[i]+" * "+a)+";"}).join("")}function FT(e){var t=io(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var Q6=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Khe(e,t,n,r){var a=[];e.forEach(function(p){var v=$e(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?a.push("uniform float "+p.name+(v>1?"["+v+"]":"")+";"):(a.push("uniform sampler2D "+p.name+";"),a.push("uniform int offset"+p.name+";"))});var i,o,s=a.join(`
`),l=e.map(function(p){return function(v,m,g){g===void 0&&(g=!1);var y="";y+=g?J6(v):Lu(v);var x=v.shapeInfo.logicalShape,b=m.logicalShape;return x.length<=b.length&&(y+=g?function(w,S){var C,E=w.name,k=E.charAt(0).toUpperCase()+E.slice(1),N="get"+k+"AtOutCoords",T=w.shapeInfo.logicalShape.length,A=S.logicalShape.length,P=el(w.shapeInfo.logicalShape,S.logicalShape),I=zt(A),R=A-T,D=["x","y","z","w","u","v"];C=T===0?"":A<2&&P.length>=1?"coords = 0;":P.map(function(L){return"coords."+D[L+R]+" = 0;"}).join(`
`);var M="";M=A<2&&T>0?"coords":w.shapeInfo.logicalShape.map(function(L,W){return"coords."+D[W+R]}).join(", ");var $="return outputValue;",j=$e(w.shapeInfo.logicalShape)===1,O=$e(S.logicalShape)===1;if(T!==1||j||O){if(j&&!O)$=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(P.length){var B=T-2,G=T-1;P.indexOf(B)>-1&&P.indexOf(G)>-1?$="return vec4(outputValue.x);":P.indexOf(B)>-1?$="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":P.indexOf(G)>-1&&($="return vec4(outputValue.xx, outputValue.zz);")}}else $=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+N+`() {
      `+I+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+k+"("+M+`);
      `+$+`
    }
  `}(v,m):function(w,S){var C=w.name,E=C.charAt(0).toUpperCase()+C.slice(1),k="get"+E+"AtOutCoords",N=S.texShape,T=w.shapeInfo.texShape,A=w.shapeInfo.logicalShape.length,P=S.logicalShape.length;if(!w.shapeInfo.isUniform&&A===P&&w.shapeInfo.flatOffset==null&&Vn(T,N))return`
      float `+k+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var I,R=zt(P),D=el(w.shapeInfo.logicalShape,S.logicalShape),M=P-A,$=["x","y","z","w","u","v"];I=A===0?"":P<2&&D.length>=1?"coords = 0;":D.map(function(O){return"coords."+$[O+M]+" = 0;"}).join(`
`);var j="";return j=P<2&&A>0?"coords":w.shapeInfo.logicalShape.map(function(O,B){return"coords."+$[B+M]}).join(", "),`
    float `+k+`() {
      `+R+` coords = getOutputCoords();
      `+I+`
      return get`+E+"("+j+`);
    }
  `}(v,m)),y}(p,t,r)}).join(`
`),c=t.texShape,u=br(),d=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(u),f=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Xhe+`
    `+Yhe+`
    `+Qhe+`
  `}(u);return t.isPacked?(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,S){var C=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(w,S){var C=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];if(Vn(w,S))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,v);case 3:return m=p,g=v,y=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],x=Math.ceil(m[2]/2),b=x*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,S){for(var C=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],E=Math.ceil(w[w.length-1]/2),k=E*Math.ceil(w[w.length-2]/2),N=k,T="",A="b, r, c",P=2;P<w.length-1;P++)N*=w[w.length-P-1],T=`
      int b`+P+" = index / "+N+`;
      index -= b`+P+" * "+N+`;
    `+T,A="b"+P+", "+A;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+k+`;
      index -= b * `+k+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+A+`);
    }
  `}(p,v)}var m,g,y,x,b}(t.logicalShape,c),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(u)):(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(y,x){return Vn(y,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,v);case 3:return m=v,g=xc(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,x){var b=xc(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(p,v);case 5:return function(y,x){var b=xc(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,v);case 6:return function(y,x){var b=xc(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,v);default:throw new Error(p.length+"-D output sampling is not yet supported")}var m,g}(t.logicalShape,c),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(u)),r&&(f+=Jhe),[f,d,o,s,i,l,n].join(`
`)}function Lu(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=n.shapeInfo.texShape,o=i[0],s=i[1];if(o===1&&s===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=n.shapeInfo.texShape,c=l[0],u=l[1],d=Ql(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+c+", "+u+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Au(n)+`
      }
    `;var i=n.shapeInfo.texShape,o=i[0],s=i[1];if(s===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=Ql(r);return s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+l+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+l+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+l+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n.shapeInfo.texShape;if(o!=null&&Vn(r,o)){var s=o[0],l=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+s+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var c=uc(r),u=c.newShape,d=c.keptDims,f=u;if(f.length<r.length){var p=Bu(n,f);return`
      `+Lu(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Uu(["row","col"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Au(n)+`
      }
    `;var v=o[0],m=o[1],g=Ql(a);return m===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+v+", "+m+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],s=r[2],l=uc(r),c=l.newShape,u=l.keptDims,d=c;if(d.length<r.length){var f=Bu(n,d);return`
        `+Lu(f)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Uu(["row","col","depth"],u)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+Au(n)+`
      }
    `;var p=n.shapeInfo.texShape,v=p[0],m=p[1],g=n.shapeInfo.flatOffset;if(m===o&&g==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+v+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+v+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var y=Ql(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+m+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],s=r[2]*o,l=r[1]*s,c=uc(r),u=c.newShape,d=c.keptDims;if(u.length<r.length){var f=Bu(n,u);return`
      `+Lu(f)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Uu(["row","col","depth","depth2"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+l+", "+s+", "+o+`, 1)));
        `+Au(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,m=v[0],g=v[1];if(g===l&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(g===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var y=Ql(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+y+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],s=r[3]*o,l=r[2]*s,c=r[1]*l,u=uc(r),d=u.newShape,f=u.keptDims;if(d.length<r.length){var p=Bu(n,d);return`
      `+Lu(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Uu(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+c+", "+l+", "+s+", "+o+`)) +
          depth3;
        `+Au(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,g=m[0],y=m[1];if(y===c&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+l+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(y===o&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var x=Ql(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=uc(r),s=o.newShape,l=o.keptDims;if(s.length<r.length){var c=Bu(n,s);return`
      `+Lu(c)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Uu(["row","col","depth","depth2","depth3","depth4"],l)+`);
      }
    `}var u=r[5],d=r[4]*u,f=r[3]*d,p=r[2]*f,v=r[1]*p;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+p+", "+f+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+u+`, 1)));
        `+Au(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,y=g[0],x=g[1];if(x===v&&m==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+f+", "+d+", "+u+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+y+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(x===u&&m==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+y+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var b=Ql(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+p+" + depth * "+f+` +
          depth2 * `+d+" + depth3 * "+u+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+y+", "+x+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function J6(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=br(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=a.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=br();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+l[0]+", "+l[1]+`, index);
      return `+c.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,c=l[0],u=l[1],d=br();if(l!=null&&Vn(i,l))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+c+`.0);

        return `+d.texture2D+"("+o+`, uv);
      }
    `;var f=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+f[0]+", "+f[1]+`, row, col);
      return `+d.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];if(i[0]===1){var u=i.slice(1),d=Bu(a,u);return`
        `+J6(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Uu(["b","row","col"],[1,2])+`);
        }
      `}var f=c[0],p=c[1],v=Math.ceil(i[2]/2),m=v*Math.ceil(i[1]/2),g=br();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+p+", "+m+", "+v+`, b, row, col);
      return `+g.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,s=a.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),c=a.shapeInfo.texShape,u=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],d=u[0],f=u[1],p=Math.ceil(i[o-1]/2),v=p*Math.ceil(i[o-2]/2),m="int b, int row, int col",g="b * "+v+" + (row / 2) * "+p+" + (col / 2)",y=2;y<o-1;y++)m="int b"+y+", "+m,v*=i[o-y-1],g="b"+y+" * "+v+" + "+g;var x=br();return`
    vec4 `+l+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+d+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(e)}}var Xhe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Yhe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Qhe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Jhe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ql(e){return"offset"+e}function Au(e){var t=e.name,n=$e(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function zt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Bu(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Uu(e,t){return t.map(function(n){return e[n]}).join(", ")}var Zhe=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,l=this.outputShape,c=l.length,u=zt(c),d=zr("coords",c);if(i===1){var f=zt(s=c+1);o=`
        `+f+" sourceLocR = "+f+"("+d.join()+`, 0);
        ++`+d[c-1]+`;
        `+f+" sourceLocG = "+f+"("+d.join()+`, 0);
        ++`+d[c-2]+`;
        `+f+" sourceLocA = "+f+"("+d.join()+`, 0);
        --`+d[c-1]+`;
        `+f+" sourceLocB = "+f+"("+d.join()+`, 0);
        --`+d[c-2]+";"}else s=c,o=`
        `+u+` sourceLocR = coords;
        ++`+d[c-1]+`;
        `+u+` sourceLocG = coords;
        ++`+d[c-2]+`;
        `+u+` sourceLocA = coords;
        --`+d[c-1]+`;
        `+u+` sourceLocB = coords;
        --`+d[c-2]+";";var p=["x","y","z","w","u","v"].slice(0,s),v="."+p[s-1],m=p.map(function(k){return"int "+k}),g=zr("sourceLocR",s-1).concat("inIdx.r"),y=zr("sourceLocG",s-1).concat("inIdx.g"),x=zr("sourceLocB",s-1).concat("inIdx.b"),b=zr("sourceLocA",s-1).concat("inIdx.a"),w=n==="max"?"greaterThan":"lessThan",S=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",C=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+u+` coords = getOutputCoords();
        bool hasNextCol = `+d[c-1]+" < "+(l[c-1]-1)+`;
        bool hasNextRow = `+d[c-2]+" < "+(l[c-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+S+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},epe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+c+", "+u+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},tpe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=u-1-e.padInfo.front,v=d-1-e.padInfo.top,m=f-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+v+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+l+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+c+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},npe=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],dt(e,t),dt(e,n);var o="0.0";r!=null&&(dt(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";a!=null&&(dt(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},rpe=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dt(e,t),dt(e,n);var o="vec4(0.0)";r!=null&&(dt(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";a!=null&&(dt(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},ape="return areal * breal - aimag * bimag;",ipe="return areal * bimag + aimag * breal;",cD=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dt(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},AS="return a + b;",PS="return a - b;",uD="return a * b;",Z6="return (a < 0.) ? b * a : a;",dn=function(e,t,n){this.variableNames=["A","B"],this.outputShape=dt(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},eV=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,No=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dt(t,n);var a=this.outputShape.length,i="";if(r)if(a===0||$e(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+zt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=zr("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},ope=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e}(),spe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e}(),lpe=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},cpe=function(e){this.outputShape=[],this.outputShape=of(e,1),this.variableNames=e.map(function(s,l){return"T"+l});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var i=t.length,o=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},upe=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=of(e,t);var n=this.outputShape,r=n.length,a=zt(r),i=zr("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(g,y){return"T"+y});var s=new Array(e.length-1);s[0]=e[0][t];for(var l=1;l<s.length;l++)s[l]=s[l-1]+e[l][t];var c=o[t],u=o.slice(-2),d=o.join(),f="if ("+c+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+u.join()+`));
        }`;for(l=1;l<s.length;l++){var p=s[l-1];f+=`
        if (`+c+" < "+s[l]+"  && "+c+" >= "+s[l-1]+`) {
          return getChannel(
            getT`+l+"("+kg(o,c,p)+`),
            vec2(`+kg(u,c,p)+`));
        }`}var v=s.length,m=s[s.length-1];f+=`
        return getChannel(
          getT`+v+"("+kg(o,c,m)+`),
          vec2(`+kg(u,c,m)+"));",this.userCode=`
      float getValue(`+o.map(function(g){return"int "+g})+`) {
        `+f+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function kg(e,t,n){var r=e.indexOf(t);return e.map(function(a,i){return i===r?a+" - "+n:a}).join()}var dpe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},fpe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=i?1:2,c=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+u+`];

        ivec2 dyCorner = ivec2(coords[`+l+"], coords["+c+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},hpe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+a+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},ppe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+l+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},mpe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},vpe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},dD=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4,v=e.dataFormat==="channelsLast",m=v?1:2,g=v?2:3,y=v?3:1,x="",b="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+b+`
        setOutput(result);
      }
    `},gpe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,f=e.filterWidth,p=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+u+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+c+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},fD=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,v=e.outChannels/e.inChannels,m="",g="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,g="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+l+", "+c+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+g+`
        setOutput(result);
      }
    `},hD=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,v=p,m="int xR; int xC; int xCOffset;",g=0;g<f;g++)for(var y=0;y<p;y++)m+=`
          vec4 xTexelR`+g+"C"+2*y+` = vec4(0.);
          vec4 wR`+g+"C"+y+` = vec4(0.);
          vec4 xR`+g+"C"+y+" = vec4(0.);";for(g=0;g<f;g++)for(var x=0;x<v;x++){if(m+=`
          xR = xRCorner + `+g*u+`;
          xC = xCCorner + `+(y=2*x)*d+`;
        `,c===1){if(y<p&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+g+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+y+" = vec4(previous.zw, xTexelR"+g+"C"+y+`.xy);
                } else {
                  xR`+g+"C"+y+" = vec4(0, 0, xTexelR"+g+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xR`+g+"C"+y+" = xTexelR"+g+"C"+y+`;
              `,y+1<p)){var b=s%2==0?y6(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+y+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(y+1)+` = vec4(
                    xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(y+1)+" = xTexelR"+g+"C"+(y+2)+`;
                `}}else y<p&&(m+=`
              if(xR >= 0 && xR < `+a+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+c+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(y+2)+` = vec4(0.);
                }

                xR`+g+"C"+y+` = vec4(
                  xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.zw);
              `,y+1<p&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+c+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(y+1)+" = vec4(xTexelR"+g+"C"+(y+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+g+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+c+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+g+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(y+2)+` = vec4(0.);
                }

                xR`+g+"C"+y+` = vec4(
                  xTexelR`+g+"C"+y+".xy, xTexelR"+g+"C"+(y+2)+`.xy);
              `,y+1<p&&(m+=`
                  xR`+g+"C"+(y+1)+` = vec4(
                    xTexelR`+g+"C"+y+".zw, xTexelR"+g+"C"+(y+2)+`.zw);
                `)),m+="}");y<p&&(m+=`
            vec4 wTexelR`+g+"C"+y+" = getW("+g+", "+y+`, d1, q);
            wR`+g+"C"+y+" = vec4(wTexelR"+g+"C"+y+".xz, wTexelR"+g+"C"+y+`.xz);
          `,y+1<p&&(m+=`
              vec4 wTexelR`+g+"C"+(y+1)+" = getW("+g+", "+(y+1)+`, d1, q);
              wR`+g+"C"+(y+1)+` =
                vec4(wTexelR`+g+"C"+(y+1)+".xz, wTexelR"+g+"C"+(y+1)+".xz);"))}for(g=0;g<f;g++)for(y=0;y<p;y++)m+="dotProd += xR"+g+"C"+y+" * wR"+g+"C"+y+";";var w="",S="";n&&(w=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,S="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+l+", "+c+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+C+`
        `+S+`
        setOutput(result);
      }
    `},ype=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],l=e[3],c=t[0],u=n[0],d=n[1];this.outputShape=[c,u,d,l];var f=r==="bilinear"?1:0,p=[o-1+".0",s-1+".0"],v=p[0],m=p[1],g=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=g[0],x=g[1],b=g[2],w=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],S=w[0],C=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+S+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+C+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},xpe=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+zt(r)+` coords = getOutputCoords();
        int end = `+pD(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+pD(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function pD(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var bpe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=nm.DENSE;var t=cp(e),n=br();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+xc(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},wpe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=nm.DENSE;var t=cp(e),n=br();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+xc(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},Spe=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),_pe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Cpe=function(e){this.variableNames=["A"],this.outTexUsage=fa.DOWNLOAD;var t=br();this.outputShape=e,this.userCode=`
      `+Q6+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},Epe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=fa.DOWNLOAD;var t=br();this.outputShape=e,this.userCode=`
      `+Q6+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},kpe=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=br(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+FT(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},Npe=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=br(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var c=0;c<=1;c++){var u=2*l+c;o+=`
          localCoords = coords;
          if(localCoords[2] + `+c+" < "+e[2]+`) {
            localCoords[2] += `+c+`;
            if(localCoords[1] + `+l+" < "+e[1]+`) {
              localCoords[1] += `+l+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+u+`] = values[0];
              } else if(offset == 1) {
                result[`+u+`] = values[1];
              } else if(offset == 2) {
                result[`+u+`] = values[2];
              } else {
                result[`+u+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+FT(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},Tpe="return real * expR - imag * expI;",Ape="return real * expI + imag * expR;",mD=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Ppe=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),jpe=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=zt(this.rank),i=function(o,s){var l=o.length;if(l>4)throw Error("Gather for rank "+l+" is not yet supported");if(l===1)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],d=0;d<o.length;d++)d===s?u.push("int(getIndices("+c[d]+"))"):u.push(""+c[d]);return u.join()}(e,n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},Ope=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=zt(t.length),a=zt(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Rpe(e,t){var n=br();return Tfe(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Ipe(e,t){return Rfe(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Dpe(e,t){return Ife(e,t,new Uint16Array([0,1,2,2,1,3]))}function xv(e,t,n,r,a,i,o){Mfe(n,r);var s=Dfe(e,t),l=e.TEXTURE_2D;return Le(e,t,function(){return e.bindTexture(l,s)}),Le(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Le(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Le(e,t,function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Le(e,t,function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Le(e,t,function(){return e.texImage2D(l,0,a,n,r,0,i,o,null)}),Le(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function Mpe(e,t,n,r,a){var i=Wb(n,r);return xv(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function $pe(e,t,n,r,a){var i=Wb(n,r);return xv(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function Fpe(e,t,n,r,a){var i=Wb(n,r);return xv(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Lpe(e,t,n,r,a){var i=yv(n,r);return xv(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Bpe(e,t,n,r,a){var i=yv(n,r);return xv(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function Upe(e,t,n,r){return Le(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),nD(e,t,n,"clipSpacePos",r,3,20,0)&&nD(e,t,n,"uv",r,2,20,12)}function zpe(e,t,n,r,a,i,o){var s,l,c;Le(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),l=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*a*4),l=e.FLOAT,c=o.internalFormatPackedFloat),s.set(i),Le(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,a,0,e.RGBA,l,s)}),Le(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Wpe(e,t,n,r){Le(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Le(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Le(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Le(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Vpe(e,t,n,r,a){var i=e.createBuffer();Le(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*n*r;return Le(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Le(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Le(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function Hpe(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Gpe(e,t,n,r,a){var i=Wb(n,r),o=i[0],s=i[1],l=new Uint8Array(n*r*4);return Le(e,t,function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function qpe(e,t,n,r,a,i,o,s){var l=e,c=new Float32Array(function(u,d){var f=yv(u,d);return f[0]*f[1]*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Kpe(e,t,n,r){var a=new Float32Array(n*r*4);return Le(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)}),a}var Xpe=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=se().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,_fe(n,t)):this.gl=yo(n);var r="WEBGL_color_buffer_float";if(se().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Sg(this.gl,this.debug,"OES_texture_float"),Da(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Sg(this.gl,this.debug,"OES_texture_half_float");else if(se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Da(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Sg(this.gl,this.debug,"EXT_color_buffer_half_float");else if(se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Da(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Da(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Ipe(this.gl,this.debug),this.indexBuffer=Dpe(this.gl,this.debug),this.framebuffer=$fe(this.gl,this.debug),this.textureConfig=TT(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return se().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Le(n,this.debug,function(){return n.finish()}),Le(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Le(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),Le(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Le(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Le(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),Mpe(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),$pe(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),Fpe(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),Wpe(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,a){this.throwIfDisposed(),zpe(this.gl,this.debug,t,n,r,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),Bpe(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),Lpe(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(rD(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Le(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,function(){return Gpe(a.gl,a.debug,n,r,a.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,a,i,o){return qpe(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return Hpe(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var a=Vpe(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,a=this;if(se().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=i.clientWaitSync(o,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=o}else se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(n,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,function(){return Kpe(a.gl,a.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=Afe(n,this.debug,t),a=Rpe(n,this.debug),i=jfe(n,this.debug);return Le(n,this.debug,function(){return n.attachShader(i,a)}),Le(n,this.debug,function(){return n.attachShader(i,r)}),Ofe(n,this.debug,i),this.debug&&ES(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Upe(n,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Le(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&ES(this.gl,this.debug,this.program),Le(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Lfe(this.gl,this.debug,t,n):Bfe(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),Le(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Ufe(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var a=yv(n,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,a){this.setOutputMatrixWriteRegionDriver(r,t,a,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&ES(this.gl,this.debug,this.program),_g(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Le(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Le(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Sg(this.gl,this.debug,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return je(this,void 0,void 0,function(){var n=this;return Oe(this,function(r){switch(r.label){case 0:return[4,YI(function(){return n.disposed||n.isQueryAvailable(t,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(t,a.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||YI(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),kS(this.gl,this.debug,t,this.framebuffer),this.debug&&_g(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(kS(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&_g(this.gl)):rD(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var a=this.gl;kS(a,this.debug,t,this.framebuffer),this.debug&&_g(a),this.outputTexture=t,Le(a,this.debug,function(){return a.viewport(0,0,n,r)}),Le(a,this.debug,function(){return a.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,a){var i=this;this.throwIfDisposed(),Le(this.gl,this.debug,function(){return i.gl.scissor(t,n,r,a)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function vD(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var a=n.logicalShape,i=t[r],o=i.shape;if(!Vn(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Vn(s,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+l+" must match")}})}var Ype=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,l=n.outWidth,c=n.dilationWidth,u=n.dilationHeight,d=n.dataFormat,f=s.left,p=s.top,v=a*r,m=br(),g=d==="channelsLast",y=g?0:1,x=g?1:2,b="",w=0;w<=1;w++)for(var S=0;S<=1;S++)b+=`
          blockIndex = rc.y + `+S+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+l+")) * "+o+" - "+p+`;
            d0 = offsetY + `+u+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+l+".) * "+i+". - "+f+`.);
              d1 = offsetX + `+c+" * (int(mod(float(pos), "+v+".) / "+a+`.));

              if(d1 < `+t[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+S)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+S)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+m.output+` = result;
      }
    `},Qpe=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";i=a===.5?"inversesqrt("+l+")":a===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},Jpe=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Zpe=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";i=a===.5?"inversesqrt("+l+")":a===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},eme=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,l=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},tme=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.front,d=l-1-e.padInfo.top,f=c-1-e.padInfo.left,p=s*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+d+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+l+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+l+" * "+c+` +
                  wR * `+c+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},jS=function(e,t,n,r,a,i,o){n===void 0&&(n=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],l=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",v="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,v="result = activation(result);");var m=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+l+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+l+`; i++) {
          vec4 a = getMatrixA(rc.x, `+c+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+f[0]+`);
          result += (`+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+v+`

        setOutput(result);
      }
    `},nme=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),rme=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},ame=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=zr("rc",t),r=zt(t),a=function(s,l,c){if(s===1)return"rc > "+l[0];for(var u="",d=s-2;d<s;d++)u+=c[d]+" >= "+l[d],d<s-1&&(u+="||");return u}(t,e,n),i=function(s,l,c,u){if(s===1)return"";var d=u.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+l+`;
    bool rEdge = rp1 >= `+c+`;
  `}(t,e[e.length-1],e[e.length-2],n),o=function(s,l){var c=s.length,u=function(d,f){for(var p=[],v=0;v<=1;v++)for(var m=0;m<=1;m++){for(var g=(v===0?"r":"rp1")+", "+(m===0?"c":"cp1"),y=2;y<d;y++)g=f[f.length-1-y]+","+g;p.push(g)}return p}(c,l);return c===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+u[0]+`),
          cEdge ? 0. : getA(`+u[1]+`),
          rEdge ? 0. : getA(`+u[2]+`),
          rEdge || cEdge ? 0. : getA(`+u[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},ime=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(l,c){return l[0]+e[c]+l[1]});var r=e.length,a=zt(r),i=t.map(function(l){return l[0]}).join(","),o=t.map(function(l,c){return l[0]+e[c]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},ome=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(g,y){return g[0]+e[y]+g[1]});for(var r=e.length,a=zt(r),i=t.map(function(g){return g[0]}).join(","),o=t.map(function(g,y){return g[0]+e[y]}).join(","),s=zr("rc",r),l=zr("source",r),c=s[r-1]+" < "+this.outputShape[r-1],u=r===1?"source":"vec2("+l.slice(-2).join()+")",d=[a+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+c+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+c+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=r===1?2:4;v<m;v++)p+=`
        `+d[v]+`
        if (`+f+`) {
          result[`+v+"] = float("+n+`);
        } else {
          `+a+` source = rc - start;
          result[`+v+"] = getChannel(getX("+l.join()+"), "+u+`);
        }
      `;p+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},OS=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",p="0.0";if(f||(p="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+u+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+l+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+c+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var m=4*Math.floor(r/4),g=r%4,y=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+u+", "+d+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+l+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},RS=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.front,v=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var g=t==="avg",y="0.0";if(g||(y="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+v+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+u+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+l+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(x="avgValue / count");var b=4*Math.floor(r/4),w=r%4,S=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+v+", "+m+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+l+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+S+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(w===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(w===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(w===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+S+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},sme=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",s="min"):t==="max"&&(o="-1.0 / 1e-20",s="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");var c=4*Math.floor(n/4),u=n%4,d=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var p="";a%n>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+c+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+c+`;
        if (`+(u===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(u===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(u===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+l+`);
      }
    `},lme=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+xc(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+FT(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},cme=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],l=o[2],c=[n&&s>1?a-1:a,n&&l>1?i-1:i],u=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=c[0]/u[0],f=c[1]/u[1],p=1/d,v=1/f,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},ume=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/c[0]+`,
          `+l[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},dme=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/c[0]+`,
          `+l[1]/c[1]+`,
          `+l[1]/c[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},fme=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],l=o[2],c=[n&&s>1?a-1:a,n&&l>1?i-1:i],u=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=c[0]/u[0],f=c[1]/u[1],p=1/d,v=1/f,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+c[0]+`) *
                (float(dyR) / float(`+u[0]+`));

            float sourceFracCol =
                float(`+c[1]+`) *
                  (float(dyC) / float(`+u[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},hme=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],u=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/c[0]+`,
          `+l[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+u+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},pme=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(i,o){return function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),a=zt(n);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},mme=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=zr("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=zt(n);function s(l){var c=e.map(function(u,d){return function(f,p){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+p[f]+" - 1":""+p[f]}(d,l)});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return s(l)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(l){return l[n-1]="("+l[n-1]+" + 1)",s(l)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(l){return l[n-2]="("+l[n-2]+" + 1)",s(l)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(l){return l[n-1]="("+l[n-1]+" + 1)",l[n-2]="("+l[n-2]+" + 1)",s(l)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},gD=function(e,t,n,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=zt(a.length),l=zt(i.length),c="";n===1?c="i":n===2&&(c="i, j");var u="getIndices("+c+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var f="getUpdates("+d+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+a+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+u+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},vme=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),l=n%4,c=`
        sumValue += dot(values, segFilter);
    `,u="";a%n>0&&(u=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var d="";a%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+u+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+c+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+c+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+c+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+c+`
        }
        setOutput(sumValue);
      }
    `},gme=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],l=0;l<t.length;l++)s.push(""+i[l]),l<e&&o.push(""+i[l]);r=o.join(),a=s.join()}var c=zt(n);this.userCode=`
      void main() {
        `+c+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},yme=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=zt(this.rank),a="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return IS.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(o,s){return"sourceLoc."+IS[s]+" = start["+s+"] + coords."+IS[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),IS=["x","y","z","w","u","v"],xme=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=zt(this.rank),r=zr("coords",this.rank),a=zr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(u,d){return"start["+d+"]"}).join()+");":t.map(function(u,d){return a[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+c+`
        vec4 result = vec4(0.);
        `+s+`
        `+l+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),bme=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=zt(n.length),i=zt(n.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=n.map(function(l,c){return s++,n.length===1?"coords * strides["+c+"] + begin["+c+"]":"coords["+(s-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+e+`);
      `+a+" strides = "+a+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},wme=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var a,i=yD(n,r),o=xD(t,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),i===sa.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===sa.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===sa.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===sa.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===sa.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(a),a},e.prototype.releaseTexture=function(t,n,r,a){if(this.freeTextures!=null){var i=xD(n,yD(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],s=o.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(a){t.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function yD(e,t){if(e===fa.UPLOAD)return sa.PACKED_2X2_FLOAT32;if(e===fa.RENDER||e==null)return function(n){return se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?sa.PACKED_2X2_FLOAT32:sa.UNPACKED_FLOAT32:n?sa.PACKED_2X2_FLOAT16:sa.UNPACKED_FLOAT16}(t);if(e===fa.DOWNLOAD||e===fa.PIXELS)return sa.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function xD(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var Sme=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=zt(this.rank),i=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],u=0;u<o.length;u++)c.push("imod("+l[u]+", "+o[u]+")");return c.join()}(e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},_me=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=zt(this.rank),i=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(s),u=0;u<o.length;u++)c[o[u]]=l[u];return c.join()}(t);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},Cme=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=zt(this.rank),i=Y6("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=i[r];var s="vec2("+o.slice(-2).join()+")",l="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+c+`;
      if(`+l+`) {
        result[1] = `+c+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+c+`;
        if(`+l+`) {
          result[3] = `+c+`;
        }
      }
      setOutput(result);
    }
    `},LT=1.7580993408473768,BT=1.0507009873554805,rt=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Pi="if (isnan(x)) return x;",Eme="return x;",bD="return abs(x);",tV=Pi+`
  return (x < 0.0) ? 0.0 : x;
`,nV=Pi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,rV="return (x >= 0.0) ? x : (exp(x) - 1.0);",kme=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+LT+`;
  float scale = `+BT+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,wD="return -x;",SD="return ceil(x);",_D="return floor(x);",CD="return exp(x);",ED="return exp(x) - 1.0;",Nme=Pi+`
  return sin(x);
`,Tme=Pi+`
  return cos(x);
`,Ame=Pi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Pme=Pi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,jme=Pi+`
  return atan(x);
`,Ome=Pi+"return log(x + sqrt(x * x + 1.0));",Rme=Pi+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Ime=Pi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ng="return x;",Dme="return x;",aV=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,iV=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oV=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Sh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Mme=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=zr("rc",t),r=zt(t),a=function(s,l){if(s===1)return"rc";for(var c="",u=0;u<s;u++)c+=l[u],u<s-1&&(c+=",");return c}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Tg={};function Ag(e,t){if(t===void 0&&(t=!1),e==="linear")return t?Dme:Eme;if(e==="relu")return t?aV:tV;if(e==="elu")return t?oV:rV;if(e==="relu6")return t?iV:nV;if(e==="prelu")return t?eV:Z6;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var $me=600,Fme=function(e){function t(n){var r,a=e.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!se().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=yo(se().getNumber("WEBGL_VERSION"));a.binaryCache=((r=se().getNumber("WEBGL_VERSION"))in Tg||(Tg[r]={}),Tg[r]),a.gpgpu=new Xpe(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=n,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=n.gl.canvas;return a.textureManager=new wme(a.gpgpu),a.numMBBeforeWarning=se().global.screen==null?1024:se().global.screen.height*se().global.screen.width*window.devicePixelRatio*$me/1024/1024,a.texData=new U6(a,Y),a}return Ai(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,a){if(se().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:n,usage:fa.UPLOAD}),i},t.prototype.move=function(n,r,a,i){if(se().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:a,dtype:i,values:r,usage:fa.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),a=r.values,i=r.dtype,o=r.complexTensors,s=r.slice,l=r.shape,c=r.isPacked;if(s!=null){var u=void 0;u=c?new Sh(l,Ng):new rt(l,Ng);var d=this.runWebGLProgram(u,[{dataId:n,shape:l,dtype:i}],i),f=this.readSync(d.dataId);return this.disposeData(d.dataId),f}if(a!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return a;var p,v,m=this.activeTimers!=null;return m&&(p=zi()),i==="complex64"?v=FC(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=zi()-p),this.convertAndCacheOnCPU(n,v)},t.prototype.read=function(n){return je(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k;return Oe(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(T){return r.push(T)})];if(a=this.texData.get(n),i=a.values,o=a.shape,s=a.slice,l=a.dtype,c=a.complexTensors,u=a.isPacked,s!=null)return d=void 0,d=u?new Sh(o,Ng):new rt(o,Ng),f=this.runWebGLProgram(d,[{dataId:n,shape:o,dtype:l}],l),p=this.read(f.dataId),this.disposeData(f.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&se().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,l!=="complex64"&&se().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),g=this.texData.get(m.dataId),v=(k=this.gpgpu).createBufferFromTexture.apply(k,[g.texture].concat(cp(o)))),this.pendingRead.set(n,[]),l==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return l!=="complex64"?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return x=N.sent(),b=x[0],w=x[1],y=FC(b,w),[3,5];case 4:v==null?y=this.getValuesFromTexture(n):(S=$e(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,S)),N.label=5;case 5:return m!=null&&this.disposeData(m.dataId),C=this.convertAndCacheOnCPU(n,y),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(T){return T(C)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,C]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var a=n[r];if(!kfe(a))throw se().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.isPacked,l=$e(i);if(se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(n),u=this.texData.get(c.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[u.texture].concat(cp(i))).subarray(0,l);return this.disposeData(c.dataId),d}var f=se().getBool("WEBGL_PACK")&&s===!0,p=f?NS(i):i,v=f?new Epe(p):new Cpe(p),m=this.runWebGLProgram(v,[{shape:p,dtype:o,dataId:n}],"float32"),g=this.texData.get(m.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,l);return this.disposeData(m.dataId),y},t.prototype.time=function(n){return je(this,void 0,void 0,function(){var r,a,i,o,s,l,c;return Oe(this,function(u){switch(u.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,n(),o=rf(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),s=rf(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return c=u.sent(),l.kernelMs=ofe(c),l.getExtraProfileInfo=function(){return c.map(function(d,f){return{name:s[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:zi(),endMs:null}},t.prototype.endTimer=function(n){return se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=zi(),n)},t.prototype.getQueryTime=function(n){return je(this,void 0,void 0,function(){var r;return Oe(this,function(a){return se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),a=r.texture,i=r.dtype,o=r.texShape,s=r.usage,l=r.isPacked,c=r.slice,u=c&&c.origDataId||n,d=this.dataRefCount.get(u);d>1?this.dataRefCount.set(u,d-1):(this.dataRefCount.delete(u),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,s,l)));var f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return se().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Y.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var a=this.makeOutput(n.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:Y.keep(n.clone()),imag:Y.keep(r.clone())},a},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,a);if($e(a)===0)return nr([],a,n.dtype);var i=this.texData.get(n.dataId).isPacked,o=L6(n.shape,r,a);if(i||!o){var s=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xme(a):new yme(a),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,l)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,a)},t.prototype.shallowSlice=function(n,r,a){var i=this.texData.get(n.dataId),o=this.makeOutput(a,n.dtype),s=this.texData.get(o.dataId);Object.assign(s,i),s.shape=a,s.dtype=n.dtype;var l=B6(r,n.strides);i.slice&&(l+=i.slice.flatOffset),s.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||n.dataId};var c=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,c+1),o},t.prototype.stridedSlice=function(n,r,a,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,a,i);var o=RT(r,a,i);if(o.some(function(l){return l===0}))return nr([],o);var s=new bme(r,i,o);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var a=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mme(n.shape,r):new pme(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var a=n.map(function(p){return Oa(p)}),i=n.map(function(p){return Gi(p)});return er(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>se().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(n.length/2),s=this.concat(n.slice(0,o),r),l=this.concat(n.slice(o),r);return this.concat([s,l],r)}if(se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var c=new upe(n.map(function(p){return p.shape}),r);return this.compileAndRun(c,n)}var u=of(n.map(function(p){return p.shape}),r),d=n.map(function(p){return p.as2D(-1,$e(p.shape.slice(r)))}),f=new cpe(d.map(function(p){return p.shape}));return this.compileAndRun(f,d).reshape(u)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,wD,n.dtype);var r=new rt(n.shape,wD);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,a,i){var o=a?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],l=a?n.shape[1]:n.shape[2],c=n.shape[0];if((o===1||s===1)&&l>1e3){a&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var u=s===1?n:n.as3D(c,l,1),d=s===1?2:1,f=s===1?r.as3D(c,1,l):r;return this.multiply(u,f).sum(d,!0)}var p=tr(n.dtype,r.dtype),v=new jS(n.shape,[c,o,s],a,i);return this.compileAndRun(v,[n,r],p)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,i=n.transposeA,o=n.transposeB,s=n.bias,l=n.activation,c=n.preluActivationWeights,u=i?r.shape[2]:r.shape[1],d=o?a.shape[1]:a.shape[2],f=r.shape[0],p=tr(r.dtype,a.dtype),v=s!=null,m=c!=null,g=l?Ag(l,!0):null,y=new jS(r.shape,[f,u,d],i,o,v,g,m),x=[r,a];return s&&x.push(s),c&&x.push(c),this.compileAndRun(y,x,p)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var a=this.texData.get(n.dataId),i=this.texData.get(r.dataId),o=new cD(ape,n.shape,r.shape),s=new cD(ipe,n.shape,r.shape),l=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],c=this.compileAndRun(o,l),u=this.compileAndRun(s,l),d=this.complex(c,u);return c.dispose(),u.dispose(),d}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,uD,n.dtype);var f=new dn(uD,n.shape,r.shape);return this.compileAndRun(f,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,a,i,o,s){var l=[n,r,a],c=null;s!=null&&(c=s.shape,l.push(s));var u=null;if(o!=null&&(u=o.shape,l.push(o)),se().getBool("WEBGL_PACK_NORMALIZATION")){var d=new rpe(n.shape,r.shape,a.shape,c,u,i);return this.compileAndRun(d,l)}var f=new npe(n.shape,r.shape,a.shape,c,u,i);return this.compileAndRun(f,l)},t.prototype.localResponseNormalization4D=function(n,r,a,i,o){var s=se().getBool("WEBGL_PACK_NORMALIZATION")?new Zpe(n.shape,r,a,i,o):new Qpe(n.shape,r,a,i,o);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,a,i,o,s,l){var c=new Jpe(r.shape,i,o,s,l);return this.compileAndRun(c,[r,a,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var a=this.readSync(n.dataId).map(function(o){return y0(o)});return K6(et(n.shape,n.dtype,a),r)}var i=new Sme(n.shape,r);return this.compileAndRun(i,[n])},t.prototype.pad=function(n,r,a){var i=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ome(n.shape,r,a):new ime(n.shape,r,a);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var a=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Cme(n.shape,r):new _me(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.gather=function(n,r,a){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,a);var i=new jpe(n.shape,r.size,a);return this.compileAndRun(i,[n,r])},t.prototype.batchToSpaceND=function(n,r,a){U(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(d,f){return d*f}),o=C0(n.shape,r,i),s=E0(o.length,r.length),l=k0(n.shape,r,i),c=D6(a,r.length),u=M6(l,a,r.length);return n.reshape(o).transpose(s).reshape(l).slice(c,u)},t.prototype.spaceToBatchND=function(n,r,a){U(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(f,p){return f*p}),o=[[0,0]];o.push.apply(o,a);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var l=n.pad(o),c=C0(l.shape,r,i,!1),u=E0(c.length,r.length,!1),d=k0(l.shape,r,i,!1);return l.reshape(c).transpose(u).reshape(d)},t.prototype.reduce=function(n,r,a){var i=n.shape[0],o=n.shape[1],s=TS(o),l=new sme({windowSize:s,inSize:o,batchSize:i},r),c=this.compileAndRun(l,[n],a);return c.shape[1]===1?c:this.reduce(c,r,a)},t.prototype.argReduce=function(n,r,a){a===void 0&&(a=null);var i=n.shape[0],o=n.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var s=TS(o),l=new qhe({windowSize:s,inSize:o,batchSize:i},r,a==null),c=[n];a!=null&&c.push(a);var u=this.compileAndRun(l,c,"int32");return u.shape[1]===1?u:this.argReduce(n,r,u)},t.prototype.argReducePacked=function(n,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:n.shape,o=TS(i[i.length-1]),s=new Zhe(i,o,r,a==null),l=a==null?[n]:[n,a],c=this.compileAndRun(s,l,"int32");return c.rank===n.rank?this.argReducePacked(n,r,c):c},t.prototype.sum=function(n,r){ia("sum",r,n.rank);var a=mr(n.shape,r),i=a[0],o=$e(a[1]),s=n.as2D(-1,o),l=bS(n.dtype);return this.reduce(s,"sum",l).reshape(i)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var a=mr(n.shape,r),i=a[0],o=$e(a[1]),s=n.as2D(-1,o),l=bS(n.dtype);return this.reduce(s,"prod",l).reshape(i)},t.prototype.unsortedSegmentSum=function(n,r,a){var i=0,o=xo([i],n.rank),s=n;o!=null&&(s=n.transpose(o),i=bo(1,n.rank)[0]);var l=function(p,v,m){for(var g=[],y=p.length,x=0;x<y;x++)x!==v?g.push(p[x]):g.push(m);return g}(s.shape,i,a),c=$e([s.shape[i]]),u=s.as2D(-1,c),d=bS(n.dtype),f=this.segOpCompute(u,"unsortedSegmentSum",r,d,a).reshape(l);return o!=null&&(f=f.transpose(AT(o))),f},t.prototype.segOpCompute=function(n,r,a,i,o){var s=n.shape[0],l=n.shape[1],c=function(f,p){var v,m=!1;for(f<=F6?(v=f,m=!0):v=AC(f,Math.floor(Math.sqrt(f)));!m;)v>p||v===f?m=!0:v=AC(f,v+1);return v}(l,o),u=new vme({windowSize:c,inSize:l,batchSize:s,numSegments:o}),d=this.compileAndRun(u,[n,a],i);return d.shape[1]===o?d:(a=_0(0,o).tile([l/c]),this.segOpCompute(d,r,a,i,o))},t.prototype.argMinMaxReduce=function(n,r,a){var i=[r];if(ia("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,n.rank),!se().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var o=mr(n.shape,i),s=o[0],l=$e(o[1]),c=n.as2D(-1,l);return this.argReduce(c,a).reshape(s)}return this.argReducePacked(n,a)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,a,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var o=new xpe(n.shape,a,i);return this.compileAndRun(o,[n])},t.prototype.equal=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var a=new dn("return float(a == b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new dn("return float(a != b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new dn("return float(a < b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new dn("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new dn("return float(a > b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new dn("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new rt(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new dn("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new dn("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.select=function(n,r,a){var i=new gme(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,a],tr(r.dtype,a.dtype))},t.prototype.where=function(n){w0("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return $T(n.shape,r)},t.prototype.topk=function(n,r,a){return X6(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){ia("min",r,n.rank);var a=mr(n.shape,r),i=a[0],o=$e(a[1]),s=n.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new dn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.mod=function(n,r){var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new dn(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);ia("max",r,n.rank);var a=mr(n.shape,r),i=a[0],o=$e(a[1]),s=n.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new dn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.all=function(n,r){ia("all",r,n.rank);var a=mr(n.shape,r),i=a[0],o=$e(a[1]),s=n.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(n,r){ia("any",r,n.rank);var a=mr(n.shape,r),i=a[0],o=$e(a[1]),s=n.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.realDivide=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new dn(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new dn(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,AS);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var a=tr(n.dtype,r.dtype);if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,AS,a);var i=new dn(AS,n.shape,r.shape);return this.compileAndRun(i,[n,r],a)},t.prototype.packedUnaryOp=function(n,r,a){var i=new Sh(n.shape,r);return this.compileAndRun(i,[n],a)},t.prototype.packedBinaryOp=function(n,r,a,i,o){o===void 0&&(o=!1);var s=new No(a,n.shape,r.shape,o);return this.compileAndRun(s,[n,r],i)},t.prototype.complexSeparableBinaryOp=function(n,r,a){var i=this,o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),l=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(f){var p=f[0],v=f[1],m=i.makeComplexComponentTensorInfo(n,p),g=i.makeComplexComponentTensorInfo(r,v),y=new dn(a,n.shape,r.shape);return i.compileAndRun(y,[m,g],tr(p.dtype,v.dtype))}),c=l[0],u=l[1],d=this.complex(c,u);return c.dispose(),u.dispose(),d},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>se().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),a=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([a,i])}var o=n.map(function(c){return c.dtype}).reduce(function(c,u){return tr(c,u)}),s=n.map(function(c){return c.shape}),l=se().getBool("WEBGL_PACK")?new Ghe(n[0].shape,s):new Hhe(n[0].shape,s);return this.compileAndRun(l,n,o)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,PS);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var a=tr(n.dtype,r.dtype);if(se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,PS,n.dtype);var i=new dn(PS,n.shape,r.shape);return this.compileAndRun(i,[n,r],a)},t.prototype.pow=function(n,r){var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new dn(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=tr(n.dtype,r.dtype);return this.compileAndRun(a,[n,r],i)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,SD,n.dtype);var r=new rt(n.shape,SD);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,_D,n.dtype);var r=new rt(n.shape,_D);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new rt(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new rt(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new rt(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new rt(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new rt(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,CD,n.dtype);var r=new rt(n.shape,CD);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ED,n.dtype);var r=new rt(n.shape,ED);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var a=Mn([r],n.shape),i=this.max(n,a),o=Yr(i.shape,a),s=this.subtract(n,i.reshape(o)),l=this.exp(s),c=this.sum(l,a).reshape(o);return this.realDivide(l,c)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new rt(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new rt(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new rt(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new rt(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new rt(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=se().getBool("WEBGL_PACK")?new Sh(n.shape,aV):new rt(n.shape,tV),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=se().getBool("WEBGL_PACK")?new Sh(n.shape,iV):new rt(n.shape,nV),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(eV,n.shape,r.shape):new dn(Z6,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.elu=function(n){if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,oV,n.dtype);var r=new rt(n.shape,rV);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new dn("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.selu=function(n){var r=new rt(n.shape,kme);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new rt(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,a){var i,o=(i=se().getBool("WEBGL_PACK_CLIP")?new spe(n.shape):new ope(n.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[n],null,o)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,bD,n.dtype);var r=new rt(n.shape,bD);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),a=new lpe(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(a,i)},t.prototype.sigmoid=function(n){var r=new rt(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new rt(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new rt(n.shape,Nme);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new rt(n.shape,Tme);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new rt(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new rt(n.shape,Ame);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new rt(n.shape,Pme);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new rt(n.shape,jme);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new dn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.sinh=function(n){var r=new rt(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new rt(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new rt(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new rt(n.shape,Ome);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new rt(n.shape,Rme);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new rt(n.shape,Ime);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new rt(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var a=new rt(n.shape,function(i){return i===void 0&&(i=0),Pi+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[n])},t.prototype.conv2dByMatMul=function(n,r,a,i,o,s){var l=n.shape,c=this.texData.get(n.dataId),u=a.inChannels,d=l[0]*l[1]*l[2],f=a.outChannels,p=a.dataFormat==="channelsLast",v=(d===1||f===1)&&u>1e3,m=l[2]%2!=0&&!!c.isPacked;if(v||!se().getBool("WEBGL_LAZILY_UNPACK")||!se().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=p?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],y=this.reshape(n,[1,g,a.inChannels]),x=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),a.outShape)}var b=p?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),w={dataId:n.dataId,shape:[1,b,a.inChannels],dtype:n.dtype},S=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,U(Eg(c.shape,w.shape),function(){return"packed reshape "+c.shape+" to "+w.shape+" isn't free"});var C=this.reshape(r,[1,a.inChannels,a.outChannels]),E=this.fusedBatchMatMul({a:w,b:C,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),k=this.texData.get(E.dataId);return U(k.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=S,k.shape=a.outShape,Y.makeTensorFromDataId(E.dataId,a.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,a,i,o,s){var l=a.filterWidth,c=a.filterHeight,u=a.inChannels,d=a.outWidth,f=a.outHeight,p=a.dataFormat==="channelsLast",v=l*c*u,m=f*d,g=[v,m],y=n.squeeze([0]),x=r.reshape([1,v,-1]),b=new Ype(g,y.shape,a),w=this.compileAndRun(b,[y]).reshape([1,g[0],g[1]]),S=i!=null,C=s!=null,E=o?Ag(o,!0):null,k=new jS(w.shape,[1,m,a.outChannels],!0,!1,S,E,C),N=[w,x];i&&N.push(i),C&&N.push(s);var T=this.compileAndRun(k,N);return p?T.reshape([1,f,d,a.outChannels]):T.reshape([1,a.outChannels,f,d])},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,l=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,s,l);if(se().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,s,l);var c=o!=null,u=l!=null,d=s?Ag(s,!1):null,f=new dD(i,c,d,u),p=[r,a];return o&&p.push(o),l&&p.push(l),this.compileAndRun(f,p)},t.prototype.conv2d=function(n,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,a);if(se().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,a);var i=new dD(a);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerInput=function(n,r,a){var i=new fpe(a);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerFilter=function(n,r,a){var i=new dpe(a);return this.compileAndRun(i,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,a=n.input,i=n.filter,o=n.convInfo,s=n.bias,l=n.activation,c=n.preluActivationWeights,u=se().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,d=l?Ag(l,u):null,f=[a,i],p=s!=null,v=c!=null;return p&&f.push(s),v&&f.push(c),u?(r=new hD(o,p,d,v),this.compileAndRun(r,f)):(r=new fD(o,p,d,v),this.compileAndRun(r,f))},t.prototype.depthwiseConv2D=function(n,r,a){var i;return se().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new hD(a),this.compileAndRun(i,[n,r])):(i=new fD(a),this.compileAndRun(i,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,a){var i=new vpe(a);return this.compileAndRun(i,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){var i=new mpe(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3d=function(n,r,a){var i=new gpe(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerInput=function(n,r,a){var i=new ppe(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerFilter=function(n,r,a){var i=new hpe(a);return this.compileAndRun(i,[n,r])},t.prototype.maxPool=function(n,r){var a=new OS(r,"max",!1);return this.compileAndRun(a,[n])},t.prototype.avgPool=function(n,r){var a=new OS(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,a,i){var o=new OS(i,"max",!0),s=this.compileAndRun(o,[r]),l=new eme(i),c=this.compileAndRun(l,[n,s],r.dtype);return s.dispose(),c},t.prototype.avgPoolBackprop=function(n,r,a){var i=new epe(a);return this.compileAndRun(i,[n],r.dtype)},t.prototype.cast=function(n,r){return V6(n,r,this)},t.prototype.unstack=function(n,r){for(var a=n.shape[r],i=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(i[o++]=n.shape[s]);var l=new Array(n.rank).fill(0),c=n.shape.slice();c[r]=1;var u=new Array(a);for(s=0;s<u.length;s++)l[r]=s,u[s]=this.slice(n,l,c).reshape(i);return u},t.prototype.avgPool3d=function(n,r){var a=new RS(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,a){var i=new tpe(a);return this.compileAndRun(i,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var a=new RS(r,"max",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,a,i){var o=new RS(i,"max",!0),s=this.compileAndRun(o,[r]),l=new tme(i),c=this.compileAndRun(l,[n,s],r.dtype);return s.dispose(),c},t.prototype.reshape=function(n,r){var a=this.texData.get(n.dataId);if(a.isPacked&&!Eg(n.shape,r)&&(a.texture===null||!Eg(a.shape,r))){var i=this.packedReshape(n,r);return Y.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return $C(n,r)},t.prototype.resizeBilinear=function(n,r,a,i){var o=se().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new dme(n.shape,r,a,i):new ume(n.shape,r,a,i);return this.compileAndRun(o,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,a){var i=new cme(n,r,a);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,r,a,i){var o=new hme(n.shape,r,a,i);return this.compileAndRun(o,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){var i=new fme(n,r,a);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,r,a,i){var o=r?n:ps(n),s=o.shape[0],l=o.shape[1],c=new nme(s,l,a),u=c.getCustomSetupFunc(i);return this.compileAndRun(c,[o],"int32",u)},t.prototype.oneHot=function(n,r,a,i){var o=new rme(n.size,r,a,i);return this.compileAndRun(o,[n])},t.prototype.diag=function(n){var r=new _pe(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,a,i,o){return w0("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),DT(n.dataSync(),r.dataSync(),a,i,o)},t.prototype.cropAndResize=function(n,r,a,i,o,s){var l=new ype(n.shape,r.shape,i,o,s);return this.compileAndRun(l,[n,r,a],"float32")},t.prototype.depthToSpace=function(n,r,a){U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=n.shape[0],o=a==="NHWC"?n.shape[1]:n.shape[2],s=a==="NHWC"?n.shape[2]:n.shape[3],l=a==="NHWC"?n.shape[3]:n.shape[1],c=o*r,u=s*r,d=l/(r*r),f=new Spe(a==="NHWC"?[i,c,u,d]:[i,d,c,u],r,a);return this.compileAndRun(f,[n])},t.prototype.split=function(n,r,a){return q6(n,r,a)},t.prototype.scatterND=function(n,r,a){var i=N0(0,n,a),o=i.sliceRank,s=i.numUpdates,l=i.sliceSize,c=i.strides,u=i.outputSize,d=[u/l,l],f=n.reshape([s,o]),p=r.reshape([s,l]);if(u===0)return $C(nr([]),a);var v=Se(0),m=new gD(s,o,f.rank,p.rank,c,d);return this.compileAndRun(m,[p,f,v]).reshape(a)},t.prototype.sparseToDense=function(n,r,a,i){var o=N0(0,n,a),s=o.sliceRank,l=o.numUpdates,c=o.strides,u=o.outputSize,d=new gD(l,s,n.rank,r.rank,c,[u,1]);return this.compileAndRun(d,[r,n,i]).reshape(a)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var a=this.texData.get(n.dataId),i=new mD(Tpe,n.shape,r),o=new mD(Ape,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag)],l=this.compileAndRun(i,s),c=this.compileAndRun(o,s),u=this.complex(l,c).as2D(n.shape[0],n.shape[1]);return l.dispose(),c.dispose(),u},t.prototype.gatherND=function(n,r){var a=r.shape,i=a[a.length-1],o=$6(n,r),s=o[0],l=o[1],c=o[2],u=o[3],d=r.reshape([l,i]),f=n.reshape([n.size/c,c]),p=new Ope(i,u,[l,c]);return this.compileAndRun(p,[f,d]).reshape(s)},t.prototype.fill=function(n,r,a){if((a=a||vv(r))==="string"){var i=g0(a,$e(n));return i.fill(r),Y.makeTensor(i,n,a,this)}var o=new Ppe(n,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,a){return H6(n,r,a)},t.prototype.makeTensorInfo=function(n,r){var a=this.write(null,n,r);return this.texData.get(a).usage=null,{dataId:a,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var a=this.makeTensorInfo(n,r).dataId;return Y.makeTensorFromDataId(a,n,r,this)},t.prototype.unpackTensor=function(n){var r=new Mme(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new ame(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var a=[x0(n.shape)].concat(b0(n.shape)),i={dtype:n.dtype,shape:a,dataId:n.dataId},o=[x0(r)].concat(b0(r)),s=new lme(o,a),l=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:l.dataId,shape:r,dtype:l.dtype}},t.prototype.decode=function(n){var r,a=this.texData.get(n),i=a.isPacked,o=a.shape,s=a.dtype,l=NS(o);return r=i?new wpe(l):new bpe(l),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:l,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,a,i,o){var s=this;o===void 0&&(o=!1);var l=this.makeTensorInfo(n.outputShape,a),c=this.texData.get(l.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===nm.DENSE){var u=cp(n.outputShape);c.texShape=u.map(function(b){return 2*b})}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),$e(l.shape)===0)return c.values=em(l.dtype,0),l;var d=[],f=r.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=s.texData.get(b.dataId);if(w.texture==null){if(!n.packedInputs&&$e(b.shape)<=se().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};n.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}else if(!!w.isPacked!=!!n.packedInputs)b=w.isPacked?s.unpackTensor(b):s.packTensor(b),d.push(b),w=s.texData.get(b.dataId);else if(w.isPacked&&!Eg(w.shape,b.shape)){var S=b,C=b.shape;b.shape=w.shape,b=s.packedReshape(b,C),d.push(b),w=s.texData.get(b.dataId),S.shape=C}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(l.dataId);var p,v={shape:l.shape,texData:c,isUniform:!1},m=function(b,w,S){var C="";w.concat(S).forEach(function(N){var T=N.texData!=null&&N.texData.slice!=null&&N.texData.slice.flatOffset>0,A=N.isUniform?"uniform":N.texData.texShape;C+=N.shape+"_"+A+"_"+T});var E=b.userCode,k=b.constructor.name;return k+="_"+C+"_"+E}(n,f,v),g=this.getAndSaveBinary(m,function(){return function(b,w,S,C){var E=w.userCode,k=S.map(function(j,O){var B={logicalShape:j.shape,texShape:j.isUniform?null:j.texData.texShape,isUniform:j.isUniform,isPacked:!j.isUniform&&j.texData.isPacked,flatOffset:null};return j.texData!=null&&j.texData.slice!=null&&j.texData.slice.flatOffset>0&&(B.flatOffset=j.texData.slice.flatOffset),{name:w.variableNames[O],shapeInfo:B}}),N=k.map(function(j){return j.shapeInfo}),T={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},A=Khe(k,T,E,w.packedInputs),P=b.createProgram(A),I=null,R=b.getUniformLocation(P,"NAN",!1);se().getNumber("WEBGL_VERSION")===1&&(I=b.getUniformLocation(P,"INFINITY",!1));for(var D={},M=0;M<w.variableNames.length;M++){var $=w.variableNames[M];D[$]=b.getUniformLocation(P,$,!1),D["offset"+$]=b.getUniformLocation(P,"offset"+$,!1)}return{program:w,source:A,webGLProgram:P,uniformLocations:D,inShapeInfos:N,outShapeInfo:T,infLoc:I,nanLoc:R}}(s.gpgpu,n,f,v)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(b,w,S,C,E){vD(w.inShapeInfos,S),vD([w.outShapeInfo],[C]);var k=C.texData.texture,N=C.texData.texShape;C.texData.isPacked?b.setOutputPackedMatrixTexture(k,N[0],N[1]):b.setOutputMatrixTexture(k,N[0],N[1]),b.setProgram(w.webGLProgram),se().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&b.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&b.gl.uniform1f(w.nanLoc,NaN),S.forEach(function(T,A){var P=w.program.variableNames[A],I=w.uniformLocations[P],R=w.uniformLocations["offset"+P];if(I!=null)if(T.isUniform)if($e(T.shape)<2)b.gl.uniform1f(I,T.uniformValues[0]);else{var D=T.uniformValues;D instanceof Float32Array||(D=new Float32Array(D)),b.gl.uniform1fv(I,D)}else T.texData.slice!=null&&R!=null&&b.gl.uniform1i(R,T.texData.slice.flatOffset),b.setInputMatrixTexture(T.texData.texture,I,A)}),E!=null&&E(b,w.webGLProgram),b.executeProgram()}(this.gpgpu,g,f,v,i),d.forEach(function(b){return s.disposeData(b.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(p)})),!se().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&o===!1){var x=this.unpackTensor(l);return this.disposeData(l.dataId),x}return l},t.prototype.compileAndRun=function(n,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var s=this.runWebGLProgram(n,r,a,i,o);return Y.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(se().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ke(function(){if(!se().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=se().getBool("DEBUG");se().set("DEBUG",!1);var a=n.abs(Se(1e-8)).dataSync()[0];if(se().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.values,l=a.texture,c=a.usage,u=a.isPacked;if(l==null){var d,f=this.activeTimers!=null;f&&(d=zi());var p=a.texShape;if(p==null&&(p=Vfe(i,u),a.texShape=p),s!=null){var v=NS(i),m=void 0,g=p[1],y=p[0],x=s instanceof Uint8Array;u?(g=(r=yv(p[0],p[1]))[0],y=r[1],m=new Npe(v,[y,g],x)):m=new kpe(v,[y,g],x);var b=this.makeTensorInfo([y,g],o);this.texData.get(b.dataId).usage=x?fa.PIXELS:fa.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),g,y,s);var w=this.runWebGLProgram(m,[b],o,null,!0),S=this.texData.get(w.dataId);a.texture=S.texture,a.texShape=S.texShape,a.isPacked=S.isPacked,a.usage=S.usage,this.disposeData(b.dataId),this.texData.delete(w.dataId),a.values=null,f&&(this.uploadWaitMs+=zi()-d)}else{var C=this.acquireTexture(p,c,o,u);a.texture=C}}},t.prototype.convertAndCacheOnCPU=function(n,r){var a=this.texData.get(n),i=a.dtype;return this.releaseGPUData(n),r!=null&&(a.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var l=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),c=0;c<l.length;++c)l[c]=Math.round(o[c]);return l}throw new Error("Unknown dtype "+s)}(r,i)),a.values},t.prototype.acquireTexture=function(n,r,a,i){if(this.numBytesInGPU+=this.computeBytes(n,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*x6(r)},t}(z6);k6()&&Y.registerBackend("webgl",function(){return new Fme},2);var Lme=H({square_:function(e){var t=F(e,"x","square"),n=[t];return Y.runKernelFunc(function(r,a){return a([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),am="SquaredDifference",sV=H({squaredDifference_:function(e,t){var n,r=F(e,"a","squaredDifference"),a=F(t,"b","squaredDifference");n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return Y.runKernelFunc(function(s,l){var c=s.squaredDifference(r,a);return l([r,a]),c},i,function(s,l){var c=l[0],u=l[1],d=Se(2);return{a:function(){return s.mul(c.sub(u).mul(d))},b:function(){return s.mul(u.sub(c).mul(d))}}},am,{},o,[])}}),Bme=H({abs_:function(e){var t=F(e,"x","abs");return t.dtype==="complex64"?Y.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):Y.runKernelFunc(function(n,r){var a=n.abs(t);return r([t]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return n.mul(a.toFloat().step(-1))}}},"Abs")}}),Ume=H({acos_:function(e){var t=F(e,"x","acos");return Y.runKernelFunc(function(n,r){var a=n.acos(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(Se(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),zme=H({acosh_:function(e){var t=F(e,"x","acosh");return Y.runKernelFunc(function(n,r){var a=n.acosh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),Wme=H({asin_:function(e){var t=F(e,"x","asin");return Y.runKernelFunc(function(n,r){var a=n.asin(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(Se(1).sub(a.toFloat().square()).sqrt())}}})}}),Vme=H({asinh_:function(e){var t=F(e,"x","asinh");return Y.runKernelFunc(function(n,r){var a=n.asinh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(Se(1).add(a.toFloat().square()).sqrt())}}})}}),Hme=H({atan_:function(e){var t=F(e,"x","atan");return Y.runKernelFunc(function(n,r){var a=n.atan(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().square().add(1))}}})}}),Gme=H({atanh_:function(e){var t=F(e,"x","atanh");return Y.runKernelFunc(function(n,r){var a=n.atanh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(Se(1).sub(a.toFloat().square()))}}})}}),qme=H({ceil_:function(e){var t=F(e,"x","ceil");return Y.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),UT=H({clipByValue_:function(e,t,n){var r=F(e,"x","clipByValue");U(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var a=[r],i={min:t,max:n};return Y.runKernelFunc(function(o,s){var l=o.clip(r,t,n);return s([r]),l},{x:r},function(o,s){var l=s[0];return{x:function(){return o.where(l.greaterEqual(t).logicalAnd(l.lessEqual(n)),gt(o))}}},"ClipByValue",i,a)}}),Kme=H({cos_:function(e){var t=F(e,"x","cos"),n=[t];return Y.runKernelFunc(function(r,a){var i=r.cos(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),Xme=H({cosh_:function(e){var t=F(e,"x","cosh");return Y.runKernelFunc(function(n,r){var a=n.cosh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(n)}}})}}),Yme=H({erf_:function(e){var t=F(e,"x","erf");return U(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),Y.runKernelFunc(function(n,r){var a=n.erf(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),LC=H({exp_:function(e){var t=F(e,"x","exp");return Y.runKernelFunc(function(n,r){var a=n.exp(t);return r([a]),a},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),Qme=H({expm1_:function(e){var t=F(e,"x","expm1");return Y.runKernelFunc(function(n,r){var a=n.expm1(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.exp())}}})}}),Jme=H({floor_:function(e){var t=F(e,"x","floor");return Y.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),Zme=H({log_:function(e){var t=F(e,"x","log"),n=[t];return Y.runKernelFunc(function(r,a){var i=r.log(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},n)}}),eve=H({log1p_:function(e){var t=F(e,"x","log1p");return Y.runKernelFunc(function(n,r){var a=n.log1p(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.add(1))}}})}}),tve=H({logSigmoid_:function(e){var t=F(e,"x","logSigmoid");return Y.runKernelFunc(function(n,r){var a=n.softplus(t.neg()).neg();return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.neg().sigmoid())}}})}}),j0=H({neg_:function(e){var t=F(e,"x","neg"),n=[t];return Y.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),nve=H({reciprocal_:function(e){var t=F(e,"x","reciprocal");return Y.runKernelFunc(function(n,r){var a=n.reciprocal(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.square().neg())}}})}}),rve=H({round_:function(e){var t=F(e,"x","round");return Y.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),lV=H({rsqrt_:function(e){var t=F(e,"x","rsqrt"),n=[t];return Y.runKernelFunc(function(r,a){var i=r.rsqrt(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),cV=H({sigmoid_:function(e){var t=F(e,"x","sigmoid");return Y.runKernelFunc(function(n,r){var a=n.sigmoid(t);return r([a]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return n.mul(a.mul(Se(1).sub(a)))}}},"Sigmoid")}}),ave=H({sign_:function(e){var t=F(e,"x","sign");return Y.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),ive=H({isNaN_:function(e){var t=F(e,"x","isNaN");return Y.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),ove=H({isInf_:function(e){var t=F(e,"x","isInf");return Y.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),sve=H({isFinite_:function(e){var t=F(e,"x","isFinite");return Y.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return gt(n)}}})}}),lve=H({sin_:function(e){var t=F(e,"x","sin"),n=[t];return Y.runKernelFunc(function(r,a){var i=r.sin(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},n)}}),cve=H({sinh_:function(e){var t=F(e,"x","sinh");return Y.runKernelFunc(function(n,r){var a=n.sinh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(n)}}})}}),uve=H({softplus_:function(e){var t=F(e,"x","softplus");return Y.runKernelFunc(function(n,r){var a=n.softplus(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.sigmoid())}}})}}),dve=H({sqrt_:function(e){var t=F(e,"x","sqrt");return Y.runKernelFunc(function(n,r){var a=n.sqrt(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().sqrt().mul(2))}}})}}),fve=H({step_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","step");return Y.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return gt(r)}}})}}),hve=H({tan_:function(e){var t=F(e,"x","tan");return Y.runKernelFunc(function(n,r){var a=n.tan(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.cos().square())}}})}}),pve=H({tanh_:function(e){var t=F(e,"x","tanh");return Y.runKernelFunc(function(n,r){var a=n.tanh(t);return r([a]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return Se(1).sub(a.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function uV(e,t,n,r,a,i){var o,s,l=F(e,"x","batchNorm"),c=F(t,"mean","batchNorm"),u=F(n,"variance","batchNorm");return a!=null&&(o=F(a,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),U(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),U(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),U(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),o!=null&&U(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&U(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),bv(l,c,u,s,o,i)}function dV(e,t,n,r,a,i){var o,s,l=F(e,"x","batchNorm"),c=F(t,"mean","batchNorm"),u=F(n,"variance","batchNorm");return a!=null&&(o=F(a,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),U(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),U(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),U(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),o!=null&&U(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&U(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),bv(l,c,u,s,o,i)}function fV(e,t,n,r,a,i){var o,s,l=F(e,"x","batchNorm"),c=F(t,"mean","batchNorm"),u=F(n,"variance","batchNorm");return a!=null&&(o=F(a,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),U(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),U(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),U(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),o!=null&&U(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&U(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),bv(l,c,u,s,o,i)}function bv(e,t,n,r,a,i){i==null&&(i=.001);var o,s,l,c=F(e,"x","batchNorm"),u=F(t,"mean","batchNorm"),d=F(n,"variance","batchNorm");a!=null&&(o=F(a,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),U(u.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),U(s==null||u.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),U(o==null||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=c.rank===0||c.rank===1?c.as4D(1,1,1,c.size):c.rank===2?c.as4D(1,1,c.shape[0],c.shape[1]):c.rank===3?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var f=[c,u,d,o];return Y.runKernelFunc(function(p,v){var m=p.batchNormalization(l,Pg(u),Pg(d),i,Pg(o),Pg(s));return v([c,u,d,o]),m},{x:c,mean:u,variance:d,scale:o,offset:s},function(p,v){var m=v,g=m[0],y=m[1],x=m[2],b=m[3],w=b??Se(1),S=In(y.shape,l.shape),C=[];if(y.rank===1){for(var E=0;E<l.shape.length-1;++E)C.push(l.shape[E]);C.push(1)}var k=g.sub(y),N=p.mul(w),T=lV(x.add(Se(i))),A=T.mul(T).mul(T).mul(Se(-.5));return{x:function(){return y.rank===1?p.mul(kd(T.as4D(1,1,1,y.shape[0]),C)).mul(w).reshape(g.shape):p.mul(T).mul(w).reshape(g.shape)},mean:function(){var P=T.mul(Se(-1)).mul(N);return y.rank===1&&(P=P.sum(S)),P.reshape(y.shape)},variance:function(){var P=A.mul(k).mul(N);return y.rank===1&&(P=P.sum(S)),P.reshape(y.shape)},scale:function(){var P=k.mul(T),I=p.mul(P);return y.rank===1&&(I=I.sum(S)),I.reshape(y.shape)},offset:function(){var P=p;return y.rank===1&&(P=P.sum(S)),P.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},f).reshape(c.shape)}function Pg(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Gb(){N6("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var mve=H({batchNormalization2d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),Gb(),uV(e,t,n,i,a,r)}}),vve=H({batchNormalization3d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),Gb(),dV(e,t,n,i,a,r)}}),gve=H({batchNormalization4d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),Gb(),fV(e,t,n,i,a,r)}}),yve=H({batchNormalization_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),Gb(),bv(e,t,n,i,a,r)}}),hV=H({batchNorm_:bv}),xve=H({batchNorm2d_:uV}),bve=H({batchNorm3d_:dV}),wve=H({batchNorm4d_:fV}),qb=H({logicalAnd_:function(e,t){var n=F(e,"a","logicalAnd","bool"),r=F(t,"b","logicalAnd","bool");return dt(n.shape,r.shape),Y.runKernelFunc(function(a){return a.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),Sve=H({logicalNot_:function(e){var t=F(e,"x","logicalNot","bool");return Y.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),pV=H({logicalOr_:function(e,t){var n=F(e,"a","logicalOr","bool"),r=F(t,"b","logicalOr","bool");return dt(n.shape,r.shape),Y.runKernelFunc(function(a){return a.logicalOr(n,r)},{$a:n,$b:r})}}),_ve=H({logicalXor_:function(e,t){var n=F(e,"a","logicalXor","bool"),r=F(t,"b","logicalXor","bool");return dt(n.shape,r.shape),pV(e,t).logicalAnd(qb(e,t).logicalNot())}}),qc=H({where_:function(e,t,n){var r=F(t,"a","where"),a=F(n,"b","where"),i=F(e,"condition","where","bool");return At(r.shape,a.shape,"Error in where: "),i.rank===1?U(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):At(i.shape,a.shape,"Error in where: "),Y.runKernelFunc(function(o,s){var l=o.select(i,r,a);return s([i]),l},{$condition:i,$a:r,$b:a},function(o,s){var l=s[0];return{$condition:function(){return gt(l).toFloat()},$a:function(){return o.mul(l.cast(o.dtype))},$b:function(){return o.mul(l.logicalNot().cast(o.dtype))}}})}}),mV=function(e){return je(this,void 0,void 0,function(){var t,n,r;return Oe(this,function(a){switch(a.label){case 0:return[4,(t=F(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=$T(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},ct=H({add_:function(e,t){var n,r=F(e,"a","add"),a=F(t,"b","add");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o){return o.add(r,a)},{a:r,b:a},function(o){return{a:function(){var s=o,l=In(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=o,l=In(a.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(a.shape)}}},"Add")}}),Cve=H({addN_:function(e){U(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),U(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(a,i){return F(a,"tensors"+i,"addN")}),n=t[0];t.forEach(function(a){if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(a){if(!Vn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return Y.runKernelFunc(function(a){return a.addN(t)},r,function(a){var i={};return t.forEach(function(o,s){i[s]=function(){return a.clone()}}),i},"AddN")}}),Eve=H({addStrict_:function(e,t){var n=F(e,"a","addStrict"),r=F(t,"b","addStrict");return At(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),kve=H({atan2_:function(e,t){var n,r=F(e,"a","atan2"),a=F(t,"b","atan2");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o,s){var l=o.atan2(r,a);return s([r,a]),l},{$a:r,$b:a},function(o,s){var l=s[0],c=s[1];return{$a:function(){var u=ct(l.square(),c.square()),d=o.mul(c.div(u)),f=In(l.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)},$b:function(){var u=ct(l.square(),c.square()),d=j0(o.mul(l.div(u))),f=In(c.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(c.shape)}}})}}),mi=H({div_:function(e,t){var n,r=F(e,"a","div"),a=F(t,"b","div");if(n=un(r,a),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return vV(r,a);var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o,s){var l=o.realDivide(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],c=s[1];return{a:function(){var u=o.div(c.toFloat()),d=In(l.shape,i);return d.length>0?u.sum(d).reshape(l.shape):u},b:function(){var u=o.mul(l.toFloat()),d=In(c.shape,i);d.length>0&&(u=u.sum(d).reshape(c.shape));var f=c.square();return u.div(f.toFloat()).neg()}}},"Div")}}),Nve=H({divNoNan_:function(e,t){var n,r=F(e,"a","div"),a=F(t,"b","div");r=(n=un(r,a))[0],a=n[1];var i=mi(r,a),o=gt(i),s=a.equal(o);return qc(s,o,i)}}),Tve=H({divStrict_:function(e,t){var n=F(e,"a","div"),r=F(t,"b","div");return At(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),vV=H({floorDiv_:function(e,t){var n,r=F(e,"a","floorDiv"),a=F(t,"b","floorDiv");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o,s){var l=o.floorDiv(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],c=s[1];return{a:function(){var u=o.div(c.toFloat()),d=In(l.shape,i);return d.length>0?u.sum(d).reshape(l.shape):u},b:function(){var u=o.mul(l.toFloat()),d=In(c.shape,i);d.length>0&&(u=u.sum(d).reshape(c.shape));var f=c.square();return u.div(f.toFloat()).neg()}}},"FloorDiv")}}),zT=H({maximum_:function(e,t){var n,r=F(e,"a","maximum"),a=F(t,"b","maximum");return n=un(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),dt(r.shape,a.shape),Y.runKernelFunc(function(i,o){var s=i.maximum(r,a);return o([r,a]),s},{a:r,b:a},function(i,o){var s=o[0],l=o[1];return{a:function(){return i.mul(s.greaterEqual(l).toFloat())},b:function(){return i.mul(s.less(l).toFloat())}}},"Maximum")}}),Ave=H({maximumStrict_:function(e,t){var n=F(e,"a","maximumStrict"),r=F(t,"b","maximumStrict");return At(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),gV=H({minimum_:function(e,t){var n,r=F(e,"a","minimum"),a=F(t,"b","minimum");return n=un(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),dt(r.shape,a.shape),Y.runKernelFunc(function(i,o){var s=i.minimum(r,a);return o([r,a]),s},{a:r,b:a},function(i,o){var s=o[0],l=o[1];return{a:function(){return i.mul(s.lessEqual(l).toFloat())},b:function(){return i.mul(s.greater(l).toFloat())}}},"Minimum")}}),Pve=H({minimumStrict_:function(e,t){var n=F(e,"a","minimumStrict"),r=F(t,"b","minimumStrict");return At(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),jve=H({mod_:function(e,t){var n,r=F(e,"a","mod"),a=F(t,"b","mod");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o,s){var l=o.mod(r,a);return s([r,a]),l},{$a:r,$b:a},function(o,s){var l=s[0],c=s[1];return{$a:function(){var u=In(l.shape,i);return u.length>0?o.sum(u).reshape(l.shape):o},$b:function(){var u=o.mul(l.div(c).floor().neg()),d=In(c.shape,i);return d.length>0?u.sum(d).reshape(c.shape):u}}})}}),Ove=H({modStrict_:function(e,t){var n=F(e,"a","modStrict"),r=F(t,"b","modStrict");return At(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),_r=H({mul_:function(e,t){var n,r=F(e,"a","mul"),a=F(t,"b","mul");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o,s){var l=o.multiply(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],c=s[1];return{a:function(){var u=o.mul(c.toFloat()),d=In(l.shape,i);return d.length>0?u.sum(d).reshape(l.shape):u},b:function(){var u=o.mul(l.toFloat()),d=In(c.shape,i);return d.length>0?u.sum(d).reshape(c.shape):u}}},"Mul")}}),Rve=H({mulStrict_:function(e,t){var n=F(e,"a","mul"),r=F(t,"b","mul");return At(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),O0=H({pow_:function(e,t){var n,r=F(e,"base","pow"),a=F(t,"exp","pow");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape),o=[r,a];return Y.runKernelFunc(function(s,l){var c=s.pow(r,a);return l([r,a,c]),c},{a:r,b:a},function(s,l){var c=l[0],u=l[1],d=l[2];return{a:function(){var f=u.toFloat(),p=s.mul(f.mul(c.pow(f.sub(Se(1))))),v=In(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)},b:function(){var f=c.greater(0),p=c.log().where(f,gt(c)),v=s.mul(d.mul(p)),m=In(u.shape,i);return m.length>0&&(v=v.sum(m)),v.reshape(u.shape)}}},"Pow",{},o,[!0])}}),Ive=H({powStrict_:function(e,t){return At(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Dve=H({squaredDifferenceStrict_:function(e,t){var n=F(e,"a","squaredDifferenceStrict"),r=F(t,"b","squaredDifferenceStrict");return At(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Dn=H({sub_:function(e,t){var n,r=F(e,"a","sub"),a=F(t,"b","sub");n=un(r,a),r=n[0],a=n[1];var i=dt(r.shape,a.shape);return Y.runKernelFunc(function(o){return o.subtract(r,a)},{a:r,b:a},function(o){return{a:function(){var s=o,l=In(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=o,l=In(a.shape,i);return l.length>0&&(s=s.sum(l)),s.neg().reshape(a.shape)}}},"Sub")}}),Mve=H({subStrict_:function(e,t){var n=F(e,"a","subStrict"),r=F(t,"b","subStrict");return At(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),yV=H({equal_:function(e,t){var n,r=F(e,"a","equal"),a=F(t,"b","equal");return n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape),Y.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),$ve=H({equalStrict_:function(e,t){var n=F(e,"a","equalStrict"),r=F(t,"b","equalStrict");return At(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Fve=H({greater_:function(e,t){var n,r=F(e,"a","greater"),a=F(t,"b","greater");return n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape),Y.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),xV=H({greaterEqual_:function(e,t){var n,r=F(e,"a","greaterEqual"),a=F(t,"b","greaterEqual");return n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape),Y.runKernelFunc(function(i,o){var s=i.greaterEqual(r,a);return o([r,a]),s},{a:r,b:a},function(i,o){var s=o[0],l=o[1];return{a:function(){return gt(s)},b:function(){return gt(l)}}},"GreaterEqual")}}),Lve=H({greaterEqualStrict_:function(e,t){var n=F(e,"a","greaterEqualStrict"),r=F(t,"b","greaterEqualStrict");return At(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Bve=H({greaterStrict_:function(e,t){var n=F(e,"a","greaterStrict"),r=F(t,"b","greaterStrict");return At(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Uve=H({less_:function(e,t){var n,r=F(e,"a","less"),a=F(t,"b","less");return n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape),Y.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),zve=H({lessEqual_:function(e,t){var n,r=F(e,"a","lessEqual"),a=F(t,"b","lessEqual");return n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape),Y.runKernelFunc(function(i,o){var s=i.lessEqual(r,a);return o([r,a]),s},{a:r,b:a},null,"LessEqual")}}),Wve=H({lessEqualStrict_:function(e,t){var n=F(e,"a","lessEqualStrict"),r=F(t,"b","lessEqualStrict");return At(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Vve=H({lessStrict_:function(e,t){var n=F(e,"a","lessStrict"),r=F(t,"b","lessStrict");return At(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Hve=H({notEqual_:function(e,t){var n,r=F(e,"a","notEqual"),a=F(t,"b","notEqual");return n=un(r,a),r=n[0],a=n[1],dt(r.shape,a.shape),Y.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),Gve=H({notEqualStrict_:function(e,t){var n=F(e,"a","notEqualStrict"),r=F(t,"b","notEqualStrict");return At(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function kD(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function ND(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var WT=H({gather_:function(e,t,n){n===void 0&&(n=0);var r=F(e,"x","gather"),a=F(t,"indices","gather","int32");n=Mn(n,r.shape)[0];var i=function(o,s,l){for(var c=o.shape[l],u=[],d=1,f=1,p=0;p<l;p++)u.push(o.shape[p]),d*=o.shape[p];for(p=0;p<s.rank;p++)u.push(s.shape[p]);for(p=l+1;p<o.rank;p++)u.push(o.shape[p]),f*=o.shape[p];return{batchSize:d,sliceSize:f,dimSize:c,outputShape:u}}(r,a,n);return Y.runKernelFunc(function(o,s){var l=o.gather(r,a.flatten(),n);return s([a]),l},{x:r,indices:a},function(o,s){var l=s[0];return{x:function(){var c=r.shape,u=l.size,d=c.slice(0,n),f=d.length,p=c.slice(n,c.length).slice(1),v=p.length,m=kD(0,f),g=kD(f+1,f+1+v),y=ND([d,[u],p]),x=o.reshape(y),b=l.reshape([u]),w=ND([[f],m,g]),S=x.transpose(w),C=bV(S,b,r.shape[n]),E=AT(w);return C=C.transpose(E)},indices:function(){return l}}},"Gather",{axis:n}).reshape(i.outputShape)}}),bV=H({unsortedSegmentSum_:function(e,t,n){var r=F(e,"x","unsortedSegmentSum"),a=F(t,"segmentIds","unsortedSegmentSum","int32");return U(gn(n),function(){return"numSegments must be of dtype int"}),Y.runKernelFunc(function(i,o){var s=i.unsortedSegmentSum(r,a,n);return o([a]),s},{$x:r},function(i,o){var s=o[0];return{$x:function(){return function(l,c){for(var u=zT(c,gt(c)),d=WT(l,u),f=xV(c,Se(0,"int32")),p=d.rank-f.rank,v=0;v<p;++v)f=Pa(f,v+1);f=qb(f,Kf(d.shape,"bool"));var m=gt(d);return qc(f,d,m)}(i,s)}}})}}),qve=function(e,t,n){return je(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,d,f,p,v,m;return Oe(this,function(g){switch(g.label){case 0:for(r=F(e,"tensor","boolMask"),a=F(t,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape,U(o>0,function(){return"mask cannot be scalar"}),At(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=i;c<i+o;c++)l*=s[c];return u=s.slice(0,i).concat([l],s.slice(i+o)),d=r.reshape(u),f=a.reshape([-1]),[4,mV(f)];case 1:return p=g.sent(),v=p.squeeze([1]),m=WT(d,v,i),e!==r&&r.dispose(),t!==a&&a.dispose(),v.dispose(),d.dispose(),f.dispose(),p.dispose(),[2,m]}})})};function wV(e,t,n,r,a,i,o){i===void 0&&(i="NHWC"),U(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,l=t,c=!1;t.rank===3&&(c=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),U(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),U(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),U(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var u=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];U(u===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[2]+"."}),U(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),o!=null&&U(gn(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var f=IT(i),p=cu(s,n.shape,r,1,a,o,!1,f),v=Y.runKernelFunc(function(m,g){var y=m.conv2dDerInput(l,n,p);return g([n,l]),y},{dy4D:l,filter:n},function(m,g){var y=g[0],x=g[1];return{dy4D:function(){return Ga(m,y,r,a,i,1,o)},filter:function(){return VT(m,x,y.shape,r,a,i,o)}}});return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function DS(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function SV(e,t,n,r,a){U(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,s=!1;t.rank===4&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var l=i[4],c=o.shape[4];U(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),U(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),U(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),U(l===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."}),U(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var u=A0(i,n.shape,r,1,a),d=Y.runKernelFunc(function(f){return f.conv3dDerInput(o,n,u)},{dy5D:o});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var Kve=H({conv1d_:function(e,t,n,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var s=F(e,"x","conv1d"),l=F(t,"filter","conv1d"),c=s,u=!1;s.rank===2&&(u=!0,c=s.as3D(1,s.shape[0],s.shape[1])),U(c.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),U(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),o!=null&&U(gn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),U(c.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),U(Qr(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),U(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),f=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),p=Ga(f,d,[1,n],r,"NHWC",[1,i],o);return u?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Ga=H({conv2d_:function(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=F(e,"x","conv2d"),l=F(t,"filter","conv2d"),c=s,u=!1;s.rank===3&&(u=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(c.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),U(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),o!=null&&U(gn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var d=a==="NHWC"?c.shape[3]:c.shape[1];U(d===l.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+l.shape[2]+"."}),U(Qr(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var f=IT(a),p=cu(c.shape,l.shape,n,i,r,o,!1,f),v=[l,c],m=Y.runKernelFunc(function(g,y){var x=g.conv2d(c,l,p);return y([l,c]),x},{x:c,filter:l},function(g,y){var x=y,b=x[0],w=x[1];return U(sf(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return _V(w.shape,g,b,n,r,a)},filter:function(){return VT(w,g,b.shape,n,r,a)}}},"Conv2D",p,v);return u?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Xve=H({conv3d_:function(e,t,n,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=F(e,"x","conv3d"),s=F(t,"filter","conv3d"),l=o,c=!1;o.rank===4&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),U(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),U(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),U(l.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),U(function(f,p){return DS(f)||DS(p)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),U(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var u=A0(l.shape,s.shape,n,i,r),d=Y.runKernelFunc(function(f,p){var v=f.conv3d(l,s,u);return p([l,s]),v},{x:l,$filter:s},function(f,p){U(DS(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var v=p[0],m=p[1];return{x:function(){return SV(v.shape,f,m,n,r)},$filter:function(){return function(g,y,x,b,w){var S=g;g.rank===4&&(S=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var C=y;C.rank===4&&(C=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),U(S.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+S.shape+"."}),U(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),U(x.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."}),U(S.shape[4]===x[3],function(){return"Error in conv3dDerFilter: depth of input "+S.shape[4]+") must match input depth in filter ("+x[3]+"."}),U(C.shape[4]===x[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+x[4]+")."});var E=A0(S.shape,x,b,1,w);return Y.runKernelFunc(function(k){return k.conv3dDerFilter(S,C,E)},{x5D:S,dy5D:C})}(v,f,m.shape,n,r)}}});return c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),VT=H({conv2dDerFilter_:function(e,t,n,r,a,i,o){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;l.rank===3&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),U(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),U(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),U(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c=i==="NHWC"?s.shape[3]:s.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];U(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),U(u===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+n[3]+")."}),o!=null&&U(gn(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var d=IT(i),f=cu(s.shape,n,r,1,a,o,!1,d);return Y.runKernelFunc(function(p){return p.conv2dDerFilter(s,l,f)},{x4D:s,dy4D:l})}}),_V=H({conv2dDerInput_:wV}),Kb=H({depthwiseConv2d_:function(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=F(e,"x","depthwiseConv2d"),l=F(t,"filter","depthwiseConv2d"),c=s,u=!1;s.rank===3&&(u=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(c.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),U(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),U(c.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),i==null&&(i=[1,1]),U(Qr(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),o!=null&&U(gn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var d=cu(c.shape,l.shape,n,i,r,o,!0),f=[c,l],p=Y.runKernelFunc(function(v,m){var g=v.depthwiseConv2D(c,l,d);return m([c,l]),g},{x:c,filter:l},function(v,m){U(sf(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var g=m[0],y=m[1];return{x:function(){return CV(g.shape,v,y,d)},filter:function(){return EV(g,v,y.shape,d)}}},"DepthwiseConv2dNative",d,f);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),CV=H({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,i=!1;t.rank===3&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=Y.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(a,n,r)},{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),EV=H({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;e.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Y.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),HT=H({separableConv2d_:function(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var s=F(e,"x","separableConv2d"),l=F(t,"depthwiseFilter","separableConv2d"),c=F(n,"pointwiseFilter","separableConv2d"),u=s,d=!1;if(s.rank===3&&(d=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(u.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),U(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),U(c.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),U(c.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),U(c.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var f=l.shape[2],p=l.shape[3];U(c.shape[2]===f*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*p+", but got "+c.shape[2]+"."});var v=Kb(u,l,r,a,o,i),m=Ga(v,c,1,"valid",o);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Yve=H({conv2dTranspose_:function(e,t,n,r,a,i){return wV(n,F(e,"x","conv2dTranspose"),F(t,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),Qve=H({conv3dTranspose_:function(e,t,n,r,a){return SV(n,F(e,"x","conv3dTranspose"),F(t,"filter","conv3dTranspose"),r,a)}}),Xb=H({matMul_:function(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=F(e,"a","matMul"),o=F(t,"b","matMul");a=un(i,o),i=a[0],o=a[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],l=r?o.shape[o.rank-1]:o.shape[o.rank-2],c=n?i.shape[i.rank-1]:i.shape[i.rank-2],u=r?o.shape[o.rank-2]:o.shape[o.rank-1],d=i.shape.slice(0,-2),f=o.shape.slice(0,-2),p=$e(d),v=$e(f);U(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),U(Vn(d,f),function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),U(s===l,function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=i.shape.slice(0,-2).concat([c,u]),g=n?i.as3D(p,s,c):i.as3D(p,c,s),y=r?o.as3D(v,u,l):o.as3D(v,l,u),x={transposeA:n,transposeB:r};return Y.runKernelFunc(function(b,w){var S=b.batchMatMul(g,y,n,r);return w([g,y]),S},{a:g,b:y},function(b,w){var S=w,C=S[0],E=S[1];return n||r?!n&&r?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(C,!0,!1)}}:n&&!r?{a:function(){return E.matMul(b,!1,!0)},b:function(){return C.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(C,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return C.matMul(b,!0,!1)}}},"BatchMatMul",x).reshape(m)}}),Jve=H({dot_:function(e,t){var n=F(e,"t1","dot"),r=F(t,"t2","dot");U(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return U(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Zve=H({outerProduct_:function(e,t){var n=F(e,"v1","outerProduct"),r=F(t,"v2","outerProduct");return U(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),wv=H({reverse_:function(e,t){var n=F(e,"x","reverse");if(n.rank===0)return n.clone();var r=Mn(t,n.shape);return Y.runKernelFunc(function(a){return a.reverse(n,r)},{$x:n},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(n)}}),ege=H({reverse1d_:function(e){var t=F(e,"x","reverse");return U(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),wv(t,0)}}),tge=H({reverse2d_:function(e,t){var n=F(e,"x","reverse");return U(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),wv(n,t)}}),nge=H({reverse3d_:function(e,t){var n=F(e,"x","reverse");return U(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),wv(n,t)}}),rge=H({reverse4d_:function(e,t){var n=F(e,"x","reverse");return U(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),wv(n,t)}});function kV(e,t,n,r,a,i){var o=F(e,"x","maxPool"),s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),U(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),U(Qr(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),i!=null&&U(gn(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var c=rm(s.shape,t,n,r,a,i);if(c.filterWidth===1&&c.filterHeight===1&&Vn(c.inShape,c.outShape))return o.clone();var u=[s],d=Y.runKernelFunc(function(f,p){var v=f.maxPool(s,c);return p([s,v]),v},{x:s},function(f,p){var v=p[0],m=p[1];return{x:function(){return function(g,y,x,b,w,S,C,E){var k=F(g,"dy","maxPoolBackprop"),N=F(y,"input","maxPoolBackprop"),T=F(x,"output","maxPoolBackprop");U(N.rank===k.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+k.rank+")"}),U(Qr(w,S),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+S+"'"}),U(k.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."}),U(N.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var A=rm(N.shape,b,w,S,C,E);return Y.runKernelFunc(function(P){return P.maxPoolBackprop(k,N,T,A)},{$dy:k,$input:N})}(f,v,m,t,n,r,a)}}},"MaxPool",c,u);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function NV(e,t,n,r,a,i){var o=F(e,"x","avgPool","float32");U(Qr(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),U(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),i!=null&&U(gn(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var c=rm(s.shape,t,n,r,a,i);if(c.filterWidth===1&&c.filterHeight===1&&Vn(c.inShape,c.outShape))return o.clone();var u=Y.runKernelFunc(function(d){return d.avgPool(s,c)},{x:s},function(d){return{x:function(){return function(f,p,v,m,g,y){var x=F(f,"dy","avgPoolBackprop"),b=F(p,"input","avgPoolBackprop");U(b.rank===x.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+x.rank+")"}),U(Qr(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var w=b,S=x,C=!1;b.rank===3&&(C=!0,w=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),S=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),U(S.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),U(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=rm(w.shape,v,m,g,y),k=Y.runKernelFunc(function(N){return N.avgPoolBackprop(S,w,E)},{dy4D:S,input4D:w});return C?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}(d,s,t,n,r,a)}}},"AvgPool",c);return u=u.cast(o.dtype),l?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Ln=H({maxPool_:function(e,t,n,r,a){return kV(e,t,n,1,r,a)}}),Sv=H({avgPool_:function(e,t,n,r,a){return NV(e,t,n,1,r,a)}}),age=H({pool_:function(e,t,n,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=F(e,"x","maxPool"),s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),U(Qr(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var c,u=rm(s.shape,t,i,a,r),d=[u.dilationHeight,u.dilationWidth];c=r==="same"?function(w,S){var C=w.map(function(N,T){return N+(N-1)*(S[T]-1)}).map(function(N){return N-1}),E=C.map(function(N){return Math.floor(N/2)}),k=C.map(function(N,T){return N-E[T]});return C.map(function(N,T){return[E[T],k[T]]})}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];var f=d[0]===1&&d[1]===1,p=function(w,S,C){var E=C.map(function(R){return R[0]}),k=C.map(function(R){return R[1]}),N=w.concat(E,k),T=S.map(function(R,D){return(R-N[D]%R)%R}),A=k.map(function(R,D){return R+T[D]}),P=S.map(function(R,D){return[E[D],A[D]]}),I=S.map(function(R,D){return[0,T[D]]});return[P,I]}([u.inHeight,u.inWidth],d,c),v=p[0],m=p[1],g=f?r:"valid",y=f?s:R6(s,d,v),x=(n==="avg"?function(){return NV(y,t,i,1,g)}:function(){return kV(y,t,i,1,g)})(),b=f?x:P6(x,d,m);return l?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),ige=H({maxPool3d_:function(e,t,n,r,a,i,o){i===void 0&&(i="NDHWC");var s=F(e,"x","maxPool3d"),l=s,c=!1;s.rank===4&&(c=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),U(l.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),U(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),U(Qr(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),a!=null&&U(gn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var u=T0(l.shape,t,n,o,r,a,i),d=Y.runKernelFunc(function(f,p){var v=f.maxPool3d(l,u);return p([l,v]),v},{x:l},function(f,p){var v=p[0],m=p[1];return{x:function(){return function(g,y,x,b,w,S,C,E){var k=F(g,"dy","maxPool3dBackprop"),N=F(y,"input","maxPool3dBackprop"),T=F(x,"output","maxPool3dBackprop"),A=k,P=N,I=T,R=!1;N.rank===4&&(R=!0,A=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),P=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),I=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),U(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),U(P.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+P.rank+"."}),U(I.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+I.rank+"."}),S==null&&(S=[1,1,1]),U(Qr(w,S),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+S+"'"}),E!=null&&U(gn(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+C+"."});var D=T0(P.shape,b,w,S,C,E),M=Y.runKernelFunc(function($){return $.maxPool3dBackprop(A,P,I,D)},{dy5D:A,input5D:P});return R?M.as4D(M.shape[1],M.shape[2],M.shape[3],M.shape[4]):M}(f,v,m,t,n,o,r,a)}}});return c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),oge=H({avgPool3d_:function(e,t,n,r,a,i,o){i===void 0&&(i="NDHWC");var s=F(e,"x","avgPool3d","float32"),l=s,c=!1;s.rank===4&&(c=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),U(l.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),U(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),U(Qr(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),a!=null&&U(gn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var u=T0(l.shape,t,n,o,r,a,i),d=Y.runKernelFunc(function(f){return f.avgPool3d(l,u)},{x:l},function(f){return{x:function(){return function(p,v,m,g,y,x,b){var w=F(p,"dy","avgPool3dBackprop"),S=F(v,"input","avgPool3dBackprop"),C=w,E=S,k=!1;S.rank===4&&(k=!0,C=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),U(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),U(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),U(Qr(g,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+y+"'"}),b!=null&&U(gn(x),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+x+"."});var N=T0(E.shape,m,g,y,x,b),T=Y.runKernelFunc(function(A){return A.avgPool3dBackprop(C,E,N)},{dy5D:C,input5D:E});return k?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(f,l,t,n,o,r,a)}}});return d=d.cast(l.dtype),c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),po=H({slice_:function(e,t,n){var r,a,i=F(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(l){U(l!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(l,c){return l>=0?l:(U(l===-1,function(){return"Negative size values should be exactly -1 but got "+l+" for the slice() size at index "+c+"."}),i.shape[c]-r[c])}),Ihe(i,r,a);var o=i.shape,s={begin:r,size:a};return Y.runKernelFunc(function(l){return l.slice(i,r,a)},{x:i},function(l){for(var c=[],u=0;u<l.rank;u++)c.push([r[u],o[u]-r[u]-a[u]]);return{x:function(){return l.pad(c)}}},"Slice",s)}}),sge=H({slice1d_:function(e,t,n){var r=F(e,"x","slice1d");return U(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),po(r,[t],[n])}}),lge=H({slice2d_:function(e,t,n){var r=F(e,"x","slice2d");return U(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),po(r,t,n)}}),TV=H({slice3d_:function(e,t,n){var r=F(e,"x","slice3d");return U(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),po(r,t,n)}}),cge=H({slice4d_:function(e,t,n){var r=F(e,"x","slice4d");return U(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),po(r,t,n)}});function AV(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(Yr(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Yr(e.shape,r))),{x:function(){var i=e.mul(n.equal(t).cast(e.dtype));return a==null?i:i.transpose(a)}}}var uge=H({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","all","bool"),a=Mn(t,r.shape),i=a,o=xo(i,r.rank);o!=null&&(r=r.transpose(o),i=bo(i.length,r.rank));var s=Y.runKernelFunc(function(c){return c.all(r,i)},{$x:r});if(n){var l=Yr(s.shape,a);return s.reshape(l)}return s}}),dge=H({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","any","bool"),a=Mn(t,r.shape),i=a,o=xo(i,r.rank);o!=null&&(r=r.transpose(o),i=bo(i.length,r.rank));var s=Y.runKernelFunc(function(c){return c.any(r,i)},{$x:r});if(n){var l=Yr(s.shape,a);return s.reshape(l)}return s}}),fge=H({argMax_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","argMax");t==null&&(t=0);var r=Mn(t,n.shape),a=xo(r,n.rank);a!=null&&(n=n.transpose(a),r=bo(r.length,n.rank));var i={axis:r[0]},o=[n];return Y.runKernelFunc(function(s,l){var c=s.argMax(n,r[0]);return l([n]),c},{x:n},function(s,l){var c=l[0];return{x:function(){return gt(c)}}},"ArgMax",i,o)}}),hge=H({argMin_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","argMin");t==null&&(t=0);var r=Mn(t,n.shape),a=xo(r,n.rank);return a!=null&&(n=n.transpose(a),r=bo(r.length,n.rank)),Y.runKernelFunc(function(i,o){var s=i.argMin(n,r[0]);return o([n]),s},{$x:n},function(i,o){var s=o[0];return{$x:function(){return gt(s)}}})}}),pge=H({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","logSumExp"),a=Mn(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var l=Yr(s.shape,a);return s.reshape(l)}return s}}),Yb=H({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","max"),a=r,i=Mn(t,r.shape),o=i,s=xo(o,r.rank);s!=null&&(r=r.transpose(s),o=bo(o.length,r.rank));var l=[r],c=Y.runKernelFunc(function(d,f){var p=d.max(r,o);return f([a,p]),p},{x:r},function(d,f){return AV(d,f[1],f[0],i,s)},"Max",{axes:o},l,[!0]);if(n){var u=Yr(c.shape,i);c=c.reshape(u)}return c}}),mge=H({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","mean"),a=Mn(t,r.shape),i=$e(mr(r.shape,a)[1]);return Hb(function(o){var s=Se(i);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(l){var c=o.shape.slice();return a.forEach(function(u){c[u]=1}),l.reshape(c).mul(Kf(o.shape,"float32")).div(i)}}})(r)}}),vge=H({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","min"),a=r,i=Mn(t,r.shape),o=i,s=xo(o,r.rank);s!=null&&(r=r.transpose(s),o=bo(o.length,r.rank));var l=[r],c=Y.runKernelFunc(function(d,f){var p=d.min(r,o);return f([a,p]),p},{x:r},function(d,f){return AV(d,f[1],f[0],i,s)},"Min",{axes:o},l,[!0]);if(n){var u=Yr(c.shape,i);c=c.reshape(u)}return c}}),gge=H({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Mn(t,(e=F(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=Yr(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),PV=H({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=Mn(t,r.shape);return Hb(function(i){var o=xo(a,i.rank),s=a,l=i;o!=null&&(l=i.transpose(o),s=bo(s.length,i.rank));var c=function(p){var v=i.shape.slice();return a.forEach(function(m){v[m]=1}),p.reshape(v).mul(Kf(i.shape,"float32"))},u={axes:s},d=Y.runKernelFunc(function(p){return p.sum(l,s)},{x:l},function(p){return{x:function(){return c(p)}}},"Sum",u);if(n){var f=Yr(d.shape,a);d=d.reshape(f)}return{value:d,gradFunc:c}})(r)}}),yge=H({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=Mn(t,r.shape),i=xo(a,r.rank),o=a,s=r;i!=null&&(s=r.transpose(i),o=bo(o.length,r.rank));var l=Y.runKernelFunc(function(u){return u.prod(s,o)},{permutedX:s});if(n){var c=Yr(l.shape,a);l=l.reshape(c)}return l}}),jV=H({elu_:function(e){var t=F(e,"x","elu");return Y.runKernelFunc(function(n,r){var a=n.elu(t);return r([a]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return Y.runKernelFunc(function(i){return i.eluDer(n,a)},{dy:n,y:a})}}})}}),xge=H({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=F(e,"x","leakyRelu");return zT(Se(t).mul(n),n)}}),OV=H({prelu_:function(e,t){var n=F(e,"x","prelu"),r=F(t,"alpha","prelu");return Y.runKernelFunc(function(a,i){var o=a.prelu(n,r);return i([n,r]),o},{x:n,alpha:r},function(a,i){var o=i[0],s=i[1],l=o.greater(0);return{x:function(){return qc(l,a,a.mul(s))},alpha:function(){var c=qc(l,gt(a),a.mul(o)),u=In(s.shape,a.shape);return u.length>0&&(c=c.sum(u)),c.reshape(s.shape)}}},"Prelu")}}),on=H({relu_:function(e){var t=F(e,"x","relu");return t.dtype==="bool"?t.toInt():Y.runKernelFunc(function(n,r){var a=n.relu(t);return r([t]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return n.mulStrict(a.step().toFloat())}}},"Relu")}}),RV=H({relu6_:function(e){var t=F(e,"x","relu6");return t.dtype==="bool"?t.toInt():Y.runKernelFunc(function(n,r){var a=n.relu6(t);return r([t]),a},{x:t},function(n,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),bge=H({selu_:function(e){var t=F(e,"x","selu");return Y.runKernelFunc(function(n,r){var a=n.selu(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){var i=a.greater(Se(0)),o=Se(LT),s=Se(BT),l=n.mul(s),c=n.mul(o).mul(a.toFloat().exp());return qc(i,l,c)}}})}}),kl=H({transpose_:function(e,t){var n=F(e,"x","transpose");if(t==null&&(t=n.shape.map(function(a,i){return i}).reverse()),U(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(a){U(a>=0&&a<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return Y.runKernelFunc(function(a){return a.transpose(n,t)},{x:n},function(a){var i=AT(t);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),wge=H({localResponseNormalization_:function(e,t,n,r,a){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=F(e,"x","localResponseNormalization");U(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),U(gn(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,s=!1;i.rank===3&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var l=Y.runKernelFunc(function(c,u){var d=c.localResponseNormalization4D(o,t,n,r,a);return u([o,d]),d},{x4D:o},function(c,u){var d=u[0],f=u[1];return{x4D:function(){return Y.runKernelFunc(function(p){return p.LRNGrad(c,d,f,t,n,r,a)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),IV=H({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var a=function s(l,c,u){if(u===void 0&&(u=null),l.rank===0)return l.abs();if(l.rank!==1&&u===null)return s(l.reshape([-1]),c,u);if(l.rank===1||typeof u=="number"||Array.isArray(u)&&u.length===1){if(c===1)return l.abs().sum(u);if(c===1/0)return l.abs().max(u);if(c===-1/0)return l.abs().min(u);if(c==="euclidean"||c===2)return l.abs().pow(Se(2,"int32")).sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(u)&&u.length===2){if(c===1)return l.abs().sum(u[0]).max(u[1]-1);if(c===1/0)return l.abs().sum(u[1]).max(u[0]);if(c===-1/0)return l.abs().sum(u[1]).min(u[0]);if(c==="fro"||c==="euclidean")return l.square().sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+u)}(e=F(e,"x","norm"),t,n),i=a.shape;if(r){var o=Mn(n,e.shape);i=Yr(a.shape,o)}return a.reshape(i)}}),Sge=H({basicLSTMCell_:function(e,t,n,r,a,i){var o=F(e,"forgetBias","basicLSTMCell"),s=F(t,"lstmKernel","basicLSTMCell"),l=F(n,"lstmBias","basicLSTMCell"),c=F(r,"data","basicLSTMCell"),u=F(a,"c","basicLSTMCell"),d=F(i,"h","basicLSTMCell"),f=c.concat(d,1).matMul(s).add(l),p=f.shape[0],v=f.shape[1]/4,m=[p,v],g=f.slice([0,0],m),y=f.slice([0,v],m),x=f.slice([0,2*v],m),b=f.slice([0,3*v],m),w=g.sigmoid().mulStrict(y.tanh()).addStrict(u.mulStrict(o.add(x).sigmoid())),S=w.tanh().mulStrict(b.sigmoid());return[w,S]}}),_ge=H({multiRNNCell_:function(e,t,n,r){for(var a=F(t,"data","multiRNNCell"),i=S0(n,"c","multiRNNCell"),o=S0(r,"h","multiRNNCell"),s=a,l=[],c=0;c<e.length;c++){var u=e[c](s,i[c],o[c]);l.push(u[0]),l.push(u[1]),s=u[1]}var d=[],f=[];for(c=0;c<l.length;c+=2)d.push(l[c]),f.push(l[c+1]);return[d,f]}}),Cge=H({movingAverage_:function(e,t,n,r,a){a===void 0&&(a=!0);var i=F(e,"v","movingAverage"),o=F(t,"x","movingAverage"),s=F(n,"decay","movingAverage");wfe(i,o),U(Vn(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var l=Se(1),c=l.sub(s),u=o.sub(i).mul(c);if(a){U(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=F(r,"step","movingAverage");u=u.div(l.sub(O0(s,d)))}return i.add(u)}}),Ege=H({stridedSlice_:function(e,t,n,r,a,i,o,s,l){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),r==null&&(r=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var c=F(e,"x","stridedSlice"),u=oD(s),d=c.shape.slice();u.forEach(function(g){t[g]=0,n[g]=1,d.splice(g,0,1)}),c=c.reshape(d);for(var f=0;f<c.rank;f++)t[f]=Dhe(a,t,r,c.shape,f),n[f]=Mhe(i,n,r,c.shape,f),r[f]=r[f]||1;var p=oD(l);p.forEach(function(g){n[g]=t[g]+1,r[g]=1});var v=RT(t,n,r),m=v.filter(function(g,y){return p.indexOf(y)===-1});return r.every(function(g){return g===1})?po(c,t,v).reshape(m):Y.runKernelFunc(function(g){return g.stridedSlice(c,t,n,r)},{$x:c}).reshape(m)}}),kge=H({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=F(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=Y.runKernelFunc(function(o){return o.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}}),Nge=H({scatterND_:function(e,t,n){var r=F(e,"indices","scatterND","int32"),a=F(t,"updates","scatterND");return Rhe(a,r,n),Y.runKernelFunc(function(i){return i.scatterND(r,a,n)},{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),GT=H({fft_:function(e){U(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Y.runKernelFunc(function(a){return a.fft(r)},{input:e}).reshape(e.shape)}}),R0=H({ifft_:function(e){U(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Y.runKernelFunc(function(a){return a.ifft(r)},{input:e}).reshape(e.shape)}}),qT=H({rfft_:function(e,t){U(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],a=e.size/r;if(t!=null&&t<r){var i=e.shape.map(function(y){return 0}),o=e.shape.map(function(y){return y});o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(t!=null&&t>r){var s=e.shape.map(function(y){return y});s[e.shape.length-1]=t-r,n=e.concat(Gt(s),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),c=er(n,l).as2D(a,r),u=GT(c),d=Math.floor(r/2)+1,f=Oa(u),p=Gi(u),v=f.split([d,r-d],f.shape.length-1),m=p.split([d,r-d],p.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,er(v[0],m[0]).reshape(g)}}),DV=H({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=R0(r);return Oa(a)}var i=[n,2*(t-1)],o=Oa(e).as2D(n,t),s=Gi(e).as2D(n,t),l=o.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(Se(-1)),u=o.concat(l,1),d=s.concat(c,1);return r=er(u,d).as2D(i[0],i[1]),a=R0(r),Oa(a)}}),Tge=Object.freeze({fft:GT,ifft:R0,rfft:qT,irfft:DV}),Age=H({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var a=F(e,"sparseIndices","sparseToDense","int32"),i=F(t,"sparseValues","sparseToDense"),o=F(r,"defaultValue","sparseToDense",i.dtype);return function(s,l,c,u){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(c.length!==f)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+f+".");var p=l.size;if(l.rank!==0&&(l.rank!==1||p!==d))throw new Error("sparseValues has incorrect shape "+l.shape+", should be [] or ["+d+"]");if(l.dtype!==u.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),Y.runKernelFunc(function(s){return s.sparseToDense(a,i,n,o)},{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),Pge=H({gatherND_:function(e,t){var n=F(t,"indices","gatherND","int32"),r=F(e,"x","gatherND");return Y.runKernelFunc(function(a){return a.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),jge=H({diag_:function(e){var t=F(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Y.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),Oge=H({dropout_:function(e,t,n,r){var a=F(e,"x","dropout");if(U(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),U(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof nn?a.clone():a;var i=function(l,c){if(c==null)return l.shape.slice();if(Vn(l.shape,c))return c;if(l.shape.length===c.length){for(var u=[],d=0;d<l.shape.length;d++)c[d]==null&&l.shape[d]!=null?u.push(l.shape[d]):u.push(c[d]);return u}return c}(a,n),o=1-t,s=O6(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function MV(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Sn(a,"float32")}var KT=H({hannWindow_:function(e){return MV(e,.5,.5)}}),$V=H({hammingWindow_:function(e){return MV(e,.54,.46)}}),XT=H({frame_:function(e,t,n,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(po(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,l=On([po(e,i,t-s),oo([s],a)]);o.push(l),i+=n}return o.length===0?hl([],[0,t]):On(o).as2D(o.length,t)}}),FV=H({stft_:function(e,t,n,r,a){var i;a===void 0&&(a=KT),r==null&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=XT(e,t,n),s=_r(o,a(t)),l=[],c=0;c<o.shape[0];c++)l.push(qT(s.slice([c,0],[1,t]),r));return On(l)}}),Rge=Object.freeze({hannWindow:KT,hammingWindow:$V,frame:XT,stft:FV}),wr,Ige=function(e,t,n){return n===void 0&&(n=1),je(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,d,f,p,v,m,g;return Oe(this,function(y){switch(y.label){case 0:return r=F(e,"predictions","inTopK"),a=F(t,"targets","inTopK"),U(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),U(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),At(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],U(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return o=y.sent(),[4,a.data()];case 2:for(s=y.sent(),l=[o.length/i,i],u=l[1],d=em("bool",c=l[0]),f=0;f<c;f++){for(p=f*u,v=o.subarray(p,p+u),m=[],g=0;g<v.length;g++)m.push({value:v[g],index:g});for(m.sort(function(x,b){return b.value-x.value}),d[f]=0,g=0;g<n;g++)if(m[g].index===s[f]){d[f]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,nr(d,a.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(wr||(wr={}));var Dge=H({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=wr.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"labels","absoluteDifference"),i=F(t,"predictions","absoluteDifference"),o=null;n!=null&&(o=F(n,"weights","absoluteDifference")),At(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return ms(s,o,r)}}),ms=H({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=wr.SUM_BY_NONZERO_WEIGHTS);var r=F(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=F(t,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(n===wr.NONE)return i;if(n===wr.SUM)return i.sum();if(n===wr.MEAN){if(a==null)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(Se(o)):s}if(n===wr.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(Se(r.size));var l=a.mul(Kf(r.shape)).notEqual(Se(0)).sum().toFloat();return i.sum().div(l)}throw Error("Unknown reduction: "+n)}}),Mge=H({cosineDistance_:function(e,t,n,r,a){a===void 0&&(a=wr.SUM_BY_NONZERO_WEIGHTS);var i=F(e,"labels","cosineDistance"),o=F(t,"predictions","cosineDistance"),s=null;r!=null&&(s=F(r,"weights","cosineDistance")),At(i.shape,o.shape,"Error in cosineDistance: ");var l=Se(1).sub(i.mul(o).sum(n,!0));return ms(l,s,a)}}),$ge=H({hingeLoss_:function(e,t,n,r){r===void 0&&(r=wr.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"labels","hingeLoss"),i=F(t,"predictions","hingeLoss"),o=null;n!=null&&(o=F(n,"weights","hingeLoss")),At(a.shape,i.shape,"Error in hingeLoss: ");var s=Se(1);a=Se(2).mul(a).sub(s);var l=s.sub(a.mul(i)).relu();return ms(l,o,r)}}),Fge=H({huberLoss_:function(e,t,n,r,a){r===void 0&&(r=1),a===void 0&&(a=wr.SUM_BY_NONZERO_WEIGHTS);var i=F(e,"labels","huberLoss"),o=F(t,"predictions","huberLoss"),s=null;n!=null&&(s=F(n,"weights","huberLoss")),At(i.shape,o.shape,"Error in huberLoss: ");var l=Se(r),c=o.sub(i).abs(),u=gV(c,l),d=c.sub(u),f=Se(.5).mul(u.square()).add(l.mul(d));return ms(f,s,a)}}),Lge=H({logLoss_:function(e,t,n,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=wr.SUM_BY_NONZERO_WEIGHTS);var i=F(e,"labels","logLoss"),o=F(t,"predictions","logLoss"),s=null;n!=null&&(s=F(n,"weights","logLoss")),At(i.shape,o.shape,"Error in logLoss: ");var l=Se(1),c=Se(r),u=i.mul(o.add(c).log()).neg().sub(l.sub(i).mul(l.sub(o).add(c).log()));return ms(u,s,a)}}),Bge=H({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=wr.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"labels","meanSquaredError"),i=F(t,"predictions","meanSquaredError"),o=null;n!=null&&(o=F(n,"weights","meanSquaredError")),At(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return ms(s,o,r)}}),Uge=H({sigmoidCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=wr.SUM_BY_NONZERO_WEIGHTS);var i=F(e,"multiClassLabels","sigmoidCrossEntropy"),o=F(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=F(n,"weights","sigmoidCrossEntropy")),At(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=Se(r),c=Se(1),u=Se(.5);i=i.mul(c.sub(l)).add(u.mul(l))}var d=function(f,p){var v=F(f,"labels","sigmoidCrossEntropyWithLogits"),m=F(p,"logits","sigmoidCrossEntropyWithLogits");At(v.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),y=m.mul(v),x=m.abs().neg().exp().log1p();return g.sub(y).add(x)}(i,o);return ms(d,s,a)}}),zge=H({softmaxCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=wr.SUM_BY_NONZERO_WEIGHTS);var i=F(e,"onehotLabels","softmaxCrossEntropy"),o=F(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=F(n,"weights","softmaxCrossEntropy")),At(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var l=Se(r),c=Se(1),u=Se(i.shape[1]);i=i.mul(c.sub(l)).add(l.div(u))}var d=function(f,p,v){if(v===void 0&&(v=-1),v===-1&&(v=p.rank-1),v!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+v);return Hb(function(m,g,y){var x=g.logSumExp([v],!0),b=g.toFloat().sub(x);return y([m,b]),{value:b.mul(m).neg().sum([v]),gradFunc:function(w,S){var C=S[0],E=S[1],k=Yr(w.shape,[v]);return[w.reshape(k).mul(C.toFloat().sub(E.exp())),w.reshape(k).mul(E.exp().sub(C.toFloat()))]}}})(f,p)}(i,o);return ms(d,s,a)}}),Wge=Object.freeze({get Reduction(){return wr},absoluteDifference:Dge,computeWeightedLoss:ms,cosineDistance:Mge,hingeLoss:$ge,huberLoss:Fge,logLoss:Lge,meanSquaredError:Bge,sigmoidCrossEntropy:Uge,softmaxCrossEntropy:zge});function TD(e,t){return t===void 0&&(t=!1),Y.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=j6(n),i=e.clone(),o=hl([[1]],[1,1]),s=o.clone(),l=n>=r?r:n,c=function(d){var f,p=i,v=s,m=a;f=Y.tidy(function(){var g=i.slice([d,d],[n-d,1]),y=g.norm(),x=i.slice([d,d],[1,1]),b=hl([[-1]]).where(x.greater(0),hl([[1]])),w=x.sub(b.mul(y)),S=g.div(w);s=S.shape[0]===1?o.clone():o.concat(S.slice([1,0],[S.shape[0]-1,S.shape[1]]),0);var C=b.matMul(w).div(y).neg(),E=i.slice([d,0],[n-d,r]),k=C.mul(s);if(d===0)i=E.sub(k.matMul(s.transpose().matMul(E)));else{var N=E.sub(k.matMul(s.transpose().matMul(E)));i=i.slice([0,0],[d,r]).concat(N,0)}var T=a.slice([0,d],[n,a.shape[1]-d]);if(d===0)a=T.sub(T.matMul(s).matMul(k.transpose()));else{var A=T.sub(T.matMul(s).matMul(k.transpose()));a=a.slice([0,0],[n,d]).concat(A,1)}return[s,i,a]}),s=f[0],i=f[1],a=f[2],Kr([p,v,m])},u=0;u<l;++u)c(u);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]})}var Vge=H({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=F(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var l=_0(0,o,1,"int32").reshape([-1,1]),c=_0(0,s,1,"int32"),u=Dn(l,c),d=qb(u.lessEqual(Se(+t,"int32")),u.greaterEqual(Se(-n,"int32"))),f=Gt([o,s],r.dtype);return ga(Rn(r.reshape([-1,o,s])).map(function(p){return qc(d,p,f)})).reshape(a)}}),Hge=H({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,U(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(l){U(e[l].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[l].shape[0]+" vs. "+n+")"})},a=1;a<e.length;++a)r(a)}else t=!0,e=jT(e,e.shape[0],0).map(function(l){return I6(l,[0])});U(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,s=function(l){i.push(Y.tidy(function(){var c=o[l];if(l>0)for(var u=0;u<l;++u){var d=PV(i[u].mulStrict(c)).mul(i[u]);c=c.sub(d)}return c.div(IV(c,"euclidean"))}))};for(a=0;a<e.length;++a)s(a);return t?ga(i,0):i}}),Gge=H({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return TD(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(o,s){return o*s}),r=Rn(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach(function(o){var s=TD(o,t),l=s[0],c=s[1];a.push(l),i.push(c)}),[ga(a,0).reshape(e.shape),ga(i,0).reshape(e.shape)]}}),qge=Object.freeze({bandPart:Vge,gramSchmidt:Hge,qr:Gge});function Qb(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return n=Math.min(n,o),U(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),U(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),U(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),U(t.rank===1,function(){return"scores must be a 1D tensor"}),U(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),U(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Kge=H({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=F(e,"images","resizeBilinear");U(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=Y.runKernelFunc(function(c,u){return u([a]),c.resizeBilinear(a,o,s,n)},{x:a},function(c,u){return{x:function(){return Y.runKernelFunc(function(d){return d.resizeBilinearBackprop(c,u[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Xge=H({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=F(e,"images","resizeNearestNeighbor");U(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),U(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=Y.runKernelFunc(function(c,u){return u([a]),c.resizeNearestNeighbor(a,o,s,n)},{batchImages:a},function(c,u){return{batchImages:function(){return Y.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(c,u[0],n)},{})}}});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Yge=H({nonMaxSuppression_:function(e,t,n,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=F(e,"boxes","nonMaxSuppression"),o=F(t,"scores","nonMaxSuppression"),s=Qb(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return Y.runKernelFunc(function(c){return c.nonMaxSuppression(i,o,n,r,a)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",l)}}),Qge=function(e,t,n,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),je(this,void 0,void 0,function(){var i,o,s,l,c,u,d;return Oe(this,function(f){switch(f.label){case 0:return i=F(e,"boxes","nonMaxSuppressionAsync"),o=F(t,"scores","nonMaxSuppressionAsync"),s=Qb(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return l=f.sent(),c=l[0],u=l[1],d=DT(c,u,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,d]}})})},Jge=H({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=F(e,"boxes","nonMaxSuppression"),s=F(t,"scores","nonMaxSuppression"),l=Qb(o,s,n,r,a,i),c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma},u=Y.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},c);return{selectedIndices:u[0],selectedScores:u[1]}}}),Zge=function(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),je(this,void 0,void 0,function(){var o,s,l,c,u,d,f;return Oe(this,function(p){switch(p.label){case 0:return o=F(e,"boxes","nonMaxSuppressionAsync"),s=F(t,"scores","nonMaxSuppressionAsync"),l=Qb(o,s,n,r,a,i),n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return c=p.sent(),u=c[0],d=c[1],f=MT(u,d,n,r,a,i),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,f]}})})},eye=H({cropAndResize_:function(e,t,n,r,a,i){var o=F(e,"image","cropAndResize"),s=F(t,"boxes","cropAndResize","float32"),l=F(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var c=s.shape[0];return U(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),U(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),U(l.rank===1&&l.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),U(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),U(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),U(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),Y.runKernelFunc(function(u,d){return u.cropAndResize(o,s,l,r,a,i)},{images:o,boxes:s,boxInd:l},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),YT=Object.freeze({resizeBilinear:Kge,resizeNearestNeighbor:Xge,nonMaxSuppression:Yge,nonMaxSuppressionAsync:Qge,nonMaxSuppressionWithScore:Jge,nonMaxSuppressionWithScoreAsync:Zge,cropAndResize:eye}),QT=function(e,t){return!(e>0)||t==="linear"},JT=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},ZT=function(e,t){var n=t,r=In(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},eA=function(e,t,n){if(t==="linear")return e;if(t==="relu")return on(e);if(t==="elu")return jV(e);if(t==="relu6")return RV(e);if(t==="prelu")return OV(e,n);throw new Error("Unknown fused activation "+t+".")},tye=H({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=a!==void 0&&a,o=e.transposeB,s=o!==void 0&&o,l=e.bias,c=e.activation,u=c===void 0?"linear":c,d=e.preluActivationWeights;if(QT(Y.state.gradientDepth,u)===!1){var f=Xb(n,r,i,s);return l!=null&&(f=ct(f,l)),eA(f,u,d)}var p=F(n,"a","fused matMul"),v=F(r,"b","fused matMul");t=un(p,v),p=t[0],v=t[1];var m=i?p.shape[p.rank-2]:p.shape[p.rank-1],g=s?v.shape[v.rank-1]:v.shape[v.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],x=s?v.shape[v.rank-2]:v.shape[v.rank-1],b=p.shape.slice(0,-2),w=v.shape.slice(0,-2),S=$e(b),C=$e(w);U(p.rank>=2&&v.rank>=2&&p.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."}),U(Vn(b,w),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."}),U(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+i+" and transposeB="+s+" must match."});var E,k,N=p.shape.slice(0,-2).concat([y,x]),T=i?p.as3D(S,m,y):p.as3D(S,y,m),A=s?v.as3D(C,x,g):v.as3D(C,g,x);l!=null&&dt(N,(E=un(E=F(l,"bias","fused matMul"),p)[0]).shape),d!=null&&(k=F(d,"prelu weights","fused matMul"));var P={a:T,b:A};l!=null&&(P.bias=E),d!=null&&(P.preluActivationWeights=k);var I=[T,A];return Y.runKernelFunc(function(R,D){var M=R.fusedBatchMatMul({a:T,b:A,transposeA:i,transposeB:s,bias:E,activation:u,preluActivationWeights:k});return D([T,A,M]),M},P,function(R,D){var M=D[0],$=D[1],j=D[2],O=JT(R,j,u),B={};return l!=null&&(B={bias:function(){return ZT(E,O)}}),Object.assign(i||s?!i&&s?{a:function(){return O.matMul($,!1,!1)},b:function(){return O.matMul(M,!0,!1)}}:i&&!s?{a:function(){return $.matMul(O,!1,!0)},b:function(){return M.matMul(O,!1,!1)}}:{a:function(){return $.matMul(O,!0,!0)},b:function(){return O.matMul(M,!0,!0)}}:{a:function(){return O.matMul($,!1,!0)},b:function(){return M.matMul(O,!0,!1)}},B)},"_FusedMatMul",{transposeA:i,transposeB:s,activation:u},I,[!0]).reshape(N)}}),nye=H({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,s=e.dilations,l=s===void 0?[1,1]:s,c=e.dimRoundingMode,u=e.bias,d=e.activation,f=d===void 0?"linear":d,p=e.preluActivationWeights;if(f=f||"linear",QT(Y.state.gradientDepth,f)===!1){var v=Ga(t,n,r,a,o,l,c);return u!=null&&(v=ct(v,u)),eA(v,f,p)}var m=F(t,"x","conv2d"),g=F(n,"filter","conv2d"),y=m,x=!1;m.rank===3&&(x=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),U(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),U(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),c!=null&&U(gn(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+a+"."}),U(y.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),U(Qr(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),U(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var b,w,S=cu(y.shape,g.shape,r,l,a,c);u!=null&&(b=un(b=F(u,"bias","fused conv2d"),m)[0],dt(S.outShape,b.shape)),p!=null&&(w=F(p,"prelu weights","fused conv2d"));var C={x:y,filter:g};u!=null&&(C.bias=b),p!=null&&(C.preluActivationWeights=w);var E=[g,y],k=Y.runKernelFunc(function(N,T){var A=N.fusedConv2d({input:y,filter:g,convInfo:S,bias:b,activation:f,preluActivationWeights:w});return T([g,y,A]),A},C,function(N,T){var A=T,P=A[0],I=A[1],R=A[2],D=JT(N,R,f);U(sf(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var M={};return u!=null&&(M={bias:function(){return ZT(b,D)}}),Object.assign({x:function(){return _V(I.shape,D,P,r,a)},filter:function(){return VT(I,D,P.shape,r,a)}},M)},"FusedConv2D",{convInfo:S,activation:f},E,[!0]);return x?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),rye=H({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,s=e.dilations,l=s===void 0?[1,1]:s,c=e.dimRoundingMode,u=e.bias,d=e.activation,f=d===void 0?"linear":d,p=e.preluActivationWeights;if(QT(Y.state.gradientDepth,f)===!1){var v=Kb(t,n,r,a,o,l,c);return u!=null&&(v=ct(v,u)),eA(v,f,p)}var m=F(t,"x","depthwiseConv2d"),g=F(n,"filter","depthwiseConv2d"),y=m,x=!1;m.rank===3&&(x=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),U(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),U(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),U(y.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),l==null&&(l=[1,1]),U(Qr(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),c!=null&&U(gn(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+a+"."});var b,w,S=cu(y.shape,g.shape,r,l,a,c,!0);u!=null&&(b=un(b=F(u,"bias","fused conv2d"),m)[0],dt(S.outShape,b.shape)),p!=null&&(w=F(p,"prelu weights","fused depthwiseConv2d"));var C={x:y,filter:g};u!=null&&(C.bias=b),p!=null&&(C.preluActivationWeights=w);var E=[g,y],k=Y.runKernelFunc(function(N,T){var A=N.fusedDepthwiseConv2D({input:y,filter:g,convInfo:S,bias:b,activation:f,preluActivationWeights:w});return T([g,y,A]),A},C,function(N,T){U(sf(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var A=T[0],P=T[1],I=T[2],R=JT(N,I,f),D={};return u!=null&&(D={bias:function(){return ZT(b,R)}}),Object.assign({x:function(){return CV(P.shape,R,A,S)},filter:function(){return EV(P,R,A.shape,S)}},D)},"FusedDepthwiseConv2D",{convInfo:S,activation:f},E,[!0]);return x?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),aye=Object.freeze({matMul:tye,conv2d:nye,depthwiseConv2d:rye}),iye=Object.freeze({image:YT,linalg:qge,losses:Wge,spectral:Tge,fused:aye,signal:Rge,square:Lme,squaredDifference:sV,conv1d:Kve,conv2d:Ga,conv3d:Xve,depthwiseConv2d:Kb,separableConv2d:HT,conv2dTranspose:Yve,conv3dTranspose:Qve,op:H,batchNormalization2d:mve,batchNormalization3d:vve,batchNormalization4d:gve,batchNormalization:yve,batchNorm:hV,batchNorm2d:xve,batchNorm3d:bve,batchNorm4d:wve,booleanMaskAsync:qve,complex:er,real:Oa,imag:Gi,concat:On,concat1d:ahe,concat2d:ihe,concat3d:ohe,concat4d:she,split:jT,matMul:Xb,dot:Jve,outerProduct:Zve,reverse:wv,reverse1d:ege,reverse2d:tge,reverse3d:nge,reverse4d:rge,maxPool:Ln,avgPool:Sv,pool:age,maxPool3d:ige,avgPool3d:oge,slice:po,slice1d:sge,slice2d:lge,slice3d:TV,slice4d:cge,abs:Bme,acos:Ume,acosh:zme,asin:Wme,asinh:Vme,atan:Hme,atanh:Gme,ceil:qme,clipByValue:UT,cos:Kme,cosh:Xme,erf:Yme,exp:LC,expm1:Qme,floor:Jme,log:Zme,log1p:eve,logSigmoid:tve,neg:j0,reciprocal:nve,round:rve,rsqrt:lV,sigmoid:cV,sign:ave,isNaN:ive,isInf:ove,isFinite:sve,sin:lve,sinh:cve,softplus:uve,sqrt:dve,step:fve,tan:hve,tanh:pve,all:uge,any:dge,argMax:fge,argMin:hge,logSumExp:pge,max:Yb,mean:mge,min:vge,moments:gge,sum:PV,prod:yge,equal:yV,equalStrict:$ve,greater:Fve,greaterEqual:xV,greaterEqualStrict:Lve,greaterStrict:Bve,less:Uve,lessEqual:zve,lessEqualStrict:Wve,lessStrict:Vve,notEqual:Hve,notEqualStrict:Gve,add:ct,addN:Cve,addStrict:Eve,atan2:kve,div:mi,divNoNan:Nve,divStrict:Tve,floorDiv:vV,maximum:zT,maximumStrict:Ave,minimum:gV,minimumStrict:Pve,mod:jve,modStrict:Ove,mul:_r,mulStrict:Rve,pow:O0,powStrict:Ive,squaredDifferenceStrict:Dve,sub:Dn,subStrict:Mve,elu:jV,leakyRelu:xge,prelu:OV,relu:on,relu6:RV,selu:bge,logicalAnd:qb,logicalNot:Sve,logicalOr:pV,logicalXor:_ve,where:qc,whereAsync:mV,buffer:et,print:vhe,batchToSpaceND:P6,broadcastTo:ghe,cast:yhe,clone:xhe,cumsum:bhe,depthToSpace:whe,expandDims:Pa,eye:j6,multinomial:She,oneHot:DC,pad:lu,pad1d:_he,pad2d:Che,pad3d:Ehe,pad4d:khe,rand:Nhe,randomNormal:The,randomGamma:Ahe,randomUniform:O6,reshape:gi,spaceToBatchND:R6,squeeze:I6,stack:ga,tile:kd,truncatedNormal:Phe,unstack:Rn,setdiff1dAsync:jhe,fill:oo,linspace:rhe,ones:Kf,range:_0,scalar:Se,tensor:nr,tensor1d:Sn,tensor2d:hl,tensor3d:PT,tensor4d:Ur,tensor5d:ehe,tensor6d:the,variable:nhe,zeros:Gt,onesLike:A6,zerosLike:gt,transpose:kl,softmax:ps,logSoftmax:Fhe,localResponseNormalization:wge,norm:IV,gather:WT,unsortedSegmentSum:bV,basicLSTMCell:Sge,multiRNNCell:_ge,movingAverage:Cge,stridedSlice:Ege,topk:kge,scatterND:Nge,fft:GT,ifft:R0,rfft:qT,irfft:DV,sparseToDense:Age,gatherND:Pge,diag:jge,dropout:Oge,hannWindow:KT,hammingWindow:$V,frame:XT,stft:FV,inTopKAsync:Ige});function fe(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&U(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function MS(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var oye=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new U6(n,Y),n}return Ai(t,e),t.prototype.write=function(n,r,a){this.firstUse&&(this.firstUse=!1,se().get("IS_NODE")&&w0(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:a}),i},t.prototype.move=function(n,r,a,i){this.data.set(n,{values:r,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return je(this,void 0,void 0,function(){return Oe(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),a=r.dtype,i=r.complexTensors;return a==="complex64"?FC(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),a=r;if(n.dtype==="string")try{a=r.map(function(i){return y0(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return et(n.shape,n.dtype,a)},t.prototype.makeOutput=function(n,r,a){var i=this.write(n,r,a);return Y.makeTensorFromDataId(i,r,a,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return je(this,void 0,void 0,function(){var r;return Oe(this,function(a){return r=zi(),n(),[2,{kernelMs:zi()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var a=this.makeOutput(null,n.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:Y.keep(n.clone()),imag:Y.keep(r.clone())},a},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(fe(n,"slice"),L6(n.shape,r,a)){var i=B6(r,n.strides),o=$e(a);return nr(this.readSync(n.dataId).subarray(i,i+o),a,n.dtype)}for(var s=et(a,n.dtype),l=this.bufferSync(n),c=0;c<s.size;++c){var u=s.indexToLoc(c).map(function(d,f){return d+r[f]});s.values[c]=l.get.apply(l,u)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,a,i){fe(n,"stridedSlice");var o=RT(r,a,i);if(o.some(function(p){return p===0}))return nr([],o);for(var s=et(o,n.dtype),l=this.bufferSync(n),c=0;c<s.size;c++){for(var u=s.indexToLoc(c),d=new Array(u.length),f=0;f<d.length;f++)d[f]=u[f]*i[f]+r[f];s.set.apply(s,[l.get.apply(l,d)].concat(u))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),a=et([n.size,n.size],n.dtype),i=a.values,o=0;o<r.length;o++)i[o*n.size+o]=r[o];return a.toTensor()},t.prototype.unstack=function(n,r){for(var a=n.shape[r],i=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(i[o++]=n.shape[s]);var l=new Array(n.rank).fill(0),c=n.shape.slice();c[r]=1;var u=new Array(a);for(s=0;s<u.length;s++)l[r]=s,u[s]=this.slice(n,l,c).reshape(i);return u},t.prototype.reverse=function(n,r){fe(n,"reverse");for(var a=et(n.shape,n.dtype),i=this.bufferSync(n),o=function(l){var c=a.indexToLoc(l),u=c.slice();r.forEach(function(d){return u[d]=n.shape[d]-1-u[d]}),a.set.apply(a,[i.get.apply(i,u)].concat(c))},s=0;s<a.size;s++)o(s);return a.toTensor()},t.prototype.concat=function(n,r){var a=this;if(n[0].dtype==="complex64"){var i=n.map(function(p){return Oa(p)}),o=n.map(function(p){return Gi(p)});return er(this.concat(i,r),this.concat(o,r))}var s=n.map(function(p){var v=$e(p.shape.slice(r));return p.as2D(-1,v)}),l=of(s.map(function(p){return p.shape}),1),c=et(l,n[0].dtype).values;if(s[0].shape[0]===1){var u=0;s.forEach(function(p){c.set(a.readSync(p.dataId),u),u+=p.size})}else{var d=0;s.forEach(function(p){for(var v=a.readSync(p.dataId),m=0,g=0;g<p.shape[0];++g)for(var y=g*l[1]+d,x=0;x<p.shape[1];++x)c[y+x]=v[m++];d+=p.shape[1]})}var f=of(n.map(function(p){return p.shape}),r);return nr(c,f,n[0].dtype)},t.prototype.neg=function(n){return fe(n,"neg"),this.multiply(Se(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(a,i,o,s){return{real:a+o,imag:i+s}}):this.broadcastedBinaryOp(n,r,tr(n.dtype,r.dtype),function(a,i){return a+i})},t.prototype.addN=function(n){var r=this;fe(n,"addN");for(var a=n.map(function(u){return r.readSync(u.dataId)}),i=et(n[0].shape,n[0].dtype),o=i.values,s=0;s<n.length;s++)for(var l=a[s],c=0;c<o.length;c++)o[c]+=l[c];return i.toTensor()},t.prototype.softmax=function(n,r){var a=Mn([r],n.shape),i=this.max(n,a),o=Yr(i.shape,a),s=this.subtract(n,i.reshape(o)),l=this.exp(s),c=this.sum(l,a).reshape(o);return this.realDivide(l,c)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(a,i,o,s){return{real:a-o,imag:i-s}}):this.broadcastedBinaryOp(n,r,tr(n.dtype,r.dtype),function(a,i){return a-i})},t.prototype.pow=function(n,r){return fe([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.pow(a,i)})},t.prototype.batchMatMul=function(n,r,a,i){fe([n,r],"matMul");for(var o=a?n.shape[1]:n.shape[2],s=a?n.shape[2]:n.shape[1],l=i?r.shape[1]:r.shape[2],c=n.shape[0],u=this.readSync(n.dataId),d=this.readSync(r.dataId),f=a?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],p=f[0],v=f[1],m=f[2],g=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],y=g[0],x=g[1],b=g[2],w=s*l,S=et([c,s,l],n.dtype),C=S.values,E=this.blockSize,k=0;k<c;k++)for(var N=0;N<s;N+=E)for(var T=0;T<l;T+=E)for(var A=0;A<o;A+=E)for(var P=Math.min(N+E,s),I=Math.min(T+E,l),R=Math.min(A+E,o),D=N;D<P;D++)for(var M=T;M<I;M++){for(var $=0,j=A;j<R;j++)$+=u[k*p+D*v+j*m]*d[j*y+M*x+k*b];C[k*w+(D*l+M)]+=$}return S.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,i=n.transposeA,o=n.transposeB,s=n.bias,l=n.activation,c=n.preluActivationWeights,u=this.batchMatMul(r,a,i,o);return s&&(u=this.add(u,s)),l&&(u=MS(this,u,l,c)),u},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(a,i,o,s){return{real:a*o-i*s,imag:a*s+i*o}}):this.broadcastedBinaryOp(n,r,tr(n.dtype,r.dtype),function(a,i){return a*i})},t.prototype.realDivide=function(n,r){return fe([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(a,i){return a/i})},t.prototype.floorDiv=function(n,r){return fe([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(a,i){return Math.floor(a/i)})},t.prototype.sum=function(n,r){fe(n,"sum"),ia("sum",r,n.rank);for(var a=mr(n.shape,r),i=a[0],o=a[1],s=Gt(i,tr(n.dtype,"int32")),l=$e(o),c=this.readSync(s.dataId),u=this.readSync(n.dataId),d=0;d<c.length;++d){for(var f=d*l,p=0,v=0;v<l;++v)p+=u[f+v];c[d]=p}return s},t.prototype.prod=function(n,r){fe(n,"sum");for(var a=mr(n.shape,r),i=a[0],o=a[1],s=Gt(i,tr(n.dtype,"int32")),l=$e(o),c=this.readSync(s.dataId),u=this.readSync(n.dataId),d=0;d<c.length;++d){for(var f=d*l,p=1,v=0;v<l;++v)p*=u[f+v];c[d]=p}return s},t.prototype.unsortedSegmentSum=function(n,r,a){fe(n,"unsortedSegmentSum");for(var i=[],o=n.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<a;++s){var l=Se(s,"int32"),c=yV(l,r).asType("float32").mul(n).sum(0);i.push(c)}return ga(i)},t.prototype.argMin=function(n,r){fe(n,"argMin");var a=[r];ia("argMin",a,n.rank);for(var i=mr(n.shape,a),o=i[0],s=i[1],l=Gt(o,"int32"),c=$e(s),u=this.readSync(l.dataId),d=this.readSync(n.dataId),f=0;f<u.length;++f){for(var p=f*c,v=d[p],m=0,g=0;g<c;++g){var y=d[p+g];y<v&&(v=y,m=g)}u[f]=m}return l},t.prototype.argMax=function(n,r){fe(n,"argMax");var a=[r];ia("argMax",a,n.rank);for(var i=mr(n.shape,a),o=i[0],s=i[1],l=Gt(o,"int32"),c=$e(s),u=this.readSync(l.dataId),d=this.readSync(n.dataId),f=0;f<u.length;++f){for(var p=f*c,v=d[p],m=0,g=0;g<c;++g){var y=d[p+g];y>v&&(v=y,m=g)}u[f]=m}return l},t.prototype.cumsum=function(n,r,a,i){if(fe(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var o=tr(n.dtype,"int32"),s=Gt(n.shape,o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),u=n.shape[n.rank-1],d=i?function(g,y){return g+u-y-1}:function(g,y){return g+y},f=0;f<c.length;f+=u)for(var p=0;p<u;p++){var v=d(f,p);if(p===0)l[v]=a?0:c[v];else{var m=d(f,p-1);l[v]=a?c[m]+l[m]:c[v]+l[m]}}return s},t.prototype.equal=function(n,r){return fe([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a===i?1:0})},t.prototype.notEqual=function(n,r){return fe([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a!==i?1:0})},t.prototype.less=function(n,r){return fe([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a<i?1:0})},t.prototype.lessEqual=function(n,r){return fe([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a<=i?1:0})},t.prototype.greater=function(n,r){return fe([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a>i?1:0})},t.prototype.greaterEqual=function(n,r){return fe([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a>=i?1:0})},t.prototype.logicalNot=function(n){fe(n,"logicalNot");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return fe([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a&&i})},t.prototype.logicalOr=function(n,r){return fe([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a||i})},t.prototype.select=function(n,r,a){fe([n,r,a],"select");for(var i=this.readSync(n.dataId),o=this.readSync(r.dataId),s=this.readSync(a.dataId),l=Gt(r.shape,tr(r.dtype,a.dtype)),c=this.readSync(l.dataId),u=0,d=n.rank===0||n.rank>1||r.rank===1?1:$e(r.shape.slice(1)),f=0;f<i.length;f++)for(var p=0;p<d;p++)i[f]===1?c[u++]=o[f]:c[u++]=s[f];return l},t.prototype.where=function(n){fe([n],"where");var r=this.readSync(n.dataId);return $T(n.shape,r)},t.prototype.topk=function(n,r,a){return fe(n,"topk"),X6(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){fe(n,"min"),ia("min",r,n.rank);for(var a=mr(n.shape,r),i=a[0],o=a[1],s=Gt(i,n.dtype),l=$e(o),c=this.readSync(s.dataId),u=this.readSync(n.dataId),d=0;d<c.length;++d){for(var f=d*l,p=u[f],v=0;v<l;++v){var m=u[f+v];m<p&&(p=m)}c[d]=p}return s},t.prototype.minimum=function(n,r){return fe([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.min(a,i)})},t.prototype.mod=function(n,r){return fe([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(n,r){fe(n,"max"),ia("max",r,n.rank);for(var a=mr(n.shape,r),i=a[0],o=a[1],s=Gt(i,n.dtype),l=$e(o),c=this.readSync(s.dataId),u=this.readSync(n.dataId),d=0;d<c.length;++d){for(var f=d*l,p=u[f],v=0;v<l;++v){var m=u[f+v];m>p&&(p=m)}c[d]=p}return s},t.prototype.maximum=function(n,r){return fe([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.max(a,i)})},t.prototype.all=function(n,r){fe(n,"all"),ia("all",r,n.rank);for(var a=mr(n.shape,r),i=a[0],o=a[1],s=Gt(i,n.dtype),l=$e(o),c=this.readSync(s.dataId),u=this.readSync(n.dataId),d=0;d<c.length;++d){for(var f=d*l,p=u[f],v=0;v<l;++v){var m=u[f+v];p=p&&m}c[d]=p}return s},t.prototype.any=function(n,r){fe(n,"any"),ia("any",r,n.rank);for(var a=mr(n.shape,r),i=a[0],o=a[1],s=Gt(i,n.dtype),l=$e(o),c=this.readSync(s.dataId),u=this.readSync(n.dataId),d=0;d<c.length;++d){for(var f=d*l,p=u[f],v=0;v<l;++v){var m=u[f+v];p=p||m}c[d]=p}return s},t.prototype.squaredDifference=function(n,r){return fe([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){var o=a-i;return o*o})},t.prototype.ceil=function(n){fe(n,"ceil");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.floor=function(n){fe(n,"floor");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.sign=function(n){fe(n,"x");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,n.shape,"float32")},t.prototype.isNaN=function(n){fe(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isInf=function(n){fe(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isFinite=function(n){fe(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.round=function(n){fe(n,"round");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,n.shape,"float32")},t.prototype.exp=function(n){fe(n,"exp");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.expm1=function(n){fe(n,"expm1");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.log=function(n){fe(n,"log");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.log1p=function(n){fe(n,"log1p");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.sqrt=function(n){fe(n,"sqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.rsqrt=function(n){fe(n,"rsqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.reciprocal=function(n){fe(n,"reciprocal");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){fe(n,"relu");for(var r=Gt(n.shape,n.dtype),a=this.readSync(r.dataId),i=this.readSync(n.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},t.prototype.relu6=function(n){fe(n,"relu");for(var r=Gt(n.shape,n.dtype),a=this.readSync(r.dataId),i=this.readSync(n.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},t.prototype.prelu=function(n,r){return fe([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return a<0?i*a:a})},t.prototype.elu=function(n){fe(n,"elu");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){fe([n,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(n.dataId),s=0;s<i.length;++s){var l=i[s];a[s]=l>=1?o[s]:o[s]*(l+1)}return this.makeOutput(a,r.shape,"float32")},t.prototype.selu=function(n){fe(n,"selu");for(var r=LT,a=BT,i=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var l=o[s];i[s]=l>=0?a*l:r*(Math.exp(l)-1)}return this.makeOutput(i,n.shape,"float32")},t.prototype.clip=function(n,r,a){fe(n,"clip");for(var i=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var l=o[s];i[s]=l>a?a:l<r?r:l}return this.makeOutput(i,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<n.size;++i){var o=a[2*i],s=a[2*i+1];r[i]=Math.hypot(o,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){fe(n,"int");for(var r=new Int32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){fe(n,"sigmoid");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){fe(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var s=i[o]>-r,l=i[o]<r,c=Math.exp(i[o]),u=void 0;u=l?c:s?i[o]:Math.log(1+c),a[o]=u}return this.makeOutput(a,n.shape,"float32")},t.prototype.sin=function(n){fe(n,"sin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){fe(n,"cos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){fe(n,"tan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){fe(n,"asin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){fe(n,"acos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){fe(n,"atan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return fe([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.atan2(a,i)})},t.prototype.sinh=function(n){fe(n,"sinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){fe(n,"cosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){fe(n,"tanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=sfe(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){fe(n,"asinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){fe(n,"acosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){fe(n,"atanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){fe(n,"erf");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),s=Math.abs(a[i]),l=1/(1+.3275911*s);r[i]=o*(1-((((1.061405429*l-1.453152027)*l+1.421413741)*l-.284496736)*l+.254829592)*l*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),fe(n,"step");for(var a=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var s=i[o];isNaN(s)?a[o]=NaN:a[o]=s>0?1:r}return this.makeOutput(a,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,l=n.preluActivationWeights,c=this.conv2d(r,a,i);return o&&(c=this.add(c,o)),s&&(c=MS(this,c,s,l)),c},t.prototype.conv2d=function(n,r,a){fe([n,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,s=a.dilationHeight,l=a.dilationWidth,c=a.padInfo.left,u=a.padInfo.top,d=a.dataFormat==="channelsLast",f=et(a.outShape,n.dtype),p=n.strides[0],v=d?n.strides[1]:n.strides[2],m=d?n.strides[2]:1,g=d?1:n.strides[1],y=f.strides[0],x=d?f.strides[1]:f.strides[2],b=d?f.strides[2]:1,w=d?1:f.strides[1],S=this.readSync(n.dataId),C=this.readSync(r.dataId),E=f.values,k=0;k<a.batchSize;++k)for(var N=k*p,T=k*y,A=0;A<a.outHeight;++A)for(var P=T+A*x,I=A*a.strideHeight-u,R=0;R<i;R++){var D=I+R*s;if(!(D<0||D>=a.inHeight))for(var M=R*r.strides[0],$=N+D*v,j=0;j<a.outWidth;++j)for(var O=P+j*b,B=j*a.strideWidth-c,G=0;G<o;G++){var L=B+G*l;if(!(L<0||L>=a.inWidth))for(var W=$+L*m,J=M+G*r.strides[1],ee=0;ee<a.inChannels;++ee){for(var ne=S[W+ee*g],Z=0;Z<a.outChannels;++Z)E[O+Z*w]+=ne*C[J+Z];J+=a.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(n,r,a){for(var i=a.filterDepth,o=a.filterHeight,s=a.filterWidth,l=a.dilationDepth,c=a.dilationHeight,u=a.dilationWidth,d=a.padInfo.front,f=a.padInfo.left,p=a.padInfo.top,v=et(a.outShape,n.dtype),m=this.readSync(n.dataId),g=this.readSync(r.dataId),y=v.values,x=0;x<a.batchSize;++x)for(var b=x*n.strides[0],w=x*v.strides[0],S=0;S<a.outDepth;++S)for(var C=w+S*v.strides[1],E=S*a.strideDepth-d,k=0;k<i;k++){var N=E+k*l;if(!(N<0||N>=a.inDepth))for(var T=k*r.strides[0],A=b+N*n.strides[1],P=0;P<a.outHeight;++P)for(var I=C+P*v.strides[2],R=P*a.strideHeight-p,D=0;D<o;D++){var M=R+D*c;if(!(M<0||M>=a.inHeight))for(var $=T+D*r.strides[1],j=A+M*n.strides[2],O=0;O<a.outWidth;++O)for(var B=I+O*a.outChannels,G=O*a.strideWidth-f,L=0;L<s;L++){var W=G+L*u;if(!(W<0||W>=a.inWidth))for(var J=$+L*r.strides[2],ee=j+W*a.inChannels,ne=J,Z=0;Z<a.inChannels;++Z){for(var K=m[ee+Z],Q=0;Q<a.outChannels;++Q)y[B+Q]+=K*g[ne+Q];ne+=a.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(n,r,a){fe([n,r],"conv2dDerInput");for(var i=et(a.inShape,"float32"),o=i.values,s=this.readSync(n.dataId),l=this.readSync(r.dataId),c=r.strides,u=c[0],d=c[1],f=c[2],p=a.batchSize,v=a.filterHeight,m=a.filterWidth,g=a.inChannels,y=a.inHeight,x=a.inWidth,b=a.outChannels,w=a.outHeight,S=a.outWidth,C=a.strideHeight,E=a.strideWidth,k=a.dataFormat,N=v-1-a.padInfo.top,T=m-1-a.padInfo.left,A=k==="channelsLast",P=i.strides[0],I=A?i.strides[1]:i.strides[2],R=A?i.strides[2]:1,D=A?1:i.strides[1],M=n.strides[0],$=A?n.strides[1]:n.strides[2],j=A?n.strides[2]:1,O=A?1:n.strides[1],B=0;B<p;++B)for(var G=0;G<g;++G)for(var L=0;L<y;++L)for(var W=L-N,J=Math.max(0,Math.ceil(W/C)),ee=Math.min(w,(v+W)/C),ne=0;ne<x;++ne){for(var Z=ne-T,K=Math.max(0,Math.ceil(Z/E)),Q=Math.min(S,(m+Z)/E),ie=0,V=J;V<ee;++V)for(var q=V*C-W,de=K;de<Q;++de)for(var he=M*B+$*V+j*de,ae=u*(v-1-q)+d*(m-1-(de*E-Z))+f*G,le=0;le<b;++le)ie+=s[he+O*le]*l[ae+le];o[P*B+I*L+R*ne+D*G]=ie}return i.toTensor()},t.prototype.conv3dDerInput=function(n,r,a){for(var i=et(a.inShape,"float32"),o=i.values,s=i.strides,l=s[0],c=s[1],u=s[2],d=s[3],f=this.readSync(n.dataId),p=n.strides,v=p[0],m=p[1],g=p[2],y=p[3],x=this.readSync(r.dataId),b=r.strides,w=b[0],S=b[1],C=b[2],E=b[3],k=a.batchSize,N=a.filterDepth,T=a.filterHeight,A=a.filterWidth,P=a.inChannels,I=a.inDepth,R=a.inHeight,D=a.inWidth,M=a.outChannels,$=a.outDepth,j=a.outHeight,O=a.outWidth,B=a.strideDepth,G=a.strideHeight,L=a.strideWidth,W=N-1-a.padInfo.front,J=T-1-a.padInfo.top,ee=A-1-a.padInfo.left,ne=0;ne<k;++ne)for(var Z=0;Z<P;++Z)for(var K=0;K<I;++K)for(var Q=K-W,ie=Math.max(0,Math.ceil(Q/B)),V=Math.min($,(N+Q)/B),q=0;q<R;++q)for(var de=q-J,he=Math.max(0,Math.ceil(de/G)),ae=Math.min(j,(T+de)/G),le=0;le<D;++le){for(var ge=le-ee,_e=Math.max(0,Math.ceil(ge/L)),Re=Math.min(O,(A+ge)/L),He=0,Me=ie;Me<V;++Me)for(var st=Me*B-Q,xe=he;xe<ae;++xe)for(var me=xe*G-de,Ee=_e;Ee<Re;++Ee)for(var X=v*ne+m*Me+g*xe+y*Ee,be=w*(N-1-st)+S*(T-1-me)+C*(A-1-(Ee*L-ge))+E*Z,oe=0;oe<M;++oe)He+=f[X+oe]*x[be+oe];o[l*ne+c*K+u*q+d*le+Z]=He}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,r,a){fe([n,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,l=a.filterWidth,c=a.dataFormat==="channelsLast",u=et(a.filterShape,"float32"),d=a.padInfo.left,f=a.padInfo.top,p=this.bufferSync(n),v=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((f-m)/i)),y=Math.min(a.outHeight,(a.inHeight+f-m)/i),x=0;x<l;++x)for(var b=Math.max(0,Math.ceil((d-x)/o)),w=Math.min(a.outWidth,(a.inWidth+d-x)/o),S=0;S<a.inChannels;++S)for(var C=0;C<a.outChannels;++C){for(var E=0,k=0;k<a.batchSize;++k)for(var N=g;N<y;++N)for(var T=m+N*i-f,A=b;A<w;++A){var P=x+A*o-d;E+=c?p.get(k,T,P,S)*v.get(k,N,A,C):p.get(k,S,T,P)*v.get(k,C,N,A)}u.set(E,m,x,S,C)}return u.toTensor()},t.prototype.conv3dDerFilter=function(n,r,a){for(var i=a.strideDepth,o=a.strideHeight,s=a.strideWidth,l=a.filterDepth,c=a.filterHeight,u=a.filterWidth,d=et(a.filterShape,"float32"),f=d.values,p=d.strides,v=p[0],m=p[1],g=p[2],y=p[3],x=this.readSync(r.dataId),b=r.strides,w=b[0],S=b[1],C=b[2],E=b[3],k=this.readSync(n.dataId),N=n.strides,T=N[0],A=N[1],P=N[2],I=N[3],R=a.padInfo.front,D=a.padInfo.left,M=a.padInfo.top,$=0;$<l;++$)for(var j=Math.max(0,Math.ceil((R-$)/i)),O=Math.min(a.outDepth,(a.inDepth+R-$)/i),B=$*v,G=0;G<c;++G)for(var L=Math.max(0,Math.ceil((M-G)/o)),W=Math.min(a.outHeight,(a.inHeight+M-G)/o),J=G*m+B,ee=0;ee<u;++ee)for(var ne=Math.max(0,Math.ceil((D-ee)/s)),Z=Math.min(a.outWidth,(a.inWidth+D-ee)/s),K=ee*g+J,Q=0;Q<a.inChannels;++Q)for(var ie=Q*y+K,V=0;V<a.outChannels;++V){for(var q=0,de=0;de<a.batchSize;++de)for(var he=de*T,ae=de*w,le=j;le<O;++le)for(var ge=($+le*i-R)*A+he,_e=le*S+ae,Re=L;Re<W;++Re)for(var He=(G+Re*o-M)*P+ge,Me=Re*C+_e,st=ne;st<Z;++st){var xe=st*E+Me;q+=k[(ee+st*s-D)*I+He+Q]*x[xe+V]}f[ie+V]=q}return d.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,l=n.preluActivationWeights,c=this.depthwiseConv2D(r,a,i);return o&&(c=this.add(c,o)),s&&(c=MS(this,c,s,l)),c},t.prototype.depthwiseConv2D=function(n,r,a){fe([n,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,s=a.dilationHeight,l=a.dilationWidth,c=a.padInfo.left,u=a.padInfo.top,d=a.outChannels/a.inChannels,f=et(a.outShape,n.dtype),p=this.readSync(n.dataId),v=this.readSync(r.dataId),m=f.values,g=0;g<a.batchSize;++g)for(var y=g*n.strides[0],x=g*f.strides[0],b=0;b<a.outHeight;++b)for(var w=x+b*f.strides[1],S=b*a.strideHeight-c,C=0;C<i;++C){var E=S+C*s;if(!(E<0||E>=a.inHeight))for(var k=C*r.strides[0],N=y+E*n.strides[1],T=0;T<a.outWidth;++T)for(var A=w+T*f.strides[2],P=T*a.strideWidth-u,I=0;I<o;++I){var R=P+I*l;if(!(R<0||R>=a.inWidth))for(var D=k+I*r.strides[1],M=N+R*a.inChannels,$=A,j=D,O=0;O<a.inChannels;++O){for(var B=p[M+O],G=0;G<d;++G)m[$+G]+=B*v[j+G];$+=d,j+=d}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,a){fe([n,r],"depthwiseConv2DDerInput");for(var i=et(a.inShape,"float32"),o=i.values,s=i.strides,l=s[0],c=s[1],u=s[2],d=this.readSync(n.dataId),f=n.strides,p=f[0],v=f[1],m=f[2],g=this.readSync(r.dataId),y=r.strides,x=y[0],b=y[1],w=y[2],S=a.batchSize,C=a.filterHeight,E=a.filterWidth,k=a.inChannels,N=a.inHeight,T=a.inWidth,A=a.outChannels,P=a.outHeight,I=a.outWidth,R=a.strideHeight,D=a.strideWidth,M=C-1-a.padInfo.top,$=E-1-a.padInfo.left,j=A/k,O=0;O<S;++O)for(var B=0;B<k;++B)for(var G=0;G<N;++G)for(var L=G-M,W=Math.max(0,Math.ceil(L/R)),J=Math.min(P,(C+L)/R),ee=0;ee<T;++ee){for(var ne=ee-$,Z=Math.max(0,Math.ceil(ne/D)),K=Math.min(I,(E+ne)/D),Q=0,ie=W;ie<J;++ie)for(var V=ie*R-L,q=Z;q<K;++q)for(var de=p*O+v*ie+m*q,he=x*(C-1-V)+b*(E-1-(q*D-ne))+w*B,ae=0;ae<j;++ae)Q+=d[de+(B*j+ae)]*g[he+ae];o[l*O+c*G+u*ee+B]=Q}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){fe([n,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,l=a.filterWidth,c=et(a.filterShape,"float32"),u=a.padInfo.left,d=a.padInfo.top,f=a.outChannels/a.inChannels,p=this.bufferSync(n),v=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((d-m)/i)),y=Math.min(a.outHeight,(a.inHeight+d-m)/i),x=0;x<l;++x)for(var b=Math.max(0,Math.ceil((u-x)/o)),w=Math.min(a.outWidth,(a.inWidth+u-x)/o),S=0;S<a.outChannels;++S){for(var C=Math.trunc(S/f),E=S%f,k=0,N=0;N<a.batchSize;++N)for(var T=g;T<y;++T)for(var A=m+T*i-d,P=b;P<w;++P){var I=x+P*o-u;k+=p.get(N,A,I,C)*v.get(N,T,P,S)}c.set(k,m,x,C,E)}return c.toTensor()},t.prototype.tile=function(n,r){return fe(n,"tile"),K6(this.bufferSync(n),r)},t.prototype.pad=function(n,r,a){fe(n,"pad");var i=r.map(function(f,p){return f[0]+n.shape[p]+f[1]}),o=r.map(function(f){return f[0]}),s=this.bufferSync(n),l=et(i,n.dtype);a!==0&&l.values.fill(a);for(var c=0;c<n.size;c++){var u=s.indexToLoc(c),d=u.map(function(f,p){return f+o[p]});l.set.apply(l,[s.get.apply(s,u)].concat(d))}return l.toTensor()},t.prototype.transpose=function(n,r){fe(n,"transpose");for(var a=new Array(n.rank),i=0;i<a.length;i++)a[i]=n.shape[r[i]];var o=this.readSync(n.dataId),s=et(a,n.dtype),l=this.bufferSync(n);for(i=0;i<n.size;++i){for(var c=l.indexToLoc(i),u=new Array(c.length),d=0;d<u.length;d++)u[d]=c[r[d]];var f=s.locToIndex(u);s.values[f]=o[i]}return s.toTensor()},t.prototype.gather=function(n,r,a){fe([n,r],"gather");var i=n.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var s=et(i,n.dtype),l=this.bufferSync(n),c=0;c<s.size;++c){var u=s.indexToLoc(c),d=u.slice();d[a]=o[u[a]];var f=l.locToIndex(d);s.values[c]=l.values[f]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,a){fe([n],"batchToSpaceND");var i=r.reduce(function(d,f){return d*f}),o=C0(n.shape,r,i),s=E0(o.length,r.length),l=k0(n.shape,r,i),c=D6(a,r.length),u=M6(l,a,r.length);return n.reshape(o).transpose(s).reshape(l).slice(c,u)},t.prototype.spaceToBatchND=function(n,r,a){fe([n],"spaceToBatchND");var i=r.reduce(function(f,p){return f*p}),o=[[0,0]];o.push.apply(o,a);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var l=n.pad(o),c=C0(l.shape,r,i,!1),u=E0(c.length,r.length,!1),d=k0(l.shape,r,i,!1);return l.reshape(c).transpose(u).reshape(d)},t.prototype.pool=function(n,r,a){fe(n,"pool");for(var i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,u=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,p=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),m=et(r.outShape,n.dtype),g=m.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],b=r.outShape[3],w=0;w<r.batchSize;++w)for(var S=w*y,C=w*n.strides[0],E=0;E<r.inChannels;++E)for(var k=0;k<r.outHeight;++k)for(var N=k*i-d,T=Math.max(0,N),A=Math.min(r.inHeight,c+N),P=S+k*x,I=0;I<r.outWidth;++I){for(var R=I*o-f,D=Math.max(0,R),M=Math.min(r.inWidth,u+R),$=p,j=0,O=0,B=T;B<A;B+=s){for(var G=C+B*n.strides[1],L=D;L<M;L+=l){var W=v[G+L*n.strides[2]+E];a==="max"&&W>$?$=W:a==="avg"&&(j+=W,O++)}if(isNaN($))break}g[P+I*b+E]=a==="avg"?j/O:$}return m.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var a=et(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,u=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,p=this.bufferSync(n),v=0;v<r.batchSize;++v)for(var m=0;m<r.inChannels;++m)for(var g=0;g<r.outHeight;++g){for(var y=g*i-d,x=y;x<0;)x+=s;for(var b=Math.min(r.inHeight,c+y),w=0;w<r.outWidth;++w){for(var S=w*o-f,C=S;C<0;)C+=l;for(var E=Math.min(r.inWidth,u+S),k=Number.NEGATIVE_INFINITY,N=-1,T=x;T<b;T+=s)for(var A=T-y,P=C;P<E;P+=l){var I=P-S,R=p.get(v,T,P,m);R>k&&(k=R,N=A*u+I)}a.set(N,v,g,w,m)}}return a.toTensor()},t.prototype.maxPoolBackprop=function(n,r,a,i){fe([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),s=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,d=i.effectiveFilterHeight,f=i.effectiveFilterWidth,p=f-1-i.padInfo.left,v=d-1-i.padInfo.top,m=et(r.shape,"float32"),g=this.bufferSync(o),y=this.bufferSync(n),x=0;x<i.batchSize;++x)for(var b=0;b<i.inChannels;++b)for(var w=0;w<i.inHeight;++w)for(var S=0;S<i.inWidth;++S){for(var C=w-v,E=S-p,k=0,N=0;N<d;N+=c){var T=(C+N)/s;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var A=0;A<f;A+=u){var P=(E+A)/l;if(!(P<0||P>=i.outWidth||Math.floor(P)!==P)){var I=d*f-1-g.get(x,T,P,b)===N*f+A?1:0;I!==0&&(k+=y.get(x,T,P,b)*I)}}}m.set(k,x,w,S,b)}return m.toTensor()},t.prototype.avgPoolBackprop=function(n,r,a){fe([n,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,l=a.filterWidth,c=a.dilationHeight,u=a.dilationWidth,d=a.effectiveFilterHeight,f=a.effectiveFilterWidth,p=f-1-a.padInfo.left,v=d-1-a.padInfo.top,m=et(r.shape,"float32"),g=1/(s*l),y=this.bufferSync(n),x=0;x<a.batchSize;++x)for(var b=0;b<a.inChannels;++b)for(var w=0;w<a.inHeight;++w)for(var S=0;S<a.inWidth;++S){for(var C=w-v,E=S-p,k=0,N=0;N<d;N+=c){var T=(C+N)/i;if(!(T<0||T>=a.outHeight||Math.floor(T)!==T))for(var A=0;A<f;A+=u){var P=(E+A)/o;P<0||P>=a.outWidth||Math.floor(P)!==P||(k+=y.get(x,T,P,b))}}m.set(k*g,x,w,S,b)}return m.toTensor()},t.prototype.pool3d=function(n,r,a){fe(n,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,v=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,y=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(n.dataId),b=et(r.outShape,n.dtype),w=b.values,S=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],k=r.outShape[4],N=0;N<r.batchSize;++N)for(var T=N*S,A=N*n.strides[0],P=0;P<r.inChannels;++P)for(var I=0;I<r.outDepth;++I){for(var R=I*i-v,D=R;D<0;)D+=l;for(var M=Math.min(r.inDepth,d+R),$=T+I*C,j=0;j<r.outHeight;++j){for(var O=j*o-m,B=O;B<0;)B+=c;for(var G=Math.min(r.inHeight,f+O),L=$+j*E,W=0;W<r.outWidth;++W){for(var J=W*s-g,ee=J;ee<0;)ee+=u;for(var ne=Math.min(r.inWidth,p+J),Z=L+W*k,K=y,Q=0,ie=0,V=D;V<M;V+=l){for(var q=A+V*n.strides[1],de=B;de<G;de+=c){for(var he=q+de*n.strides[2],ae=ee;ae<ne;ae+=u){var le=x[he+ae*n.strides[3]+P];if(a==="max"&&le>K?K=le:a==="avg"&&(Q+=le,ie++),isNaN(K))break}if(isNaN(K))break}if(isNaN(K))break}w[Z+P]=a==="avg"?Q/ie:K}}}return b.toTensor()},t.prototype.avgPool3d=function(n,r){return fe(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,a){fe([n,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,s=a.strideWidth,l=a.filterDepth,c=a.filterHeight,u=a.filterWidth,d=a.dilationDepth,f=a.dilationHeight,p=a.dilationWidth,v=a.effectiveFilterDepth,m=a.effectiveFilterHeight,g=a.effectiveFilterWidth,y=v-1-a.padInfo.front,x=g-1-a.padInfo.left,b=m-1-a.padInfo.top,w=et(r.shape,"float32"),S=1/(l*c*u),C=this.bufferSync(n),E=0;E<a.batchSize;++E)for(var k=0;k<a.inChannels;++k)for(var N=0;N<a.inDepth;++N)for(var T=0;T<a.inHeight;++T)for(var A=0;A<a.inWidth;++A){for(var P=N-y,I=T-b,R=A-x,D=0,M=0;M<v;M+=d){var $=(P+M)/i;if(!($<0||$>=a.outDepth||Math.floor($)!==$))for(var j=0;j<m;j+=f){var O=(I+j)/o;if(!(O<0||O>=a.outHeight||Math.floor(O)!==O))for(var B=0;B<g;B+=p){var G=(R+B)/s;G<0||G>=a.outWidth||Math.floor(G)!==G||(D+=C.get(E,$,O,G,k))}}}w.set(D*S,E,N,T,A,k)}return w.toTensor()},t.prototype.maxPool3d=function(n,r){return fe(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var a=et(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,v=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,y=this.bufferSync(n),x=0;x<r.batchSize;++x)for(var b=0;b<r.inChannels;++b)for(var w=0;w<r.outDepth;++w){for(var S=w*i-v,C=S;C<0;)C+=l;for(var E=Math.min(r.inDepth,d+S),k=0;k<r.outHeight;++k){for(var N=k*o-m,T=N;T<0;)T+=c;for(var A=Math.min(r.inHeight,f+N),P=0;P<r.outWidth;++P){for(var I=P*s-g,R=I;R<0;)R+=u;for(var D=Math.min(r.inWidth,p+I),M=Number.NEGATIVE_INFINITY,$=-1,j=C;j<E;j+=l)for(var O=j-S,B=T;B<A;B+=c)for(var G=B-N,L=R;L<D;L+=u){var W=L-I,J=y.get(x,j,B,L,b);J>=M&&(M=J,$=O*f*p+G*f+W)}a.set($,x,w,k,P,b)}}}return a.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,a,i){fe([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),s=i.strideDepth,l=i.strideHeight,c=i.strideWidth,u=i.dilationDepth,d=i.dilationHeight,f=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=p-1-i.padInfo.front,y=m-1-i.padInfo.left,x=v-1-i.padInfo.top,b=et(r.shape,"float32"),w=this.bufferSync(o),S=this.bufferSync(n),C=0;C<i.batchSize;++C)for(var E=0;E<i.inChannels;++E)for(var k=0;k<i.inDepth;++k)for(var N=0;N<i.inHeight;++N)for(var T=0;T<i.inWidth;++T){for(var A=k-g,P=N-x,I=T-y,R=0,D=0;D<p;D+=u){var M=(A+D)/s;if(!(M<0||M>=i.outDepth||Math.floor(M)!==M))for(var $=0;$<v;$+=d){var j=(P+$)/l;if(!(j<0||j>=i.outHeight||Math.floor(j)!==j))for(var O=0;O<m;O+=f){var B=(I+O)/c;if(!(B<0||B>=i.outWidth||Math.floor(B)!==B)){var G=p*v*m-1-w.get(C,M,j,B,E)===D*v*m+$*m+O?1:0;G!==0&&(R+=S.get(C,M,j,B,E)*G)}}}}b.set(R,C,k,N,T,E)}return b.toTensor()},t.prototype.cast=function(n,r){return V6(n,r,this)},t.prototype.reshape=function(n,r){return $C(n,r)},t.prototype.avgPool=function(n,r){return fe(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,a,i){fe(n,"resizeBilinear");for(var o=n.shape,s=o[0],l=o[1],c=o[2],u=o[3],d=this.readSync(n.dataId),f=new Float32Array($e([s,r,a,u])),p=[i&&r>1?l-1:l,i&&a>1?c-1:c],v=[i&&r>1?r-1:r,i&&a>1?a-1:a],m=0,g=p[0]/v[0],y=p[1]/v[1],x=0;x<s;x++)for(var b=0;b<r;b++)for(var w=g*b,S=Math.floor(w),C=w-S,E=Math.min(l-1,Math.ceil(w)),k=x*n.strides[0]+S*n.strides[1],N=x*n.strides[0]+E*n.strides[1],T=0;T<a;T++)for(var A=y*T,P=Math.floor(A),I=A-P,R=Math.min(c-1,Math.ceil(A)),D=k+P*n.strides[2],M=N+P*n.strides[2],$=k+R*n.strides[2],j=N+R*n.strides[2],O=0;O<u;O++){var B=d[D+O],G=d[M+O],L=B+(d[$+O]-B)*I,W=L+(G+(d[j+O]-G)*I-L)*C;f[m++]=W}return nr(f,[s,r,a,u])},t.prototype.resizeBilinearBackprop=function(n,r,a){fe([n,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],s=i[1],l=i[2],c=i[3],u=n.shape,d=u[1],f=u[2],p=new Float32Array(o*s*l*c),v=[a&&d>1?s-1:s,a&&f>1?l-1:l],m=[a&&d>1?d-1:d,a&&f>1?f-1:f],g=v[0]/m[0],y=v[1]/m[1],x=this.readSync(n.dataId),b=0,w=0;w<o;w++)for(var S=w*r.strides[0],C=0;C<d;C++)for(var E=C*g,k=Math.floor(E),N=Math.min(Math.ceil(E),s-1),T=S+k*r.strides[1],A=S+N*r.strides[1],P=E-k,I=1-P,R=0;R<f;R++)for(var D=R*y,M=Math.floor(D),$=Math.min(Math.ceil(D),l-1),j=D-M,O=1-j,B=T+M*r.strides[2],G=T+$*r.strides[2],L=A+M*r.strides[2],W=A+$*r.strides[2],J=I*O,ee=I*j,ne=P*O,Z=P*j,K=0;K<c;K++){var Q=x[b++];p[B+K]+=Q*J,p[G+K]+=Q*ee,p[L+K]+=Q*ne,p[W+K]+=Q*Z}return Ur(p,[o,l,s,c],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,a,i){fe(n,"resizeNearestNeighbor");for(var o=n.shape,s=o[0],l=o[1],c=o[2],u=o[3],d=this.readSync(n.dataId),f=new Float32Array(s*r*a*u),p=[i&&r>1?l-1:l,i&&a>1?c-1:c],v=[i&&r>1?r-1:r,i&&a>1?a-1:a],m=p[0]/v[0],g=p[1]/v[1],y=0,x=0;x<s;x++)for(var b=x*n.strides[0],w=0;w<r;w++)for(var S=m*w,C=b+Math.min(l-1,i?Math.round(S):Math.floor(S))*n.strides[1],E=0;E<a;E++)for(var k=g*E,N=C+Math.min(c-1,i?Math.round(k):Math.floor(k))*n.strides[2],T=0;T<u;T++){var A=d[N+T];f[y++]=A}return nr(f,[s,r,a,u],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){fe([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],s=i[1],l=i[2],c=i[3],u=n.shape,d=u[1],f=u[2],p=new Float32Array(o*s*l*c),v=this.readSync(n.dataId),m=[a&&d>1?s-1:s,a&&f>1?l-1:l],g=[a&&d>1?d-1:d,a&&f>1?f-1:f],y=m[0]/g[0],x=m[1]/g[1],b=1/y,w=1/x,S=2*Math.ceil(b)+2,C=2*Math.ceil(w)+2,E=0;E<o;E++)for(var k=E*r.strides[0],N=0;N<s;N++)for(var T=k+N*r.strides[1],A=Math.floor(N*b),P=Math.floor(A-S/2),I=0;I<l;I++)for(var R=T+I*r.strides[2],D=Math.floor(I*w),M=Math.floor(D-C/2),$=0;$<c;$++){for(var j=0,O=0;O<S;O++){var B=O+P;if(!(B<0||B>=d)){var G=k+B*n.strides[1],L=B*y;if(N===Math.min(s-1,a?Math.round(L):Math.floor(L)))for(var W=0;W<C;W++){var J=W+M;if(!(J<0||J>=f)){var ee=G+J*n.strides[2],ne=J*x;I===Math.min(l-1,a?Math.round(ne):Math.floor(ne))&&(j+=v[ee+$])}}}}p[R+$]=j}return Ur(p,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,a,i,o,s){fe([n,r,a,o,s],"batchNorm");for(var l=this.readSync(n.dataId),c=this.readSync(r.dataId),u=this.readSync(a.dataId),d=o?this.readSync(o.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),p=new Float32Array(l.length),v=f.length,m=d.length,g=u.length,y=c.length,x=0,b=0,w=0,S=0,C=0;C<l.length;++C)p[C]=f[x++]+(l[C]-c[b++])*d[w++]/Math.sqrt(u[S++]+i),x>=v&&(x=0),b>=y&&(b=0),w>=m&&(w=0),S>=g&&(S=0);return Ur(p,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,a,i,o){fe(n,"localResponseNormalization4D");var s=n.shape[3],l=s-1,c=this.readSync(n.dataId),u=n.size,d=new Float32Array(u);function f(g){for(var y=g%s,x=g-y+Math.max(0,y-r),b=g-y+Math.min(y+r,l),w=0;x<=b;x++){var S=c[x];w+=S*S}return w}for(var p=0;p<u;p++){var v=f(p),m=c[p]*Math.pow(a+i*v,-o);d[p]=m}return Ur(d,n.shape)},t.prototype.LRNGrad=function(n,r,a,i,o,s,l){fe(n,"LRNGrad");for(var c=n.shape[3],u=this.readSync(n.dataId),d=this.readSync(r.dataId),f=this.readSync(a.dataId),p=new Float32Array(n.size),v=n.size,m=0;m<v;m++){for(var g=m%c,y=m-g+Math.max(0,g-i),x=m-g+Math.min(c,g+i+1),b=0,w=y;w<x;w++)b+=Math.pow(d[w],2);for(b=s*b+o,w=y;w<x;w++){var S=-2*s*l*d[w]*f[m]/b;m===w&&(S+=Math.pow(b,-l)),S*=u[m],p[w]+=S}}return Ur(p,n.shape)},t.prototype.multinomial=function(n,r,a,i){fe(n,"multinomial");for(var o=r?n:ps(n),s=o.shape[0],l=o.shape[1],c=Gt([s,a],"int32"),u=this.readSync(c.dataId),d=this.readSync(o.dataId),f=0;f<s;++f){var p=f*l,v=new Float32Array(l-1);v[0]=d[p];for(var m=1;m<v.length;++m)v[m]=v[m-1]+d[p+m];for(var g=Vb(i.toString()),y=f*a,x=0;x<a;++x){var b=g();u[y+x]=v.length;for(var w=0;w<v.length;w++)if(b<v[w]){u[y+x]=w;break}}}return c},t.prototype.oneHot=function(n,r,a,i){fe(n,"oneHot");var o=new Float32Array(n.size*r);o.fill(i);for(var s=this.readSync(n.dataId),l=0;l<n.size;++l)s[l]>=0&&s[l]<r&&(o[l*r+s[l]]=a);return hl(o,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,a,i,o){return fe(n,"nonMaxSuppression"),DT(this.readSync(n.dataId),this.readSync(r.dataId),a,i,o)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var a=n.shape[0],i=n.shape[1],o=et(n.shape,"float32"),s=et(n.shape,"float32"),l=Oa(n).as2D(a,i),c=Gi(n).as2D(a,i),u=0;u<a;u++)for(var d=l.slice([u,0],[1,i]),f=c.slice([u,0],[1,i]),p=er(d,f),v=this.readSync(this.fftImpl(p,r).dataId),m=0;m<i;m++){var g=sD(v,m);o.values[u*i+m]=g.real,s.values[u*i+m]=g.imag}return er(o.toTensor(),s.toTensor()).as2D(a,i)},t.prototype.fftImpl=function(n,r){var a=n.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(n.shape[0],n.shape[1]);return r&&(o=er(Oa(o).div(Se(i)),Gi(o).div(Se(i)))),o}var s=this.readSync(n.dataId),l=function(c){for(var u=new Float32Array(c.length/2),d=new Float32Array(c.length/2),f=0;f<c.length;f+=2)u[f/2]=c[f],d[f/2]=c[f+1];return{real:u,imag:d}}(this.fourierTransformByMatmul(s,i,r));return er(l.real,l.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,a){if(r===1)return n;var i=this.readSync(n.dataId),o=r/2,s=function(y){for(var x=Math.ceil(y.length/4),b=new Float32Array(x),w=new Float32Array(x),S=0;S<y.length;S+=4)b[Math.floor(S/4)]=y[S],w[Math.floor(S/4)]=y[S+1];return{real:b,imag:w}}(i),l=er(s.real,s.imag).as1D(),c=function(y){for(var x=Math.floor(y.length/4),b=new Float32Array(x),w=new Float32Array(x),S=2;S<y.length;S+=4)b[Math.floor(S/4)]=y[S],w[Math.floor(S/4)]=y[S+1];return{real:b,imag:w}}(i),u=er(c.real,c.imag).as1D();l=this.fftRadix2(l,o,a),u=this.fftRadix2(u,o,a);var d=function(y,x){for(var b=new Float32Array(y/2),w=new Float32Array(y/2),S=0;S<Math.ceil(y/2);S++){var C=(x?2:-2)*Math.PI*(S/y);b[S]=Math.cos(C),w[S]=Math.sin(C)}return{real:b,imag:w}}(r,a),f=er(d.real,d.imag).mul(u),p=l.add(f),v=l.sub(f),m=Oa(p).concat(Oa(v)),g=Gi(p).concat(Gi(v));return er(m,g).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,l=0,c=0;c<r;c++){var u=Bhe(o*c,r,a),d=sD(n,c);s+=d.real*u.real-d.imag*u.imag,l+=d.real*u.imag+d.imag*u.real}a&&(s/=r,l/=r),Lhe(i,s,l,o)}return i},t.prototype.depthToSpace=function(n,r,a){U(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=n.shape[0],o=n.shape[1],s=n.shape[2],l=n.shape[3],c=o*r,u=s*r,d=l/(r*r),f=this.readSync(n.dataId),p=new Float32Array(i*c*u*d),v=0,m=0;m<i;++m)for(var g=0;g<c;++g)for(var y=Math.floor(g/r),x=g%r,b=0;b<u;++b)for(var w=Math.floor(b/r),S=(x*r+b%r)*d,C=0;C<d;++C){var E=C+S+l*(w+s*(y+o*m));p[v++]=f[E]}return Ur(p,[i,c,u,d])},t.prototype.broadcastedBinaryOp=function(n,r,a,i){var o=dt(n.shape,r.shape),s=et(o,a),l=this.readSync(n.dataId),c=this.readSync(r.dataId),u=el(n.shape,o),d=el(r.shape,o),f=s.values;if(u.length+d.length===0)for(var p=0;p<f.length;++p)f[p]=i(l[p%l.length],c[p%c.length]);else{var v=this.bufferSync(n),m=this.bufferSync(r),g=function(y){var x=s.indexToLoc(y),b=x.slice(-n.rank);u.forEach(function(E){return b[E]=0});var w=v.locToIndex(b),S=x.slice(-r.rank);d.forEach(function(E){return S[E]=0});var C=m.locToIndex(S);f[y]=i(l[w],c[C])};for(p=0;p<f.length;++p)g(p)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,a){var i=dt(n.shape,r.shape),o=et(i,"float32"),s=et(i,"float32"),l=this.readSync(n.dataId),c=this.readSync(r.dataId),u=el(n.shape,i),d=el(r.shape,i),f=o.values,p=s.values;if(u.length+d.length===0)for(var v=0;v<f.length;v++){var m=v%l.length,g=v%c.length,y=a(l[2*m],l[2*m+1],c[2*g],c[2*g+1]);f[v]=y.real,p[v]=y.imag}else{var x=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=function(S){var C=o.indexToLoc(S),E=C.slice(-n.rank);u.forEach(function(P){return E[P]=0});var k=x.locToIndex(E),N=C.slice(-r.rank);d.forEach(function(P){return N[P]=0});var T=b.locToIndex(N),A=a(l[2*k],l[2*k+1],c[2*T],c[2*T+1]);f[S]=A.real,p[S]=A.imag};for(v=0;v<f.length;v++)w(v)}return this.complex(o.toTensor(),s.toTensor())},t.prototype.split=function(n,r,a){return q6(n,r,a)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,a,i,o,s){for(var l=n.shape,c=l[0],u=l[1],d=l[2],f=l[3],p=r.shape[0],v=i[0],m=i[1],g=et([p,v,m,f],"float32"),y=this.readSync(r.dataId),x=this.readSync(a.dataId),b=this.readSync(n.dataId),w=n.strides,S=g.strides,C=0;C<p;C++){var E=4*C,k=y[E],N=y[E+1],T=y[E+2],A=y[E+3],P=x[C];if(!(P>=c))for(var I=v>1?(T-k)*(u-1)/(v-1):0,R=m>1?(A-N)*(d-1)/(m-1):0,D=0;D<v;D++){var M=v>1?k*(u-1)+D*I:.5*(k+T)*(u-1);if(M<0||M>u-1)for(var $=0;$<m;$++)for(var j=0;j<f;j++){var O=j+$*S[2]+D*S[1]+C*S[0];g.values[O]=s}else if(o==="bilinear"){var B=Math.floor(M),G=Math.ceil(M),L=M-B;for($=0;$<m;$++)if((V=m>1?N*(d-1)+$*R:.5*(N+A)*(d-1))<0||V>d-1)for(j=0;j<f;j++)O=j+$*S[2]+D*S[1]+C*S[0],g.values[O]=s;else{var W=Math.floor(V),J=Math.ceil(V),ee=V-W;for(j=0;j<f;j++){var ne=b[O=j+W*w[2]+B*w[1]+P*w[0]],Z=b[O=j+J*w[2]+B*w[1]+P*w[0]],K=b[O=j+W*w[2]+G*w[1]+P*w[0]],Q=ne+(Z-ne)*ee,ie=K+(b[O=j+J*w[2]+G*w[1]+P*w[0]]-K)*ee;O=j+$*S[2]+D*S[1]+C*S[0],g.values[O]=Q+(ie-Q)*L}}}else for($=0;$<m;++$){var V;if((V=m>1?N*(d-1)+$*R:.5*(N+A)*(d-1))<0||V>d-1)for(j=0;j<f;j++)O=j+$*S[2]+D*S[1]+C*S[0],g.values[O]=s;else{var q=Math.round(V),de=Math.round(M);for(j=0;j<f;j++){var he=j+q*w[2]+de*w[1]+P*w[0],ae=j+$*S[2]+D*S[1]+C*S[0];g.values[ae]=b[he]}}}}}return g.toTensor()},t.prototype.sparseToDense=function(n,r,a,i){var o=N0(0,n,a),s=o.sliceRank,l=o.numUpdates,c=o.sliceSize,u=o.strides,d=o.outputSize;return this.scatter(n,r,a,d,c,l,s,u,i,!1)},t.prototype.gatherND=function(n,r){var a=r.shape,i=a[a.length-1],o=$6(n,r),s=o[0],l=o[1],c=o[2],u=o[3];if(l===0)return nr([],s,n.dtype);for(var d=new tm([l,c],n.dtype),f=this.readSync(r.dataId),p=this.readSync(n.dataId),v=0;v<l;v++){for(var m=[],g=0,y=0;y<i;y++){var x=f[v*i+y];g+=x*u[y],m.push(x)}if(g<0||g>=n.size/c)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var b=0;b<c;b++)d.values[v*c+b]=p[g*c+b]}return d.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,a){var i=N0(0,n,a),o=i.sliceRank,s=i.numUpdates,l=i.sliceSize,c=i.strides,u=i.outputSize,d=Se(0);return this.scatter(n,r,a,u,l,s,o,c,d,!0)},t.prototype.fill=function(n,r,a){var i=g0(a=a||vv(r),$e(n));return i.fill(r),Y.makeTensor(i,n,a,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=g0(n.dtype,$e(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,a){return H6(n,r,a)},t.prototype.scatter=function(n,r,a,i,o,s,l,c,u,d){var f=[i/o,o],p=this.readSync(n.dataId),v=this.readSync(r.dataId);if(i===0)return nr([],a,r.dtype);var m=new tm(f,r.dtype);m.values.fill(this.readSync(u.dataId)[0]);for(var g=0;g<s;g++){for(var y=[],x=0,b=0;b<l;b++){var w=p[g*l+b];y.push(w),x+=w*c[b]}if(x<0||x>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+a);for(var S=0;S<o;S++)d?m.values[x*o+S]+=v[g*o+S]:m.values[x*o+S]=r.rank===0?v[0]:v[g*o+S]}return m.toTensor().reshape(a)},t}(z6);Y.registerBackend("cpu",function(){return new oye},1);for(var $S=0,AD=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,i=a.boxes,o=a.scores,s=r,l=s.maxOutputSize,c=s.iouThreshold,u=s.scoreThreshold,d=s.softNmsSigma,f=n;fe(i,"NonMaxSuppressionWithScore");var p=MT(f.data.get(i.dataId).values,f.data.get(o.dataId).values,l,c,u,d);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;fe(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var l=i[s];o[s]=l*l}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:am,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n;fe([a,i],am);var s=o.data.get(a.dataId).values,l=o.data.get(i.dataId).values,c=function(f,p,v,m,g,y){var x=dt(f,p),b=x.length,w=io(x),S=em(g,$e(x)),C=f.length,E=p.length,k=io(f),N=io(p),T=el(f,x),A=el(p,x);if(T.length+A.length===0)for(var P=0;P<S.length;++P)S[P]=y(v[P%v.length],m[P%m.length]);else{var I=function(R){var D=vfe(R,b,w),M=D.slice(-C);T.forEach(function(B){return M[B]=0});var $=JI(M,C,k),j=D.slice(-E);A.forEach(function(B){return j[B]=0});var O=JI(j,E,N);S[R]=y(v[$],m[O])};for(P=0;P<S.length;++P)I(P)}return[S,x]}(a.shape,i.shape,s,l,a.dtype,function(f,p){var v=f-p;return v*v}),u=c[0],d=c[1];return{dataId:o.write(u,d,a.dtype),shape:d,dtype:a.dtype}}}];$S<AD.length;$S++)v6(AD[$S]);var Pu,sye=function(e){this.variableNames=["A"];var t=br(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},lye=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=br(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var FS=0,PD=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,l=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=l[0],u=l[1],d=[u,c],f=[u,c,i];(s||o)&&(Pu==null&&(Pu=document.createElement("canvas").getContext("2d")),Pu.canvas.width=c,Pu.canvas.height=u,Pu.drawImage(a,0,0,c,u),a=Pu.canvas);var p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=fa.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var v=se().getBool("WEBGL_PACK")?new lye(f):new sye(f),m=n.runWebGLProgram(v,[p],"int32");return n.disposeData(p.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;w0("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,i=a.boxes,o=a.scores,s=r,l=s.maxOutputSize,c=s.iouThreshold,u=s.scoreThreshold,d=s.softNmsSigma,f=n,p=MT(f.readSync(i.dataId),f.readSync(o.dataId),l,c,u,d);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new rt(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:am,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n,s=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new No("return (a - b) * (a - b);",a.shape,i.shape):new dn("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(s,[a,i])}}];FS<PD.length;FS++)v6(PD[FS]);for(var LS=0,jD=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:am,gradFunc:function(e,t){var n=t[0],r=t[1],a=Se(2);return{a:function(){return _r(e,_r(a,Dn(n,r)))},b:function(){return _r(e,_r(a,Dn(r,n)))}}}}];LS<jD.length;LS++)ife(jD[LS]);var cye=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();se().get("IS_BROWSER")&&se().setPlatform("browser",new cye);var BS,uye=function(){return require("node-fetch")},dye=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return se().global.fetch!=null?se().global.fetch(t,n):(BS==null&&(BS=uye()),BS(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();se().get("IS_NODE")&&se().setPlatform("node",new dye);var BC={float32:4,int32:4,uint16:2,uint8:1,bool:1},I0=4;function LV(e,t){for(var n={},r=0,a=function(s){var l=s.name,c=s.dtype,u=s.shape,d=$e(u),f=void 0;if("quantization"in s){var p=s.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=BC[p.dtype],m=e.slice(r,r+d*v),g=p.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(c==="float32")f=Float32Array.from(g,function(C){return C*p.scale+p.min});else{if(c!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+c);f=Int32Array.from(g,function(C){return Math.round(C*p.scale+p.min)})}r+=d*v}else if(c==="string"){var y=$e(s.shape);f=[];for(var x=0;x<y;x++){var b=new Uint32Array(e.slice(r,r+I0))[0];r+=I0;var w=new Uint8Array(e.slice(r,r+b));f.push(w),r+=b}}else{var S=BC[c];if(m=e.slice(r,r+d*S),c==="float32")f=new Float32Array(m);else if(c==="int32")f=new Int32Array(m);else{if(c!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+c);f=new Uint8Array(m)}r+=d*S}n[l]=nr(f,u,c)},i=0,o=t;i<o.length;i++)a(o[i]);return n}function fye(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(t),a=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var UC=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function OD(e){return UC?Buffer.byteLength(e):new Blob([e]).size}function tA(e){var t=0;e.forEach(function(a){t+=a.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(a){n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function RD(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function _v(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:OD(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:OD(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var ha=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,r);o!==null&&a.push(o)}),a},e}(),Td="://",pl=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){U(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(Td)&&(t=t.slice(0,t.indexOf(Td))),U(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();U(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function wy(e){if(e.indexOf(Td)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+pl.getSchemes().join(","));return{scheme:e.split(Td)[0],path:e.split(Td)[1]}}function ID(e,t,n){return n===void 0&&(n=!1),je(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,d;return Oe(this,function(f){switch(f.label){case 0:return U(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),U((r=ha.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),U(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),a=r[0],U((i=ha.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),U(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),o=i[0],s=wy(e).scheme,l=wy(e).path,c=s===wy(e).scheme,[4,a.load()];case 1:return u=f.sent(),n&&c?[4,pl.getManager(s).removeModel(l)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,o.save(u)];case 4:return d=f.sent(),!n||c?[3,6]:[4,pl.getManager(s).removeModel(l)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var bc="models_store",tl="model_info_store";function BV(){if(!se().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function zC(e){var t=e.result;t.createObjectStore(bc,{keyPath:"modelPath"}),t.createObjectStore(tl,{keyPath:"modelPath"})}var Ad=function(){function e(t){if(this.indexedDB=BV(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return je(this,void 0,void 0,function(){return Oe(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return je(this,void 0,void 0,function(){return Oe(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return zC(o)},o.onsuccess=function(){var s=o.result;if(n==null){var l=s.transaction(bc,"readonly"),c=l.objectStore(bc).get(r.modelPath);c.onsuccess=function(){if(c.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(c.result.modelArtifacts)},c.onerror=function(m){return s.close(),i(c.error)},l.oncomplete=function(){return s.close()}}else{var u,d=_v(n),f=s.transaction(tl,"readwrite"),p=f.objectStore(tl),v=p.put({modelPath:r.modelPath,modelArtifactsInfo:d});v.onsuccess=function(){var m=(u=s.transaction(bc,"readwrite")).objectStore(bc).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});m.onsuccess=function(){return a({modelArtifactsInfo:d})},m.onerror=function(g){var y=(p=f.objectStore(tl)).delete(r.modelPath);y.onsuccess=function(){return s.close(),i(m.error)},y.onerror=function(x){return s.close(),i(m.error)}}},v.onerror=function(m){return s.close(),i(v.error)},f.oncomplete=function(){u==null?s.close():u.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),DD=function(e){return se().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ad.URL_SCHEME)?(t=e.slice(Ad.URL_SCHEME.length),new Ad(t)):null;var t};ha.registerSaveRouter(DD),ha.registerLoadRouter(DD);var hye=function(){function e(){this.indexedDB=BV()}return e.prototype.listModels=function(){return je(this,void 0,void 0,function(){var t=this;return Oe(this,function(n){return[2,new Promise(function(r,a){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return zC(i)},i.onsuccess=function(){var o=i.result,s=o.transaction(tl,"readonly"),l=s.objectStore(tl).getAll();l.onsuccess=function(){for(var c={},u=0,d=l.result;u<d.length;u++){var f=d[u];c[f.modelPath]=f.modelArtifactsInfo}r(c)},l.onerror=function(c){return o.close(),a(l.error)},s.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},e.prototype.removeModel=function(t){return je(this,void 0,void 0,function(){var n=this;return Oe(this,function(r){var a;return t=(a=t).startsWith(Ad.URL_SCHEME)?a.slice(Ad.URL_SCHEME.length):a,[2,new Promise(function(i,o){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return zC(s)},s.onsuccess=function(){var l,c=s.result,u=c.transaction(tl,"readwrite"),d=u.objectStore(tl),f=d.get(t);f.onsuccess=function(){if(f.result==null)return c.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=d.delete(t),v=function(){var m=(l=c.transaction(bc,"readwrite")).objectStore(bc).delete(t);m.onsuccess=function(){return i(f.result.modelArtifactsInfo)},m.onerror=function(g){return o(f.error)}};p.onsuccess=v,p.onerror=function(m){return v(),c.close(),o(f.error)}},f.onerror=function(p){return c.close(),o(f.error)},u.oncomplete=function(){l==null?c.close():l.oncomplete=function(){return c.close()}}},s.onerror=function(l){return o(s.error)}})]})})},e}();if(se().getBool("IS_BROWSER"))try{pl.registerManager(Ad.URL_SCHEME,new hye)}catch{}var Ro="/",zu="tensorflowjs_models",UV="info",pye="model_topology",mye="weight_specs",vye="weight_data",gye="model_metadata";function zV(e){return{info:[zu,e,UV].join(Ro),topology:[zu,e,pye].join(Ro),weightSpecs:[zu,e,mye].join(Ro),weightData:[zu,e,vye].join(Ro),modelMetadata:[zu,e,gye].join(Ro)}}function yye(e){var t=e.split(Ro);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Ro)}var Pd=function(){function e(t){if(!se().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=zV(this.modelPath)}return e.prototype.save=function(t){return je(this,void 0,void 0,function(){var n,r,a;return Oe(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=_v(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(UC)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),l="",c=0,u=s.length;c<u;c++)l+=String.fromCharCode(s[c]);return btoa(l)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return je(this,void 0,void 0,function(){var t,n,r,a,i,o,s;return Oe(this,function(l){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(c){if(UC){var u=Buffer.from(c,"base64");return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)}for(var d=atob(c),f=new Uint8Array(d.length),p=0;p<d.length;++p)f.set([d.charCodeAt(p)],p);return f.buffer}(s),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),MD=function(e){return se().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Pd.URL_SCHEME)?(t=e.slice(Pd.URL_SCHEME.length),new Pd(t)):null;var t};ha.registerSaveRouter(MD),ha.registerLoadRouter(MD);var xye=function(){function e(){U(se().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),U(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return je(this,void 0,void 0,function(){var t,n,r,a,i,o;return Oe(this,function(s){for(t={},n=zu+Ro,r=Ro+UV,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=yye(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return je(this,void 0,void 0,function(){var n,r;return Oe(this,function(a){var i;if(t=(i=t).startsWith(Pd.URL_SCHEME)?i.slice(Pd.URL_SCHEME.length):i,n=zV(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(se().getBool("IS_BROWSER"))try{pl.registerManager(Pd.URL_SCHEME,new xye)}catch{}var bye="model",wye=".json",Sye=".weights.bin";function $D(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var US=function(){function e(t){if(!se().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=bye),this.modelTopologyFileName=t+wye,this.weightDataFileName=t+Sye}return e.prototype.save=function(t){return je(this,void 0,void 0,function(){var n,r,a,i,o,s;return Oe(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,$D(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,$D(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:_v(t)}]}})})},e.URL_SCHEME="downloads://",e}(),_ye=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return je(this,void 0,void 0,function(){var t,n,r=this;return Oe(this,function(a){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,o){var s=new FileReader;s.onload=function(l){var c=JSON.parse(l.target.result),u=c.modelTopology;if(u!=null){n.length===0&&i({modelTopology:u});var d=c.weightsManifest;if(d!=null){var f;try{f=r.checkManifestAndWeightFiles(d,n)}catch(g){return void o(g)}var p=[],v=[],m=[];d.forEach(function(g){g.paths.forEach(function(y){v.push(y),m.push(null)}),p.push.apply(p,g.weights)}),d.forEach(function(g){g.paths.forEach(function(y){var x=new FileReader;x.onload=function(b){var w=b.target.result,S=v.indexOf(y);m[S]=w,m.indexOf(null)===-1&&i({modelTopology:u,weightSpecs:p,weightData:tA(m),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},x.onerror=function(b){return o("Failed to weights data from file of path '"+y+"'.")},x.readAsArrayBuffer(f[y])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(l){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],a=n.map(function(l){return RD(l.name)}),i={},o=0,s=t;o<s.length;o++)s[o].paths.forEach(function(l){var c=RD(l);if(r.indexOf(c)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),a.indexOf(c)===-1)throw new Error("Weight file with basename '"+c+"' is not provided.");i[l]=n[a.indexOf(c)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},e}();function FD(e,t,n,r){(function(i){U(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){U(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),U(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),U(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(n=n??0,r=r??1);var a=0;return Promise.all(e.map(function(i){return i.then(function(o){var s=n+ ++a/e.length*(r-n);return t(s),o}),i}))}function WV(e,t){return je(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u;return Oe(this,function(d){switch(d.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?se().platform.fetch:t.fetchFunc,r=e.map(function(f){return n(f,t.requestInit,{isBinary:!0})}),a=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=d.sent(),[3,4];case 2:return[4,FD(r,t.onProgress,a,i)];case 3:o=d.sent(),d.label=4;case 4:return s=o.map(function(f){return f.arrayBuffer()}),l=.5,c=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return u=d.sent(),[3,8];case 6:return[4,FD(s,t.onProgress,l,c)];case 7:u=d.sent(),d.label=8;case 8:return[2,u]}})})}function LD(e){var t=this;return function(n,r,a){return r===void 0&&(r=""),je(t,void 0,void 0,function(){var i,o,s,l,c,u,d,f,p,v;return Oe(this,function(m){switch(m.label){case 0:if(i=n.map(function(){return!1}),o={},s=a!=null?a.map(function(){return!1}):[],l=[],n.forEach(function(g,y){var x=0;g.weights.forEach(function(b){var w="quantization"in b?b.quantization.dtype:b.dtype,S=BC[w]*$e(b.shape),C=function(){i[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:b,groupOffset:x,sizeBytes:S})};a!=null?a.forEach(function(E,k){E===b.name&&(C(),s[k]=!0)}):C(),l.push(b.name),x+=S})}),!s.every(function(g){return g}))throw c=a.filter(function(g,y){return!s[y]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return u=i.reduce(function(g,y,x){return y&&g.push(x),g},[]),d=[],u.forEach(function(g){n[g].paths.forEach(function(y){var x=r+(r.endsWith("/")?"":"/")+y;d.push(x)})}),[4,e(d)];case 1:return f=m.sent(),p={},v=0,u.forEach(function(g){for(var y=n[g].paths.length,x=0,b=0;b<y;b++)x+=f[v+b].byteLength;for(var w=new ArrayBuffer(x),S=new Uint8Array(w),C=0,E=0;E<y;E++){var k=new Uint8Array(f[v+E]);S.set(k,C),C+=k.byteLength}o[g].forEach(function(N){var T=LV(w.slice(N.groupOffset,N.groupOffset+N.sizeBytes),[N.manifestEntry]);for(var A in T)p[A]=T[A]}),v+=y}),[2,p]}})})}}ha.registerSaveRouter(function(e){return se().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(US.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new US(t)}(e.slice(US.URL_SCHEME.length)):null});var VV=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(U(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=se().platform.fetch,U(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&U(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return je(this,void 0,void 0,function(){var n,r,a,i;return Oe(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:_v(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return je(this,void 0,void 0,function(){var t,n,r,a,i,o,s,l,c,u,d,f;return Oe(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return n=p.sent(),[3,5];case 4:throw p.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,l=n.format,c=n.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:f=p.sent(),u=f[0],d=f[1],p.label=7;case 7:return[2,{modelTopology:a,weightSpecs:u,weightData:d,userDefinedMetadata:c,generatedBy:o,convertedBy:s,format:l}]}})})},e.prototype.loadWeights=function(t){return je(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,d,f;return Oe(this,function(p){switch(p.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(v){var m=v.lastIndexOf("/"),g=v.lastIndexOf("?"),y=v.substring(0,m),x=g>m?v.substring(g):"";return[y+"/",x]}(n),a=r[0],i=r[1],o=this.weightPathPrefix||a,s=[],l=0,c=t;l<c.length;l++)u=c[l],s.push.apply(s,u.weights);return d=[],t.forEach(function(v){v.paths.forEach(function(m){d.push(o+m+i)})}),[4,WV(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=p.sent(),[2,[s,tA(f)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function WC(e){return e.match(VV.URL_SCHEME_REGEX)!=null}var BD=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return WC(n)}):WC(e))?VC(e,{onProgress:t}):null};function VC(e,t){return new VV(e,t)}ha.registerSaveRouter(BD),ha.registerLoadRouter(BD);var zS=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return je(this,void 0,void 0,function(){return Oe(this,function(t){return[2,this.modelArtifacts]})})},e}(),Cye=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return je(this,void 0,void 0,function(){return Oe(this,function(n){return[2,this.saveHandler(t)]})})},e}(),HV=Object.freeze({browserFiles:function(e){return new _ye(e)},browserHTTPRequest:function(e,t){return VC(e,t)},concatenateArrayBuffers:tA,decodeWeights:LV,encodeWeights:function(e,t){return je(this,void 0,void 0,function(){var n,r,a,i,o,s=this;return Oe(this,function(l){switch(l.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map(function(c){return c.name}):Object.keys(e),i=function(c){var u=a[c],d=Array.isArray(e)?e[c].tensor:e[u];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+u+"': "+d.dtype);var f={name:u,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var p=new Promise(function(v){return je(s,void 0,void 0,function(){var m,g,y,x,b,w,S;return Oe(this,function(C){switch(C.label){case 0:return[4,d.bytes()];case 1:for(m=C.sent(),g=m.reduce(function(E,k){return E+k.length},0)+I0*m.length,y=new Uint8Array(g),x=0,b=0;b<m.length;b++)w=m[b],S=new Uint8Array(new Uint32Array([w.length]).buffer),y.set(S,x),x+=I0,y.set(w,x),x+=w.length;return v(y),[2]}})})});r.push(p)}else r.push(d.data());t!=null&&(f.group=t),n.push(f)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:fye(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new zS(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new zS({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new zS({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return ha.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:_v,getSaveHandlers:function(e){return ha.getSaveHandlers(e)},http:VC,isHTTPScheme:WC,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),je(this,void 0,void 0,function(){return Oe(this,function(a){return[2,LD(function(i){return WV(i,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return ha.registerLoadRouter(e)},registerSaveRouter:function(e){return ha.registerSaveRouter(e)},weightsLoaderFactory:LD,withSaveHandler:function(e){return new Cye(e)},copyModel:function(e,t){return je(this,void 0,void 0,function(){return Oe(this,function(n){return[2,ID(e,t,!1)]})})},listModels:function(){return je(this,void 0,void 0,function(){var e,t,n,r,a,i,o;return Oe(this,function(s){switch(s.label){case 0:e=pl.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,pl.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+Td+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return je(this,void 0,void 0,function(){return Oe(this,function(n){return[2,ID(e,t,!0)]})})},removeModel:function(e){return je(this,void 0,void 0,function(){var t;return Oe(this,function(n){return t=wy(e),[2,pl.getManager(t.scheme).removeModel(t.path)]})})}}),ju;H({confusionMatrix_:function(e,t,n){var r=F(e,"labels","confusionMatrix"),a=F(t,"predictions","confusionMatrix");U(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),U(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),U(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),U(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),U(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=DC(r.asType("int32"),n),o=DC(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}});var Eye=H({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(m6("FromPixels",Y.backendName)!=null)return Y.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,l,c=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=c[0],d=c[1];if(o?s=e.getContext("2d").getImageData(0,0,u,d).data:r||n?s=e.data:(i||a)&&(ju==null&&(ju=document.createElement("canvas").getContext("2d")),ju.canvas.width=u,ju.canvas.height=d,ju.drawImage(e,0,0,u,d),s=ju.getImageData(0,0,u,d).data),t===4)l=new Int32Array(s);else{var f=u*d;l=new Int32Array(f*t);for(var p=0;p<f;p++)for(var v=0;v<t;++v)l[p*t+v]=s[4*p+v]}return PT(l,[d,u,t],"int32")}}),nA=Object.freeze({toPixels:function(e,t){return je(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k;return Oe(this,function(N){switch(N.label){case 0:if(n=F(e,"img","toPixels"),e instanceof nn||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=n.rank===2?1:n.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=N.sent(),l=n.min(),c=n.max(),[4,Promise.all([l.data(),c.data()])];case 2:if(u=N.sent(),d=u[0],f=u[1],p=d[0],v=f[0],l.dispose(),c.dispose(),n.dtype==="float32"){if(p<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+v+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+v+"].")}for(m=n.dtype==="float32"?255:1,g=new Uint8ClampedArray(i*a*4),y=0;y<a*i;++y)x=void 0,b=void 0,w=void 0,S=void 0,o===1?(x=s[y]*m,b=s[y]*m,w=s[y]*m,S=255):o===3?(x=s[3*y]*m,b=s[3*y+1]*m,w=s[3*y+2]*m,S=255):o===4&&(x=s[4*y]*m,b=s[4*y+1]*m,w=s[4*y+2]*m,S=s[4*y+3]*m),g[(C=4*y)+0]=Math.round(x),g[C+1]=Math.round(b),g[C+2]=Math.round(w),g[C+3]=Math.round(S);return t!=null&&(t.width=i,t.height=a,E=t.getContext("2d"),k=new ImageData(g,i,a),E.putImageData(k,0,0)),n!==e&&n.dispose(),[2,g]}})})},fromPixels:Eye}),kye=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),Nye=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function uu(e){U(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),U(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),U(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Nye.register(e)}var du=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Ai(t,e),t.prototype.minimize=function(n,r,a){r===void 0&&(r=!1);var i=this.computeGradients(n,a),o=i.value,s=i.grads;if(a!=null){var l=a.map(function(c){return{name:c.name,tensor:s[c.name]}});this.applyGradients(l)}else this.applyGradients(s);return Kr(s),r?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return $he(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&Kr(this.iterations_)},t.prototype.saveIterations=function(){return je(this,void 0,void 0,function(){return Oe(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Se(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){return Oe(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){return Oe(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return je(this,void 0,void 0,function(){var r;return Oe(this,function(a){switch(a.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,n.slice(1)]}})})},t}(kye);Object.defineProperty(du,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var Tye=function(e){function t(n,r,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=Y.backend.epsilon()),i}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=Y.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:ke(function(){return gt(o).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:ke(function(){return gt(o).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var l=r.accumulatedGrads[i].variable,c=r.accumulatedUpdates[i].variable;ke(function(){var u=l.mul(r.rho).add(s.square().mul(1-r.rho)),d=c.add(r.epsilon).sqrt().div(l.add(r.epsilon).sqrt()).mul(s),f=c.mul(r.rho).add(d.square().mul(1-r.rho));l.assign(u),c.assign(f);var p=d.mul(-r.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Kr(this.accumulatedGrads.map(function(n){return n.variable})),Kr(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){var r;return Oe(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(du);uu(Tye);var Aye=function(e){function t(n,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=n,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=Y.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:ke(function(){return oo(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var l=r.accumulatedGrads[i].variable;ke(function(){var c=l.add(s.square());l.assign(c);var u=s.div(c.add(Y.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&Kr(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){return Oe(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(du);uu(Aye);var Pye=function(e){function t(n,r,a,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],ke(function(){o.accBeta1=Se(r).variable(),o.accBeta2=Se(a).variable()}),i==null&&(o.epsilon=Y.backend.epsilon()),o}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);ke(function(){var i=Dn(1,r.accBeta1),o=Dn(1,r.accBeta2);a.forEach(function(s,l){var c=Y.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:ke(function(){return gt(c).variable(!1)})}),r.accumulatedSecondMoment[l]==null&&(r.accumulatedSecondMoment[l]={originalName:s+"/v",variable:ke(function(){return gt(c).variable(!1)})});var u=Array.isArray(n)?n[l].tensor:n[s];if(u!=null){var d=r.accumulatedFirstMoment[l].variable,f=r.accumulatedSecondMoment[l].variable,p=d.mul(r.beta1).add(u.mul(1-r.beta1)),v=f.mul(r.beta2).add(u.square().mul(1-r.beta2)),m=p.div(i),g=v.div(o);d.assign(p),f.assign(v);var y=m.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(y)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Kr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Kr(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){var r,a=this;return Oe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),ke(function(){a.accBeta1.assign(O0(a.beta1,a.iterations_+1)),a.accBeta2.assign(O0(a.beta2,a.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(du);uu(Pye);var jye=function(e){function t(n,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=a,s.epsilon=i,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],ke(function(){s.iteration=Se(0).variable(),s.accBeta1=Se(r).variable()}),i==null&&(s.epsilon=Y.backend.epsilon()),s}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);ke(function(){var i=Dn(1,r.accBeta1),o=mi(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(s,l){var c=Y.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:gt(c).variable(!1)}),r.accumulatedWeightedInfNorm[l]==null&&(r.accumulatedWeightedInfNorm[l]={originalName:s+"/v",variable:gt(c).variable(!1)});var u=Array.isArray(n)?n[l].tensor:n[s];if(u!=null){var d=r.accumulatedFirstMoment[l].variable,f=r.accumulatedWeightedInfNorm[l].variable,p=d.mul(r.beta1).add(u.mul(1-r.beta1)),v=f.mul(r.beta2),m=u.abs(),g=v.maximum(m);d.assign(p),f.assign(g);var y=o.div(i).mul(p.div(g.add(r.epsilon))).add(c);c.assign(y)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Kr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Kr(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){return Oe(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){return Oe(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(du);uu(jye);var GV=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=Array.isArray(n)?n[i].tensor:n[a];if(o!=null){var s=Y.registeredVariables[a];ke(function(){var l=r.c.mul(o).add(s);s.assign(l)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Qfe(Se(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){return Oe(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(du);uu(GV);var Oye=function(e){function t(n,r,a){a===void 0&&(a=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=Se(i.momentum),i}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=Y.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:ke(function(){return gt(o).variable(!1)})});var s=r.accumulations[i].variable,l=Array.isArray(n)?n[i].tensor:n[a];l!=null&&ke(function(){var c,u=r.m.mul(s).add(l);c=r.useNesterov?r.c.mul(l.add(u.mul(r.m))).add(o):r.c.mul(u).add(o),s.assign(u),o.assign(c)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Kr(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){return Oe(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(GV);uu(Oye);var Rye=function(e){function t(n,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=a,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,i==null&&(s.epsilon=Y.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Ai(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=Y.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:ke(function(){return gt(o).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:ke(function(){return gt(o).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:ke(function(){return gt(o).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var l=r.accumulatedMeanSquares[i].variable,c=r.accumulatedMoments[i].variable;ke(function(){var u=l.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[i].variable,f=d.mul(r.decay).add(s.mul(1-r.decay)),p=c.mul(r.momentum).add(s.mul(r.learningRate).div(u.sub(f.square().add(r.epsilon)).sqrt()));l.assign(u),d.assign(f),c.assign(p);var v=o.sub(p);o.assign(v)}else{var m=l.mul(r.decay).add(s.square().mul(1-r.decay));p=c.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),l.assign(m),c.assign(p),v=o.sub(p),o.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Kr(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Kr(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Kr(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return je(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return je(this,void 0,void 0,function(){var r;return Oe(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(du);uu(Rye);nn.prototype.squaredDifference=function(e){return sV(this,e)},re=iye;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var HC=function(e,t){return HC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},HC(e,t)};function Ze(e,t){HC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var gr=function(){return gr=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gr.apply(this,arguments)};function Be(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):a(u.value).then(s,l)}c((r=r.apply(e,[])).next())})}function Ue(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,a=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],a=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function dp(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var Dc=function(){function e(t,n){if(!Mc(t)||!Mc(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function Jb(e,t){return e instanceof nn&&e.shape.length===t}function Iye(e){return Jb(e,2)}function Zb(e){return Jb(e,3)}function ml(e){return Jb(e,4)}function Dye(e){return e%1!==0}function UD(e){return e%2===0}function Mye(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function zD(e){return e&&e.width&&e.height}function $ye(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new Dc(Math.round(n*a),Math.round(r*a))}function rA(e){return e.reduce(function(t,n){return t.add(n)},new kt(0,0)).div(new kt(e.length,e.length))}function im(e,t,n){return Array(e).fill(0).map(function(r,a){return t+a*n})}function Mc(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function WD(e){return Mc(e)&&0<=e&&e<=1}var kt=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Nl=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(Mc),i=[r.x,r.y,r.width,r.height].every(Mc);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],l=o[1],c=o[2],u=o[3];e.assertIsValidBox({x:s,y:l,width:c,height:u},"Box.constructor",n),this._x=s,this._y=l,this._width=c,this._height=u}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Mc)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new kt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new kt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new kt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new kt(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),n=t[0],r=t[1],a=t[2],i=t[3];return new e({x:n,y:r,width:a,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),n=t[0],r=t[1],a=t[2],i=t[3];return new e({x:n,y:r,width:a,height:i})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,i=t.height,o=Math.abs(a-i);return a<i&&(n-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:n,y:r,width:a,height:i})},e.prototype.rescale=function(t){var n=zD(t)?t.width:t,r=zD(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],a=r[0],i=r[1],o=r[2],s=r[3];return new e({x:a,y:i,width:o,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,i=r.y,o=r.right,s=r.bottom,l=Math.max(a,0),c=Math.max(i,0),u=o-l,d=s-c,f=Math.min(u,t-l),p=Math.min(d,n-c);return new e({x:l,y:c,width:f,height:p}).floor()},e.prototype.shift=function(t,n){var r=this,a=r.width,i=r.height,o=this.x+t,s=this.y+n;return new e({x:o,y:s,width:a,height:i})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,a=this.height+1,i=1,o=1,s=r,l=a,c=this.left,u=this.top,d=this.right,f=this.bottom;return d>n&&(s=-d+n+r,d=n),f>t&&(l=-f+t+a,f=t),c<1&&(l=2-c,c=1),u<1&&(l=2-u,u=1),{dy:o,edy:l,dx:i,edx:s,y:u,ey:f,x:c,ex:d,w:r,h:a}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),ew=function(e){Ze(t,e);function t(n,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{left:n,top:r,right:a,bottom:i},o)||this}return t}(Nl),qV=function(){function e(t,n,r,a,i){this._imageDims=new Dc(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new Nl(a).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Nl(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),ji=function(e){Ze(t,e);function t(n,r,a){return e.call(this,n,n,"",r,a)||this}return t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r),i=a.score,o=a.relativeBox,s=a.imageDims;return new t(i,o,s)},t}(qV);function Fye(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*a;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function Lye(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,l){return l<s?l:s},1/0),a=n.reduce(function(s,l){return l<s?l:s},1/0),i=t.reduce(function(s,l){return s<l?l:s},0),o=n.reduce(function(s,l){return s<l?l:s},0);return new ew(r,a,i,o)}function om(e,t,n,r){r===void 0&&(r=!0);for(var a=t.map(function(s,l){return{score:s,boxIndex:l}}).sort(function(s,l){return s.score-l.score}).map(function(s){return s.boxIndex}),i=[],o=function(){var s=a.pop();i.push(s);for(var l=a,c=[],u=0;u<l.length;u++){var d=l[u],f=e[s],p=e[d];c.push(Fye(f,p,r))}a=a.filter(function(v,m){return c[m]<=n})};a.length>0;)o();return i}function Cv(e,t){return ke(function(){var n=t[0],r=t[1],a=t[2],i=oo(dp(e.shape.slice(0,3),[1]),n),o=oo(dp(e.shape.slice(0,3),[1]),r),s=oo(dp(e.shape.slice(0,3),[1]),a),l=On([i,o,s],3);return Dn(e,l)})}function Bye(e,t){return t===void 0&&(t=!1),ke(function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(t?.5:1)),s=r>a?2:1,l=function(p){var v=e.shape.slice();return v[s]=p,oo(v,0)},c=l(o),u=i-c.shape[s],d=t&&u?l(u):null,f=[d,e,c].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return On(f,s)})}function WS(e){return 1/(1+Math.exp(-e))}var aA=function(e){Ze(t,e);function t(n,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{x:n,y:r,width:a,height:i},o)||this}return t}(Nl),Uye=.5,zye=.43,Wye=.45,sm=function(){function e(t,n,r){r===void 0&&(r=new kt(0,0));var a=n.width,i=n.height;this._imgDims=new Dc(a,i),this._shift=r,this._positions=t.map(function(o){return o.mul(new kt(a,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new kt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new kt(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new kt(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof ji?t.box.floor():new Nl(t);return this.shiftBy(r.x,r.y).align(null,n)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],a=t[2],i=function(d){return a.sub(d).magnitude()},o=(i(n)+i(r))/2,s=Math.floor(o/Wye),l=rA(t),c=Math.floor(Math.max(0,l.x-Uye*s)),u=Math.floor(Math.max(0,l.y-zye*s));return new aA(c,u,Math.min(s,this.imageWidth+c),Math.min(s,this.imageHeight+u))},e.prototype.alignMinBbox=function(t){var n=Lye(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Vye=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],rA([n[3],n[4]])]},t}(sm),Hye=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(rA)},t}(sm),VD=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+Mye(this.distance)+")":"")},e}(),HD=function(e){Ze(t,e);function t(n,r){var a=e.call(this,n)||this;return a._label=r,a}return t.assertIsValidLabeledBox=function(n,r){if(Nl.assertIsValidBox(n,r),!Mc(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Nl),jg=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}();(function(e){Ze(t,e);function t(n,r,a,i){var o=e.call(this,n,r)||this;return o._score=a,o._classScore=i,o}return t.assertIsValidPredictedBox=function(n,r){if(HD.assertIsValidLabeledBox(n,r),!WD(n.score)||!WD(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(HD);function KV(e){return e.detection instanceof ji}function lm(e,t){var n={detection:t};return Object.assign({},e,n)}function XV(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function YV(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(a,i){e.readFile(r,function(o,s){return o?i(o):a(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function QV(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=YV();return gr({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:n,createImageElement:r,fetch:a},i)}function JV(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function ZV(){return typeof global=="object"&&typeof require=="function"&&typeof l7<"u"&&typeof process<"u"&&!!process.version}var Nn;function Gye(){if(!Nn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Nn}function GC(e){Nn=e}function iA(){JV()&&GC(XV()),ZV()&&GC(QV())}function qye(e){if(Nn||iA(),!Nn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?Nn.Canvas:t,r=e.Image,a=r===void 0?Nn.Image:r;Nn.Canvas=n,Nn.Image=a,Nn.createCanvasElement=e.createCanvasElement||function(){return new n},Nn.createImageElement=e.createImageElement||function(){return new a},Nn.ImageData=e.ImageData||Nn.ImageData,Nn.Video=e.Video||Nn.Video,Nn.fetch=e.fetch||Nn.fetch,Nn.readFile=e.readFile||Nn.readFile}var Er={getEnv:Gye,setEnv:GC,initialize:iA,createBrowserEnv:XV,createFileSystem:YV,createNodejsEnv:QV,monkeyPatch:qye,isBrowser:JV,isNodejs:ZV};iA();function e8(e){return!Er.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Kc(e){var t=Er.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var a=e8(e);if(!(a instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var GD;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(GD||(GD={}));function t8(e){var t=Er.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Kye(e){return new Promise(function(t,n){if(e instanceof Er.getEnv().Canvas||t8(e))return t();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),n(i))}e.addEventListener("load",r),e.addEventListener("error",a)})}function oA(e){var t=Er.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Dc(e.naturalWidth,e.naturalHeight):e instanceof r?new Dc(e.videoWidth,e.videoHeight):new Dc(e.width,e.height)}function tw(e){var t=e.width,n=e.height,r=Er.getEnv().createCanvasElement,a=r();return a.width=t,a.height=n,a}function sA(e,t){var n=Er.getEnv().ImageData;if(!(e instanceof n)&&!t8(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=oA(e),a=r.width,i=r.height,o=tw({width:a,height:i});return e instanceof n?Kc(o).putImageData(e,0,0):Kc(o).drawImage(e,0,0,a,i),o}function Xye(e,t){return Be(this,void 0,void 0,function(){var n,r,a,i,o,s;return Ue(this,function(l){switch(l.label){case 0:return n=Er.getEnv().createCanvasElement(),r=e.shape.slice(ml(e)?1:0),a=r[0],i=r[1],o=r[2],s=ke(function(){return e.as3D(a,i,o).toInt()}),[4,nA.toPixels(s,n)];case 1:return l.sent(),s.dispose(),[2,n]}})})}function qD(e){var t=Er.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}function Yye(e,t,n){n===void 0&&(n=!1);var r=Er.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=oA(e),s=t/Math.max(o.height,o.width),l=s*o.width,c=s*o.height,u=tw({width:t,height:t}),d=e instanceof i?e:sA(e),f=Math.abs(l-c)/2,p=n&&l<c?f:0,v=n&&c<l?f:0;return Kc(u).drawImage(d,p,v,l,c),u}var D0=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(a,i){if(Zb(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(ml(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var s=a instanceof Er.getEnv().Canvas?a:sA(a);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return im(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return $ye({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,ke(function(){var a=im(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof nn){var l=ml(s)?s:s.expandDims();return l=Bye(l,n),(l.shape[1]!==t||l.shape[2]!==t)&&(l=YT.resizeBilinear(l,[t,t])),l.as3D(t,t,3)}if(s instanceof Er.getEnv().Canvas)return nA.fromPixels(Yye(s,t,n));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=ga(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,t,t,3);return i})},e}();function Hn(e){return Be(this,void 0,void 0,function(){var t,n,r;return Ue(this,function(a){switch(a.label){case 0:if(e instanceof D0)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=t.map(e8),r.forEach(function(i,o){if(!qD(i)&&!Zb(i)&&!ml(i))throw typeof t[o]=="string"?new Error("toNetInput -"+n(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+n(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(ml(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return qD(i)&&Kye(i)}))];case 1:return a.sent(),[2,new D0(r,Array.isArray(e))]}})})}function lA(e,t){return Be(this,void 0,void 0,function(){var n,r,a,i,o,s,l;return Ue(this,function(c){switch(c.label){case 0:return n=Er.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Hn(e)];case 1:if(a=c.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof n?(o=i,[3,4]):[3,2];case 2:return[4,Xye(i)];case 3:o=c.sent(),c.label=4;case 4:r=o,c.label=5;case 5:return s=Kc(r),l=t.map(function(u){return u instanceof ji?u.forSize(r.width,r.height).box.floor():u}).map(function(u){return u.clipAtImageBorders(r.width,r.height)}),[2,l.map(function(u){var d=u.x,f=u.y,p=u.width,v=u.height,m=tw({width:p,height:v});return Kc(m).putImageData(s.getImageData(d,f,p,v),0,0),m})]}})})}function cA(e,t){return Be(this,void 0,void 0,function(){return Ue(this,function(n){if(!Zb(e)&&!ml(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(ml(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,ke(function(){var r=e.shape.slice(ml(e)?1:0),a=r[0],i=r[1],o=r[2],s=t.map(function(c){return c instanceof ji?c.forSize(i,a).box:c}).map(function(c){return c.clipAtImageBorders(i,a)}),l=s.map(function(c){var u=c.x,d=c.y,f=c.width,p=c.height;return TV(e.as3D(a,i,o),[d,u,0],[p,f,o])});return l})]})})}function Qye(e,t){return Be(this,void 0,void 0,function(){var n,r;return Ue(this,function(a){switch(a.label){case 0:return n=Er.getEnv().fetch,[4,n(e,t)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Jye(e){return Be(this,void 0,void 0,function(){return Ue(this,function(t){switch(t.label){case 0:return[4,Qye(e)];case 1:return[2,t.sent().json()]}})})}function n8(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var a=e.split("/").filter(function(s){return s}),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function Zye(e,t){return Be(this,void 0,void 0,function(){var n,r,a,i;return Ue(this,function(o){switch(o.label){case 0:return n=n8(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,Jye(r)];case 1:return i=o.sent(),[2,HV.loadWeights(i,a)]}})})}function e0e(e,t,n){n===void 0&&(n=!1);var r=n?oA(t):t,a=r.width,i=r.height;return e.width=a,e.height=i,{width:a,height:i}}var vs=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,a=n.objProp;return r[a]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof af})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof af)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,a=n.tensor;t.reassignParamFromPath(r,a.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,a=n.tensor,i=nr(a.dataSync());a.dispose(),t.reassignParamFromPath(r,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return Be(this,void 0,void 0,function(){return Ue(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Be(this,void 0,void 0,function(){var n;return Ue(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Zye(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return Be(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,d;return Ue(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Er.getEnv().readFile,r=n8(t,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(p){return Promise.all(p.map(function(v){return n(v).then(function(m){return m.buffer})}))},s=HV.weightsLoaderFactory(o),u=(c=JSON).parse,[4,n(a)];case 1:return l=u.apply(c,[f.sent().toString()]),[4,s(l,i)];case 2:return d=f.sent(),this.loadFromWeightMap(d),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=n.obj,a=n.objProp;if(!r||!a||!(r[a]instanceof nn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:a}},e}();function pa(e,t,n){return ke(function(){var r=HT(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=ct(r,t.bias),r})}function VS(e,t,n){return n===void 0&&(n=!1),ke(function(){var r=on(n?ct(Ga(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):pa(e,t.conv0,[2,2])),a=pa(r,t.conv1,[1,1]),i=on(ct(r,a)),o=pa(i,t.conv2,[1,1]);return on(ct(r,ct(a,o)))})}function Og(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),ke(function(){var a=on(n?ct(Ga(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):pa(e,t.conv0,r?[2,2]:[1,1])),i=pa(a,t.conv1,[1,1]),o=on(ct(a,i)),s=pa(o,t.conv2,[1,1]),l=on(ct(a,ct(i,s))),c=pa(l,t.conv3,[1,1]);return on(ct(a,ct(i,ct(s,c))))})}function Ci(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),ke(function(){var a=ct(Ga(e,t.filters,[1,1],n),t.bias);return r?on(a):a})}function gs(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function nw(e,t){return function(n,r,a,i){var o=Ur(e(n*r*a*a),[a,a,n,r]),s=Sn(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}}function uA(e,t){return function(n,r,a){var i=hl(e(n*r),[n,r]),o=Sn(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var r8=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function dA(e,t){return function(n,r,a){var i=Ur(e(9*n),[3,3,n,1]),o=Ur(e(n*r),[1,1,n,r]),s=Sn(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new r8(i,o,s)}}function fA(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new r8(n,r,a)}}function Ll(e,t){return function(n,r,a){var i=e[n];if(!Jb(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:a||n}),i}}function ys(e){var t=e;function n(a){var i=t.slice(0,a);return t=t.slice(a),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function a8(e,t){var n=nw(e,t),r=dA(e,t);function a(o,s,l,c){c===void 0&&(c=!1);var u=c?n(o,s,3,l+"/conv0"):r(o,s,l+"/conv0"),d=r(s,s,l+"/conv1"),f=r(s,s,l+"/conv2");return{conv0:u,conv1:d,conv2:f}}function i(o,s,l,c){c===void 0&&(c=!1);var u=a(o,s,l,c),d=u.conv0,f=u.conv1,p=u.conv2,v=r(s,s,l+"/conv3");return{conv0:d,conv1:f,conv2:p,conv3:v}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function t0e(e){var t=[],n=ys(e),r=n.extractWeights,a=n.getRemainingWeights,i=a8(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),l=i(64,128,"dense2"),c=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l,dense3:c}}}function i8(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function o8(e,t){var n=Ll(e,t),r=i8(n),a=fA(n);function i(s,l){l===void 0&&(l=!1);var c=l?r(s+"/conv0"):a(s+"/conv0"),u=a(s+"/conv1"),d=a(s+"/conv2");return{conv0:c,conv1:u,conv2:d}}function o(s,l){l===void 0&&(l=!1);var c=l?r(s+"/conv0"):a(s+"/conv0"),u=a(s+"/conv1"),d=a(s+"/conv2"),f=a(s+"/conv3");return{conv0:c,conv1:u,conv2:d,conv3:f}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function n0e(e){var t=[],n=o8(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return gs(e,t),{params:r,paramMappings:t}}var s8=function(e){Ze(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return ke(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Cv(a,i).div(Se(255)),s=Og(o,r.dense0,!0);return s=Og(s,r.dense1),s=Og(s,r.dense2),s=Og(s,r.dense3),s=Sv(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return n0e(n)},t.prototype.extractParams=function(n){return t0e(n)},t}(vs);function Ki(e,t){return ke(function(){return ct(Xb(e,t.weights),t.bias)})}function r0e(e,t,n){var r=[],a=ys(e),i=a.extractWeights,o=a.getRemainingWeights,s=uA(i,r),l=s(t,n,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:l}}}function a0e(e){var t=[],n=Ll(e,t);function r(i){var o=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:o,bias:s}}var a={fc:r("fc")};return gs(e,t),{params:a,paramMappings:t}}function l8(e){var t={},n={};return Object.keys(e).forEach(function(r){var a=r.startsWith("fc")?n:t;a[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var c8=function(e){Ze(t,e);function t(n,r){var a=e.call(this,n)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return ke(function(){var i=n instanceof D0?r.faceFeatureExtractor.forwardInput(n):n;return Ki(i.as2D(i.shape[0],-1),a.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return r0e(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=l8(n),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),a0e(i)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},t}(vs),KD=["neutral","happy","sad","angry","fearful","disgusted","surprised"],i0e=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);KD.forEach(function(r,a){n[r]=t[a]})}return e.prototype.asSortedArray=function(){var t=this;return KD.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),o0e=function(e){Ze(t,e);function t(n){return n===void 0&&(n=new s8),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return ke(function(){return ps(r.runNet(n))})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictExpressions=function(n){return Be(this,void 0,void 0,function(){var r,a,i,o,s=this;return Ue(this,function(l){switch(l.label){case 0:return[4,Hn(n)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return a=l.sent(),[4,Promise.all(Rn(a).map(function(c){return Be(s,void 0,void 0,function(){var u;return Ue(this,function(d){switch(d.label){case 0:return[4,c.data()];case 1:return u=d.sent(),c.dispose(),[2,u]}})})}))];case 3:return i=l.sent(),a.dispose(),o=i.map(function(c){return new i0e(c)}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(c8);function u8(e,t){var n={expressions:t};return Object.assign({},e,n)}function d8(e){return KV(e)&&e.landmarks instanceof sm&&e.unshiftedLandmarks instanceof sm&&e.alignedRect instanceof ji}function rw(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o=new ji(e.detection.score,a.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,s)}function s0e(e,t){var n=nw(e,t),r=dA(e,t);function a(o,s,l){var c=r(o,s,l+"/separable_conv0"),u=r(s,s,l+"/separable_conv1"),d=n(o,s,1,l+"/expansion_conv");return{separable_conv0:c,separable_conv1:u,expansion_conv:d}}function i(o,s){var l=r(o,o,s+"/separable_conv0"),c=r(o,o,s+"/separable_conv1"),u=r(o,o,s+"/separable_conv2");return{separable_conv0:l,separable_conv1:c,separable_conv2:u}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function l0e(e,t){var n=[],r=ys(e),a=r.extractWeights,i=r.getRemainingWeights,o=s0e(a,n),s=o.extractConvParams,l=o.extractSeparableConvParams,c=o.extractReductionBlockParams,u=o.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),f=c(32,64,"entry_flow/reduction_block_0"),p=c(64,128,"entry_flow/reduction_block_1"),v={conv_in:d,reduction_block_0:f,reduction_block_1:p},m={};im(t,0,1).forEach(function(b){m["main_block_"+b]=u(128,"middle_flow/main_block_"+b)});var g=c(128,256,"exit_flow/reduction_block"),y=l(256,512,"exit_flow/separable_conv"),x={reduction_block:g,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:v,middle_flow:m,exit_flow:x}}}function c0e(e,t){var n=Ll(e,t),r=i8(n),a=fA(n);function i(s){var l=a(s+"/separable_conv0"),c=a(s+"/separable_conv1"),u=r(s+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:u}}function o(s){var l=a(s+"/separable_conv0"),c=a(s+"/separable_conv1"),u=a(s+"/separable_conv2");return{separable_conv0:l,separable_conv1:c,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function u0e(e,t){var n=[],r=c0e(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,l=a("entry_flow/conv_in"),c=o("entry_flow/reduction_block_0"),u=o("entry_flow/reduction_block_1"),d={conv_in:l,reduction_block_0:c,reduction_block_1:u},f={};im(t,0,1).forEach(function(g){f["main_block_"+g]=s("middle_flow/main_block_"+g)});var p=o("exit_flow/reduction_block"),v=i("exit_flow/separable_conv"),m={reduction_block:p,separable_conv:v};return gs(e,n),{params:{entry_flow:d,middle_flow:f,exit_flow:m},paramMappings:n}}function f8(e,t,n){return ct(Ga(e,t.filters,n,"same"),t.bias)}function HS(e,t,n){n===void 0&&(n=!0);var r=n?on(e):e;return r=pa(r,t.separable_conv0,[1,1]),r=pa(on(r),t.separable_conv1,[1,1]),r=Ln(r,[3,3],[2,2],"same"),r=ct(r,f8(e,t.expansion_conv,[2,2])),r}function d0e(e,t){var n=pa(on(e),t.separable_conv0,[1,1]);return n=pa(on(n),t.separable_conv1,[1,1]),n=pa(on(n),t.separable_conv2,[1,1]),n=ct(n,e),n}var f0e=function(e){Ze(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return ke(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Cv(i,o).div(Se(256)),l=on(f8(s,a.entry_flow.conv_in,[2,2]));return l=HS(l,a.entry_flow.reduction_block_0,!1),l=HS(l,a.entry_flow.reduction_block_1),im(r._numMainBlocks,0,1).forEach(function(c){l=d0e(l,a.middle_flow["main_block_"+c])}),l=HS(l,a.exit_flow.reduction_block),l=on(pa(l,a.exit_flow.separable_conv,[1,1])),l})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return u0e(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return l0e(n,this._numMainBlocks)},t}(vs);function h0e(e){var t=[],n=ys(e),r=n.extractWeights,a=n.getRemainingWeights,i=uA(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}function p0e(e){var t=[],n=Ll(e,t);function r(i){var o=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:o,bias:s}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return gs(e,t),{params:a,paramMappings:t}}var M0;(function(e){e.FEMALE="female",e.MALE="male"})(M0||(M0={}));var m0e=function(e){Ze(t,e);function t(n){n===void 0&&(n=new f0e(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return ke(function(){var i=n instanceof D0?r.faceFeatureExtractor.forwardInput(n):n,o=Sv(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=Ki(o,a.fc.age).as1D(),l=Ki(o,a.fc.gender);return{age:s,gender:l}})},t.prototype.forwardInput=function(n){var r=this;return ke(function(){var a=r.runNet(n),i=a.age,o=a.gender;return{age:i,gender:ps(o)}})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return Be(this,void 0,void 0,function(){var r,a,i,o,s,l,c=this;return Ue(this,function(u){switch(u.label){case 0:return[4,Hn(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return a=u.sent(),i=Rn(a.age),o=Rn(a.gender),s=i.map(function(d,f){return{ageTensor:d,genderTensor:o[f]}}),[4,Promise.all(s.map(function(d){var f=d.ageTensor,p=d.genderTensor;return Be(c,void 0,void 0,function(){var v,m,g,y,x;return Ue(this,function(b){switch(b.label){case 0:return[4,f.data()];case 1:return v=b.sent()[0],[4,p.data()];case 2:return m=b.sent()[0],g=m>.5,y=g?M0.MALE:M0.FEMALE,x=g?m:1-m,f.dispose(),p.dispose(),[2,{age:v,gender:y,genderProbability:x}]}})})}))];case 3:return l=u.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?l:l[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return h0e(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=l8(n),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),p0e(i)},t.prototype.extractParams=function(n){var r=1539,a=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},t}(vs),h8=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,a){var i=a.map(function(s){var l=s.width,c=s.height,u=r/Math.max(c,l);return{width:l*u,height:c*u}}),o=i.length;return ke(function(){var s=function(f,p){return ga([oo([68],f),oo([68],p)],1).as2D(1,136).as1D()},l=function(f,p){var v=i[f],m=v.width,g=v.height;return p(m,g)?Math.abs(m-g)/2:0},c=function(f){return l(f,function(p,v){return p<v})},u=function(f){return l(f,function(p,v){return v<p})},d=n.mul(oo([o,136],r)).sub(ga(Array.from(Array(o),function(f,p){return s(c(p),u(p))}))).div(ga(Array.from(Array(o),function(f,p){return s(i[p].width,i[p].height)})));return d})},t.prototype.forwardInput=function(n){var r=this;return ke(function(){var a=r.runNet(n);return r.postProcess(a,n.inputSize,n.inputDimensions.map(function(i){var o=i[0],s=i[1];return{height:o,width:s}}))})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.detectLandmarks=function(n){return Be(this,void 0,void 0,function(){var r,a,i,o=this;return Ue(this,function(s){switch(s.label){case 0:return[4,Hn(n)];case 1:return r=s.sent(),a=ke(function(){return Rn(o.forwardInput(r))}),[4,Promise.all(a.map(function(l,c){return Be(o,void 0,void 0,function(){var u,d,f,p,v;return Ue(this,function(m){switch(m.label){case 0:return f=(d=Array).from,[4,l.data()];case 1:return u=f.apply(d,[m.sent()]),p=u.filter(function(g,y){return UD(y)}),v=u.filter(function(g,y){return!UD(y)}),[2,new Hye(Array(68).fill(0).map(function(g,y){return new kt(p[y],v[y])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return i=s.sent(),a.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(c8),p8=function(e){Ze(t,e);function t(n){return n===void 0&&(n=new s8),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(h8);function v0e(e){var t=[],n=o8(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return gs(e,t),{params:r,paramMappings:t}}function g0e(e){var t=[],n=ys(e),r=n.extractWeights,a=n.getRemainingWeights,i=a8(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),l=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l}}}var y0e=function(e){Ze(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return ke(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Cv(a,i).div(Se(255)),s=VS(o,r.dense0,!0);return s=VS(s,r.dense1),s=VS(s,r.dense2),s=Sv(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return v0e(n)},t.prototype.extractParams=function(n){return g0e(n)},t}(vs),x0e=function(e){Ze(t,e);function t(n){return n===void 0&&(n=new y0e),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(h8);(function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(p8);function b0e(e,t){return ct(_r(e,t.weights),t.biases)}function hA(e,t,n,r,a){a===void 0&&(a="same");var i=t.conv,o=i.filters,s=i.bias,l=Ga(e,o,n,a);return l=ct(l,s),l=b0e(l,t.scale),r?on(l):l}function w0e(e,t){return hA(e,t,[1,1],!0)}function m8(e,t){return hA(e,t,[1,1],!1)}function v8(e,t){return hA(e,t,[2,2],!0,"valid")}function S0e(e,t){function n(s,l,c){var u=e(s),d=u.length/(l*c*c);if(Dye(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+u.length+", numFilters: "+l+", filterSize: "+c);return ke(function(){return kl(Ur(u,[l,d,c,c]),[2,3,1,0])})}function r(s,l,c,u){var d=n(s,l,c),f=Sn(e(l));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:d,bias:f}}function a(s,l){var c=Sn(e(s)),u=Sn(e(s));return t.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:c,biases:u}}function i(s,l,c,u){var d=r(s,l,c,u+"/conv"),f=a(l,u+"/scale");return{conv:d,scale:f}}function o(s,l,c,u,d){d===void 0&&(d=!1);var f=i((d?.5:1)*s,l,c,u+"/conv1"),p=i(s,l,c,u+"/conv2");return{conv1:f,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function _0e(e){var t=ys(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=S0e(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,l=o(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),u=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),f=s(36864,64,3,"conv64_down",!0),p=s(36864,64,3,"conv64_1"),v=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),y=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),S=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),E=ke(function(){return kl(hl(n(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var k={conv32_down:l,conv32_1:c,conv32_2:u,conv32_3:d,conv64_down:f,conv64_1:p,conv64_2:v,conv64_3:m,conv128_down:g,conv128_1:y,conv128_2:x,conv256_down:b,conv256_1:w,conv256_2:S,conv256_down_out:C,fc:E};return{params:k,paramMappings:a}}function C0e(e,t){var n=Ll(e,t);function r(o){var s=n(o+"/scale/weights",1),l=n(o+"/scale/biases",1);return{weights:s,biases:l}}function a(o){var s=n(o+"/conv/filters",4),l=n(o+"/conv/bias",1),c=r(o);return{conv:{filters:s,bias:l},scale:c}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function E0e(e){var t=[],n=C0e(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),l=a("conv32_3"),c=a("conv64_down"),u=a("conv64_1"),d=a("conv64_2"),f=a("conv64_3"),p=a("conv128_down"),v=a("conv128_1"),m=a("conv128_2"),g=a("conv256_down"),y=a("conv256_1"),x=a("conv256_2"),b=a("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Iye(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var S={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:l,conv64_down:c,conv64_1:u,conv64_2:d,conv64_3:f,conv128_down:p,conv128_1:v,conv128_2:m,conv256_down:g,conv256_1:y,conv256_2:x,conv256_down_out:b,fc:w};return gs(e,t),{params:S,paramMappings:t}}function Mi(e,t){var n=w0e(e,t.conv1);return n=m8(n,t.conv2),n=ct(n,e),n=on(n),n}function Rg(e,t){var n=v8(e,t.conv1);n=m8(n,t.conv2);var r=Sv(e,2,2,"valid"),a=Gt(r.shape),i=r.shape[3]!==n.shape[3],o=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(o){var s=dp(n.shape);s[1]=1;var l=Gt(s);n=On([n,l],1);var c=dp(n.shape);c[2]=1;var u=Gt(c);n=On([n,u],2)}return r=i?On([r,a],3):r,n=ct(r,n),n=on(n),n}var k0e=function(e){Ze(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return ke(function(){var a=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Cv(a,i).div(Se(256)),s=v8(o,r.conv32_down);s=Ln(s,3,2,"valid"),s=Mi(s,r.conv32_1),s=Mi(s,r.conv32_2),s=Mi(s,r.conv32_3),s=Rg(s,r.conv64_down),s=Mi(s,r.conv64_1),s=Mi(s,r.conv64_2),s=Mi(s,r.conv64_3),s=Rg(s,r.conv128_down),s=Mi(s,r.conv128_1),s=Mi(s,r.conv128_2),s=Rg(s,r.conv256_down),s=Mi(s,r.conv256_1),s=Mi(s,r.conv256_2),s=Rg(s,r.conv256_down_out);var l=s.mean([1,2]),c=Xb(l,r.fc);return c})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return Be(this,void 0,void 0,function(){var r,a,i,o=this;return Ue(this,function(s){switch(s.label){case 0:return[4,Hn(n)];case 1:return r=s.sent(),a=ke(function(){return Rn(o.forwardInput(r))}),[4,Promise.all(a.map(function(l){return l.data()}))];case 2:return i=s.sent(),a.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return E0e(n)},t.prototype.extractParams=function(n){return _0e(n)},t}(vs);function g8(e,t){var n={descriptor:t};return Object.assign({},e,n)}function y8(e,t){var n={age:t};return Object.assign({},e,n)}function x8(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var b8=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,a=n.scaleFactor,i=n.maxNumScales,o=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(l){return typeof l!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(l){return typeof l!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function N0e(e,t){function n(l,c){var u=Ur(e(9*l),[3,3,l,1]),d=Sn(e(l)),f=Sn(e(l)),p=Sn(e(l)),v=Sn(e(l));return t.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:u,batch_norm_scale:d,batch_norm_offset:f,batch_norm_mean:p,batch_norm_variance:v}}function r(l,c,u,d,f){var p=Ur(e(l*c*u*u),[u,u,l,c]),v=Sn(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/"+(f?"batch_norm_offset":"bias")}),{filters:p,bias:v}}function a(l,c,u,d){var f=r(l,c,u,d,!0),p=f.filters,v=f.bias;return{filters:p,batch_norm_offset:v}}function i(l,c,u){var d=n(l,u+"/depthwise_conv"),f=a(l,c,1,u+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:f}}function o(){var l=a(3,32,3,"mobilenetv1/conv_0"),c=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),d=i(128,128,"mobilenetv1/conv_3"),f=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),v=i(256,512,"mobilenetv1/conv_6"),m=i(512,512,"mobilenetv1/conv_7"),g=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),x=i(512,512,"mobilenetv1/conv_10"),b=i(512,512,"mobilenetv1/conv_11"),w=i(512,1024,"mobilenetv1/conv_12"),S=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:c,conv_2:u,conv_3:d,conv_4:f,conv_5:p,conv_6:v,conv_7:m,conv_8:g,conv_9:y,conv_10:x,conv_11:b,conv_12:w,conv_13:S}}function s(){var l=a(1024,256,1,"prediction_layer/conv_0"),c=a(256,512,3,"prediction_layer/conv_1"),u=a(512,128,1,"prediction_layer/conv_2"),d=a(128,256,3,"prediction_layer/conv_3"),f=a(256,128,1,"prediction_layer/conv_4"),p=a(128,256,3,"prediction_layer/conv_5"),v=a(256,64,1,"prediction_layer/conv_6"),m=a(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),b=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),w=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),S=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),T=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),P={box_encoding_predictor:g,class_predictor:y},I={box_encoding_predictor:x,class_predictor:b},R={box_encoding_predictor:w,class_predictor:S},D={box_encoding_predictor:C,class_predictor:E},M={box_encoding_predictor:k,class_predictor:N},$={box_encoding_predictor:T,class_predictor:A};return{conv_0:l,conv_1:c,conv_2:u,conv_3:d,conv_4:f,conv_5:p,conv_6:v,conv_7:m,box_predictor_0:P,box_predictor_1:I,box_predictor_2:R,box_predictor_3:D,box_predictor_4:M,box_predictor_5:$}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function T0e(e){var t=[],n=ys(e),r=n.extractWeights,a=n.getRemainingWeights,i=N0e(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,l=o(),c=s(),u=PT(r(5118*4),[1,5118,4]),d={extra_dim:u};if(t.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:l,prediction_layer:c,output_layer:d},paramMappings:t}}function A0e(e,t){var n=Ll(e,t);function r(c,u,d){var f=n(c+"/Conv2d_"+u+"_pointwise/weights",4,d+"/filters"),p=n(c+"/Conv2d_"+u+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:f,batch_norm_offset:p}}function a(c){var u="mobilenetv1/conv_"+c,d="MobilenetV1/Conv2d_"+c+"_depthwise",f=u+"/depthwise_conv",p=u+"/pointwise_conv",v=n(d+"/depthwise_weights",4,f+"/filters"),m=n(d+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),g=n(d+"/BatchNorm/beta",1,f+"/batch_norm_offset"),y=n(d+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),x=n(d+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:y,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",c,p)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(c,u){var d=n(c+"/weights",4,u+"/filters"),f=n(c+"/biases",1,u+"/bias");return{filters:d,bias:f}}function s(c){var u=o("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),d=o("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor");return{box_encoding_predictor:u,class_predictor:d}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function P0e(e){var t=[],n=A0e(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Zb(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return gs(e,t),{params:o,paramMappings:t}}function Fi(e,t,n){return ke(function(){var r=Ga(e,t.filters,n,"same");return r=ct(r,t.batch_norm_offset),UT(r,0,6)})}var j0e=.0010000000474974513;function O0e(e,t,n){return ke(function(){var r=Kb(e,t.filters,n,"same");return r=hV(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,j0e),UT(r,0,6)})}function R0e(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function I0e(e,t){return ke(function(){var n=null,r=Fi(e,t.conv_0,[2,2]),a=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(a.forEach(function(i,o){var s=o+1,l=R0e(s);r=O0e(r,i.depthwise_conv,l),r=Fi(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function D0e(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map(function(u,d){return{score:u,boxIndex:d}}).filter(function(u){return u.score>a}).sort(function(u,d){return d.score-u.score}),l=function(u){return u<=r?1:0},c=[];return s.forEach(function(u){if(!(c.length>=o)){for(var d=u.score,f=c.length-1;f>=0;--f){var p=M0e(e,u.boxIndex,c[f]);if(p!==0&&(u.score*=l(p),u.score<=a))break}d===u.score&&c.push(u.boxIndex)}}),c}function M0e(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),f=(o-a)*(s-i),p=(u-l)*(d-c);if(f<=0||p<=0)return 0;var v=Math.max(a,l),m=Math.max(i,c),g=Math.min(o,u),y=Math.min(s,d),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(f+p-x)}function $0e(e){var t=Rn(kl(e,[1,0])),n=[Dn(t[2],t[0]),Dn(t[3],t[1])],r=[ct(t[0],mi(n[0],Se(2))),ct(t[1],mi(n[1],Se(2)))];return{sizes:n,centers:r}}function F0e(e,t){var n=$0e(e),r=n.sizes,a=n.centers,i=Rn(kl(t,[1,0])),o=mi(_r(LC(mi(i[2],Se(5))),r[0]),Se(2)),s=ct(_r(mi(i[0],Se(10)),r[0]),a[0]),l=mi(_r(LC(mi(i[3],Se(5))),r[1]),Se(2)),c=ct(_r(mi(i[1],Se(10)),r[1]),a[1]);return kl(ga([Dn(s,o),Dn(c,l),ct(s,o),ct(c,l)]),[1,0])}function L0e(e,t,n){return ke(function(){var r=e.shape[0],a=F0e(gi(kd(n.extra_dim,[r,1,1]),[-1,4]),gi(e,[-1,4]));a=gi(a,[r,a.shape[0]/r,4]);var i=cV(po(t,[0,0,1],[-1,-1,-1])),o=po(i,[0,0,0],[-1,-1,1]);o=gi(o,[r,o.shape[1]]);var s=Rn(a),l=Rn(o);return{boxes:s,scores:l}})}function Ou(e,t){return ke(function(){var n=e.shape[0],r=gi(Ci(e,t.box_encoding_predictor),[n,-1,1,4]),a=gi(Ci(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function B0e(e,t,n){return ke(function(){var r=Fi(e,n.conv_0,[1,1]),a=Fi(r,n.conv_1,[2,2]),i=Fi(a,n.conv_2,[1,1]),o=Fi(i,n.conv_3,[2,2]),s=Fi(o,n.conv_4,[1,1]),l=Fi(s,n.conv_5,[2,2]),c=Fi(l,n.conv_6,[1,1]),u=Fi(c,n.conv_7,[2,2]),d=Ou(t,n.box_predictor_0),f=Ou(e,n.box_predictor_1),p=Ou(a,n.box_predictor_2),v=Ou(o,n.box_predictor_3),m=Ou(l,n.box_predictor_4),g=Ou(u,n.box_predictor_5),y=On([d.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),x=On([d.classPrediction,f.classPrediction,p.classPrediction,v.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:y,classPredictions:x}})}var aw=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,a=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),w8=function(e){Ze(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return ke(function(){var a=n.toBatchTensor(512,!1).toFloat(),i=Dn(_r(a,Se(.007843137718737125)),Se(1)),o=I0e(i,r.mobilenetv1),s=B0e(o.out,o.conv11,r.prediction_layer),l=s.boxPredictions,c=s.classPredictions;return L0e(l,c,r.output_layer)})},t.prototype.forward=function(n){return Be(this,void 0,void 0,function(){var r;return Ue(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Hn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Be(this,void 0,void 0,function(){var a,i,o,s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k;return Ue(this,function(N){switch(N.label){case 0:return a=new aw(r),i=a.maxResults,o=a.minConfidence,[4,Hn(n)];case 1:for(s=N.sent(),l=this.forwardInput(s),c=l.boxes,u=l.scores,d=c[0],f=u[0],p=1;p<c.length;p++)c[p].dispose(),u[p].dispose();return g=(m=Array).from,[4,f.data()];case 2:return v=g.apply(m,[N.sent()]),y=.5,x=D0e(d,v,i,y,o),b=s.getReshapedInputDimensions(0),w=s.inputSize,S=w/b.width,C=w/b.height,E=d.arraySync(),k=x.map(function(T){var A=[Math.max(0,E[T][0]),Math.min(1,E[T][2])].map(function($){return $*C}),P=A[0],I=A[1],R=[Math.max(0,E[T][1]),Math.min(1,E[T][3])].map(function($){return $*S}),D=R[0],M=R[1];return new ji(v[T],new aA(D,P,M-D,I-P),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),d.dispose(),f.dispose(),[2,k]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return P0e(n)},t.prototype.extractParams=function(n){return T0e(n)},t}(vs);(function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(w8);var U0e=.4,z0e=[new kt(.738768,.874946),new kt(2.42204,2.65704),new kt(4.30971,7.04493),new kt(10.246,4.59428),new kt(12.6868,11.8741)],W0e=[new kt(1.603231,2.094468),new kt(6.041143,7.080126),new kt(2.882459,3.518061),new kt(4.266906,5.178857),new kt(9.041765,10.66308)],V0e=[117.001,114.697,97.404],H0e="tiny_yolov2_model",G0e="tiny_yolov2_separable_conv_model",Ig=function(e){return typeof e=="number"};function q0e(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Ig(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return Ig(t.x)&&Ig(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Ig)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function pA(e){return ke(function(){var t=_r(e,Se(.10000000149011612));return ct(on(Dn(e,t)),t)})}function As(e,t){return ke(function(){var n=lu(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Ga(n,t.conv.filters,[1,1],"valid"),n=Dn(n,t.bn.sub),n=_r(n,t.bn.truediv),n=ct(n,t.conv.bias),pA(n)})}function Ps(e,t){return ke(function(){var n=lu(e,[[0,0],[1,1],[1,1],[0,0]]);return n=HT(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=ct(n,t.bias),pA(n)})}function K0e(e,t){var n=nw(e,t);function r(o,s){var l=Sn(e(o)),c=Sn(e(o));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:l,truediv:c}}function a(o,s,l){var c=n(o,s,3,l+"/conv"),u=r(s,l+"/bn");return{conv:c,bn:u}}var i=dA(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function X0e(e,t,n,r){var a=ys(e),i=a.extractWeights,o=a.getRemainingWeights,s=[],l=K0e(i,s),c=l.extractConvParams,u=l.extractConvWithBatchNormParams,d=l.extractSeparableConvParams,f;if(t.withSeparableConvs){var p=r[0],v=r[1],m=r[2],g=r[3],y=r[4],x=r[5],b=r[6],w=r[7],S=r[8],C=t.isFirstLayerConv2d?c(p,v,3,"conv0"):d(p,v,"conv0"),E=d(v,m,"conv1"),k=d(m,g,"conv2"),N=d(g,y,"conv3"),T=d(y,x,"conv4"),A=d(x,b,"conv5"),P=w?d(b,w,"conv6"):void 0,I=S?d(w,S,"conv7"):void 0,R=c(S||w||b,5*n,1,"conv8");f={conv0:C,conv1:E,conv2:k,conv3:N,conv4:T,conv5:A,conv6:P,conv7:I,conv8:R}}else{var p=r[0],v=r[1],m=r[2],g=r[3],y=r[4],x=r[5],b=r[6],w=r[7],S=r[8],C=u(p,v,"conv0"),E=u(v,m,"conv1"),k=u(m,g,"conv2"),N=u(g,y,"conv3"),T=u(y,x,"conv4"),A=u(x,b,"conv5"),P=u(b,w,"conv6"),I=u(w,S,"conv7"),R=c(S,5*n,1,"conv8");f={conv0:C,conv1:E,conv2:k,conv3:N,conv4:T,conv5:A,conv6:P,conv7:I,conv8:R}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:f,paramMappings:s}}function Y0e(e,t){var n=Ll(e,t);function r(s){var l=n(s+"/sub",1),c=n(s+"/truediv",1);return{sub:l,truediv:c}}function a(s){var l=n(s+"/filters",4),c=n(s+"/bias",1);return{filters:l,bias:c}}function i(s){var l=a(s+"/conv"),c=r(s+"/bn");return{conv:l,bn:c}}var o=fA(n);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function Q0e(e,t){var n=[],r=Y0e(e,n),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:l>7?o("conv6"):void 0,conv7:l>8?o("conv7"):void 0,conv8:a("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return gs(e,n),{params:s,paramMappings:n}}var XD;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(XD||(XD={}));var mA=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,a=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),S8=function(e){Ze(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return q0e(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var a=As(n,r.conv0);return a=Ln(a,[2,2],[2,2],"same"),a=As(a,r.conv1),a=Ln(a,[2,2],[2,2],"same"),a=As(a,r.conv2),a=Ln(a,[2,2],[2,2],"same"),a=As(a,r.conv3),a=Ln(a,[2,2],[2,2],"same"),a=As(a,r.conv4),a=Ln(a,[2,2],[2,2],"same"),a=As(a,r.conv5),a=Ln(a,[2,2],[1,1],"same"),a=As(a,r.conv6),a=As(a,r.conv7),Ci(a,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var a=this.config.isFirstLayerConv2d?pA(Ci(n,r.conv0,"valid",!1)):Ps(n,r.conv0);return a=Ln(a,[2,2],[2,2],"same"),a=Ps(a,r.conv1),a=Ln(a,[2,2],[2,2],"same"),a=Ps(a,r.conv2),a=Ln(a,[2,2],[2,2],"same"),a=Ps(a,r.conv3),a=Ln(a,[2,2],[2,2],"same"),a=Ps(a,r.conv4),a=Ln(a,[2,2],[2,2],"same"),a=Ps(a,r.conv5),a=Ln(a,[2,2],[1,1],"same"),a=r.conv6?Ps(a,r.conv6):a,a=r.conv7?Ps(a,r.conv7):a,Ci(a,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return ke(function(){var o=n.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Cv(o,a.config.meanRgb):o,o=o.div(Se(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},t.prototype.forward=function(n,r){return Be(this,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,Hn(n)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),Be(this,void 0,void 0,function(){var a,i,o,s,l,c,u,d,f,p,v,m,g,y,x=this;return Ue(this,function(b){switch(b.label){case 0:return a=new mA(r),i=a.inputSize,o=a.scoreThreshold,[4,Hn(n)];case 1:return s=b.sent(),[4,this.forwardInput(s,i)];case 2:return l=b.sent(),c=ke(function(){return Rn(l)[0].expandDims()}),u={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(c,s.getReshapedInputDimensions(0),o)];case 3:return d=b.sent(),l.dispose(),c.dispose(),f=d.map(function(w){return w.box}),p=d.map(function(w){return w.score}),v=d.map(function(w){return w.classScore}),m=d.map(function(w){return x.config.classes[w.label]}),g=om(f.map(function(w){return w.rescale(i)}),p,this.config.iouThreshold,!0),y=g.map(function(w){return new qV(p[w],v[w],m[w],f[w],u)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return Q0e(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return X0e(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,a){return Be(this,void 0,void 0,function(){var i,o,s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k,N,T,A,P,I,R,D,M,$,j=this;return Ue(this,function(O){switch(O.label){case 0:return i=r.width,o=r.height,s=Math.max(i,o),l=s/i,c=s/o,u=n.shape[1],d=this.config.anchors.length,f=ke(function(){var B=n.reshape([u,u,d,j.boxEncodingSize]),G=B.slice([0,0,0,0],[u,u,d,4]),L=B.slice([0,0,0,4],[u,u,d,1]),W=j.withClassScores?ps(B.slice([0,0,0,5],[u,u,d,j.config.classes.length]),3):Se(0);return[G,L,W]}),p=f[0],v=f[1],m=f[2],g=[],[4,v.array()];case 1:return y=O.sent(),[4,p.array()];case 2:x=O.sent(),b=0,O.label=3;case 3:if(!(b<u))return[3,12];w=0,O.label=4;case 4:if(!(w<u))return[3,11];S=0,O.label=5;case 5:return S<d?(C=WS(y[b][w][S][0]),!a||C>a?(E=(w+WS(x[b][w][S][0]))/u*l,k=(b+WS(x[b][w][S][1]))/u*c,N=Math.exp(x[b][w][S][2])*this.config.anchors[S].x/u*l,T=Math.exp(x[b][w][S][3])*this.config.anchors[S].y/u*c,A=E-N/2,P=k-T/2,I={row:b,col:w,anchor:S},this.withClassScores?[4,this.extractPredictedClass(m,I)]:[3,7]):[3,9]):[3,10];case 6:return $=O.sent(),[3,8];case 7:$={classScore:1,label:0},O.label=8;case 8:R=$,D=R.classScore,M=R.label,g.push(gr({box:new ew(A,P,A+N,P+T),score:C,classScore:C*D,label:M},I)),O.label=9;case 9:return S++,[3,5];case 10:return w++,[3,4];case 11:return b++,[3,3];case 12:return p.dispose(),v.dispose(),m.dispose(),[2,g]}})})},t.prototype.extractPredictedClass=function(n,r){return Be(this,void 0,void 0,function(){var a,i,o,s;return Ue(this,function(l){switch(l.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,n.array()];case 1:return s=l.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,u){return s[a][i][o][u]}).map(function(c,u){return{classScore:c,label:u}}).reduce(function(c,u){return c.classScore>u.classScore?c:u})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(vs),J0e=function(e){Ze(t,e);function t(n){n===void 0&&(n=!0);var r=this,a=Object.assign({},{withSeparableConvs:n,iouThreshold:U0e,classes:["face"]},n?{anchors:W0e,meanRgb:V0e}:{anchors:z0e,withClassScores:!0});return r=e.call(this,a)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return Be(this,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new ji(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?G0e:H0e},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(S8),_8=function(e){Ze(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}(mA),Ev=function(){function e(){}return e.prototype.then=function(t){return Be(this,void 0,void 0,function(){var n;return Ue(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return Be(this,void 0,void 0,function(){return Ue(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function iw(e,t,n,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),Be(this,void 0,void 0,function(){var i,o,s,l,c;return Ue(this,function(u){switch(u.label){case 0:return i=e.map(function(d){return d8(d)?a(d):d.detection}),s=r,s?[3,5]:t instanceof nn?[4,cA(t,i)]:[3,2];case 1:return l=u.sent(),[3,4];case 2:return[4,lA(t,i)];case 3:l=u.sent(),u.label=4;case 4:s=l,u.label=5;case 5:return o=s,[4,n(o)];case 6:return c=u.sent(),o.forEach(function(d){return d instanceof nn&&d.dispose()}),[2,c]}})})}function vA(e,t,n,r,a){return Be(this,void 0,void 0,function(){var i=this;return Ue(this,function(o){return[2,iw([e],t,function(s){return Be(i,void 0,void 0,function(){return Ue(this,function(l){return[2,n(s[0])]})})},r,a)]})})}function Z0e(e){return ke(function(){return ga(Rn(e,3).reverse(),3)})}var Dg=2,$0=12;function exe(e,t){var n=nw(e,t),r=uA(e,t);function a(c,u){var d=Sn(e(c));return t.push({paramPath:u}),d}function i(c,u,d){d===void 0&&(d=!1);var f=n(c[0],c[1],3,u+"/conv1"),p=a(c[1],u+"/prelu1_alpha"),v=n(c[1],c[2],3,u+"/conv2"),m=a(c[2],u+"/prelu2_alpha"),g=n(c[2],c[3],d?2:3,u+"/conv3"),y=a(c[3],u+"/prelu3_alpha");return{conv1:f,prelu1_alpha:p,conv2:v,prelu2_alpha:m,conv3:g,prelu3_alpha:y}}function o(){var c=i([3,10,16,32],"pnet"),u=n(32,2,1,"pnet/conv4_1"),d=n(32,4,1,"pnet/conv4_2");return gr(gr({},c),{conv4_1:u,conv4_2:d})}function s(){var c=i([3,28,48,64],"rnet",!0),u=r(576,128,"rnet/fc1"),d=a(128,"rnet/prelu4_alpha"),f=r(128,2,"rnet/fc2_1"),p=r(128,4,"rnet/fc2_2");return gr(gr({},c),{fc1:u,prelu4_alpha:d,fc2_1:f,fc2_2:p})}function l(){var c=i([3,32,64,64],"onet"),u=n(64,128,2,"onet/conv4"),d=a(128,"onet/prelu4_alpha"),f=r(1152,256,"onet/fc1"),p=a(256,"onet/prelu5_alpha"),v=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),g=r(256,10,"onet/fc2_3");return gr(gr({},c),{conv4:u,prelu4_alpha:d,fc1:f,prelu5_alpha:p,fc2_1:v,fc2_2:m,fc2_3:g})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:l}}function txe(e){var t=ys(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=exe(n,a),o=i.extractPNetParams,s=i.extractRNetParams,l=i.extractONetParams,c=o(),u=s(),d=l();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:u,onet:d},paramMappings:a}}function nxe(e,t){var n=Ll(e,t);function r(u){var d=n(u+"/weights",4,u+"/filters"),f=n(u+"/bias",1);return{filters:d,bias:f}}function a(u){var d=n(u+"/weights",2),f=n(u+"/bias",1);return{weights:d,bias:f}}function i(u){return n(u,1)}function o(u){var d=r(u+"/conv1"),f=i(u+"/prelu1_alpha"),p=r(u+"/conv2"),v=i(u+"/prelu2_alpha"),m=r(u+"/conv3"),g=i(u+"/prelu3_alpha");return{conv1:d,prelu1_alpha:f,conv2:p,prelu2_alpha:v,conv3:m,prelu3_alpha:g}}function s(){var u=o("pnet"),d=r("pnet/conv4_1"),f=r("pnet/conv4_2");return gr(gr({},u),{conv4_1:d,conv4_2:f})}function l(){var u=o("rnet"),d=a("rnet/fc1"),f=i("rnet/prelu4_alpha"),p=a("rnet/fc2_1"),v=a("rnet/fc2_2");return gr(gr({},u),{fc1:d,prelu4_alpha:f,fc2_1:p,fc2_2:v})}function c(){var u=o("onet"),d=r("onet/conv4"),f=i("onet/prelu4_alpha"),p=a("onet/fc1"),v=i("onet/prelu5_alpha"),m=a("onet/fc2_1"),g=a("onet/fc2_2"),y=a("onet/fc2_3");return gr(gr({},u),{conv4:d,prelu4_alpha:f,fc1:p,prelu5_alpha:v,fc2_1:m,fc2_2:g,fc2_3:y})}return{extractPNetParams:s,extractRNetParams:l,extractONetParams:c}}function rxe(e){var t=[],n=nxe(e,t),r=n.extractPNetParams,a=n.extractRNetParams,i=n.extractONetParams,o=r(),s=a(),l=i();return gs(e,t),{params:{pnet:o,rnet:s,onet:l},paramMappings:t}}function qC(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function axe(e,t,n){for(var r=n[0],a=n[1],i=$0/e,o=[],s=Math.min(r,a)*i,l=0;s>=12;)o.push(i*Math.pow(t,l)),s=s*t,l+=1;return o}var gA=function(e){Ze(t,e);function t(n,r,a,i){return e.call(this,{left:n,top:r,right:a,bottom:i},!0)||this}return t}(Nl);function C8(e){return ke(function(){return _r(Dn(e,Se(127.5)),Se(.0078125))})}function jd(e,t){return ke(function(){return ct(on(e),_r(t,j0(on(j0(e)))))})}function yA(e,t,n){return n===void 0&&(n=!1),ke(function(){var r=Ci(e,t.conv1,"valid");return r=jd(r,t.prelu1_alpha),r=Ln(r,n?[2,2]:[3,3],[2,2],"same"),r=Ci(r,t.conv2,"valid"),r=jd(r,t.prelu2_alpha),r=n?r:Ln(r,[3,3],[2,2],"valid"),r=Ci(r,t.conv3,"valid"),r=jd(r,t.prelu3_alpha),r})}function ixe(e,t){return ke(function(){var n=yA(e,t,!0),r=Ci(n,t.conv4_1,"valid"),a=Pa(Yb(r,3),3),i=ps(Dn(r,a),3),o=Ci(n,t.conv4_2,"valid");return{prob:i,regions:o}})}function oxe(e,t){return ke(function(){var n=qC(t,e.shape.slice(1)),r=n.height,a=n.width,i=YT.resizeBilinear(e,[r,a]),o=C8(i);return kl(o,[0,2,1,3])})}function sxe(e,t,n,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)i[o][s]>=r&&a.push(new kt(s,o));var l=a.map(function(c){var u=new ew(Math.round((c.y*Dg+1)/n),Math.round((c.x*Dg+1)/n),Math.round((c.y*Dg+$0)/n),Math.round((c.x*Dg+$0)/n)),d=i[c.y][c.x],f=t.arraySync(),p=new gA(f[c.y][c.x][0],f[c.y][c.x][1],f[c.y][c.x][2],f[c.y][c.x][3]);return{cell:u,score:d,region:p}});return l}function lxe(e,t,n,r,a){a.stage1=[];var i=t.map(function(f){return ke(function(){var p={scale:f},v=oxe(e,f),m=Date.now(),g=ixe(v,r),y=g.prob,x=g.regions;p.pnet=Date.now()-m;var b=Rn(Rn(y,3)[1])[0],w=Rn(x)[0];return{scoresTensor:b,regionsTensor:w,scale:f,statsForScale:p}})}),o=i.map(function(f){var p=f.scoresTensor,v=f.regionsTensor,m=f.scale,g=f.statsForScale,y=sxe(p,v,m,n);if(p.dispose(),v.dispose(),!y.length)return a.stage1.push(g),[];var x=Date.now(),b=om(y.map(function(w){return w.cell}),y.map(function(w){return w.score}),.5);return g.nms=Date.now()-x,g.numBoxes=b.length,a.stage1.push(g),b.map(function(w){return y[w]})}),s=o.reduce(function(f,p){return f.concat(p)},[]),l=[],c=[];if(s.length>0){var u=Date.now(),d=om(s.map(function(f){return f.cell}),s.map(function(f){return f.score}),.7);a.stage1_nms=Date.now()-u,c=d.map(function(f){return s[f].score}),l=d.map(function(f){return s[f]}).map(function(f){var p=f.cell,v=f.region;return new ew(p.left+v.left*p.width,p.top+v.top*p.height,p.right+v.right*p.width,p.bottom+v.bottom*p.height).toSquare().round()})}return{boxes:l,scores:c}}function E8(e,t,n){var r=n.width,a=n.height;return Be(this,void 0,void 0,function(){var i,o,s,l=this;return Ue(this,function(c){switch(c.label){case 0:return i=Kc(e),[4,Promise.all(t.map(function(u){return Be(l,void 0,void 0,function(){var d,f,p,v,m,g,y,x;return Ue(this,function(b){return d=u.padAtBorders(e.height,e.width),f=d.y,p=d.ey,v=d.x,m=d.ex,g=v-1,y=f-1,x=i.getImageData(g,y,m-g,p-y),[2,Er.isNodejs()?sA(x):createImageBitmap(x)]})})}))];case 1:return o=c.sent(),s=[],o.forEach(function(u){var d=tw({width:r,height:a}),f=Kc(d);f.drawImage(u,0,0,r,a);for(var p=f.getImageData(0,0,r,a).data,v=[],m=0;m<p.length;m+=4)v.push(p[m+2]),v.push(p[m+1]),v.push(p[m]);s.push(v)}),[2,s.map(function(u){var d=ke(function(){var f=kl(Ur(u,[1,r,a,3]),[0,2,1,3]).toFloat();return C8(f)});return d})]}})})}function cxe(e,t){return ke(function(){var n=yA(e,t),r=gi(n,[n.shape[0],t.fc1.weights.shape[0]]),a=Ki(r,t.fc1),i=jd(a,t.prelu4_alpha),o=Ki(i,t.fc2_1),s=Pa(Yb(o,1),1),l=ps(Dn(o,s),1),c=Ki(i,t.fc2_2),u=Rn(l,1)[1];return{scores:u,regions:c}})}function uxe(e,t,n,r,a){return Be(this,void 0,void 0,function(){var i,o,s,l,c,u,d,f,p,v,m,g,y,x;return Ue(this,function(b){switch(b.label){case 0:return i=Date.now(),[4,E8(e,t,{width:24,height:24})];case 1:return o=b.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map(function(w){var S=cxe(w,r);return w.dispose(),S}),a.stage2_rnet=Date.now()-i,l=s.length>1?On(s.map(function(w){return w.scores})):s[0].scores,d=(u=Array).from,[4,l.data()];case 2:return c=d.apply(u,[b.sent()]),l.dispose(),f=c.map(function(w,S){return{score:w,idx:S}}).filter(function(w){return w.score>n}).map(function(w){var S=w.idx;return S}),p=f.map(function(w){return t[w]}),v=f.map(function(w){return c[w]}),m=[],g=[],p.length>0&&(i=Date.now(),y=om(p,v,.7),a.stage2_nms=Date.now()-i,x=y.map(function(w){var S=s[f[w]].regions.arraySync();return new gA(S[0][0],S[0][1],S[0][2],S[0][3])}),g=y.map(function(w){return v[w]}),m=y.map(function(w,S){return p[w].calibrate(x[S])})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function dxe(e,t){return ke(function(){var n=yA(e,t);n=Ln(n,[2,2],[2,2],"same"),n=Ci(n,t.conv4,"valid"),n=jd(n,t.prelu4_alpha);var r=gi(n,[n.shape[0],t.fc1.weights.shape[0]]),a=Ki(r,t.fc1),i=jd(a,t.prelu5_alpha),o=Ki(i,t.fc2_1),s=Pa(Yb(o,1),1),l=ps(Dn(o,s),1),c=Ki(i,t.fc2_2),u=Ki(i,t.fc2_3),d=Rn(l,1)[1];return{scores:d,regions:c,points:u}})}function fxe(e,t,n,r,a){return Be(this,void 0,void 0,function(){var i,o,s,l,c,u,d,f,p,v,m,g,y,x,b;return Ue(this,function(w){switch(w.label){case 0:return i=Date.now(),[4,E8(e,t,{width:48,height:48})];case 1:return o=w.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map(function(S){var C=dxe(S,r);return S.dispose(),C}),a.stage3_onet=Date.now()-i,l=s.length>1?On(s.map(function(S){return S.scores})):s[0].scores,d=(u=Array).from,[4,l.data()];case 2:return c=d.apply(u,[w.sent()]),l.dispose(),f=c.map(function(S,C){return{score:S,idx:C}}).filter(function(S){return S.score>n}).map(function(S){var C=S.idx;return C}),p=f.map(function(S){var C=s[S].regions.arraySync();return new gA(C[0][0],C[0][1],C[0][2],C[0][3])}),v=f.map(function(S,C){return t[S].calibrate(p[C])}),m=f.map(function(S){return c[S]}),g=[],y=[],x=[],v.length>0&&(i=Date.now(),b=om(v,m,.7,!1),a.stage3_nms=Date.now()-i,g=b.map(function(S){return v[S]}),y=b.map(function(S){return m[S]}),x=b.map(function(S,C){return Array(5).fill(0).map(function(E,k){var N=s[S].points.arraySync();return new kt(N[0][k]*(g[C].width+1)+g[C].left,N[0][k+5]*(g[C].height+1)+g[C].top)})})),s.forEach(function(S){S.regions.dispose(),S.scores.dispose(),S.points.dispose()}),[2,{boxes:g,scores:y,points:x}]}})})}var hxe=function(e){Ze(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return Be(this,void 0,void 0,function(){return Ue(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return Be(this,void 0,void 0,function(){return Ue(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Be(this,void 0,void 0,function(){var a,i,o,s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k;return Ue(this,function(N){switch(N.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),l=ke(function(){return Z0e(Pa(nA.fromPixels(i)).toFloat())}),c=function(T){return l.dispose(),o.total=Date.now()-s,T},u=l.shape.slice(1),d=u[0],f=u[1],p=new b8(r),v=p.minFaceSize,m=p.scaleFactor,g=p.maxNumScales,y=p.scoreThresholds,x=p.scaleSteps,b=(x||axe(v,m,[d,f])).filter(function(T){var A=qC(T,[d,f]);return Math.min(A.width,A.height)>$0}).slice(0,g),o.scales=b,o.pyramid=b.map(function(T){return qC(T,[d,f])}),w=Date.now(),[4,lxe(l,b,y[0],a.pnet,o)];case 1:return S=N.sent(),o.total_stage1=Date.now()-w,S.boxes.length?(o.stage2_numInputBoxes=S.boxes.length,w=Date.now(),[4,uxe(i,S.boxes,y[1],a.rnet,o)]):[2,c({results:[],stats:o})];case 2:return C=N.sent(),o.total_stage2=Date.now()-w,C.boxes.length?(o.stage3_numInputBoxes=C.boxes.length,w=Date.now(),[4,fxe(i,C.boxes,y[2],a.onet,o)]):[2,c({results:[],stats:o})];case 3:return E=N.sent(),o.total_stage3=Date.now()-w,k=E.boxes.map(function(T,A){return rw(lm({},new ji(E.scores[A],new aA(T.left/f,T.top/d,T.width/f,T.height/d),{height:d,width:f})),new Vye(E.points[A].map(function(P){return P.sub(new kt(T.left,T.top)).div(new kt(T.width,T.height))}),{width:T.width,height:T.height}))}),[2,c({results:k,stats:o})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),Be(this,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,Hn(n)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Be(this,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,Hn(n)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return rxe(n)},t.prototype.extractParams=function(n){return txe(n)},t}(vs),pxe=.4,mxe=[new kt(1.603231,2.094468),new kt(6.041143,7.080126),new kt(2.882459,3.518061),new kt(4.266906,5.178857),new kt(9.041765,10.66308)],vxe=[117.001,114.697,97.404],gxe=function(e){Ze(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:pxe,classes:["face"],anchors:mxe,meanRgb:vxe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return Be(this,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new ji(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(S8),ar={ssdMobilenetv1:new w8,tinyFaceDetector:new gxe,tinyYolov2:new J0e,mtcnn:new hxe,faceLandmark68Net:new p8,faceLandmark68TinyNet:new x0e,faceRecognitionNet:new k0e,faceExpressionNet:new o0e,ageGenderNet:new m0e},k8=function(e){Ze(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=a,i}return t}(Ev),xA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r,a=this;return Ue(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,iw(n,this.input,function(o){return Be(a,void 0,void 0,function(){return Ue(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(l){return ar.faceExpressionNet.predictExpressions(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(o,s){return u8(o,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new _A(this,this.input)},t}(k8),bA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r;return Ue(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,vA(n,this.input,function(i){return ar.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,u8(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new CA(this,this.input)},t}(k8),wA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new EA(this,this.input)},t.prototype.withFaceDescriptors=function(){return new NA(this,this.input)},t}(xA),SA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new kA(this,this.input)},t.prototype.withFaceDescriptor=function(){return new TA(this,this.input)},t}(bA),N8=function(e){Ze(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=a,i}return t}(Ev),_A=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r,a=this;return Ue(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,iw(n,this.input,function(o){return Be(a,void 0,void 0,function(){return Ue(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(l){return ar.ageGenderNet.predictAgeAndGender(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(o,s){var l=r[s],c=l.age,u=l.gender,d=l.genderProbability;return y8(x8(o,u,d),c)})]}})})},t.prototype.withFaceExpressions=function(){return new xA(this,this.input)},t}(N8),CA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r,a,i,o;return Ue(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,vA(n,this.input,function(l){return ar.ageGenderNet.predictAgeAndGender(l)},this.extractedFaces)]:[2];case 2:return r=s.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,y8(x8(n,i,o),a)]}})})},t.prototype.withFaceExpressions=function(){return new bA(this,this.input)},t}(N8),EA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new wA(this,this.input)},t.prototype.withFaceDescriptors=function(){return new NA(this,this.input)},t}(_A),kA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new SA(this,this.input)},t.prototype.withFaceDescriptor=function(){return new TA(this,this.input)},t}(CA),T8=function(e){Ze(t,e);function t(n,r){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a}return t}(Ev),NA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r;return Ue(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,iw(n,this.input,function(i){return Promise.all(i.map(function(o){return ar.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return g8(n[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new wA(this,this.input)},t.prototype.withAgeAndGender=function(){return new EA(this,this.input)},t}(T8),TA=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r;return Ue(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,vA(n,this.input,function(i){return ar.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,g8(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new SA(this,this.input)},t.prototype.withAgeAndGender=function(){return new kA(this,this.input)},t}(T8),A8=function(e){Ze(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ar.faceLandmark68TinyNet:ar.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Ev),yxe=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r,a,i,o,s=this;return Ue(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return n=l.sent(),r=n.map(function(c){return c.detection}),this.input instanceof nn?[4,cA(this.input,r)]:[3,3];case 2:return i=l.sent(),[3,5];case 3:return[4,lA(this.input,r)];case 4:i=l.sent(),l.label=5;case 5:return a=i,[4,Promise.all(a.map(function(c){return s.landmarkNet.detectLandmarks(c)}))];case 6:return o=l.sent(),a.forEach(function(c){return c instanceof nn&&c.dispose()}),[2,n.map(function(c,u){return rw(c,o[u])})]}})})},t.prototype.withFaceExpressions=function(){return new wA(this,this.input)},t.prototype.withAgeAndGender=function(){return new EA(this,this.input)},t.prototype.withFaceDescriptors=function(){return new NA(this,this.input)},t}(A8),xxe=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r,a,i,o;return Ue(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof nn?[4,cA(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,lA(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=s.sent(),a.forEach(function(l){return l instanceof nn&&l.dispose()}),[2,rw(n,o)]}})})},t.prototype.withFaceExpressions=function(){return new SA(this,this.input)},t.prototype.withAgeAndGender=function(){return new kA(this,this.input)},t.prototype.withFaceDescriptor=function(){return new TA(this,this.input)},t}(A8),P8=function(e){Ze(t,e);function t(n,r){r===void 0&&(r=new aw);var a=e.call(this)||this;return a.input=n,a.options=r,a}return t}(Ev),bxe=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r,a,i;return Ue(this,function(o){switch(o.label){case 0:return n=this,r=n.input,a=n.options,a instanceof b8?[4,ar.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(i=a instanceof _8?function(s){return ar.tinyFaceDetector.locateFaces(s,a)}:a instanceof aw?function(s){return ar.ssdMobilenetv1.locateFaces(s,a)}:a instanceof mA?function(s){return ar.tinyYolov2.locateFaces(s,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Be(n,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return lm({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new yxe(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new xA(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new _A(this.runAndExtendWithFaceDetections(),this.input)},t}(P8),wxe=function(e){Ze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Be(this,void 0,void 0,function(){var n,r;return Ue(this,function(a){switch(a.label){case 0:return[4,new bxe(this.input,this.options)];case 1:return n=a.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Be(n,void 0,void 0,function(){var a;return Ue(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?lm({},a):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new xxe(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new bA(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new CA(this.runAndExtendWithFaceDetection(),this.input)},t}(P8);function Sxe(e,t){return t===void 0&&(t=new aw),new wxe(e,t)}function _xe(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof jg)return o;if(o instanceof Float32Array)return new jg(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new jg(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return _xe(r,t)}).reduce(function(r,a){return r+a},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new VD(i,n.computeMeanDistance(t,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new VD("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return jg.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();function j8(e,t){var n=new Dc(t.width,t.height),r=n.width,a=n.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(e))return e.map(function(s){return j8(s,{width:r,height:a})});if(d8(e)){var i=e.detection.forSize(r,a),o=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return rw(lm(e,i),o)}return KV(e)?lm(e,e.detection.forSize(r,a)):e instanceof sm||e instanceof ji?e.forSize(r,a):e}const Mg=6,Cxe=()=>{const e=Ha(),{user:t,role:n,completeFaceRegistration:r,logout:a}=kr(),[i]=zQ(),o=i.get("mode")==="update",[s,l]=_.useState("intro"),[c,u]=_.useState(0);_.useState("");const[d,f]=_.useState(!1),p=_.useRef(null),v=_.useRef(null),[m,g]=_.useState([]),[y,x]=_.useState(!1),[b,w]=_.useState([]),[S,C]=_.useState(!1),[E,k]=_.useState("align"),[N,T]=_.useState(.5),[A,P]=_.useState(255),[I,R]=_.useState(null),[D,M]=_.useState(null),[$,j]=_.useState(!1),[O,B]=_.useState(!1),[G,L]=_.useState(!1),W=_.useRef([]),J={align:"Center your face in the oval",front:"Look straight at the camera",left:"Great! Now turn your head LEFT",right:"Finally, turn your head RIGHT",done:"Verification complete!"};_.useEffect(()=>{(async()=>{if(!t||n!=="student"){e("/");return}if(t!=null&&t.face_registered&&!o){l("already-registered");return}try{const le=await Ce.getStudentByProfileId(t.id);le!=null&&le.face_registered&&!o&&l("already-registered")}catch(le){console.error("Failed to verify registration status:",le)}})()},[t,n,e,o]),_.useEffect(()=>{(async()=>{try{const le="/models";await Promise.all([ar.tinyFaceDetector.loadFromUri(le),ar.faceLandmark68TinyNet.loadFromUri(le)]),C(!0),console.log(" Face detection models loaded (for visual feedback only)")}catch(le){console.error("Model loading error:",le),C(!1)}})()},[]),_.useEffect(()=>{let ae=null;if((s==="intro"||s==="capturing")&&S){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("Camera access is blocked because this site is not using a secure connection (HTTPS or localhost)."),l("insecure");return}navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720},focusMode:"continuous",advanced:[{focusMode:"continuous"}]}}).then(le=>{if(ae=le,p.current){p.current.srcObject=le,p.current.setAttribute("playsinline","true"),p.current.setAttribute("muted","true"),p.current.play().catch(_e=>console.error("Video play error:",_e));const ge=le.getVideoTracks()[0];ge&&ge.applyConstraints({advanced:[{focusMode:"continuous"}]}).catch(()=>{})}}).catch(le=>{console.error("Webcam error:",le),l("error")})}return()=>{ae&&ae.getTracks().forEach(le=>le.stop())}},[s,S]),_.useEffect(()=>{let ae=!0;const le=async()=>{var _e;if(!p.current||!v.current||!S||s!=="capturing"||!G)return;if(p.current.readyState<2||p.current.videoWidth===0){requestAnimationFrame(le);return}const ge=await Sxe(p.current,new _8({inputSize:160,scoreThreshold:.5})).withFaceLandmarks(!0);if(ae&&v.current&&p.current){const Re={width:p.current.offsetWidth,height:p.current.offsetHeight};if(e0e(v.current,Re),P(255),ge){const He=j8(ge,Re),{box:Me}=He.detection,st=He.landmarks,xe=Me.x+Me.width/2,me=Me.y+Me.height/2,Ee=Re.width/2,X=Re.height/2,be=Re.width*.15,oe=Re.height*.15,Ie=Math.abs(xe-Ee)<be&&Math.abs(me-X)<oe,Dt=Me.width>Re.width*.25&&Me.width<Re.width*.7,qn=Me.width<Re.width*.25,Nr=Me.width>Re.width*.7;R(qn?"too-far":Nr?"too-close":"perfect"),Ie&&Dt?(M(Me),E==="align"&&k("front")):M(null);const ur=Z(st);T(ur);const Kn=st.getNose()[3];W.current.push({x:Kn.x,y:Kn.y}),W.current.length>5&&W.current.shift();const Ii=(W.current.length>=5?ne(W.current):100)<3.5;if(B(Ii),Ie&&!$&&Ii&&(E==="front"&&Math.abs(ur-.5)<.12?K("front"):E==="left"&&ur>.6?K("left"):E==="right"&&ur<.4&&K("right")),v.current){const Ss=v.current.getContext("2d");Ss&&(Ss.clearRect(0,0,v.current.width,v.current.height),Ss.fillStyle=Ii?"#22c55e":"#3b82f6",Ss.beginPath(),Ss.arc(Kn.x,Kn.y,8,0,Math.PI*2),Ss.fill())}}else M(null),(_e=v.current.getContext("2d"))==null||_e.clearRect(0,0,v.current.width,v.current.height)}ae&&requestAnimationFrame(le)};return s==="capturing"&&le(),()=>{ae=!1}},[s,S,E,$]);const ee=()=>{try{const ae=new(window.AudioContext||window.webkitAudioContext),le=ae.createOscillator(),ge=ae.createGain();le.connect(ge),ge.connect(ae.destination),le.frequency.setValueAtTime(1200,ae.currentTime),le.frequency.exponentialRampToValueAtTime(400,ae.currentTime+.05),ge.gain.setValueAtTime(.9,ae.currentTime),ge.gain.exponentialRampToValueAtTime(.01,ae.currentTime+.1),le.start(ae.currentTime),le.stop(ae.currentTime+.1)}catch{console.log("Audio not supported")}},ne=ae=>{let le=0;for(let ge=1;ge<ae.length;ge++)le+=Math.sqrt(Math.pow(ae[ge].x-ae[ge-1].x,2)+Math.pow(ae[ge].y-ae[ge-1].y,2));return le/ae.length},Z=ae=>{const le=ae.getNose()[3],ge=ae.getLeftEye()[3],_e=ae.getRightEye()[0],Re=Math.abs(le.x-ge.x),He=Math.abs(le.x-_e.x);return Re/(Re+He)},K=async ae=>{if($||!p.current)return;j(!0),ee();const le=2,ge=[];for(let _e=0;_e<le;_e++){f(!0),setTimeout(()=>f(!1),100);const Re=document.createElement("canvas");Re.width=p.current.videoWidth,Re.height=p.current.videoHeight;const He=Re.getContext("2d");if(He){He.drawImage(p.current,0,0);const Me=Re.toDataURL("image/jpeg",.98),st=await new Promise(xe=>Re.toBlob(me=>xe(me),"image/jpeg",.98));ge.push({id:Date.now()+_e,url:Me,blob:st})}await new Promise(Me=>setTimeout(Me,200))}g(_e=>_e.length>=Mg?_e:[..._e,...ge]),ae==="front"?k("left"):ae==="left"?k("right"):ae==="right"&&k("done"),j(!1)},Q=ae=>{g(le=>le.filter(ge=>ge.id!==ae))},ie=async()=>{if(!(m.length<Mg)){x(!0),l("processing");try{const ae=[];for(let le=0;le<m.length;le++){const ge=m[le];console.log(`Processing image ${le+1}/${m.length} (Blob size: ${ge.blob.size} bytes)...`);try{const _e=await Ce.registerFaceEmbedding(ge.blob);_e.success&&_e.embedding?(console.log(` Image ${le+1} processed successfully.`),ae.push(_e.embedding)):console.warn(` Image ${le+1} failed:`,_e)}catch(_e){console.error(` Error processing image ${le+1}:`,_e),_e.message.includes("timed out")&&alert(`Image ${le+1} timed out. The server might be busy or restarting.`)}}console.log(`Processing complete. Success count: ${ae.length}/${m.length}`),ae.length>0?(w(ae),ae.length===m.length?await V(ae):(alert(`Only ${ae.length} of ${Mg} faces were detected clearly. The rest failed or timed out. Please retake.`),l("capturing"),x(!1),g([]))):(alert("No faces successfully processed. Server might be down or no faces detected."),l("capturing"),g([]),x(!1))}catch(ae){console.error("Batch upload global error:",ae),alert("Critical error connecting to server."),l("capturing"),x(!1)}}},V=async ae=>{try{const le=ae[0].length,ge=new Array(le).fill(0);ae.forEach(He=>{He.forEach((Me,st)=>ge[st]+=Me)}),ge.forEach((He,Me,st)=>st[Me]=He/ae.length),console.log(` Averaged ${ae.length} embeddings`);const _e=Math.sqrt(ge.reduce((He,Me)=>He+Me*Me,0));if(_e>0){for(let He=0;He<ge.length;He++)ge[He]/=_e;console.log(` Normalized average embedding (Magnitude: ${_e.toFixed(4)} -> 1.0000)`)}(await r(t.id,ge)).success?(l("success"),Ce.syncFaces()):l("error")}catch(le){console.error("Finalization error:",le),l("error")}finally{x(!1)}},q=()=>{u(0),w([]),l("capturing")},de=()=>{window.location.href="/student/attendance"},he=()=>{u(0),w([]),l("intro")};return t?h.jsxs("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4 overflow-x-hidden relative selection:bg-cyan-500/30",children:[h.jsxs("div",{className:"absolute inset-0 z-0",children:[h.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-900/40 rounded-full blur-[120px] animate-pulse"}),h.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] bg-cyan-900/30 rounded-full blur-[120px] animate-pulse delay-1000"}),h.jsx("div",{className:"absolute top-[40%] left-[30%] w-[30%] h-[30%] bg-indigo-900/20 rounded-full blur-[100px] animate-pulse delay-2000"})]}),h.jsxs("div",{className:"w-full max-w-4xl z-10 grid grid-cols-1 lg:grid-cols-2 lg:gap-8 items-center",children:[h.jsxs("div",{className:"space-y-8 order-2 lg:order-1 animate-slide-in-left",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("h1",{className:"text-4xl lg:text-5xl font-black tracking-tighter bg-gradient-to-br from-white via-gray-200 to-gray-500 bg-clip-text text-transparent flex items-center gap-4",children:[h.jsx(np,{className:"w-12 h-12 text-cyan-400"}),"Face Registration"]}),h.jsx("p",{className:"text-lg text-gray-400 font-medium leading-relaxed max-w-md",children:"Register your face data so teachers can mark your attendance automatically using their device."})]}),h.jsxs("div",{className:"relative w-full px-2 py-4",children:[h.jsx("div",{className:"absolute top-1/2 left-6 right-6 h-0.5 bg-white/10 -translate-y-full -z-10",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-500 transition-all duration-700 ease-out",style:{width:s==="success"?"100%":s==="capturing"&&E!=="align"?"50%":"0%"}})}),h.jsx("div",{className:"flex justify-between items-start relative z-10",children:[{icon:Bp,title:"Positioning",active:!0,completed:E!=="align"||s==="success"},{icon:$2,title:"Scanning",active:E!=="align"||s==="success",completed:s==="success"},{icon:py,title:"Saved",active:s==="success",completed:s==="success"}].map((ae,le)=>h.jsxs("div",{className:"flex flex-col items-center gap-2 group cursor-default",children:[h.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-500 ${ae.active?"bg-black border-cyan-500 shadow-[0_0_20px_rgba(34,211,238,0.4)] scale-110 text-cyan-400":"bg-black border-white/10 text-gray-500"} ${ae.completed?"bg-cyan-500 border-cyan-500 text-black":""}`,children:h.jsx(ae.icon,{className:"w-5 h-5"})}),h.jsx("span",{className:`text-xs font-bold tracking-wider uppercase transition-colors duration-300 ${ae.active?"text-cyan-400":"text-gray-600"}`,children:ae.title})]},le))})]})]}),h.jsx("div",{className:"relative order-1 lg:order-2 animate-scale-in",children:h.jsxs("div",{className:"relative bg-black/40 backdrop-blur-2xl border border-white/10 rounded-[2.5rem] p-4 shadow-2xl overflow-hidden group hover:border-white/20 transition-all duration-500",children:[h.jsx("div",{className:"absolute top-8 left-0 right-0 z-20 text-center px-4",children:s==="capturing"&&h.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white/10 shadow-lg",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),h.jsx("span",{className:"text-xs font-bold tracking-wide uppercase text-white/90",children:"Camera Active"})]})}),s==="success"&&h.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-md animate-fade-in text-center p-6",children:[h.jsxs("div",{className:"relative mb-6",children:[h.jsx("div",{className:"absolute inset-0 bg-green-500/30 blur-[40px] rounded-full"}),h.jsx(xd,{className:"w-24 h-24 text-green-400 relative z-10 drop-shadow-[0_0_15px_rgba(74,222,128,0.5)]"})]}),h.jsx("h2",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:"Verified!"}),h.jsx("p",{className:"text-gray-400 mb-8",children:"Your face ID has been securely registered."}),h.jsx(we,{onClick:de,className:"w-full max-w-sm bg-white text-black hover:bg-gray-200 font-bold h-12 rounded-xl shadow-xl",children:"Continue to Dashboard"})]}),s==="error"&&h.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in p-6 text-center",children:[h.jsx(I2,{className:"w-16 h-16 text-rose-500 mb-4"}),h.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Registration Failed"}),h.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"We couldn't verify your face. Please try again in better lighting."}),h.jsx(we,{onClick:he,className:"bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Try Again"})]}),s==="already-registered"&&h.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/95 backdrop-blur-md animate-fade-in p-8 text-center",children:[h.jsxs("div",{className:"relative mb-6",children:[h.jsx("div",{className:"absolute inset-0 bg-cyan-500/20 blur-[40px] rounded-full"}),h.jsx(py,{className:"w-20 h-20 text-cyan-400 relative z-10"})]}),h.jsx("h2",{className:"text-2xl font-black text-white mb-3",children:"Identity Locked"}),h.jsxs("p",{className:"text-gray-400 mb-8 leading-relaxed max-w-xs",children:["Your face biometric is already registered in the system.",h.jsx("br",{}),h.jsx("br",{}),h.jsx("span",{className:"text-amber-500/80 text-xs font-bold uppercase tracking-widest",children:"Security Notice"}),h.jsx("br",{}),"To prevent identity fraud, you cannot re-register yourself. Please contact your ",h.jsx("b",{children:"Department Admin"})," to reset your face ID."]}),h.jsx(we,{onClick:()=>e("/student/attendance"),className:"w-full max-w-[240px] bg-white text-black hover:bg-gray-200 font-bold h-12 rounded-xl",children:"Return to Dashboard"})]}),h.jsxs("div",{className:`relative aspect-[3/4] sm:aspect-[4/3] rounded-[2rem] overflow-hidden bg-gray-900 border border-white/5 shadow-inner ${s==="processing"?"opacity-50 blur-sm scale-95":"scale-100"} transition-all duration-500`,children:[(s==="intro"||s==="capturing")&&h.jsxs(h.Fragment,{children:[h.jsx("video",{ref:p,autoPlay:!0,muted:!0,playsInline:!0,onLoadedMetadata:()=>L(!0),onPlay:()=>L(!0),className:"absolute inset-0 w-full h-full object-cover scale-x-[-1]"}),h.jsx("canvas",{ref:v,className:"absolute inset-0 w-full h-full pointer-events-none z-10"}),h.jsxs("div",{className:"absolute inset-0 pointer-events-none z-20",children:[h.jsxs("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[65%] h-[55%] sm:w-[50%] sm:h-[65%] rounded-[50%] border-[3px] transition-all duration-300 backdrop-blur-[1px] ${D?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.3)]":"border-white/20"}`,children:[h.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-cyan-400 to-transparent shadow-[0_0_15px_cyan] opacity-0 animate-scan-vertical",style:{animationDuration:"2s",animationIterationCount:"infinite",opacity:D?1:0}}),h.jsx("div",{className:"absolute top-4 left-0 w-0.5 h-6 bg-white/30"}),h.jsx("div",{className:"absolute top-0 left-4 w-6 h-0.5 bg-white/30"}),h.jsx("div",{className:"absolute top-4 right-0 w-0.5 h-6 bg-white/30"}),h.jsx("div",{className:"absolute top-0 right-4 w-6 h-0.5 bg-white/30"})]}),s==="capturing"&&h.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex flex-col items-center gap-2",children:[!1,h.jsx("div",{className:`px-6 py-3 rounded-2xl font-bold text-lg shadow-2xl backdrop-blur-xl border transition-all duration-300 ${$?"bg-green-500 text-black border-green-400 scale-110":I==="too-far"?"bg-blue-500/90 text-white border-blue-400 animate-pulse":I==="too-close"?"bg-orange-500/90 text-white border-orange-400 animate-pulse":D?"bg-black/50 text-white border-white/20":"bg-white/10 text-white/60 border-transparent"}`,children:$?"Hold Still... ":A<25?"Move to Light":I==="too-far"?" Come Closer":I==="too-close"?" Move Back":J[E]}),h.jsx("div",{className:"flex gap-2",children:[0,1,2].map(ae=>h.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${ae<m.length/2?"bg-cyan-400 w-6":"bg-white/20"}`},ae))})]})]})]}),s==="loading"&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-white/10 border-t-cyan-500 rounded-full animate-spin mb-4"}),h.jsx("p",{className:"text-cyan-500 font-mono text-xs uppercase tracking-widest animate-pulse",children:"Initializing Neural Net"})]}),s==="processing"&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-30",children:[h.jsx("div",{className:"w-20 h-20 border-4 border-white/10 border-t-cyan-400 rounded-full animate-spin shadow-[0_0_40px_rgba(34,211,238,0.2)]"}),h.jsx("p",{className:"mt-6 font-bold text-xl text-white tracking-tight animate-pulse",children:"Analysing Biometrics..."})]}),s==="intro"&&h.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:h.jsxs(we,{onClick:q,size:"lg",className:"bg-white text-black hover:bg-gray-200 hover:scale-105 transition-all duration-300 h-16 px-10 rounded-full text-lg font-black shadow-[0_0_40px_rgba(255,255,255,0.3)] group",disabled:!S,children:[h.jsx($2,{className:"w-6 h-6 mr-3 group-hover:rotate-12 transition-transform"}),"Start Face Scan"]})})]}),m.length>0&&s!=="success"&&h.jsxs("div",{className:"mt-4 p-3 bg-white/5 border border-white/5 rounded-2xl flex gap-3 overflow-x-auto h-24 items-center px-4 custom-scrollbar",children:[m.map((ae,le)=>h.jsxs("div",{className:"relative group shrink-0 w-16 h-16 rounded-xl overflow-hidden border-2 border-white/20 hover:border-cyan-400 transition-all cursor-pointer",children:[h.jsx("img",{src:ae.url,className:"w-full h-full object-cover scale-x-[-1]"}),h.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",onClick:()=>Q(ae.id),children:h.jsx(Up,{className:"w-6 h-6 text-white"})})]},ae.id)),h.jsxs("div",{className:"ml-auto text-xs text-right text-gray-500 font-mono",children:[m.length," / ",Mg," ",h.jsx("br",{})," FRAMES"]})]}),s==="capturing"&&E==="done"&&h.jsx("div",{className:"absolute bottom-8 left-8 right-8 z-40 animate-slide-up",children:h.jsxs(we,{onClick:ie,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white h-16 rounded-2xl text-xl font-bold border-0 shadow-[0_10px_40px_rgba(34,197,94,0.4)] transition-all transform hover:scale-[1.02] active:scale-[0.98]",disabled:y,children:[y?h.jsx(wd,{className:"w-6 h-6 animate-spin mr-2"}):h.jsx(py,{className:"w-6 h-6 mr-2"}),"Save Face Data"]})})]})})]}),h.jsx("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 lg:bottom-auto lg:left-auto lg:top-4 lg:right-4 lg:translate-x-0 z-50 w-full lg:w-auto flex justify-center lg:block px-4 lg:px-0",children:h.jsx("button",{onClick:a,className:"bg-black/40 backdrop-blur-md border border-white/10 text-red-400 text-[10px] font-bold uppercase tracking-widest px-8 lg:px-4 py-3 lg:py-2 rounded-full hover:bg-white/5 transition-all shadow-lg border-red-500/20",children:"Sign Out"})}),h.jsx("style",{children:`
        @keyframes scan-vertical {
          0% { top: 10%; opacity: 0; }
          20% { opacity: 1; }
          80% { opacity: 1; }
          100% { top: 90%; opacity: 0; }
        }
        .animate-scan-vertical {
          animation-name: scan-vertical;
          animation-timing-function: linear;
        }
      `})]}):null},Exe=()=>{const e=vo();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),h.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),h.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),h.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},GS=({allowedRole:e})=>{const{isAuthenticated:t,role:n,user:r,loading:a}=kr();return a?h.jsx(Jz,{}):t?e&&n!==e?n==="admin"?h.jsx(jo,{to:"/admin/dashboard",replace:!0}):n==="student"?h.jsx(jo,{to:"/student/attendance",replace:!0}):n==="teacher"?h.jsx(jo,{to:"/teacher/dashboard",replace:!0}):h.jsx(jo,{to:"/",replace:!0}):n==="student"&&!(r!=null&&r.face_registered)&&window.location.pathname!=="/face-registration"?h.jsx(jo,{to:"/face-registration",replace:!0}):h.jsx(cb,{}):h.jsx(jo,{to:"/",replace:!0})};var ow="Dialog",[O8,yVe]=Sa(ow),[kxe,Oi]=O8(ow),R8=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=_.useRef(null),l=_.useRef(null),[c,u]=uo({prop:r,defaultProp:a??!1,onChange:i,caller:ow});return h.jsx(kxe,{scope:t,triggerRef:s,contentRef:l,contentId:sr(),titleId:sr(),descriptionId:sr(),open:c,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};R8.displayName=ow;var I8="DialogTrigger",D8=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Oi(I8,n),i=ft(t,a.triggerRef);return h.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":jA(a.open),...r,ref:i,onClick:ye(e.onClick,a.onOpenToggle)})});D8.displayName=I8;var AA="DialogPortal",[Nxe,M8]=O8(AA,{forceMount:void 0}),$8=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Oi(AA,t);return h.jsx(Nxe,{scope:t,forceMount:n,children:_.Children.map(r,o=>h.jsx(Jr,{present:n||i.open,children:h.jsx(Lf,{asChild:!0,container:a,children:o})}))})};$8.displayName=AA;var F0="DialogOverlay",F8=_.forwardRef((e,t)=>{const n=M8(F0,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Oi(F0,e.__scopeDialog);return i.modal?h.jsx(Jr,{present:r||i.open,children:h.jsx(Axe,{...a,ref:t})}):null});F8.displayName=F0;var Txe=wl("DialogOverlay.RemoveScroll"),Axe=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Oi(F0,n);return h.jsx(pv,{as:Txe,allowPinchZoom:!0,shards:[a.contentRef],children:h.jsx(Fe.div,{"data-state":jA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Xc="DialogContent",L8=_.forwardRef((e,t)=>{const n=M8(Xc,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Oi(Xc,e.__scopeDialog);return h.jsx(Jr,{present:r||i.open,children:i.modal?h.jsx(Pxe,{...a,ref:t}):h.jsx(jxe,{...a,ref:t})})});L8.displayName=Xc;var Pxe=_.forwardRef((e,t)=>{const n=Oi(Xc,e.__scopeDialog),r=_.useRef(null),a=ft(t,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return Db(i)},[]),h.jsx(B8,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:ye(e.onFocusOutside,i=>i.preventDefault())})}),jxe=_.forwardRef((e,t)=>{const n=Oi(Xc,e.__scopeDialog),r=_.useRef(!1),a=_.useRef(!1);return h.jsx(B8,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),B8=_.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=Oi(Xc,n),l=_.useRef(null),c=ft(t,l);return Ib(),h.jsxs(h.Fragment,{children:[h.jsx(hv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:h.jsx(ou,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":jA(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(Oxe,{titleId:s.titleId}),h.jsx(Ixe,{contentRef:l,descriptionId:s.descriptionId})]})]})}),PA="DialogTitle",U8=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Oi(PA,n);return h.jsx(Fe.h2,{id:a.titleId,...r,ref:t})});U8.displayName=PA;var z8="DialogDescription",W8=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Oi(z8,n);return h.jsx(Fe.p,{id:a.descriptionId,...r,ref:t})});W8.displayName=z8;var V8="DialogClose",H8=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Oi(V8,n);return h.jsx(Fe.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,()=>a.onOpenChange(!1))})});H8.displayName=V8;function jA(e){return e?"open":"closed"}var G8="DialogTitleWarning",[xVe,q8]=NJ(G8,{contentName:Xc,titleName:PA,docsSlug:"dialog"}),Oxe=({titleId:e})=>{const t=q8(G8),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Rxe="DialogDescriptionWarning",Ixe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${q8(Rxe).contentName}}.`;return _.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},OA=R8,Dxe=D8,RA=$8,kv=F8,Nv=L8,sw=U8,lw=W8,K8=H8;const X8=OA,Mxe=RA,Y8=_.forwardRef(({className:e,...t},n)=>h.jsx(kv,{className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Y8.displayName=kv.displayName;const $xe=sv("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),IA=_.forwardRef(({side:e="right",className:t,children:n,...r},a)=>h.jsxs(Mxe,{children:[h.jsx(Y8,{}),h.jsxs(Nv,{ref:a,className:Te($xe({side:e}),t),...r,children:[n,h.jsxs(K8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[h.jsx(Eb,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));IA.displayName=Nv.displayName;const Q8=_.forwardRef(({className:e,...t},n)=>h.jsx(sw,{ref:n,className:Te("text-lg font-semibold text-foreground",e),...t}));Q8.displayName=sw.displayName;const J8=_.forwardRef(({className:e,...t},n)=>h.jsx(lw,{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));J8.displayName=lw.displayName;const Fxe=()=>{const{logout:e,user:t}=kr(),n=Ha(),[r,a]=_.useState(!1),i=()=>{e(),n("/")},o=[{icon:M2,label:"Dashboard",path:"/admin/dashboard"},{icon:W5,label:"Academic Structure",path:"/admin/academic"},{icon:Fa,label:"Users",path:"/admin/users"},{icon:qte,label:"Routines",path:"/admin/routines"},{icon:Qte,label:"Attendance",path:"/admin/attendance"},{icon:lne,label:"Settings",path:"/admin/settings"}],s=({mobile:l=!1})=>h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"h-20 border-b border-border flex items-center px-6",children:h.jsxs("div",{children:[h.jsx("h1",{className:"font-black text-xl tracking-tight leading-none text-foreground",children:"AttendU"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Admin Portal"})]})}),h.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:o.map(c=>h.jsxs(Js,{to:c.path,onClick:()=>l&&a(!1),className:({isActive:u})=>`flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors ${u?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[h.jsx(c.icon,{className:"w-4 h-4 shrink-0"}),c.label]},c.path))}),h.jsx("div",{className:"p-4 border-t border-border",children:h.jsxs(we,{variant:"outline",className:"w-full justify-start gap-2 text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",onClick:i,children:[h.jsx(bd,{className:"w-4 h-4"}),"Sign Out"]})})]});return h.jsxs("div",{className:"min-h-screen bg-background flex",children:[h.jsx("aside",{className:"hidden lg:flex w-64 border-r border-border bg-card flex-col fixed h-full z-10",children:h.jsx(s,{})}),h.jsx(X8,{open:r,onOpenChange:a,children:h.jsx(IA,{side:"left",className:"w-64 p-0 flex flex-col",children:h.jsx(s,{mobile:!0})})}),h.jsxs("div",{className:"flex-1 lg:ml-64 flex flex-col min-h-screen w-full",children:[h.jsxs("header",{className:"h-16 border-b border-border bg-background/50 backdrop-blur-sm sticky top-0 z-10 px-4 sm:px-8 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(we,{variant:"ghost",size:"icon",className:"lg:hidden shrink-0",onClick:()=>a(!0),children:h.jsx(V5,{className:"w-5 h-5"})}),h.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[h.jsx("span",{className:"hidden sm:inline",children:"Administration Panel"}),h.jsx("span",{className:"text-border hidden sm:inline",children:"/"}),h.jsx("span",{className:"text-foreground font-medium",children:"Overview"})]})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("div",{className:"h-auto py-1 px-3 bg-slate-50/50 rounded-xl flex items-center gap-3 border border-slate-100/50",children:[h.jsxs("div",{className:"text-right hidden md:block",children:[h.jsx("p",{className:"text-sm font-black text-slate-800 leading-none truncate max-w-[150px]",children:(t==null?void 0:t.name)||"Administrator"}),h.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase mt-1",children:"Management"})]}),h.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-slate-400 shrink-0",children:h.jsx(mc,{className:"w-4 h-4"})})]})})]}),h.jsxs("main",{className:"flex-1 flex flex-col p-4 sm:p-6 md:p-8 overflow-auto animate-in fade-in duration-500",children:[h.jsx("div",{className:"flex-1",children:h.jsx(cb,{})}),h.jsx(Gf,{variant:"light"})]})]})]})};var Lxe=Array.isArray,Zr=Lxe,Bxe=typeof Bv=="object"&&Bv&&Bv.Object===Object&&Bv,Z8=Bxe,Uxe=Z8,zxe=typeof self=="object"&&self&&self.Object===Object&&self,Wxe=Uxe||zxe||Function("return this")(),wo=Wxe,Vxe=wo,Hxe=Vxe.Symbol,Tv=Hxe,YD=Tv,eH=Object.prototype,Gxe=eH.hasOwnProperty,qxe=eH.toString,_h=YD?YD.toStringTag:void 0;function Kxe(e){var t=Gxe.call(e,_h),n=e[_h];try{e[_h]=void 0;var r=!0}catch{}var a=qxe.call(e);return r&&(t?e[_h]=n:delete e[_h]),a}var Xxe=Kxe,Yxe=Object.prototype,Qxe=Yxe.toString;function Jxe(e){return Qxe.call(e)}var Zxe=Jxe,QD=Tv,ebe=Xxe,tbe=Zxe,nbe="[object Null]",rbe="[object Undefined]",JD=QD?QD.toStringTag:void 0;function abe(e){return e==null?e===void 0?rbe:nbe:JD&&JD in Object(e)?ebe(e):tbe(e)}var xs=abe;function ibe(e){return e!=null&&typeof e=="object"}var bs=ibe,obe=xs,sbe=bs,lbe="[object Symbol]";function cbe(e){return typeof e=="symbol"||sbe(e)&&obe(e)==lbe}var Xf=cbe,ube=Zr,dbe=Xf,fbe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hbe=/^\w*$/;function pbe(e,t){if(ube(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||dbe(e)?!0:hbe.test(e)||!fbe.test(e)||t!=null&&e in Object(t)}var DA=pbe;function mbe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Bl=mbe;const Yf=It(Bl);var vbe=xs,gbe=Bl,ybe="[object AsyncFunction]",xbe="[object Function]",bbe="[object GeneratorFunction]",wbe="[object Proxy]";function Sbe(e){if(!gbe(e))return!1;var t=vbe(e);return t==xbe||t==bbe||t==ybe||t==wbe}var MA=Sbe;const ot=It(MA);var _be=wo,Cbe=_be["__core-js_shared__"],Ebe=Cbe,qS=Ebe,ZD=function(){var e=/[^.]+$/.exec(qS&&qS.keys&&qS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function kbe(e){return!!ZD&&ZD in e}var Nbe=kbe,Tbe=Function.prototype,Abe=Tbe.toString;function Pbe(e){if(e!=null){try{return Abe.call(e)}catch{}try{return e+""}catch{}}return""}var tH=Pbe,jbe=MA,Obe=Nbe,Rbe=Bl,Ibe=tH,Dbe=/[\\^$.*+?()[\]{}|]/g,Mbe=/^\[object .+?Constructor\]$/,$be=Function.prototype,Fbe=Object.prototype,Lbe=$be.toString,Bbe=Fbe.hasOwnProperty,Ube=RegExp("^"+Lbe.call(Bbe).replace(Dbe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zbe(e){if(!Rbe(e)||Obe(e))return!1;var t=jbe(e)?Ube:Mbe;return t.test(Ibe(e))}var Wbe=zbe;function Vbe(e,t){return e==null?void 0:e[t]}var Hbe=Vbe,Gbe=Wbe,qbe=Hbe;function Kbe(e,t){var n=qbe(e,t);return Gbe(n)?n:void 0}var fu=Kbe,Xbe=fu,Ybe=Xbe(Object,"create"),cw=Ybe,eM=cw;function Qbe(){this.__data__=eM?eM(null):{},this.size=0}var Jbe=Qbe;function Zbe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ewe=Zbe,twe=cw,nwe="__lodash_hash_undefined__",rwe=Object.prototype,awe=rwe.hasOwnProperty;function iwe(e){var t=this.__data__;if(twe){var n=t[e];return n===nwe?void 0:n}return awe.call(t,e)?t[e]:void 0}var owe=iwe,swe=cw,lwe=Object.prototype,cwe=lwe.hasOwnProperty;function uwe(e){var t=this.__data__;return swe?t[e]!==void 0:cwe.call(t,e)}var dwe=uwe,fwe=cw,hwe="__lodash_hash_undefined__";function pwe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fwe&&t===void 0?hwe:t,this}var mwe=pwe,vwe=Jbe,gwe=ewe,ywe=owe,xwe=dwe,bwe=mwe;function Qf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Qf.prototype.clear=vwe;Qf.prototype.delete=gwe;Qf.prototype.get=ywe;Qf.prototype.has=xwe;Qf.prototype.set=bwe;var wwe=Qf;function Swe(){this.__data__=[],this.size=0}var _we=Swe;function Cwe(e,t){return e===t||e!==e&&t!==t}var $A=Cwe,Ewe=$A;function kwe(e,t){for(var n=e.length;n--;)if(Ewe(e[n][0],t))return n;return-1}var uw=kwe,Nwe=uw,Twe=Array.prototype,Awe=Twe.splice;function Pwe(e){var t=this.__data__,n=Nwe(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Awe.call(t,n,1),--this.size,!0}var jwe=Pwe,Owe=uw;function Rwe(e){var t=this.__data__,n=Owe(t,e);return n<0?void 0:t[n][1]}var Iwe=Rwe,Dwe=uw;function Mwe(e){return Dwe(this.__data__,e)>-1}var $we=Mwe,Fwe=uw;function Lwe(e,t){var n=this.__data__,r=Fwe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Bwe=Lwe,Uwe=_we,zwe=jwe,Wwe=Iwe,Vwe=$we,Hwe=Bwe;function Jf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Jf.prototype.clear=Uwe;Jf.prototype.delete=zwe;Jf.prototype.get=Wwe;Jf.prototype.has=Vwe;Jf.prototype.set=Hwe;var dw=Jf,Gwe=fu,qwe=wo,Kwe=Gwe(qwe,"Map"),FA=Kwe,tM=wwe,Xwe=dw,Ywe=FA;function Qwe(){this.size=0,this.__data__={hash:new tM,map:new(Ywe||Xwe),string:new tM}}var Jwe=Qwe;function Zwe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var e1e=Zwe,t1e=e1e;function n1e(e,t){var n=e.__data__;return t1e(t)?n[typeof t=="string"?"string":"hash"]:n.map}var fw=n1e,r1e=fw;function a1e(e){var t=r1e(this,e).delete(e);return this.size-=t?1:0,t}var i1e=a1e,o1e=fw;function s1e(e){return o1e(this,e).get(e)}var l1e=s1e,c1e=fw;function u1e(e){return c1e(this,e).has(e)}var d1e=u1e,f1e=fw;function h1e(e,t){var n=f1e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var p1e=h1e,m1e=Jwe,v1e=i1e,g1e=l1e,y1e=d1e,x1e=p1e;function Zf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zf.prototype.clear=m1e;Zf.prototype.delete=v1e;Zf.prototype.get=g1e;Zf.prototype.has=y1e;Zf.prototype.set=x1e;var LA=Zf,nH=LA,b1e="Expected a function";function BA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(b1e);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(BA.Cache||nH),n}BA.Cache=nH;var rH=BA;const w1e=It(rH);var S1e=rH,_1e=500;function C1e(e){var t=S1e(e,function(r){return n.size===_1e&&n.clear(),r}),n=t.cache;return t}var E1e=C1e,k1e=E1e,N1e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T1e=/\\(\\)?/g,A1e=k1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(N1e,function(n,r,a,i){t.push(a?i.replace(T1e,"$1"):r||n)}),t}),P1e=A1e;function j1e(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var UA=j1e,nM=Tv,O1e=UA,R1e=Zr,I1e=Xf,D1e=1/0,rM=nM?nM.prototype:void 0,aM=rM?rM.toString:void 0;function aH(e){if(typeof e=="string")return e;if(R1e(e))return O1e(e,aH)+"";if(I1e(e))return aM?aM.call(e):"";var t=e+"";return t=="0"&&1/e==-D1e?"-0":t}var M1e=aH,$1e=M1e;function F1e(e){return e==null?"":$1e(e)}var iH=F1e,L1e=Zr,B1e=DA,U1e=P1e,z1e=iH;function W1e(e,t){return L1e(e)?e:B1e(e,t)?[e]:U1e(z1e(e))}var oH=W1e,V1e=Xf,H1e=1/0;function G1e(e){if(typeof e=="string"||V1e(e))return e;var t=e+"";return t=="0"&&1/e==-H1e?"-0":t}var hw=G1e,q1e=oH,K1e=hw;function X1e(e,t){t=q1e(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[K1e(t[n++])];return n&&n==r?e:void 0}var zA=X1e,Y1e=zA;function Q1e(e,t,n){var r=e==null?void 0:Y1e(e,t);return r===void 0?n:r}var sH=Q1e;const Ba=It(sH);function J1e(e){return e==null}var Z1e=J1e;const pt=It(Z1e);var eSe=xs,tSe=Zr,nSe=bs,rSe="[object String]";function aSe(e){return typeof e=="string"||!tSe(e)&&nSe(e)&&eSe(e)==rSe}var iSe=aSe;const Yc=It(iSe);var lH={exports:{}},jt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA=Symbol.for("react.element"),VA=Symbol.for("react.portal"),pw=Symbol.for("react.fragment"),mw=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),yw=Symbol.for("react.context"),oSe=Symbol.for("react.server_context"),xw=Symbol.for("react.forward_ref"),bw=Symbol.for("react.suspense"),ww=Symbol.for("react.suspense_list"),Sw=Symbol.for("react.memo"),_w=Symbol.for("react.lazy"),sSe=Symbol.for("react.offscreen"),cH;cH=Symbol.for("react.module.reference");function qa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WA:switch(e=e.type,e){case pw:case vw:case mw:case bw:case ww:return e;default:switch(e=e&&e.$$typeof,e){case oSe:case yw:case xw:case _w:case Sw:case gw:return e;default:return t}}case VA:return t}}}jt.ContextConsumer=yw;jt.ContextProvider=gw;jt.Element=WA;jt.ForwardRef=xw;jt.Fragment=pw;jt.Lazy=_w;jt.Memo=Sw;jt.Portal=VA;jt.Profiler=vw;jt.StrictMode=mw;jt.Suspense=bw;jt.SuspenseList=ww;jt.isAsyncMode=function(){return!1};jt.isConcurrentMode=function(){return!1};jt.isContextConsumer=function(e){return qa(e)===yw};jt.isContextProvider=function(e){return qa(e)===gw};jt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WA};jt.isForwardRef=function(e){return qa(e)===xw};jt.isFragment=function(e){return qa(e)===pw};jt.isLazy=function(e){return qa(e)===_w};jt.isMemo=function(e){return qa(e)===Sw};jt.isPortal=function(e){return qa(e)===VA};jt.isProfiler=function(e){return qa(e)===vw};jt.isStrictMode=function(e){return qa(e)===mw};jt.isSuspense=function(e){return qa(e)===bw};jt.isSuspenseList=function(e){return qa(e)===ww};jt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===pw||e===vw||e===mw||e===bw||e===ww||e===sSe||typeof e=="object"&&e!==null&&(e.$$typeof===_w||e.$$typeof===Sw||e.$$typeof===gw||e.$$typeof===yw||e.$$typeof===xw||e.$$typeof===cH||e.getModuleId!==void 0)};jt.typeOf=qa;lH.exports=jt;var lSe=lH.exports,cSe=xs,uSe=bs,dSe="[object Number]";function fSe(e){return typeof e=="number"||uSe(e)&&cSe(e)==dSe}var uH=fSe;const hSe=It(uH);var pSe=uH;function mSe(e){return pSe(e)&&e!=+e}var vSe=mSe;const eh=It(vSe);var yi=function(t){return t===0?0:t>0?1:-1},wc=function(t){return Yc(t)&&t.indexOf("%")===t.length-1},ve=function(t){return hSe(t)&&!eh(t)},gSe=function(t){return pt(t)},jn=function(t){return ve(t)||Yc(t)},ySe=0,Av=function(t){var n=++ySe;return"".concat(t||"").concat(n)},Qc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(t)&&!Yc(t))return r;var i;if(wc(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return eh(i)&&(i=r),a&&i>n&&(i=n),i},zs=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},xSe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},ja=function(t,n){return ve(t)&&ve(n)?function(r){return t+r*(n-t)}:function(){return n}};function L0(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Ba(r,t))===n})}var bSe=function(t,n){return ve(t)&&ve(n)?t-n:Yc(t)&&Yc(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Od(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function KC(e){"@babel/helpers - typeof";return KC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KC(e)}var wSe=["viewBox","children"],SSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iM=["points","pathLength"],KS={svg:wSe,polygon:iM,polyline:iM},HA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],B0=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(_.isValidElement(t)&&(r=t.props),!Yf(r))return null;var a={};return Object.keys(r).forEach(function(i){HA.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},_Se=function(t,n,r){return function(a){return t(n,r,a),null}},U0=function(t,n,r){if(!Yf(t)||KC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];HA.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=_Se(o,n,r))}),a},CSe=["children"],ESe=["children"];function oM(e,t){if(e==null)return{};var n=kSe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function XC(e){"@babel/helpers - typeof";return XC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XC(e)}var sM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Wo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},lM=null,XS=null,GA=function e(t){if(t===lM&&Array.isArray(XS))return XS;var n=[];return _.Children.forEach(t,function(r){pt(r)||(lSe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),XS=n,lM=t,n};function Ei(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return Wo(a)}):r=[Wo(t)],GA(e).forEach(function(a){var i=Ba(a,"type.displayName")||Ba(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function aa(e,t){var n=Ei(e,t);return n&&n[0]}var cM=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!ve(r)||r<=0||!ve(a)||a<=0)},NSe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],TSe=function(t){return t&&t.type&&Yc(t.type)&&NSe.indexOf(t.type)>=0},ASe=function(t){return t&&XC(t)==="object"&&"clipDot"in t},PSe=function(t,n,r,a){var i,o=(i=KS==null?void 0:KS[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!ot(t)&&(a&&o.includes(n)||SSe.includes(n))||r&&HA.includes(n)},ut=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(_.isValidElement(t)&&(a=t.props),!Yf(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;PSe((s=a)===null||s===void 0?void 0:s[o],o,n,r)&&(i[o]=a[o])}),i},YC=function e(t,n){if(t===n)return!0;var r=_.Children.count(t);if(r!==_.Children.count(n))return!1;if(r===0)return!0;if(r===1)return uM(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!uM(i,o))return!1}return!0},uM=function(t,n){if(pt(t)&&pt(n))return!0;if(!pt(t)&&!pt(n)){var r=t.props||{},a=r.children,i=oM(r,CSe),o=n.props||{},s=o.children,l=oM(o,ESe);return a&&s?Od(i,l)&&YC(a,s):!a&&!s?Od(i,l):!1}return!1},dM=function(t,n){var r=[],a={};return GA(t).forEach(function(i,o){if(TSe(i))r.push(i);else if(i){var s=Wo(i.type),l=n[s]||{},c=l.handler,u=l.once;if(c&&(!u||!a[s])){var d=c(i,s,o);r.push(d),a[s]=!0}}}),r},jSe=function(t){var n=t&&t.type;return n&&sM[n]?sM[n]:null},OSe=function(t,n){return GA(n).indexOf(t)},RSe=["children","width","height","viewBox","className","style","title","desc"];function QC(){return QC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QC.apply(this,arguments)}function ISe(e,t){if(e==null)return{};var n=DSe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function DSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function JC(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,c=ISe(e,RSe),u=a||{width:n,height:r,x:0,y:0},d=vt("recharts-surface",i);return z.createElement("svg",QC({},ut(c,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),z.createElement("title",null,s),z.createElement("desc",null,l),t)}var MSe=["children","className"];function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZC.apply(this,arguments)}function $Se(e,t){if(e==null)return{};var n=FSe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var an=z.forwardRef(function(e,t){var n=e.children,r=e.className,a=$Se(e,MSe),i=vt("recharts-layer",r);return z.createElement("g",ZC({className:i},ut(a,!0),{ref:t}),n)}),Vo=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function LSe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var BSe=LSe,USe=BSe;function zSe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:USe(e,t,n)}var WSe=zSe,VSe="\\ud800-\\udfff",HSe="\\u0300-\\u036f",GSe="\\ufe20-\\ufe2f",qSe="\\u20d0-\\u20ff",KSe=HSe+GSe+qSe,XSe="\\ufe0e\\ufe0f",YSe="\\u200d",QSe=RegExp("["+YSe+VSe+KSe+XSe+"]");function JSe(e){return QSe.test(e)}var dH=JSe;function ZSe(e){return e.split("")}var e_e=ZSe,fH="\\ud800-\\udfff",t_e="\\u0300-\\u036f",n_e="\\ufe20-\\ufe2f",r_e="\\u20d0-\\u20ff",a_e=t_e+n_e+r_e,i_e="\\ufe0e\\ufe0f",o_e="["+fH+"]",eE="["+a_e+"]",tE="\\ud83c[\\udffb-\\udfff]",s_e="(?:"+eE+"|"+tE+")",hH="[^"+fH+"]",pH="(?:\\ud83c[\\udde6-\\uddff]){2}",mH="[\\ud800-\\udbff][\\udc00-\\udfff]",l_e="\\u200d",vH=s_e+"?",gH="["+i_e+"]?",c_e="(?:"+l_e+"(?:"+[hH,pH,mH].join("|")+")"+gH+vH+")*",u_e=gH+vH+c_e,d_e="(?:"+[hH+eE+"?",eE,pH,mH,o_e].join("|")+")",f_e=RegExp(tE+"(?="+tE+")|"+d_e+u_e,"g");function h_e(e){return e.match(f_e)||[]}var p_e=h_e,m_e=e_e,v_e=dH,g_e=p_e;function y_e(e){return v_e(e)?g_e(e):m_e(e)}var x_e=y_e,b_e=WSe,w_e=dH,S_e=x_e,__e=iH;function C_e(e){return function(t){t=__e(t);var n=w_e(t)?S_e(t):void 0,r=n?n[0]:t.charAt(0),a=n?b_e(n,1).join(""):t.slice(1);return r[e]()+a}}var E_e=C_e,k_e=E_e,N_e=k_e("toUpperCase"),T_e=N_e;const Cw=It(T_e);function Lt(e){return function(){return e}}const yH=Math.cos,z0=Math.sin,Ri=Math.sqrt,W0=Math.PI,Ew=2*W0,nE=Math.PI,rE=2*nE,ic=1e-6,A_e=rE-ic;function xH(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function P_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xH;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class j_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xH:P_e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=r-t,c=a-n,u=o-t,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>ic)if(!(Math.abs(d*l-c*u)>ic)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,v=a-s,m=l*l+c*c,g=p*p+v*v,y=Math.sqrt(m),x=Math.sqrt(f),b=i*Math.tan((nE-Math.acos((m+f-g)/(2*y*x)))/2),w=b/x,S=b/y;Math.abs(w-1)>ic&&this._append`L${t+w*u},${n+w*d}`,this._append`A${i},${i},0,0,${+(d*p>u*v)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),l=r*Math.sin(a),c=t+s,u=n+l,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ic||Math.abs(this._y1-u)>ic)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%rE+rE),f>A_e?this._append`A${r},${r},0,1,${d},${t-s},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>ic&&this._append`A${r},${r},0,${+(f>=nE)},${d},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function qA(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new j_e(t)}function KA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bH(e){this._context=e}bH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function kw(e){return new bH(e)}function wH(e){return e[0]}function SH(e){return e[1]}function _H(e,t){var n=Lt(!0),r=null,a=kw,i=null,o=qA(s);e=typeof e=="function"?e:e===void 0?wH:Lt(e),t=typeof t=="function"?t:t===void 0?SH:Lt(t);function s(l){var c,u=(l=KA(l)).length,d,f=!1,p;for(r==null&&(i=a(p=o())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(d,c,l),+t(d,c,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Lt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Lt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Lt(!!l),s):n},s.curve=function(l){return arguments.length?(a=l,r!=null&&(i=a(r)),s):a},s.context=function(l){return arguments.length?(l==null?r=i=null:i=a(r=l),s):r},s}function $g(e,t,n){var r=null,a=Lt(!0),i=null,o=kw,s=null,l=qA(c);e=typeof e=="function"?e:e===void 0?wH:Lt(+e),t=typeof t=="function"?t:Lt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?SH:Lt(+n);function c(d){var f,p,v,m=(d=KA(d)).length,g,y=!1,x,b=new Array(m),w=new Array(m);for(i==null&&(s=o(x=l())),f=0;f<=m;++f){if(!(f<m&&a(g=d[f],f,d))===y)if(y=!y)p=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),v=f-1;v>=p;--v)s.point(b[v],w[v]);s.lineEnd(),s.areaEnd()}y&&(b[f]=+e(g,f,d),w[f]=+t(g,f,d),s.point(r?+r(g,f,d):b[f],n?+n(g,f,d):w[f]))}if(x)return s=null,x+""||null}function u(){return _H().defined(a).curve(o).context(i)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:Lt(+d),r=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Lt(+d),c):e},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Lt(+d),c):r},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:Lt(+d),n=null,c):t},c.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Lt(+d),c):t},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Lt(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Lt(!!d),c):a},c.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),c):o},c.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),c):i},c}class CH{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function O_e(e){return new CH(e,!0)}function R_e(e){return new CH(e,!1)}const XA={draw(e,t){const n=Ri(t/W0);e.moveTo(n,0),e.arc(0,0,n,0,Ew)}},I_e={draw(e,t){const n=Ri(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},EH=Ri(1/3),D_e=EH*2,M_e={draw(e,t){const n=Ri(t/D_e),r=n*EH;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},$_e={draw(e,t){const n=Ri(t),r=-n/2;e.rect(r,r,n,n)}},F_e=.8908130915292852,kH=z0(W0/10)/z0(7*W0/10),L_e=z0(Ew/10)*kH,B_e=-yH(Ew/10)*kH,U_e={draw(e,t){const n=Ri(t*F_e),r=L_e*n,a=B_e*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=Ew*i/5,s=yH(o),l=z0(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*a,l*r+s*a)}e.closePath()}},YS=Ri(3),z_e={draw(e,t){const n=-Ri(t/(YS*3));e.moveTo(0,n*2),e.lineTo(-YS*n,-n),e.lineTo(YS*n,-n),e.closePath()}},_a=-.5,Ca=Ri(3)/2,aE=1/Ri(12),W_e=(aE/2+1)*3,V_e={draw(e,t){const n=Ri(t/W_e),r=n/2,a=n*aE,i=r,o=n*aE+n,s=-i,l=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(_a*r-Ca*a,Ca*r+_a*a),e.lineTo(_a*i-Ca*o,Ca*i+_a*o),e.lineTo(_a*s-Ca*l,Ca*s+_a*l),e.lineTo(_a*r+Ca*a,_a*a-Ca*r),e.lineTo(_a*i+Ca*o,_a*o-Ca*i),e.lineTo(_a*s+Ca*l,_a*l-Ca*s),e.closePath()}};function H_e(e,t){let n=null,r=qA(a);e=typeof e=="function"?e:Lt(e||XA),t=typeof t=="function"?t:Lt(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Lt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Lt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function V0(){}function H0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function NH(e){this._context=e}NH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:H0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:H0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G_e(e){return new NH(e)}function TH(e){this._context=e}TH.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:H0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q_e(e){return new TH(e)}function AH(e){this._context=e}AH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:H0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K_e(e){return new AH(e)}function PH(e){this._context=e}PH.prototype={areaStart:V0,areaEnd:V0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function X_e(e){return new PH(e)}function fM(e){return e<0?-1:1}function hM(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(fM(i)+fM(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function pM(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function QS(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,a+s*t,i-s,o-s*n,i,o)}function G0(e){this._context=e}G0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:QS(this,this._t0,pM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,QS(this,pM(this,n=hM(this,e,t)),n);break;default:QS(this,this._t0,n=hM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function jH(e){this._context=new OH(e)}(jH.prototype=Object.create(G0.prototype)).point=function(e,t){G0.prototype.point.call(this,t,e)};function OH(e){this._context=e}OH.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function Y_e(e){return new G0(e)}function Q_e(e){return new jH(e)}function RH(e){this._context=e}RH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=mM(e),a=mM(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mM(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function J_e(e){return new RH(e)}function Nw(e,t){this._context=e,this._t=t}Nw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Z_e(e){return new Nw(e,.5)}function e2e(e){return new Nw(e,0)}function t2e(e){return new Nw(e,1)}function lf(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,s=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<s;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function iE(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function n2e(e,t){return e[t]}function r2e(e){const t=[];return t.key=e,t}function a2e(){var e=Lt([]),t=iE,n=lf,r=n2e;function a(i){var o=Array.from(e.apply(this,arguments),r2e),s,l=o.length,c=-1,u;for(const d of i)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(d,o[s].key,c,i)]).data=d;for(s=0,u=KA(t(o));s<l;++s)o[u[s]].index=s;return n(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Lt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Lt(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?iE:typeof i=="function"?i:Lt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??lf,a):n},a}function i2e(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}lf(e,t)}}function o2e(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,s=0;o<a;++o)s+=e[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}lf(e,t)}}function s2e(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var s=0,l=0,c=0;s<o;++s){for(var u=e[t[s]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,v=0;v<s;++v){var m=e[t[v]],g=m[r][1]||0,y=m[r-1][1]||0;p+=g-y}l+=d,c+=p*d}a[r-1][1]+=a[r-1][0]=n,l&&(n-=c/l)}a[r-1][1]+=a[r-1][0]=n,lf(e,t)}}function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}var l2e=["type","size","sizeType"];function oE(){return oE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oE.apply(this,arguments)}function vM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(n),!0).forEach(function(r){c2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c2e(e,t,n){return t=u2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u2e(e){var t=d2e(e,"string");return cm(t)=="symbol"?t:t+""}function d2e(e,t){if(cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f2e(e,t){if(e==null)return{};var n=h2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var IH={symbolCircle:XA,symbolCross:I_e,symbolDiamond:M_e,symbolSquare:$_e,symbolStar:U_e,symbolTriangle:z_e,symbolWye:V_e},p2e=Math.PI/180,m2e=function(t){var n="symbol".concat(Cw(t));return IH[n]||XA},v2e=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*p2e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},g2e=function(t,n){IH["symbol".concat(Cw(t))]=n},YA=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=f2e(t,l2e),c=gM(gM({},l),{},{type:r,size:i,sizeType:s}),u=function(){var g=m2e(r),y=H_e().type(g).size(v2e(i,s,r));return y()},d=c.className,f=c.cx,p=c.cy,v=ut(c,!0);return f===+f&&p===+p&&i===+i?z.createElement("path",oE({},v,{className:vt("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(p,")"),d:u()})):null};YA.registerSymbol=g2e;function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function sE(){return sE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sE.apply(this,arguments)}function yM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function y2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(n),!0).forEach(function(r){um(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MH(r.key),r)}}function w2e(e,t,n){return t&&b2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S2e(e,t,n){return t=q0(t),_2e(e,DH()?Reflect.construct(t,n||[],q0(e).constructor):t.apply(e,n))}function _2e(e,t){if(t&&(cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C2e(e)}function C2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!e})()}function q0(e){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q0(e)}function E2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lE(e,t)}function lE(e,t){return lE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lE(e,t)}function um(e,t,n){return t=MH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MH(e){var t=k2e(e,"string");return cf(t)=="symbol"?t:t+""}function k2e(e,t){if(cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ea=32,QA=function(e){function t(){return x2e(this,t),S2e(this,t,arguments)}return E2e(t,e),w2e(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=Ea/2,o=Ea/6,s=Ea/3,l=r.inactive?a:r.color;if(r.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:Ea,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Ea,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ea/8,"h").concat(Ea,"v").concat(Ea*3/4,"h").concat(-Ea,"z"),className:"recharts-legend-icon"});if(z.isValidElement(r.legendIcon)){var c=y2e({},r);return delete c.legendIcon,z.cloneElement(r.legendIcon,c)}return z.createElement(YA,{fill:l,cx:i,cy:i,size:Ea,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,c=a.inactiveColor,u={x:0,y:0,width:Ea,height:Ea},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,v){var m=p.formatter||l,g=vt(um(um({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=ot(p.value)?null:p.value;Vo(!ot(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?c:p.color;return z.createElement("li",sE({className:g,style:d,key:"legend-item-".concat(v)},U0(r.props,p,v)),z.createElement(JC,{width:o,height:o,viewBox:u,style:f},r.renderIcon(p)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},m?m(y,p,v):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(_.PureComponent);um(QA,"displayName","Legend");um(QA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var N2e=dw;function T2e(){this.__data__=new N2e,this.size=0}var A2e=T2e;function P2e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var j2e=P2e;function O2e(e){return this.__data__.get(e)}var R2e=O2e;function I2e(e){return this.__data__.has(e)}var D2e=I2e,M2e=dw,$2e=FA,F2e=LA,L2e=200;function B2e(e,t){var n=this.__data__;if(n instanceof M2e){var r=n.__data__;if(!$2e||r.length<L2e-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new F2e(r)}return n.set(e,t),this.size=n.size,this}var U2e=B2e,z2e=dw,W2e=A2e,V2e=j2e,H2e=R2e,G2e=D2e,q2e=U2e;function th(e){var t=this.__data__=new z2e(e);this.size=t.size}th.prototype.clear=W2e;th.prototype.delete=V2e;th.prototype.get=H2e;th.prototype.has=G2e;th.prototype.set=q2e;var $H=th,K2e="__lodash_hash_undefined__";function X2e(e){return this.__data__.set(e,K2e),this}var Y2e=X2e;function Q2e(e){return this.__data__.has(e)}var J2e=Q2e,Z2e=LA,eCe=Y2e,tCe=J2e;function K0(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Z2e;++t<n;)this.add(e[t])}K0.prototype.add=K0.prototype.push=eCe;K0.prototype.has=tCe;var FH=K0;function nCe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var LH=nCe;function rCe(e,t){return e.has(t)}var BH=rCe,aCe=FH,iCe=LH,oCe=BH,sCe=1,lCe=2;function cCe(e,t,n,r,a,i){var o=n&sCe,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,p=n&lCe?new aCe:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var v=e[d],m=t[d];if(r)var g=o?r(m,v,d,t,e,i):r(v,m,d,e,t,i);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!iCe(t,function(y,x){if(!oCe(p,x)&&(v===y||a(v,y,n,r,i)))return p.push(x)})){f=!1;break}}else if(!(v===m||a(v,m,n,r,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var UH=cCe,uCe=wo,dCe=uCe.Uint8Array,fCe=dCe;function hCe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var pCe=hCe;function mCe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var JA=mCe,xM=Tv,bM=fCe,vCe=$A,gCe=UH,yCe=pCe,xCe=JA,bCe=1,wCe=2,SCe="[object Boolean]",_Ce="[object Date]",CCe="[object Error]",ECe="[object Map]",kCe="[object Number]",NCe="[object RegExp]",TCe="[object Set]",ACe="[object String]",PCe="[object Symbol]",jCe="[object ArrayBuffer]",OCe="[object DataView]",wM=xM?xM.prototype:void 0,JS=wM?wM.valueOf:void 0;function RCe(e,t,n,r,a,i,o){switch(n){case OCe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case jCe:return!(e.byteLength!=t.byteLength||!i(new bM(e),new bM(t)));case SCe:case _Ce:case kCe:return vCe(+e,+t);case CCe:return e.name==t.name&&e.message==t.message;case NCe:case ACe:return e==t+"";case ECe:var s=yCe;case TCe:var l=r&bCe;if(s||(s=xCe),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=wCe,o.set(e,t);var u=gCe(s(e),s(t),r,a,i,o);return o.delete(e),u;case PCe:if(JS)return JS.call(e)==JS.call(t)}return!1}var ICe=RCe;function DCe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var zH=DCe,MCe=zH,$Ce=Zr;function FCe(e,t,n){var r=t(e);return $Ce(e)?r:MCe(r,n(e))}var LCe=FCe;function BCe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var UCe=BCe;function zCe(){return[]}var WCe=zCe,VCe=UCe,HCe=WCe,GCe=Object.prototype,qCe=GCe.propertyIsEnumerable,SM=Object.getOwnPropertySymbols,KCe=SM?function(e){return e==null?[]:(e=Object(e),VCe(SM(e),function(t){return qCe.call(e,t)}))}:HCe,XCe=KCe;function YCe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var QCe=YCe,JCe=xs,ZCe=bs,eEe="[object Arguments]";function tEe(e){return ZCe(e)&&JCe(e)==eEe}var nEe=tEe,_M=nEe,rEe=bs,WH=Object.prototype,aEe=WH.hasOwnProperty,iEe=WH.propertyIsEnumerable,oEe=_M(function(){return arguments}())?_M:function(e){return rEe(e)&&aEe.call(e,"callee")&&!iEe.call(e,"callee")},ZA=oEe,X0={exports:{}};function sEe(){return!1}var lEe=sEe;X0.exports;(function(e,t){var n=wo,r=lEe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;e.exports=c})(X0,X0.exports);var VH=X0.exports,cEe=9007199254740991,uEe=/^(?:0|[1-9]\d*)$/;function dEe(e,t){var n=typeof e;return t=t??cEe,!!t&&(n=="number"||n!="symbol"&&uEe.test(e))&&e>-1&&e%1==0&&e<t}var eP=dEe,fEe=9007199254740991;function hEe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fEe}var tP=hEe,pEe=xs,mEe=tP,vEe=bs,gEe="[object Arguments]",yEe="[object Array]",xEe="[object Boolean]",bEe="[object Date]",wEe="[object Error]",SEe="[object Function]",_Ee="[object Map]",CEe="[object Number]",EEe="[object Object]",kEe="[object RegExp]",NEe="[object Set]",TEe="[object String]",AEe="[object WeakMap]",PEe="[object ArrayBuffer]",jEe="[object DataView]",OEe="[object Float32Array]",REe="[object Float64Array]",IEe="[object Int8Array]",DEe="[object Int16Array]",MEe="[object Int32Array]",$Ee="[object Uint8Array]",FEe="[object Uint8ClampedArray]",LEe="[object Uint16Array]",BEe="[object Uint32Array]",Ht={};Ht[OEe]=Ht[REe]=Ht[IEe]=Ht[DEe]=Ht[MEe]=Ht[$Ee]=Ht[FEe]=Ht[LEe]=Ht[BEe]=!0;Ht[gEe]=Ht[yEe]=Ht[PEe]=Ht[xEe]=Ht[jEe]=Ht[bEe]=Ht[wEe]=Ht[SEe]=Ht[_Ee]=Ht[CEe]=Ht[EEe]=Ht[kEe]=Ht[NEe]=Ht[TEe]=Ht[AEe]=!1;function UEe(e){return vEe(e)&&mEe(e.length)&&!!Ht[pEe(e)]}var zEe=UEe;function WEe(e){return function(t){return e(t)}}var HH=WEe,Y0={exports:{}};Y0.exports;(function(e,t){var n=Z8,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(Y0,Y0.exports);var VEe=Y0.exports,HEe=zEe,GEe=HH,CM=VEe,EM=CM&&CM.isTypedArray,qEe=EM?GEe(EM):HEe,GH=qEe,KEe=QCe,XEe=ZA,YEe=Zr,QEe=VH,JEe=eP,ZEe=GH,eke=Object.prototype,tke=eke.hasOwnProperty;function nke(e,t){var n=YEe(e),r=!n&&XEe(e),a=!n&&!r&&QEe(e),i=!n&&!r&&!a&&ZEe(e),o=n||r||a||i,s=o?KEe(e.length,String):[],l=s.length;for(var c in e)(t||tke.call(e,c))&&!(o&&(c=="length"||a&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||JEe(c,l)))&&s.push(c);return s}var rke=nke,ake=Object.prototype;function ike(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ake;return e===n}var oke=ike;function ske(e,t){return function(n){return e(t(n))}}var qH=ske,lke=qH,cke=lke(Object.keys,Object),uke=cke,dke=oke,fke=uke,hke=Object.prototype,pke=hke.hasOwnProperty;function mke(e){if(!dke(e))return fke(e);var t=[];for(var n in Object(e))pke.call(e,n)&&n!="constructor"&&t.push(n);return t}var vke=mke,gke=MA,yke=tP;function xke(e){return e!=null&&yke(e.length)&&!gke(e)}var Pv=xke,bke=rke,wke=vke,Ske=Pv;function _ke(e){return Ske(e)?bke(e):wke(e)}var Tw=_ke,Cke=LCe,Eke=XCe,kke=Tw;function Nke(e){return Cke(e,kke,Eke)}var Tke=Nke,kM=Tke,Ake=1,Pke=Object.prototype,jke=Pke.hasOwnProperty;function Oke(e,t,n,r,a,i){var o=n&Ake,s=kM(e),l=s.length,c=kM(t),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=s[d];if(!(o?f in t:jke.call(t,f)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var m=!0;i.set(e,t),i.set(t,e);for(var g=o;++d<l;){f=s[d];var y=e[f],x=t[f];if(r)var b=o?r(x,y,f,t,e,i):r(y,x,f,e,t,i);if(!(b===void 0?y===x||a(y,x,n,r,i):b)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var w=e.constructor,S=t.constructor;w!=S&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof S=="function"&&S instanceof S)&&(m=!1)}return i.delete(e),i.delete(t),m}var Rke=Oke,Ike=fu,Dke=wo,Mke=Ike(Dke,"DataView"),$ke=Mke,Fke=fu,Lke=wo,Bke=Fke(Lke,"Promise"),Uke=Bke,zke=fu,Wke=wo,Vke=zke(Wke,"Set"),KH=Vke,Hke=fu,Gke=wo,qke=Hke(Gke,"WeakMap"),Kke=qke,cE=$ke,uE=FA,dE=Uke,fE=KH,hE=Kke,XH=xs,nh=tH,NM="[object Map]",Xke="[object Object]",TM="[object Promise]",AM="[object Set]",PM="[object WeakMap]",jM="[object DataView]",Yke=nh(cE),Qke=nh(uE),Jke=nh(dE),Zke=nh(fE),eNe=nh(hE),oc=XH;(cE&&oc(new cE(new ArrayBuffer(1)))!=jM||uE&&oc(new uE)!=NM||dE&&oc(dE.resolve())!=TM||fE&&oc(new fE)!=AM||hE&&oc(new hE)!=PM)&&(oc=function(e){var t=XH(e),n=t==Xke?e.constructor:void 0,r=n?nh(n):"";if(r)switch(r){case Yke:return jM;case Qke:return NM;case Jke:return TM;case Zke:return AM;case eNe:return PM}return t});var tNe=oc,ZS=$H,nNe=UH,rNe=ICe,aNe=Rke,OM=tNe,RM=Zr,IM=VH,iNe=GH,oNe=1,DM="[object Arguments]",MM="[object Array]",Fg="[object Object]",sNe=Object.prototype,$M=sNe.hasOwnProperty;function lNe(e,t,n,r,a,i){var o=RM(e),s=RM(t),l=o?MM:OM(e),c=s?MM:OM(t);l=l==DM?Fg:l,c=c==DM?Fg:c;var u=l==Fg,d=c==Fg,f=l==c;if(f&&IM(e)){if(!IM(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new ZS),o||iNe(e)?nNe(e,t,n,r,a,i):rNe(e,t,l,n,r,a,i);if(!(n&oNe)){var p=u&&$M.call(e,"__wrapped__"),v=d&&$M.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return i||(i=new ZS),a(m,g,n,r,i)}}return f?(i||(i=new ZS),aNe(e,t,n,r,a,i)):!1}var cNe=lNe,uNe=cNe,FM=bs;function YH(e,t,n,r,a){return e===t?!0:e==null||t==null||!FM(e)&&!FM(t)?e!==e&&t!==t:uNe(e,t,n,r,YH,a)}var nP=YH,dNe=$H,fNe=nP,hNe=1,pNe=2;function mNe(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var s=n[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=n[a];var l=s[0],c=e[l],u=s[1];if(o&&s[2]){if(c===void 0&&!(l in e))return!1}else{var d=new dNe;if(r)var f=r(c,u,l,e,t,d);if(!(f===void 0?fNe(u,c,hNe|pNe,r,d):f))return!1}}return!0}var vNe=mNe,gNe=Bl;function yNe(e){return e===e&&!gNe(e)}var QH=yNe,xNe=QH,bNe=Tw;function wNe(e){for(var t=bNe(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,xNe(a)]}return t}var SNe=wNe;function _Ne(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var JH=_Ne,CNe=vNe,ENe=SNe,kNe=JH;function NNe(e){var t=ENe(e);return t.length==1&&t[0][2]?kNe(t[0][0],t[0][1]):function(n){return n===e||CNe(n,e,t)}}var TNe=NNe;function ANe(e,t){return e!=null&&t in Object(e)}var PNe=ANe,jNe=oH,ONe=ZA,RNe=Zr,INe=eP,DNe=tP,MNe=hw;function $Ne(e,t,n){t=jNe(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=MNe(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&DNe(a)&&INe(o,a)&&(RNe(e)||ONe(e)))}var FNe=$Ne,LNe=PNe,BNe=FNe;function UNe(e,t){return e!=null&&BNe(e,t,LNe)}var zNe=UNe,WNe=nP,VNe=sH,HNe=zNe,GNe=DA,qNe=QH,KNe=JH,XNe=hw,YNe=1,QNe=2;function JNe(e,t){return GNe(e)&&qNe(t)?KNe(XNe(e),t):function(n){var r=VNe(n,e);return r===void 0&&r===t?HNe(n,e):WNe(t,r,YNe|QNe)}}var ZNe=JNe;function eTe(e){return e}var rh=eTe;function tTe(e){return function(t){return t==null?void 0:t[e]}}var nTe=tTe,rTe=zA;function aTe(e){return function(t){return rTe(t,e)}}var iTe=aTe,oTe=nTe,sTe=iTe,lTe=DA,cTe=hw;function uTe(e){return lTe(e)?oTe(cTe(e)):sTe(e)}var dTe=uTe,fTe=TNe,hTe=ZNe,pTe=rh,mTe=Zr,vTe=dTe;function gTe(e){return typeof e=="function"?e:e==null?pTe:typeof e=="object"?mTe(e)?hTe(e[0],e[1]):fTe(e):vTe(e)}var Ul=gTe;function yTe(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var ZH=yTe;function xTe(e){return e!==e}var bTe=xTe;function wTe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var STe=wTe,_Te=ZH,CTe=bTe,ETe=STe;function kTe(e,t,n){return t===t?ETe(e,t,n):_Te(e,CTe,n)}var NTe=kTe,TTe=NTe;function ATe(e,t){var n=e==null?0:e.length;return!!n&&TTe(e,t,0)>-1}var PTe=ATe;function jTe(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var OTe=jTe;function RTe(){}var ITe=RTe,e_=KH,DTe=ITe,MTe=JA,$Te=1/0,FTe=e_&&1/MTe(new e_([,-0]))[1]==$Te?function(e){return new e_(e)}:DTe,LTe=FTe,BTe=FH,UTe=PTe,zTe=OTe,WTe=BH,VTe=LTe,HTe=JA,GTe=200;function qTe(e,t,n){var r=-1,a=UTe,i=e.length,o=!0,s=[],l=s;if(n)o=!1,a=zTe;else if(i>=GTe){var c=t?null:VTe(e);if(c)return HTe(c);o=!1,a=WTe,l=new BTe}else l=t?[]:s;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),s.push(u)}else a(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}var KTe=qTe,XTe=Ul,YTe=KTe;function QTe(e,t){return e&&e.length?YTe(e,XTe(t)):[]}var JTe=QTe;const LM=It(JTe);function eG(e,t,n){return t===!0?LM(e,n):ot(t)?LM(e,t):e}function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}var ZTe=["ref"];function BM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BM(Object(n),!0).forEach(function(r){Aw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nG(r.key),r)}}function tAe(e,t,n){return t&&UM(e.prototype,t),n&&UM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nAe(e,t,n){return t=Q0(t),rAe(e,tG()?Reflect.construct(t,n||[],Q0(e).constructor):t.apply(e,n))}function rAe(e,t){if(t&&(uf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aAe(e)}function aAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tG=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q0(e)}function iAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pE(e,t)}function pE(e,t){return pE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},pE(e,t)}function Aw(e,t,n){return t=nG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nG(e){var t=oAe(e,"string");return uf(t)=="symbol"?t:t+""}function oAe(e,t){if(uf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sAe(e,t){if(e==null)return{};var n=lAe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cAe(e){return e.value}function uAe(e,t){if(z.isValidElement(e))return z.cloneElement(e,t);if(typeof e=="function")return z.createElement(e,t);t.ref;var n=sAe(t,ZTe);return z.createElement(QA,n)}var zM=1,Rd=function(e){function t(){var n;eAe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=nAe(this,t,[].concat(a)),Aw(n,"lastBoundingBox",{width:-1,height:-1}),n}return iAe(t,e),tAe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>zM||Math.abs(a.height-this.lastBoundingBox.height)>zM)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Eo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,c=a.chartWidth,u=a.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((c||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var v=this.getBBoxSnapshot();f={top:((u||0)-v.height)/2}}else f=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Eo(Eo({},d),f)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,c=a.payloadUniqBy,u=a.payload,d=Eo(Eo({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},uAe(i,Eo(Eo({},this.props),{},{payload:eG(u,c,cAe)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Eo(Eo({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&ve(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(_.PureComponent);Aw(Rd,"displayName","Legend");Aw(Rd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var WM=Tv,dAe=ZA,fAe=Zr,VM=WM?WM.isConcatSpreadable:void 0;function hAe(e){return fAe(e)||dAe(e)||!!(VM&&e&&e[VM])}var pAe=hAe,mAe=zH,vAe=pAe;function rG(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=vAe),a||(a=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?rG(s,t-1,n,r,a):mAe(a,s):r||(a[a.length]=s)}return a}var aG=rG;function gAe(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++a];if(n(i[l],l,i)===!1)break}return t}}var yAe=gAe,xAe=yAe,bAe=xAe(),wAe=bAe,SAe=wAe,_Ae=Tw;function CAe(e,t){return e&&SAe(e,t,_Ae)}var iG=CAe,EAe=Pv;function kAe(e,t){return function(n,r){if(n==null)return n;if(!EAe(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var NAe=kAe,TAe=iG,AAe=NAe,PAe=AAe(TAe),rP=PAe,jAe=rP,OAe=Pv;function RAe(e,t){var n=-1,r=OAe(e)?Array(e.length):[];return jAe(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var oG=RAe;function IAe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var DAe=IAe,HM=Xf;function MAe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=HM(e),o=t!==void 0,s=t===null,l=t===t,c=HM(t);if(!s&&!c&&!i&&e>t||i&&o&&l&&!s&&!c||r&&o&&l||!n&&l||!a)return 1;if(!r&&!i&&!c&&e<t||c&&n&&a&&!r&&!i||s&&n&&a||!o&&a||!l)return-1}return 0}var $Ae=MAe,FAe=$Ae;function LAe(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,s=n.length;++r<o;){var l=FAe(a[r],i[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return e.index-t.index}var BAe=LAe,t_=UA,UAe=zA,zAe=Ul,WAe=oG,VAe=DAe,HAe=HH,GAe=BAe,qAe=rh,KAe=Zr;function XAe(e,t,n){t.length?t=t_(t,function(i){return KAe(i)?function(o){return UAe(o,i.length===1?i[0]:i)}:i}):t=[qAe];var r=-1;t=t_(t,HAe(zAe));var a=WAe(e,function(i,o,s){var l=t_(t,function(c){return c(i)});return{criteria:l,index:++r,value:i}});return VAe(a,function(i,o){return GAe(i,o,n)})}var YAe=XAe;function QAe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var JAe=QAe,ZAe=JAe,GM=Math.max;function ePe(e,t,n){return t=GM(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=GM(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(o),ZAe(e,this,s)}}var tPe=ePe;function nPe(e){return function(){return e}}var rPe=nPe,aPe=fu,iPe=function(){try{var e=aPe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),sG=iPe,oPe=rPe,qM=sG,sPe=rh,lPe=qM?function(e,t){return qM(e,"toString",{configurable:!0,enumerable:!1,value:oPe(t),writable:!0})}:sPe,cPe=lPe,uPe=800,dPe=16,fPe=Date.now;function hPe(e){var t=0,n=0;return function(){var r=fPe(),a=dPe-(r-n);if(n=r,a>0){if(++t>=uPe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var pPe=hPe,mPe=cPe,vPe=pPe,gPe=vPe(mPe),yPe=gPe,xPe=rh,bPe=tPe,wPe=yPe;function SPe(e,t){return wPe(bPe(e,t,xPe),e+"")}var _Pe=SPe,CPe=$A,EPe=Pv,kPe=eP,NPe=Bl;function TPe(e,t,n){if(!NPe(n))return!1;var r=typeof t;return(r=="number"?EPe(n)&&kPe(t,n.length):r=="string"&&t in n)?CPe(n[t],e):!1}var Pw=TPe,APe=aG,PPe=YAe,jPe=_Pe,KM=Pw,OPe=jPe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&KM(e,t[0],t[1])?t=[]:n>2&&KM(t[0],t[1],t[2])&&(t=[t[0]]),PPe(e,APe(t,1),[])}),RPe=OPe;const aP=It(RPe);function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function mE(){return mE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mE.apply(this,arguments)}function IPe(e,t){return FPe(e)||$Pe(e,t)||MPe(e,t)||DPe()}function DPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MPe(e,t){if(e){if(typeof e=="string")return XM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XM(e,t)}}function XM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $Pe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function FPe(e){if(Array.isArray(e))return e}function YM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function n_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(n),!0).forEach(function(r){LPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LPe(e,t,n){return t=BPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BPe(e){var t=UPe(e,"string");return dm(t)=="symbol"?t:t+""}function UPe(e,t){if(dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zPe(e){return Array.isArray(e)&&jn(e[0])&&jn(e[1])?e.join(" ~ "):e}var WPe=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,c=l===void 0?{}:l,u=t.payload,d=t.formatter,f=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,m=t.label,g=t.labelFormatter,y=t.accessibilityLayer,x=y===void 0?!1:y,b=function(){if(u&&u.length){var P={padding:0,margin:0},I=(f?aP(u,f):u).map(function(R,D){if(R.type==="none")return null;var M=n_({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},s),$=R.formatter||d||zPe,j=R.value,O=R.name,B=j,G=O;if($&&B!=null&&G!=null){var L=$(j,O,R,D,u);if(Array.isArray(L)){var W=IPe(L,2);B=W[0],G=W[1]}else B=L}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:M},jn(G)?z.createElement("span",{className:"recharts-tooltip-item-name"},G):null,jn(G)?z.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,z.createElement("span",{className:"recharts-tooltip-item-value"},B),z.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:P},I)}return null},w=n_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=n_({margin:0},c),C=!pt(m),E=C?m:"",k=vt("recharts-default-tooltip",p),N=vt("recharts-tooltip-label",v);C&&g&&u!==void 0&&u!==null&&(E=g(m,u));var T=x?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",mE({className:k,style:w},T),z.createElement("p",{className:N,style:S},z.isValidElement(E)?E:"".concat(E)),b())};function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function Lg(e,t,n){return t=VPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VPe(e){var t=HPe(e,"string");return fm(t)=="symbol"?t:t+""}function HPe(e,t){if(fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ch="recharts-tooltip-wrapper",GPe={visibility:"hidden"};function qPe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return vt(Ch,Lg(Lg(Lg(Lg({},"".concat(Ch,"-right"),ve(n)&&t&&ve(t.x)&&n>=t.x),"".concat(Ch,"-left"),ve(n)&&t&&ve(t.x)&&n<t.x),"".concat(Ch,"-bottom"),ve(r)&&t&&ve(t.y)&&r>=t.y),"".concat(Ch,"-top"),ve(r)&&t&&ve(t.y)&&r<t.y))}function QM(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(i&&ve(i[r]))return i[r];var u=n[r]-s-a,d=n[r]+a;if(t[r])return o[r]?u:d;if(o[r]){var f=u,p=l[r];return f<p?Math.max(d,l[r]):Math.max(u,l[r])}var v=d+s,m=l[r]+c;return v>m?Math.max(u,l[r]):Math.max(d,l[r])}function KPe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function XPe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,c,u,d;return o.height>0&&o.width>0&&n?(u=QM({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=QM({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=KPe({translateX:u,translateY:d,useTranslate3d:s})):c=GPe,{cssProperties:c,cssClasses:qPe({translateX:u,translateY:d,coordinate:n})}}function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function JM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ZM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JM(Object(n),!0).forEach(function(r){gE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cG(r.key),r)}}function JPe(e,t,n){return t&&QPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZPe(e,t,n){return t=J0(t),eje(e,lG()?Reflect.construct(t,n||[],J0(e).constructor):t.apply(e,n))}function eje(e,t){if(t&&(df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tje(e)}function tje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lG=function(){return!!e})()}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J0(e)}function nje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vE(e,t)}function vE(e,t){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},vE(e,t)}function gE(e,t,n){return t=cG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cG(e){var t=rje(e,"string");return df(t)=="symbol"?t:t+""}function rje(e,t){if(df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e$=1,aje=function(e){function t(){var n;YPe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ZPe(this,t,[].concat(a)),gE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gE(n,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return nje(t,e),JPe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>e$||Math.abs(r.height-this.state.lastBoundingBox.height)>e$)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,c=a.children,u=a.coordinate,d=a.hasPayload,f=a.isAnimationActive,p=a.offset,v=a.position,m=a.reverseDirection,g=a.useTranslate3d,y=a.viewBox,x=a.wrapperStyle,b=XPe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:v,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),w=b.cssClasses,S=b.cssProperties,C=ZM(ZM({transition:f&&i?"transform ".concat(s,"ms ").concat(l):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},x);return z.createElement("div",{tabIndex:-1,className:w,style:C,ref:function(k){r.wrapperNode=k}},c)}}])}(_.PureComponent),ije=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ho={isSsr:ije(),get:function(t){return Ho[t]},set:function(t,n){if(typeof t=="string")Ho[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){Ho[a]=t[a]})}}};function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function t$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function n$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t$(Object(n),!0).forEach(function(r){iP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dG(r.key),r)}}function lje(e,t,n){return t&&sje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cje(e,t,n){return t=Z0(t),uje(e,uG()?Reflect.construct(t,n||[],Z0(e).constructor):t.apply(e,n))}function uje(e,t){if(t&&(ff(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dje(e)}function dje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uG=function(){return!!e})()}function Z0(e){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z0(e)}function fje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yE(e,t)}function yE(e,t){return yE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},yE(e,t)}function iP(e,t,n){return t=dG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dG(e){var t=hje(e,"string");return ff(t)=="symbol"?t:t+""}function hje(e,t){if(ff(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pje(e){return e.dataKey}function mje(e,t){return z.isValidElement(e)?z.cloneElement(e,t):typeof e=="function"?z.createElement(e,t):z.createElement(WPe,t)}var di=function(e){function t(){return oje(this,t),cje(this,t,arguments)}return fje(t,e),lje(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,c=a.content,u=a.coordinate,d=a.filterNull,f=a.isAnimationActive,p=a.offset,v=a.payload,m=a.payloadUniqBy,g=a.position,y=a.reverseDirection,x=a.useTranslate3d,b=a.viewBox,w=a.wrapperStyle,S=v??[];d&&S.length&&(S=eG(v.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),m,pje));var C=S.length>0;return z.createElement(aje,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:f,active:i,coordinate:u,hasPayload:C,offset:p,position:g,reverseDirection:y,useTranslate3d:x,viewBox:b,wrapperStyle:w},mje(c,n$(n$({},this.props),{},{payload:S})))}}])}(_.PureComponent);iP(di,"displayName","Tooltip");iP(di,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ho.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var vje=wo,gje=function(){return vje.Date.now()},yje=gje,xje=/\s/;function bje(e){for(var t=e.length;t--&&xje.test(e.charAt(t)););return t}var wje=bje,Sje=wje,_je=/^\s+/;function Cje(e){return e&&e.slice(0,Sje(e)+1).replace(_je,"")}var Eje=Cje,kje=Eje,r$=Bl,Nje=Xf,a$=NaN,Tje=/^[-+]0x[0-9a-f]+$/i,Aje=/^0b[01]+$/i,Pje=/^0o[0-7]+$/i,jje=parseInt;function Oje(e){if(typeof e=="number")return e;if(Nje(e))return a$;if(r$(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=r$(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=kje(e);var n=Aje.test(e);return n||Pje.test(e)?jje(e.slice(2),n?2:8):Tje.test(e)?a$:+e}var fG=Oje,Rje=Bl,r_=yje,i$=fG,Ije="Expected a function",Dje=Math.max,Mje=Math.min;function $je(e,t,n){var r,a,i,o,s,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(Ije);t=i$(t)||0,Rje(n)&&(u=!!n.leading,d="maxWait"in n,i=d?Dje(i$(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f);function p(C){var E=r,k=a;return r=a=void 0,c=C,o=e.apply(k,E),o}function v(C){return c=C,s=setTimeout(y,t),u?p(C):o}function m(C){var E=C-l,k=C-c,N=t-E;return d?Mje(N,i-k):N}function g(C){var E=C-l,k=C-c;return l===void 0||E>=t||E<0||d&&k>=i}function y(){var C=r_();if(g(C))return x(C);s=setTimeout(y,m(C))}function x(C){return s=void 0,f&&r?p(C):(r=a=void 0,o)}function b(){s!==void 0&&clearTimeout(s),c=0,r=l=a=s=void 0}function w(){return s===void 0?o:x(r_())}function S(){var C=r_(),E=g(C);if(r=arguments,a=this,l=C,E){if(s===void 0)return v(l);if(d)return clearTimeout(s),s=setTimeout(y,t),p(l)}return s===void 0&&(s=setTimeout(y,t)),o}return S.cancel=b,S.flush=w,S}var Fje=$je,Lje=Fje,Bje=Bl,Uje="Expected a function";function zje(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(Uje);return Bje(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Lje(e,t,{leading:r,maxWait:t,trailing:a})}var Wje=zje;const hG=It(Wje);function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function o$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o$(Object(n),!0).forEach(function(r){Vje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vje(e,t,n){return t=Hje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hje(e){var t=Gje(e,"string");return hm(t)=="symbol"?t:t+""}function Gje(e,t){if(hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qje(e,t){return Qje(e)||Yje(e,t)||Xje(e,t)||Kje()}function Kje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xje(e,t){if(e){if(typeof e=="string")return s$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s$(e,t)}}function s$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function Qje(e){if(Array.isArray(e))return e}var l$=_.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,c=e.minWidth,u=c===void 0?0:c,d=e.minHeight,f=e.maxHeight,p=e.children,v=e.debounce,m=v===void 0?0:v,g=e.id,y=e.className,x=e.onResize,b=e.style,w=b===void 0?{}:b,S=_.useRef(null),C=_.useRef();C.current=x,_.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var E=_.useState({containerWidth:a.width,containerHeight:a.height}),k=qje(E,2),N=k[0],T=k[1],A=_.useCallback(function(I,R){T(function(D){var M=Math.round(I),$=Math.round(R);return D.containerWidth===M&&D.containerHeight===$?D:{containerWidth:M,containerHeight:$}})},[]);_.useEffect(function(){var I=function(O){var B,G=O[0].contentRect,L=G.width,W=G.height;A(L,W),(B=C.current)===null||B===void 0||B.call(C,L,W)};m>0&&(I=hG(I,m,{trailing:!0,leading:!1}));var R=new ResizeObserver(I),D=S.current.getBoundingClientRect(),M=D.width,$=D.height;return A(M,$),R.observe(S.current),function(){R.disconnect()}},[A,m]);var P=_.useMemo(function(){var I=N.containerWidth,R=N.containerHeight;if(I<0||R<0)return null;Vo(wc(o)||wc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Vo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=wc(o)?I:o,M=wc(l)?R:l;n&&n>0&&(D?M=D/n:M&&(D=M*n),f&&M>f&&(M=f)),Vo(D>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,M,o,l,u,d,n);var $=!Array.isArray(p)&&Wo(p.type).endsWith("Chart");return z.Children.map(p,function(j){return z.isValidElement(j)?_.cloneElement(j,Bg({width:D,height:M},$?{style:Bg({height:"100%",width:"100%",maxHeight:M,maxWidth:D},j.props.style)}:{})):j})},[n,p,l,f,d,u,N,o]);return z.createElement("div",{id:g?"".concat(g):void 0,className:vt("recharts-responsive-container",y),style:Bg(Bg({},w),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:S},P)}),oP=function(t){return null};oP.displayName="Cell";function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function c$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c$(Object(n),!0).forEach(function(r){Jje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jje(e,t,n){return t=Zje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zje(e){var t=eOe(e,"string");return pm(t)=="symbol"?t:t+""}function eOe(e,t){if(pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ru={widthCache:{},cacheCount:0},tOe=2e3,nOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},u$="recharts_measurement_span";function rOe(e){var t=xE({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var fp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ho.isSsr)return{width:0,height:0};var r=rOe(n),a=JSON.stringify({text:t,copyStyle:r});if(Ru.widthCache[a])return Ru.widthCache[a];try{var i=document.getElementById(u$);i||(i=document.createElement("span"),i.setAttribute("id",u$),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=xE(xE({},nOe),r);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Ru.widthCache[a]=l,++Ru.cacheCount>tOe&&(Ru.cacheCount=0,Ru.widthCache={}),l}catch{return{width:0,height:0}}},aOe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function ex(e,t){return lOe(e)||sOe(e,t)||oOe(e,t)||iOe()}function iOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oOe(e,t){if(e){if(typeof e=="string")return d$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d$(e,t)}}function d$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function lOe(e){if(Array.isArray(e))return e}function cOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dOe(r.key),r)}}function uOe(e,t,n){return t&&f$(e.prototype,t),n&&f$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dOe(e){var t=fOe(e,"string");return mm(t)=="symbol"?t:t+""}function fOe(e,t){if(mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var h$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,p$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mOe=Object.keys(pG),ld="NaN";function vOe(e,t){return e*pG[t]}var Ug=function(){function e(t,n){cOe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!hOe.test(n)&&(this.num=NaN,this.unit=""),mOe.includes(n)&&(this.num=vOe(t,n),this.unit="px")}return uOe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=pOe.exec(n))!==null&&r!==void 0?r:[],i=ex(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function mG(e){if(e.includes(ld))return ld;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=h$.exec(t))!==null&&n!==void 0?n:[],a=ex(r,4),i=a[1],o=a[2],s=a[3],l=Ug.parse(i??""),c=Ug.parse(s??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return ld;t=t.replace(h$,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=p$.exec(t))!==null&&d!==void 0?d:[],p=ex(f,4),v=p[1],m=p[2],g=p[3],y=Ug.parse(v??""),x=Ug.parse(g??""),b=m==="+"?y.add(x):y.subtract(x);if(b.isNaN())return ld;t=t.replace(p$,b.toString())}return t}var m$=/\(([^()]*)\)/;function gOe(e){for(var t=e;t.includes("(");){var n=m$.exec(t),r=ex(n,2),a=r[1];t=t.replace(m$,mG(a))}return t}function yOe(e){var t=e.replace(/\s+/g,"");return t=gOe(t),t=mG(t),t}function xOe(e){try{return yOe(e)}catch{return ld}}function a_(e){var t=xOe(e.slice(5,-1));return t===ld?"":t}var bOe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wOe=["dx","dy","angle","className","breakAll"];function bE(){return bE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bE.apply(this,arguments)}function v$(e,t){if(e==null)return{};var n=SOe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function SOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function g$(e,t){return kOe(e)||EOe(e,t)||COe(e,t)||_Oe()}function _Oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function COe(e,t){if(e){if(typeof e=="string")return y$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y$(e,t)}}function y$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function EOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function kOe(e){if(Array.isArray(e))return e}var vG=/[ \f\n\r\t\v\u2028\u2029]+/,gG=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];pt(n)||(r?i=n.toString().split(""):i=n.toString().split(vG));var o=i.map(function(l){return{word:l,width:fp(l,a).width}}),s=r?0:fp("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},NOe=function(t,n,r,a,i){var o=t.maxLines,s=t.children,l=t.style,c=t.breakAll,u=ve(o),d=s,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(M,$){var j=$.word,O=$.width,B=M[M.length-1];if(B&&(a==null||i||B.width+O+r<Number(a)))B.words.push(j),B.width+=O+r;else{var G={words:[j],width:O};M.push(G)}return M},[])},p=f(n),v=function(D){return D.reduce(function(M,$){return M.width>$.width?M:$})};if(!u)return p;for(var m="",g=function(D){var M=d.slice(0,D),$=gG({breakAll:c,style:l,children:M+m}).wordsWithComputedWidth,j=f($),O=j.length>o||v(j).width>Number(a);return[O,j]},y=0,x=d.length-1,b=0,w;y<=x&&b<=d.length-1;){var S=Math.floor((y+x)/2),C=S-1,E=g(C),k=g$(E,2),N=k[0],T=k[1],A=g(S),P=g$(A,1),I=P[0];if(!N&&!I&&(y=S+1),N&&I&&(x=S-1),!N&&I){w=T;break}b++}return w||p},x$=function(t){var n=pt(t)?[]:t.toString().split(vG);return[{words:n}]},TOe=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((n||r)&&!Ho.isSsr){var l,c,u=gG({breakAll:o,children:a,style:i});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;l=d,c=f}else return x$(a);return NOe({breakAll:o,children:a,maxLines:s,style:i},l,c,n,r)}return x$(a)},b$="#808080",tx=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,c=l===void 0?"0.71em":l,u=t.scaleToFit,d=u===void 0?!1:u,f=t.textAnchor,p=f===void 0?"start":f,v=t.verticalAnchor,m=v===void 0?"end":v,g=t.fill,y=g===void 0?b$:g,x=v$(t,bOe),b=_.useMemo(function(){return TOe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),w=x.dx,S=x.dy,C=x.angle,E=x.className,k=x.breakAll,N=v$(x,wOe);if(!jn(r)||!jn(i))return null;var T=r+(ve(w)?w:0),A=i+(ve(S)?S:0),P;switch(m){case"start":P=a_("calc(".concat(c,")"));break;case"middle":P=a_("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:P=a_("calc(".concat(b.length-1," * -").concat(s,")"));break}var I=[];if(d){var R=b[0].width,D=x.width;I.push("scale(".concat((ve(D)?D/R:1)/R,")"))}return C&&I.push("rotate(".concat(C,", ").concat(T,", ").concat(A,")")),I.length&&(N.transform=I.join(" ")),z.createElement("text",bE({},ut(N,!0),{x:T,y:A,className:vt("recharts-text",E),textAnchor:p,fill:y.includes("url")?b$:y}),b.map(function(M,$){var j=M.words.join(k?"":" ");return z.createElement("tspan",{x:T,dy:$===0?P:s,key:"".concat(j,"-").concat($)},j)}))};function vl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function AOe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sP(e){let t,n,r;e.length!==2?(t=vl,n=(s,l)=>vl(e(s),l),r=(s,l)=>e(s)-l):(t=e===vl||e===AOe?e:POe,n=e,r=e);function a(s,l,c=0,u=s.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(s[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(s,l,c=0,u=s.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(s[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(s,l,c=0,u=s.length){const d=a(s,l,c,u-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function POe(){return 0}function yG(e){return e===null?NaN:+e}function*jOe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const OOe=sP(vl),jv=OOe.right;sP(yG).center;class w$ extends Map{constructor(t,n=DOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(S$(this,t))}has(t){return super.has(S$(this,t))}set(t,n){return super.set(ROe(this,t),n)}delete(t){return super.delete(IOe(this,t))}}function S$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ROe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function IOe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function DOe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function MOe(e=vl){if(e===vl)return xG;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function xG(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $Oe=Math.sqrt(50),FOe=Math.sqrt(10),LOe=Math.sqrt(2);function nx(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=$Oe?10:i>=FOe?5:i>=LOe?2:1;let s,l,c;return a<0?(c=Math.pow(10,-a)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?nx(e,t,n*2):[s,l,c]}function wE(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?nx(t,e,n):nx(e,t,n);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(i-c)/-o;else for(let c=0;c<s;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(a+c)/-o;else for(let c=0;c<s;++c)l[c]=(a+c)*o;return l}function SE(e,t,n){return t=+t,e=+e,n=+n,nx(e,t,n)[2]}function _E(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?SE(t,e,n):SE(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function _$(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function C$(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function bG(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?xG:MOe(a);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(t-c*d/l+f)),v=Math.min(r,Math.floor(t+(l-c)*d/l+f));bG(e,t,p,v,a)}const i=e[t];let o=n,s=r;for(Eh(e,n,t),a(e[r],i)>0&&Eh(e,n,r);o<s;){for(Eh(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[n],i)===0?Eh(e,n,s):(++s,Eh(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Eh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function BOe(e,t,n){if(e=Float64Array.from(jOe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return C$(e);if(t>=1)return _$(e);var r,a=(r-1)*t,i=Math.floor(a),o=_$(bG(e,i).subarray(0,i+1)),s=C$(e.subarray(i+1));return o+(s-o)*(a-i)}}function UOe(e,t,n=yG){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function zOe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ws(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CE=Symbol("implicit");function lP(){var e=new w$,t=[],n=[],r=CE;function a(i){let o=e.get(i);if(o===void 0){if(r!==CE)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new w$;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return lP(t,n).unknown(r)},Ka.apply(a,arguments),a}function vm(){var e=lP().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,s=!1,l=0,c=0,u=.5;delete e.unknown;function d(){var f=t().length,p=a<r,v=p?a:r,m=p?r:a;i=(m-v)/Math.max(1,f-l+c*2),s&&(i=Math.floor(i)),v+=(m-v-i*(f-l))*u,o=i*(1-l),s&&(v=Math.round(v),o=Math.round(o));var g=zOe(f).map(function(y){return v+i*y});return n(p?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,a]=f,r=+r,a=+a,d()):[r,a]},e.rangeRound=function(f){return[r,a]=f,r=+r,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return vm(t(),[r,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},Ka.apply(d(),arguments)}function wG(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wG(t())},e}function hp(){return wG(vm.apply(null,arguments).paddingInner(1))}function cP(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function SG(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ov(){}var gm=.7,rx=1/gm,Id="\\s*([+-]?\\d+)\\s*",ym="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",so="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WOe=/^#([0-9a-f]{3,8})$/,VOe=new RegExp(`^rgb\\(${Id},${Id},${Id}\\)$`),HOe=new RegExp(`^rgb\\(${so},${so},${so}\\)$`),GOe=new RegExp(`^rgba\\(${Id},${Id},${Id},${ym}\\)$`),qOe=new RegExp(`^rgba\\(${so},${so},${so},${ym}\\)$`),KOe=new RegExp(`^hsl\\(${ym},${so},${so}\\)$`),XOe=new RegExp(`^hsla\\(${ym},${so},${so},${ym}\\)$`),E$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cP(Ov,xm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:k$,formatHex:k$,formatHex8:YOe,formatHsl:QOe,formatRgb:N$,toString:N$});function k$(){return this.rgb().formatHex()}function YOe(){return this.rgb().formatHex8()}function QOe(){return _G(this).formatHsl()}function N$(){return this.rgb().formatRgb()}function xm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=WOe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?T$(t):n===3?new Vr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=VOe.exec(e))?new Vr(t[1],t[2],t[3],1):(t=HOe.exec(e))?new Vr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=GOe.exec(e))?zg(t[1],t[2],t[3],t[4]):(t=qOe.exec(e))?zg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=KOe.exec(e))?j$(t[1],t[2]/100,t[3]/100,1):(t=XOe.exec(e))?j$(t[1],t[2]/100,t[3]/100,t[4]):E$.hasOwnProperty(e)?T$(E$[e]):e==="transparent"?new Vr(NaN,NaN,NaN,0):null}function T$(e){return new Vr(e>>16&255,e>>8&255,e&255,1)}function zg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Vr(e,t,n,r)}function JOe(e){return e instanceof Ov||(e=xm(e)),e?(e=e.rgb(),new Vr(e.r,e.g,e.b,e.opacity)):new Vr}function EE(e,t,n,r){return arguments.length===1?JOe(e):new Vr(e,t,n,r??1)}function Vr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}cP(Vr,EE,SG(Ov,{brighter(e){return e=e==null?rx:Math.pow(rx,e),new Vr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gm:Math.pow(gm,e),new Vr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vr($c(this.r),$c(this.g),$c(this.b),ax(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A$,formatHex:A$,formatHex8:ZOe,formatRgb:P$,toString:P$}));function A$(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function ZOe(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function P$(){const e=ax(this.opacity);return`${e===1?"rgb(":"rgba("}${$c(this.r)}, ${$c(this.g)}, ${$c(this.b)}${e===1?")":`, ${e})`}`}function ax(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $c(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sc(e){return e=$c(e),(e<16?"0":"")+e.toString(16)}function j$(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vi(e,t,n,r)}function _G(e){if(e instanceof vi)return new vi(e.h,e.s,e.l,e.opacity);if(e instanceof Ov||(e=xm(e)),!e)return new vi;if(e instanceof vi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new vi(o,s,l,e.opacity)}function eRe(e,t,n,r){return arguments.length===1?_G(e):new vi(e,t,n,r??1)}function vi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}cP(vi,eRe,SG(Ov,{brighter(e){return e=e==null?rx:Math.pow(rx,e),new vi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gm:Math.pow(gm,e),new vi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Vr(i_(e>=240?e-240:e+120,a,r),i_(e,a,r),i_(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new vi(O$(this.h),Wg(this.s),Wg(this.l),ax(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ax(this.opacity);return`${e===1?"hsl(":"hsla("}${O$(this.h)}, ${Wg(this.s)*100}%, ${Wg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function O$(e){return e=(e||0)%360,e<0?e+360:e}function Wg(e){return Math.max(0,Math.min(1,e||0))}function i_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uP=e=>()=>e;function tRe(e,t){return function(n){return e+n*t}}function nRe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function rRe(e){return(e=+e)==1?CG:function(t,n){return n-t?nRe(t,n,e):uP(isNaN(t)?n:t)}}function CG(e,t){var n=t-e;return n?tRe(e,n):uP(isNaN(e)?t:e)}const R$=function e(t){var n=rRe(t);function r(a,i){var o=n((a=EE(a)).r,(i=EE(i)).r),s=n(a.g,i.g),l=n(a.b,i.b),c=CG(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=s(u),a.b=l(u),a.opacity=c(u),a+""}}return r.gamma=e,r}(1);function aRe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function iRe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function oRe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=ah(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function sRe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ix(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function lRe(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=ah(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var kE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o_=new RegExp(kE.source,"g");function cRe(e){return function(){return e}}function uRe(e){return function(t){return e(t)+""}}function dRe(e,t){var n=kE.lastIndex=o_.lastIndex=0,r,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=kE.exec(e))&&(a=o_.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:ix(r,a)})),n=o_.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?uRe(l[0].x):cRe(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}function ah(e,t){var n=typeof t,r;return t==null||n==="boolean"?uP(t):(n==="number"?ix:n==="string"?(r=xm(t))?(t=r,R$):dRe:t instanceof xm?R$:t instanceof Date?sRe:iRe(t)?aRe:Array.isArray(t)?oRe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lRe:ix)(e,t)}function dP(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function fRe(e,t){t===void 0&&(t=e,e=ah);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[s](o-s)}}function hRe(e){return function(){return e}}function ox(e){return+e}var I$=[0,1];function Ir(e){return e}function NE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:hRe(isNaN(t)?NaN:.5)}function pRe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function mRe(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=NE(a,r),i=n(o,i)):(r=NE(r,a),i=n(i,o)),function(s){return i(r(s))}}function vRe(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=NE(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(s){var l=jv(e,s,1,r)-1;return i[l](a[l](s))}}function Rv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jw(){var e=I$,t=I$,n=ah,r,a,i,o=Ir,s,l,c;function u(){var f=Math.min(e.length,t.length);return o!==Ir&&(o=pRe(e[0],e[f-1])),s=f>2?vRe:mRe,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=s(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(a((c||(c=s(t,e.map(r),ix)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,ox),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=dP,u()},d.clamp=function(f){return arguments.length?(o=f?!0:Ir,u()):o!==Ir},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return r=f,a=p,u()}}function fP(){return jw()(Ir,Ir)}function gRe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hf(e){return e=sx(Math.abs(e)),e?e[1]:NaN}function yRe(e,t){return function(n,r){for(var a=n.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(n.substring(a-=s,a+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function xRe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bRe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bm(e){if(!(t=bRe.exec(e)))throw new Error("invalid format: "+e);var t;return new hP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bm.prototype=hP.prototype;function hP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wRe(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var EG;function SRe(e,t){var n=sx(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(EG=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+sx(e,Math.max(0,t+i-1))[0]}function D$(e,t){var n=sx(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const M$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gRe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>D$(e*100,t),r:D$,s:SRe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $$(e){return e}var F$=Array.prototype.map,L$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _Re(e){var t=e.grouping===void 0||e.thousands===void 0?$$:yRe(F$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?$$:xRe(F$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d){d=bm(d);var f=d.fill,p=d.align,v=d.sign,m=d.symbol,g=d.zero,y=d.width,x=d.comma,b=d.precision,w=d.trim,S=d.type;S==="n"?(x=!0,S="g"):M$[S]||(b===void 0&&(b=12),w=!0,S="g"),(g||f==="0"&&p==="=")&&(g=!0,f="0",p="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=m==="$"?r:/[%p]/.test(S)?o:"",k=M$[S],N=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(A){var P=C,I=E,R,D,M;if(S==="c")I=k(A)+I,A="";else{A=+A;var $=A<0||1/A<0;if(A=isNaN(A)?l:k(Math.abs(A),b),w&&(A=wRe(A)),$&&+A==0&&v!=="+"&&($=!1),P=($?v==="("?v:s:v==="-"||v==="("?"":v)+P,I=(S==="s"?L$[8+EG/3]:"")+I+($&&v==="("?")":""),N){for(R=-1,D=A.length;++R<D;)if(M=A.charCodeAt(R),48>M||M>57){I=(M===46?a+A.slice(R+1):A.slice(R))+I,A=A.slice(0,R);break}}}x&&!g&&(A=t(A,1/0));var j=P.length+A.length+I.length,O=j<y?new Array(y-j+1).join(f):"";switch(x&&g&&(A=t(O+A,O.length?y-I.length:1/0),O=""),p){case"<":A=P+A+I+O;break;case"=":A=P+O+A+I;break;case"^":A=O.slice(0,j=O.length>>1)+P+A+I+O.slice(j);break;default:A=O+P+A+I;break}return i(A)}return T.toString=function(){return d+""},T}function u(d,f){var p=c((d=bm(d),d.type="f",d)),v=Math.max(-8,Math.min(8,Math.floor(hf(f)/3)))*3,m=Math.pow(10,-v),g=L$[8+v/3];return function(y){return p(m*y)+g}}return{format:c,formatPrefix:u}}var Vg,pP,kG;CRe({thousands:",",grouping:[3],currency:["$",""]});function CRe(e){return Vg=_Re(e),pP=Vg.format,kG=Vg.formatPrefix,Vg}function ERe(e){return Math.max(0,-hf(Math.abs(e)))}function kRe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hf(t)/3)))*3-hf(Math.abs(e)))}function NRe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hf(t)-hf(e))+1}function NG(e,t,n,r){var a=_E(e,t,n),i;switch(r=bm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=kRe(a,o))&&(r.precision=i),kG(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=NRe(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=ERe(a))&&(r.precision=i-(r.type==="%")*2);break}}return pP(r)}function zl(e){var t=e.domain;return e.ticks=function(n){var r=t();return wE(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return NG(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],s=r[i],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=a,a=i,i=c);u-- >0;){if(c=SE(o,s,n),c===l)return r[a]=o,r[i]=s,t(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return e},e}function lx(){var e=fP();return e.copy=function(){return Rv(e,lx())},Ka.apply(e,arguments),zl(e)}function TG(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ox),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return TG(e).unknown(t)},e=arguments.length?Array.from(e,ox):[0,1],zl(n)}function AG(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function B$(e){return Math.log(e)}function U$(e){return Math.exp(e)}function TRe(e){return-Math.log(-e)}function ARe(e){return-Math.exp(-e)}function PRe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jRe(e){return e===10?PRe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ORe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z$(e){return(t,n)=>-e(-t,n)}function mP(e){const t=e(B$,U$),n=t.domain;let r=10,a,i;function o(){return a=ORe(r),i=jRe(r),n()[0]<0?(a=z$(a),i=z$(i),e(TRe,ARe)):e(B$,U$),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=a(c),p=a(u),v,m;const g=s==null?10:+s;let y=[];if(!(r%1)&&p-f<g){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(v=1;v<r;++v)if(m=f<0?v/i(-f):v*i(f),!(m<c)){if(m>u)break;y.push(m)}}else for(;f<=p;++f)for(v=r-1;v>=1;--v)if(m=f>0?v/i(-f):v*i(f),!(m<c)){if(m>u)break;y.push(m)}y.length*2<g&&(y=wE(c,u,g))}else y=wE(f,p,Math.min(p-f,g)).map(i);return d?y.reverse():y},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=bm(l)).precision==null&&(l.trim=!0),l=pP(l)),s===1/0)return l;const c=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/i(Math.round(a(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},t.nice=()=>n(AG(n(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function PG(){const e=mP(jw()).domain([1,10]);return e.copy=()=>Rv(e,PG()).base(e.base()),Ka.apply(e,arguments),e}function W$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function V$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vP(e){var t=1,n=e(W$(t),V$(t));return n.constant=function(r){return arguments.length?e(W$(t=+r),V$(t)):t},zl(n)}function jG(){var e=vP(jw());return e.copy=function(){return Rv(e,jG()).constant(e.constant())},Ka.apply(e,arguments)}function H$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function RRe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function IRe(e){return e<0?-e*e:e*e}function gP(e){var t=e(Ir,Ir),n=1;function r(){return n===1?e(Ir,Ir):n===.5?e(RRe,IRe):e(H$(n),H$(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},zl(t)}function yP(){var e=gP(jw());return e.copy=function(){return Rv(e,yP()).exponent(e.exponent())},Ka.apply(e,arguments),e}function DRe(){return yP.apply(null,arguments).exponent(.5)}function G$(e){return Math.sign(e)*e*e}function MRe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function OG(){var e=fP(),t=[0,1],n=!1,r;function a(i){var o=MRe(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(G$(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,ox)).map(G$)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return OG(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ka.apply(a,arguments),zl(a)}function RG(){var e=[],t=[],n=[],r;function a(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=UOe(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?r:t[jv(n,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(vl),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return RG().domain(e).range(t).unknown(r)},Ka.apply(i,arguments)}function IG(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[jv(r,l,0,n)]:i}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(n=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return IG().domain([e,t]).range(a).unknown(i)},Ka.apply(zl(o),arguments)}function DG(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[jv(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return DG().domain(e).range(t).unknown(n)},Ka.apply(a,arguments)}const s_=new Date,l_=new Date;function $n(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let c;do l.push(c=new Date(+i)),t(i,s),e(i);while(c<i&&i<o);return l},a.filter=i=>$n(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(s_.setTime(+i),l_.setTime(+o),e(s_),e(l_),Math.floor(n(s_,l_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const cx=$n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$n(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):cx);cx.range;const Fo=1e3,Ma=Fo*60,Lo=Ma*60,ts=Lo*24,xP=ts*7,q$=ts*30,c_=ts*365,_c=$n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fo)},(e,t)=>(t-e)/Fo,e=>e.getUTCSeconds());_c.range;const bP=$n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fo)},(e,t)=>{e.setTime(+e+t*Ma)},(e,t)=>(t-e)/Ma,e=>e.getMinutes());bP.range;const wP=$n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ma)},(e,t)=>(t-e)/Ma,e=>e.getUTCMinutes());wP.range;const SP=$n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fo-e.getMinutes()*Ma)},(e,t)=>{e.setTime(+e+t*Lo)},(e,t)=>(t-e)/Lo,e=>e.getHours());SP.range;const _P=$n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Lo)},(e,t)=>(t-e)/Lo,e=>e.getUTCHours());_P.range;const Iv=$n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ma)/ts,e=>e.getDate()-1);Iv.range;const Ow=$n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ts,e=>e.getUTCDate()-1);Ow.range;const MG=$n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ts,e=>Math.floor(e/ts));MG.range;function hu(e){return $n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ma)/xP)}const Rw=hu(0),ux=hu(1),$Re=hu(2),FRe=hu(3),pf=hu(4),LRe=hu(5),BRe=hu(6);Rw.range;ux.range;$Re.range;FRe.range;pf.range;LRe.range;BRe.range;function pu(e){return $n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/xP)}const Iw=pu(0),dx=pu(1),URe=pu(2),zRe=pu(3),mf=pu(4),WRe=pu(5),VRe=pu(6);Iw.range;dx.range;URe.range;zRe.range;mf.range;WRe.range;VRe.range;const CP=$n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());CP.range;const EP=$n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());EP.range;const ns=$n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ns.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ns.range;const rs=$n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});rs.range;function $G(e,t,n,r,a,i){const o=[[_c,1,Fo],[_c,5,5*Fo],[_c,15,15*Fo],[_c,30,30*Fo],[i,1,Ma],[i,5,5*Ma],[i,15,15*Ma],[i,30,30*Ma],[a,1,Lo],[a,3,3*Lo],[a,6,6*Lo],[a,12,12*Lo],[r,1,ts],[r,2,2*ts],[n,1,xP],[t,1,q$],[t,3,3*q$],[e,1,c_]];function s(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),v=p?p.range(c,+u+1):[];return f?v.reverse():v}function l(c,u,d){const f=Math.abs(u-c)/d,p=sP(([,,g])=>g).right(o,f);if(p===o.length)return e.every(_E(c/c_,u/c_,d));if(p===0)return cx.every(Math.max(_E(c,u,d),1));const[v,m]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return v.every(m)}return[s,l]}const[HRe,GRe]=$G(rs,EP,Iw,MG,_P,wP),[qRe,KRe]=$G(ns,CP,Rw,Iv,SP,bP);function u_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function d_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function XRe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=Nh(a),u=Th(a),d=Nh(i),f=Th(i),p=Nh(o),v=Th(o),m=Nh(s),g=Th(s),y=Nh(l),x=Th(l),b={a:$,A:j,b:O,B,c:null,d:Z$,e:Z$,f:yIe,g:TIe,G:PIe,H:mIe,I:vIe,j:gIe,L:FG,m:xIe,M:bIe,p:G,q:L,Q:n4,s:r4,S:wIe,u:SIe,U:_Ie,V:CIe,w:EIe,W:kIe,x:null,X:null,y:NIe,Y:AIe,Z:jIe,"%":t4},w={a:W,A:J,b:ee,B:ne,c:null,d:e4,e:e4,f:DIe,g:HIe,G:qIe,H:OIe,I:RIe,j:IIe,L:BG,m:MIe,M:$Ie,p:Z,q:K,Q:n4,s:r4,S:FIe,u:LIe,U:BIe,V:UIe,w:zIe,W:WIe,x:null,X:null,y:VIe,Y:GIe,Z:KIe,"%":t4},S={a:T,A,b:P,B:I,c:R,d:Q$,e:Q$,f:dIe,g:Y$,G:X$,H:J$,I:J$,j:sIe,L:uIe,m:oIe,M:lIe,p:N,q:iIe,Q:hIe,s:pIe,S:cIe,u:eIe,U:tIe,V:nIe,w:ZRe,W:rIe,x:D,X:M,y:Y$,Y:X$,Z:aIe,"%":fIe};b.x=C(n,b),b.X=C(r,b),b.c=C(t,b),w.x=C(n,w),w.X=C(r,w),w.c=C(t,w);function C(Q,ie){return function(V){var q=[],de=-1,he=0,ae=Q.length,le,ge,_e;for(V instanceof Date||(V=new Date(+V));++de<ae;)Q.charCodeAt(de)===37&&(q.push(Q.slice(he,de)),(ge=K$[le=Q.charAt(++de)])!=null?le=Q.charAt(++de):ge=le==="e"?" ":"0",(_e=ie[le])&&(le=_e(V,ge)),q.push(le),he=de+1);return q.push(Q.slice(he,de)),q.join("")}}function E(Q,ie){return function(V){var q=kh(1900,void 0,1),de=k(q,Q,V+="",0),he,ae;if(de!=V.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(ie&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(he=d_(kh(q.y,0,1)),ae=he.getUTCDay(),he=ae>4||ae===0?dx.ceil(he):dx(he),he=Ow.offset(he,(q.V-1)*7),q.y=he.getUTCFullYear(),q.m=he.getUTCMonth(),q.d=he.getUTCDate()+(q.w+6)%7):(he=u_(kh(q.y,0,1)),ae=he.getDay(),he=ae>4||ae===0?ux.ceil(he):ux(he),he=Iv.offset(he,(q.V-1)*7),q.y=he.getFullYear(),q.m=he.getMonth(),q.d=he.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),ae="Z"in q?d_(kh(q.y,0,1)).getUTCDay():u_(kh(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(ae+5)%7:q.w+q.U*7-(ae+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,d_(q)):u_(q)}}function k(Q,ie,V,q){for(var de=0,he=ie.length,ae=V.length,le,ge;de<he;){if(q>=ae)return-1;if(le=ie.charCodeAt(de++),le===37){if(le=ie.charAt(de++),ge=S[le in K$?ie.charAt(de++):le],!ge||(q=ge(Q,V,q))<0)return-1}else if(le!=V.charCodeAt(q++))return-1}return q}function N(Q,ie,V){var q=c.exec(ie.slice(V));return q?(Q.p=u.get(q[0].toLowerCase()),V+q[0].length):-1}function T(Q,ie,V){var q=p.exec(ie.slice(V));return q?(Q.w=v.get(q[0].toLowerCase()),V+q[0].length):-1}function A(Q,ie,V){var q=d.exec(ie.slice(V));return q?(Q.w=f.get(q[0].toLowerCase()),V+q[0].length):-1}function P(Q,ie,V){var q=y.exec(ie.slice(V));return q?(Q.m=x.get(q[0].toLowerCase()),V+q[0].length):-1}function I(Q,ie,V){var q=m.exec(ie.slice(V));return q?(Q.m=g.get(q[0].toLowerCase()),V+q[0].length):-1}function R(Q,ie,V){return k(Q,t,ie,V)}function D(Q,ie,V){return k(Q,n,ie,V)}function M(Q,ie,V){return k(Q,r,ie,V)}function $(Q){return o[Q.getDay()]}function j(Q){return i[Q.getDay()]}function O(Q){return l[Q.getMonth()]}function B(Q){return s[Q.getMonth()]}function G(Q){return a[+(Q.getHours()>=12)]}function L(Q){return 1+~~(Q.getMonth()/3)}function W(Q){return o[Q.getUTCDay()]}function J(Q){return i[Q.getUTCDay()]}function ee(Q){return l[Q.getUTCMonth()]}function ne(Q){return s[Q.getUTCMonth()]}function Z(Q){return a[+(Q.getUTCHours()>=12)]}function K(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var ie=C(Q+="",b);return ie.toString=function(){return Q},ie},parse:function(Q){var ie=E(Q+="",!1);return ie.toString=function(){return Q},ie},utcFormat:function(Q){var ie=C(Q+="",w);return ie.toString=function(){return Q},ie},utcParse:function(Q){var ie=E(Q+="",!0);return ie.toString=function(){return Q},ie}}}var K$={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,YRe=/^%/,QRe=/[\\^$*+?|[\]().{}]/g;function St(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function JRe(e){return e.replace(QRe,"\\$&")}function Nh(e){return new RegExp("^(?:"+e.map(JRe).join("|")+")","i")}function Th(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ZRe(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function eIe(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function tIe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function nIe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function rIe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function X$(e,t,n){var r=Gn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Y$(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function aIe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function iIe(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function oIe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Q$(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function sIe(e,t,n){var r=Gn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function J$(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function lIe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function cIe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function uIe(e,t,n){var r=Gn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function dIe(e,t,n){var r=Gn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function fIe(e,t,n){var r=YRe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function hIe(e,t,n){var r=Gn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function pIe(e,t,n){var r=Gn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Z$(e,t){return St(e.getDate(),t,2)}function mIe(e,t){return St(e.getHours(),t,2)}function vIe(e,t){return St(e.getHours()%12||12,t,2)}function gIe(e,t){return St(1+Iv.count(ns(e),e),t,3)}function FG(e,t){return St(e.getMilliseconds(),t,3)}function yIe(e,t){return FG(e,t)+"000"}function xIe(e,t){return St(e.getMonth()+1,t,2)}function bIe(e,t){return St(e.getMinutes(),t,2)}function wIe(e,t){return St(e.getSeconds(),t,2)}function SIe(e){var t=e.getDay();return t===0?7:t}function _Ie(e,t){return St(Rw.count(ns(e)-1,e),t,2)}function LG(e){var t=e.getDay();return t>=4||t===0?pf(e):pf.ceil(e)}function CIe(e,t){return e=LG(e),St(pf.count(ns(e),e)+(ns(e).getDay()===4),t,2)}function EIe(e){return e.getDay()}function kIe(e,t){return St(ux.count(ns(e)-1,e),t,2)}function NIe(e,t){return St(e.getFullYear()%100,t,2)}function TIe(e,t){return e=LG(e),St(e.getFullYear()%100,t,2)}function AIe(e,t){return St(e.getFullYear()%1e4,t,4)}function PIe(e,t){var n=e.getDay();return e=n>=4||n===0?pf(e):pf.ceil(e),St(e.getFullYear()%1e4,t,4)}function jIe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+St(t/60|0,"0",2)+St(t%60,"0",2)}function e4(e,t){return St(e.getUTCDate(),t,2)}function OIe(e,t){return St(e.getUTCHours(),t,2)}function RIe(e,t){return St(e.getUTCHours()%12||12,t,2)}function IIe(e,t){return St(1+Ow.count(rs(e),e),t,3)}function BG(e,t){return St(e.getUTCMilliseconds(),t,3)}function DIe(e,t){return BG(e,t)+"000"}function MIe(e,t){return St(e.getUTCMonth()+1,t,2)}function $Ie(e,t){return St(e.getUTCMinutes(),t,2)}function FIe(e,t){return St(e.getUTCSeconds(),t,2)}function LIe(e){var t=e.getUTCDay();return t===0?7:t}function BIe(e,t){return St(Iw.count(rs(e)-1,e),t,2)}function UG(e){var t=e.getUTCDay();return t>=4||t===0?mf(e):mf.ceil(e)}function UIe(e,t){return e=UG(e),St(mf.count(rs(e),e)+(rs(e).getUTCDay()===4),t,2)}function zIe(e){return e.getUTCDay()}function WIe(e,t){return St(dx.count(rs(e)-1,e),t,2)}function VIe(e,t){return St(e.getUTCFullYear()%100,t,2)}function HIe(e,t){return e=UG(e),St(e.getUTCFullYear()%100,t,2)}function GIe(e,t){return St(e.getUTCFullYear()%1e4,t,4)}function qIe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?mf(e):mf.ceil(e),St(e.getUTCFullYear()%1e4,t,4)}function KIe(){return"+0000"}function t4(){return"%"}function n4(e){return+e}function r4(e){return Math.floor(+e/1e3)}var Iu,zG,WG;XIe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XIe(e){return Iu=XRe(e),zG=Iu.format,Iu.parse,WG=Iu.utcFormat,Iu.utcParse,Iu}function YIe(e){return new Date(e)}function QIe(e){return e instanceof Date?+e:+new Date(+e)}function kP(e,t,n,r,a,i,o,s,l,c){var u=fP(),d=u.invert,f=u.domain,p=c(".%L"),v=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),x=c("%b %d"),b=c("%B"),w=c("%Y");function S(C){return(l(C)<C?p:s(C)<C?v:o(C)<C?m:i(C)<C?g:r(C)<C?a(C)<C?y:x:n(C)<C?b:w)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?f(Array.from(C,QIe)):f().map(YIe)},u.ticks=function(C){var E=f();return e(E[0],E[E.length-1],C??10)},u.tickFormat=function(C,E){return E==null?S:c(E)},u.nice=function(C){var E=f();return(!C||typeof C.range!="function")&&(C=t(E[0],E[E.length-1],C??10)),C?f(AG(E,C)):u},u.copy=function(){return Rv(u,kP(e,t,n,r,a,i,o,s,l,c))},u}function JIe(){return Ka.apply(kP(qRe,KRe,ns,CP,Rw,Iv,SP,bP,_c,zG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZIe(){return Ka.apply(kP(HRe,GRe,rs,EP,Iw,Ow,_P,wP,_c,WG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Dw(){var e=0,t=1,n,r,a,i,o=Ir,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-n)*a,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([e,t]=d,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(f){var p,v;return arguments.length?([p,v]=f,o=d(p,v),c):[o(0),o(1)]}}return c.range=u(ah),c.rangeRound=u(dP),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return i=d,n=d(e),r=d(t),a=n===r?0:1/(r-n),c}}function Wl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function VG(){var e=zl(Dw()(Ir));return e.copy=function(){return Wl(e,VG())},ws.apply(e,arguments)}function HG(){var e=mP(Dw()).domain([1,10]);return e.copy=function(){return Wl(e,HG()).base(e.base())},ws.apply(e,arguments)}function GG(){var e=vP(Dw());return e.copy=function(){return Wl(e,GG()).constant(e.constant())},ws.apply(e,arguments)}function NP(){var e=gP(Dw());return e.copy=function(){return Wl(e,NP()).exponent(e.exponent())},ws.apply(e,arguments)}function eDe(){return NP.apply(null,arguments).exponent(.5)}function qG(){var e=[],t=Ir;function n(r){if(r!=null&&!isNaN(r=+r))return t((jv(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(vl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>BOe(e,i/r))},n.copy=function(){return qG(t).domain(e)},ws.apply(n,arguments)}function Mw(){var e=0,t=.5,n=1,r=1,a,i,o,s,l,c=Ir,u,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-i)*(r*m<r*i?s:l),c(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,a=u(e=+e),i=u(t=+t),o=u(n=+n),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),r=i<a?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(c=m,p):c};function v(m){return function(g){var y,x,b;return arguments.length?([y,x,b]=g,c=fRe(m,[y,x,b]),p):[c(0),c(.5),c(1)]}}return p.range=v(ah),p.rangeRound=v(dP),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,a=m(e),i=m(t),o=m(n),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),r=i<a?-1:1,p}}function KG(){var e=zl(Mw()(Ir));return e.copy=function(){return Wl(e,KG())},ws.apply(e,arguments)}function XG(){var e=mP(Mw()).domain([.1,1,10]);return e.copy=function(){return Wl(e,XG()).base(e.base())},ws.apply(e,arguments)}function YG(){var e=vP(Mw());return e.copy=function(){return Wl(e,YG()).constant(e.constant())},ws.apply(e,arguments)}function TP(){var e=gP(Mw());return e.copy=function(){return Wl(e,TP()).exponent(e.exponent())},ws.apply(e,arguments)}function tDe(){return TP.apply(null,arguments).exponent(.5)}const a4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vm,scaleDiverging:KG,scaleDivergingLog:XG,scaleDivergingPow:TP,scaleDivergingSqrt:tDe,scaleDivergingSymlog:YG,scaleIdentity:TG,scaleImplicit:CE,scaleLinear:lx,scaleLog:PG,scaleOrdinal:lP,scalePoint:hp,scalePow:yP,scaleQuantile:RG,scaleQuantize:IG,scaleRadial:OG,scaleSequential:VG,scaleSequentialLog:HG,scaleSequentialPow:NP,scaleSequentialQuantile:qG,scaleSequentialSqrt:eDe,scaleSequentialSymlog:GG,scaleSqrt:DRe,scaleSymlog:jG,scaleThreshold:DG,scaleTime:JIe,scaleUtc:ZIe,tickFormat:NG},Symbol.toStringTag,{value:"Module"}));var nDe=Xf;function rDe(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(o!=null&&(s===void 0?o===o&&!nDe(o):n(o,s)))var s=o,l=i}return l}var QG=rDe;function aDe(e,t){return e>t}var iDe=aDe,oDe=QG,sDe=iDe,lDe=rh;function cDe(e){return e&&e.length?oDe(e,lDe,sDe):void 0}var uDe=cDe;const nl=It(uDe);function dDe(e,t){return e<t}var fDe=dDe,hDe=QG,pDe=fDe,mDe=rh;function vDe(e){return e&&e.length?hDe(e,mDe,pDe):void 0}var gDe=vDe;const $w=It(gDe);var yDe=UA,xDe=Ul,bDe=oG,wDe=Zr;function SDe(e,t){var n=wDe(e)?yDe:bDe;return n(e,xDe(t))}var _De=SDe,CDe=aG,EDe=_De;function kDe(e,t){return CDe(EDe(e,t),1)}var NDe=kDe;const TDe=It(NDe);var ADe=nP;function PDe(e,t){return ADe(e,t)}var jDe=PDe;const wm=It(jDe);var ih=1e9,ODe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PP,Jt=!0,Va="[DecimalError] ",Fc=Va+"Invalid argument: ",AP=Va+"Exponent out of range: ",oh=Math.floor,sc=Math.pow,RDe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ua,Bn=1e7,qt=7,JG=9007199254740991,fx=oh(JG/qt),Pe={};Pe.absoluteValue=Pe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Pe.comparedTo=Pe.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*qt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Pe.dividedBy=Pe.div=function(e){return Go(this,new this.constructor(e))};Pe.dividedToIntegerBy=Pe.idiv=function(e){var t=this,n=t.constructor;return $t(Go(t,new n(e),0,1),n.precision)};Pe.equals=Pe.eq=function(e){return!this.cmp(e)};Pe.exponent=function(){return _n(this)};Pe.greaterThan=Pe.gt=function(e){return this.cmp(e)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(e){return this.cmp(e)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(e){return this.cmp(e)<0};Pe.lessThanOrEqualTo=Pe.lte=function(e){return this.cmp(e)<1};Pe.logarithm=Pe.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ua))throw Error(Va+"NaN");if(n.s<1)throw Error(Va+(n.s?"NaN":"-Infinity"));return n.eq(ua)?new r(0):(Jt=!1,t=Go(Sm(n,i),Sm(e,i),i),Jt=!0,$t(t,a))};Pe.minus=Pe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?tq(t,e):ZG(t,(e.s=-e.s,e))};Pe.modulo=Pe.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Va+"NaN");return n.s?(Jt=!1,t=Go(n,e,0,1).times(e),Jt=!0,n.minus(t)):$t(new r(n),a)};Pe.naturalExponential=Pe.exp=function(){return eq(this)};Pe.naturalLogarithm=Pe.ln=function(){return Sm(this)};Pe.negated=Pe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Pe.plus=Pe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ZG(t,e):tq(t,(e.s=-e.s,e))};Pe.precision=Pe.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Fc+e);if(t=_n(a)+1,r=a.d.length-1,n=r*qt+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Pe.squareRoot=Pe.sqrt=function(){var e,t,n,r,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Va+"NaN")}for(e=_n(s),Jt=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Xi(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=oh((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(a.toString()),n=l.precision,a=o=n+3;;)if(i=r,r=i.plus(Go(s,i,o+2)).times(.5),Xi(i.d).slice(0,o)===(t=Xi(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if($t(i,n+1,0),i.times(i).eq(s)){r=i;break}}else if(t!="9999")break;o+=4}return Jt=!0,$t(r,n)};Pe.times=Pe.mul=function(e){var t,n,r,a,i,o,s,l,c,u=this,d=u.constructor,f=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,l=f.length,c=p.length,l<c&&(i=f,f=p,p=i,o=l,l=c,c=o),i=[],o=l+c,r=o;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,a=l+r;a>r;)s=i[a]+p[r]*f[a-r-1]+t,i[a--]=s%Bn|0,t=s/Bn|0;i[a]=(i[a]+t)%Bn|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Jt?$t(e,d.precision):e};Pe.toDecimalPlaces=Pe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(mo(e,0,ih),t===void 0?t=r.rounding:mo(t,0,8),$t(n,e+_n(n)+1,t))};Pe.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Jc(r,!0):(mo(e,0,ih),t===void 0?t=a.rounding:mo(t,0,8),r=$t(new a(r),e+1,t),n=Jc(r,!0,e+1)),n};Pe.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?Jc(a):(mo(e,0,ih),t===void 0?t=i.rounding:mo(t,0,8),r=$t(new i(a),e+_n(a)+1,t),n=Jc(r.abs(),!1,e+_n(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Pe.toInteger=Pe.toint=function(){var e=this,t=e.constructor;return $t(new t(e),_n(e)+1,t.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(e){var t,n,r,a,i,o,s=this,l=s.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(ua);if(s=new l(s),!s.s){if(e.s<1)throw Error(Va+"Infinity");return s}if(s.eq(ua))return s;if(r=l.precision,e.eq(ua))return $t(s,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=s.s,o){if((n=u<0?-u:u)<=JG){for(a=new l(ua),t=Math.ceil(r/qt+4),Jt=!1;n%2&&(a=a.times(s),o4(a.d,t)),n=oh(n/2),n!==0;)s=s.times(s),o4(s.d,t);return Jt=!0,e.s<0?new l(ua).div(a):$t(a,r)}}else if(i<0)throw Error(Va+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Jt=!1,a=e.times(Sm(s,r+c)),Jt=!0,a=eq(a),a.s=i,a};Pe.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=_n(a),r=Jc(a,n<=i.toExpNeg||n>=i.toExpPos)):(mo(e,1,ih),t===void 0?t=i.rounding:mo(t,0,8),a=$t(new i(a),e,t),n=_n(a),r=Jc(a,e<=n||n<=i.toExpNeg,e)),r};Pe.toSignificantDigits=Pe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(mo(e,1,ih),t===void 0?t=r.rounding:mo(t,0,8)),$t(new r(n),e,t)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=_n(e),n=e.constructor;return Jc(e,t<=n.toExpNeg||t>=n.toExpPos)};function ZG(e,t){var n,r,a,i,o,s,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Jt?$t(t,d):t;if(l=e.d,c=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(r=l,i=-i,s=c.length):(r=c,a=o,s=l.length),o=Math.ceil(d/qt),s=o>s?o+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=l.length,i=c.length,s-i<0&&(i=s,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/Bn|0,l[i]%=Bn;for(n&&(l.unshift(n),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,Jt?$t(t,d):t}function mo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Fc+e)}function Xi(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=qt-r.length,n&&(i+=Fs(n)),i+=r;o=e[t],r=o+"",n=qt-r.length,n&&(i+=Fs(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Go=function(){function e(r,a){var i,o=0,s=r.length;for(r=r.slice();s--;)i=r[s]*a+o,r[s]=i%Bn|0,o=i/Bn|0;return o&&r.unshift(o),r}function t(r,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(r[s]!=a[s]){l=r[s]>a[s]?1:-1;break}return l}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*Bn+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var s,l,c,u,d,f,p,v,m,g,y,x,b,w,S,C,E,k,N=r.constructor,T=r.s==a.s?1:-1,A=r.d,P=a.d;if(!r.s)return new N(r);if(!a.s)throw Error(Va+"Division by zero");for(l=r.e-a.e,E=P.length,S=A.length,p=new N(T),v=p.d=[],c=0;P[c]==(A[c]||0);)++c;if(P[c]>(A[c]||0)&&--l,i==null?x=i=N.precision:o?x=i+(_n(r)-_n(a))+1:x=i,x<0)return new N(0);if(x=x/qt+2|0,c=0,E==1)for(u=0,P=P[0],x++;(c<S||u)&&x--;c++)b=u*Bn+(A[c]||0),v[c]=b/P|0,u=b%P|0;else{for(u=Bn/(P[0]+1)|0,u>1&&(P=e(P,u),A=e(A,u),E=P.length,S=A.length),w=E,m=A.slice(0,E),g=m.length;g<E;)m[g++]=0;k=P.slice(),k.unshift(0),C=P[0],P[1]>=Bn/2&&++C;do u=0,s=t(P,m,E,g),s<0?(y=m[0],E!=g&&(y=y*Bn+(m[1]||0)),u=y/C|0,u>1?(u>=Bn&&(u=Bn-1),d=e(P,u),f=d.length,g=m.length,s=t(d,m,f,g),s==1&&(u--,n(d,E<f?k:P,f))):(u==0&&(s=u=1),d=P.slice()),f=d.length,f<g&&d.unshift(0),n(m,d,g),s==-1&&(g=m.length,s=t(P,m,E,g),s<1&&(u++,n(m,E<g?k:P,g))),g=m.length):s===0&&(u++,m=[0]),v[c++]=u,s&&m[0]?m[g++]=A[w]||0:(m=[A[w]],g=1);while((w++<S||m[0]!==void 0)&&x--)}return v[0]||v.shift(),p.e=l,$t(p,o?i+_n(p)+1:i)}}();function eq(e,t){var n,r,a,i,o,s,l=0,c=0,u=e.constructor,d=u.precision;if(_n(e)>16)throw Error(AP+_n(e));if(!e.s)return new u(ua);for(t==null?(Jt=!1,s=d):s=t,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(r=Math.log(sc(2,c))/Math.LN10*2+5|0,s+=r,n=a=i=new u(ua),u.precision=s;;){if(a=$t(a.times(e),s),n=n.times(++l),o=i.plus(Go(a,n,s)),Xi(o.d).slice(0,s)===Xi(i.d).slice(0,s)){for(;c--;)i=$t(i.times(i),s);return u.precision=d,t==null?(Jt=!0,$t(i,d)):i}i=o}}function _n(e){for(var t=e.e*qt,n=e.d[0];n>=10;n/=10)t++;return t}function f_(e,t,n){if(t>e.LN10.sd())throw Jt=!0,n&&(e.precision=n),Error(Va+"LN10 precision limit exceeded");return $t(new e(e.LN10),t)}function Fs(e){for(var t="";e--;)t+="0";return t}function Sm(e,t){var n,r,a,i,o,s,l,c,u,d=1,f=10,p=e,v=p.d,m=p.constructor,g=m.precision;if(p.s<1)throw Error(Va+(p.s?"NaN":"-Infinity"));if(p.eq(ua))return new m(0);if(t==null?(Jt=!1,c=g):c=t,p.eq(10))return t==null&&(Jt=!0),f_(m,c);if(c+=f,m.precision=c,n=Xi(v),r=n.charAt(0),i=_n(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Xi(p.d),r=n.charAt(0),d++;i=_n(p),r>1?(p=new m("0."+n),i++):p=new m(r+"."+n.slice(1))}else return l=f_(m,c+2,g).times(i+""),p=Sm(new m(r+"."+n.slice(1)),c-f).plus(l),m.precision=g,t==null?(Jt=!0,$t(p,g)):p;for(s=o=p=Go(p.minus(ua),p.plus(ua),c),u=$t(p.times(p),c),a=3;;){if(o=$t(o.times(u),c),l=s.plus(Go(o,new m(a),c)),Xi(l.d).slice(0,c)===Xi(s.d).slice(0,c))return s=s.times(2),i!==0&&(s=s.plus(f_(m,c+2,g).times(i+""))),s=Go(s,new m(d),c),m.precision=g,t==null?(Jt=!0,$t(s,g)):s;s=l,a+=2}}function i4(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=oh(n/qt),e.d=[],r=(n+1)%qt,n<0&&(r+=qt),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=qt;r<a;)e.d.push(+t.slice(r,r+=qt));t=t.slice(r),r=qt-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Jt&&(e.e>fx||e.e<-fx))throw Error(AP+n)}else e.s=0,e.e=0,e.d=[0];return e}function $t(e,t,n){var r,a,i,o,s,l,c,u,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=qt,a=t,c=d[u=0];else{if(u=Math.ceil((r+1)/qt),i=d.length,u>=i)return e;for(c=i=d[u],o=1;i>=10;i/=10)o++;r%=qt,a=r-qt+o}if(n!==void 0&&(i=sc(10,o-a-1),s=c/i%10|0,l=t<0||d[u+1]!==void 0||c%i,l=n<4?(s||l)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?a>0?c/sc(10,o-a):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return l?(i=_n(e),d.length=1,t=t-i-1,d[0]=sc(10,(qt-t%qt)%qt),e.e=oh(-t/qt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,i=1,u--):(d.length=u+1,i=sc(10,qt-r),d[u]=a>0?(c/sc(10,o-a)%sc(10,a)|0)*i:0),l)for(;;)if(u==0){(d[0]+=i)==Bn&&(d[0]=1,++e.e);break}else{if(d[u]+=i,d[u]!=Bn)break;d[u--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(Jt&&(e.e>fx||e.e<-fx))throw Error(AP+_n(e));return e}function tq(e,t){var n,r,a,i,o,s,l,c,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Jt?$t(t,p):t;if(l=e.d,d=t.d,r=t.e,c=e.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,s=d.length):(n=d,r=c,s=l.length),a=Math.max(Math.ceil(p/qt),s)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=l.length,s=d.length,u=a<s,u&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){u=l[a]<d[a];break}o=0}for(u&&(n=l,l=d,d=n,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=Bn-1;--l[i],l[a]+=Bn}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,Jt?$t(t,p):t):new f(0)}function Jc(e,t,n){var r,a=_n(e),i=Xi(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Fs(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Fs(-a-1)+i,n&&(r=n-o)>0&&(i+=Fs(r))):a>=o?(i+=Fs(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+Fs(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=Fs(r))),e.s<0?"-"+i:i}function o4(e,t){if(e.length>t)return e.length=t,!0}function nq(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Fc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return i4(o,i.toString())}else if(typeof i!="string")throw Error(Fc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,RDe.test(i))i4(o,i);else throw Error(Fc+i)}if(a.prototype=Pe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=nq,a.config=a.set=IDe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function IDe(e){if(!e||typeof e!="object")throw Error(Va+"Object expected");var t,n,r,a=["precision",1,ih,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(oh(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Fc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Fc+n+": "+r);return this}var PP=nq(ODe);ua=new PP(1);const Rt=PP;function DDe(e){return LDe(e)||FDe(e)||$De(e)||MDe()}function MDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $De(e,t){if(e){if(typeof e=="string")return TE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TE(e,t)}}function FDe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function LDe(e){if(Array.isArray(e))return TE(e)}function TE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var BDe=function(t){return t},rq={"@@functional/placeholder":!0},aq=function(t){return t===rq},s4=function(t){return function n(){return arguments.length===0||arguments.length===1&&aq(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},UDe=function e(t,n){return t===1?n:s4(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==rq}).length;return o>=t?n.apply(void 0,a):e(t-o,s4(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=a.map(function(d){return aq(d)?l.shift():d});return n.apply(void 0,DDe(u).concat(l))}))})},Fw=function(t){return UDe(t.length,t)},AE=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},zDe=Fw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),WDe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return BDe;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},PE=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},iq=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(s,l){return s===n[l]})||(n=i,r=t.apply(void 0,i)),r}};function VDe(e){var t;return e===0?t=1:t=Math.floor(new Rt(e).abs().log(10).toNumber())+1,t}function HDe(e,t,n){for(var r=new Rt(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var GDe=Fw(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),qDe=Fw(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),KDe=Fw(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Lw={rangeStep:HDe,getDigitCount:VDe,interpolateNumber:GDe,uninterpolateNumber:qDe,uninterpolateTruncation:KDe};function jE(e){return QDe(e)||YDe(e)||oq(e)||XDe()}function XDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YDe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function QDe(e){if(Array.isArray(e))return OE(e)}function _m(e,t){return eMe(e)||ZDe(e,t)||oq(e,t)||JDe()}function JDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oq(e,t){if(e){if(typeof e=="string")return OE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OE(e,t)}}function OE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZDe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(l){a=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function eMe(e){if(Array.isArray(e))return e}function sq(e){var t=_m(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function lq(e,t,n){if(e.lte(0))return new Rt(0);var r=Lw.getDigitCount(e.toNumber()),a=new Rt(10).pow(r),i=e.div(a),o=r!==1?.05:.1,s=new Rt(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=s.mul(a);return t?l:new Rt(Math.ceil(l))}function tMe(e,t,n){var r=1,a=new Rt(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new Rt(10).pow(Lw.getDigitCount(e)-1),a=new Rt(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new Rt(Math.floor(e)))}else e===0?a=new Rt(Math.floor((t-1)/2)):n||(a=new Rt(Math.floor(e)));var o=Math.floor((t-1)/2),s=WDe(zDe(function(l){return a.add(new Rt(l-o).mul(r)).toNumber()}),AE);return s(0,t)}function cq(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Rt(0),tickMin:new Rt(0),tickMax:new Rt(0)};var i=lq(new Rt(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new Rt(0):(o=new Rt(e).add(t).div(2),o=o.sub(new Rt(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new Rt(t).sub(o).div(i).toNumber()),c=s+l+1;return c>n?cq(e,t,n,r,a+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:i,tickMin:o.sub(new Rt(s).mul(i)),tickMax:o.add(new Rt(l).mul(i))})}function nMe(e){var t=_m(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=sq([n,r]),l=_m(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(jE(AE(0,a-1).map(function(){return 1/0}))):[].concat(jE(AE(0,a-1).map(function(){return-1/0})),[u]);return n>r?PE(d):d}if(c===u)return tMe(c,a,i);var f=cq(c,u,o,i),p=f.step,v=f.tickMin,m=f.tickMax,g=Lw.rangeStep(v,m.add(new Rt(.1).mul(p)),p);return n>r?PE(g):g}function rMe(e,t){var n=_m(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=sq([r,a]),s=_m(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,a];if(l===c)return[l];var u=Math.max(t,2),d=lq(new Rt(c).sub(l).div(u-1),i,0),f=[].concat(jE(Lw.rangeStep(new Rt(l),new Rt(c).sub(new Rt(.99).mul(d)),d)),[c]);return r>a?PE(f):f}var aMe=iq(nMe),iMe=iq(rMe),oMe="Invariant failed";function Zc(e,t){throw new Error(oMe)}var sMe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hx.apply(this,arguments)}function lMe(e,t){return fMe(e)||dMe(e,t)||uMe(e,t)||cMe()}function cMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uMe(e,t){if(e){if(typeof e=="string")return l4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l4(e,t)}}function l4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function fMe(e){if(Array.isArray(e))return e}function hMe(e,t){if(e==null)return{};var n=pMe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pMe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fq(r.key),r)}}function gMe(e,t,n){return t&&vMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yMe(e,t,n){return t=px(t),xMe(e,uq()?Reflect.construct(t,n||[],px(e).constructor):t.apply(e,n))}function xMe(e,t){if(t&&(vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bMe(e)}function bMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uq=function(){return!!e})()}function px(e){return px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},px(e)}function wMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RE(e,t)}function RE(e,t){return RE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},RE(e,t)}function dq(e,t,n){return t=fq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fq(e){var t=SMe(e,"string");return vf(t)=="symbol"?t:t+""}function SMe(e,t){if(vf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bw=function(e){function t(){return mMe(this,t),yMe(this,t,arguments)}return wMe(t,e),gMe(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,f=hMe(r,sMe),p=ut(f,!1);this.props.direction==="x"&&u.type!=="number"&&Zc();var v=l.map(function(m){var g=c(m,s),y=g.x,x=g.y,b=g.value,w=g.errorVal;if(!w)return null;var S=[],C,E;if(Array.isArray(w)){var k=lMe(w,2);C=k[0],E=k[1]}else C=E=w;if(i==="vertical"){var N=u.scale,T=x+a,A=T+o,P=T-o,I=N(b-C),R=N(b+E);S.push({x1:R,y1:A,x2:R,y2:P}),S.push({x1:I,y1:T,x2:R,y2:T}),S.push({x1:I,y1:A,x2:I,y2:P})}else if(i==="horizontal"){var D=d.scale,M=y+a,$=M-o,j=M+o,O=D(b-C),B=D(b+E);S.push({x1:$,y1:B,x2:j,y2:B}),S.push({x1:M,y1:O,x2:M,y2:B}),S.push({x1:$,y1:O,x2:j,y2:O})}return z.createElement(an,hx({className:"recharts-errorBar",key:"bar-".concat(S.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},p),S.map(function(G){return z.createElement("line",hx({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return z.createElement(an,{className:"recharts-errorBars"},v)}}])}(z.Component);dq(Bw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});dq(Bw,"displayName","ErrorBar");function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}function c4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c4(Object(n),!0).forEach(function(r){_Me(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Me(e,t,n){return t=CMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CMe(e){var t=EMe(e,"string");return Cm(t)=="symbol"?t:t+""}function EMe(e,t){if(Cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hq=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=aa(n,Rd);if(!o)return null;var s=Rd.defaultProps,l=s!==void 0?Jl(Jl({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:i==="children"?c=(r||[]).reduce(function(u,d){var f=d.item,p=d.props,v=p.sectors||p.data||[];return u.concat(v.map(function(m){return{type:o.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):c=(r||[]).map(function(u){var d=u.item,f=d.type.defaultProps,p=f!==void 0?Jl(Jl({},f),d.props):{},v=p.dataKey,m=p.name,g=p.legendType,y=p.hide;return{inactive:y,dataKey:v,type:l.iconType||g||"square",color:jP(d),value:m||v,payload:p}}),Jl(Jl(Jl({},l),Rd.getWithHeight(o,a)),{},{payload:c,item:o})};function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(e)}function u4(e){return AMe(e)||TMe(e)||NMe(e)||kMe()}function kMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NMe(e,t){if(e){if(typeof e=="string")return IE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IE(e,t)}}function TMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AMe(e){if(Array.isArray(e))return IE(e)}function IE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(n),!0).forEach(function(r){Dd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dd(e,t,n){return t=PMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PMe(e){var t=jMe(e,"string");return Em(t)=="symbol"?t:t+""}function jMe(e,t){if(Em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xa(e,t,n){return pt(e)||pt(t)?n:jn(t)?Ba(e,t,n):ot(t)?t(e):n}function pp(e,t,n,r){var a=TDe(e,function(s){return xa(s,t)});if(n==="number"){var i=a.filter(function(s){return ve(s)||parseFloat(s)});return i.length?[$w(i),nl(i)]:[1/0,-1/0]}var o=r?a.filter(function(s){return!pt(s)}):a;return o.map(function(s){return jn(s)||s instanceof Date?s:""})}var OMe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,c=0;c<s;c++){var u=c>0?a[c-1].coordinate:a[s-1].coordinate,d=a[c].coordinate,f=c>=s-1?a[0].coordinate:a[c+1].coordinate,p=void 0;if(yi(d-u)!==yi(f-d)){var v=[];if(yi(f-d)===yi(l[1]-l[0])){p=f;var m=d+l[1]-l[0];v[0]=Math.min(m,(m+u)/2),v[1]=Math.max(m,(m+u)/2)}else{p=u;var g=f+l[1]-l[0];v[0]=Math.min(d,(g+d)/2),v[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>y[0]&&t<=y[1]||t>=v[0]&&t<=v[1]){o=a[c].index;break}}else{var x=Math.min(u,f),b=Math.max(u,f);if(t>(x+d)/2&&t<=(b+d)/2){o=a[c].index;break}}}else for(var w=0;w<s;w++)if(w===0&&t<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<s-1&&t>(r[w].coordinate+r[w-1].coordinate)/2&&t<=(r[w].coordinate+r[w+1].coordinate)/2||w===s-1&&t>(r[w].coordinate+r[w-1].coordinate)/2){o=r[w].index;break}return o},jP=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?mn(mn({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},RMe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,c=s.length;l<c;l++)for(var u=i[s[l]].stackGroups,d=Object.keys(u),f=0,p=d.length;f<p;f++){var v=u[d[f]],m=v.items,g=v.cateAxisId,y=m.filter(function(E){return Wo(E.type).indexOf("Bar")>=0});if(y&&y.length){var x=y[0].type.defaultProps,b=x!==void 0?mn(mn({},x),y[0].props):y[0].props,w=b.barSize,S=b[g];o[S]||(o[S]=[]);var C=pt(w)?n:w;o[S].push({item:y[0],stackList:y.slice(1),barSize:pt(C)?void 0:Qc(C,r,0)})}}return o},IMe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var c=Qc(n,a,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=a/l,v=o.reduce(function(w,S){return w+S.barSize||0},0);v+=(l-1)*c,v>=a&&(v-=(l-1)*c,c=0),v>=a&&p>0&&(f=!0,p*=.9,v=l*p);var m=(a-v)/2>>0,g={offset:m-c,size:0};u=o.reduce(function(w,S){var C={item:S.item,position:{offset:g.offset+g.size+c,size:f?p:S.barSize}},E=[].concat(u4(w),[C]);return g=E[E.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(k){E.push({item:k,position:g})}),E},d)}else{var y=Qc(r,a,0,!0);a-2*y-(l-1)*c<=0&&(c=0);var x=(a-2*y-(l-1)*c)/l;x>1&&(x>>=0);var b=s===+s?Math.min(x,s):x;u=o.reduce(function(w,S,C){var E=[].concat(u4(w),[{item:S.item,position:{offset:y+(x+c)*C+(x-b)/2,size:b}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(k){E.push({item:k,position:E[E.length-1].position})}),E},d)}return u},DMe=function(t,n,r,a){var i=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=hq({children:i,legendWidth:l});if(c){var u=a||{},d=u.width,f=u.height,p=c.align,v=c.verticalAlign,m=c.layout;if((m==="vertical"||m==="horizontal"&&v==="middle")&&p!=="center"&&ve(t[p]))return mn(mn({},t),{},Dd({},p,t[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&v!=="middle"&&ve(t[v]))return mn(mn({},t),{},Dd({},v,t[v]+(f||0)))}return t},MMe=function(t,n,r){return pt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},pq=function(t,n,r,a,i){var o=n.props.children,s=Ei(o,Bw).filter(function(c){return MMe(a,i,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return t.reduce(function(c,u){var d=xa(u,r);if(pt(d))return c;var f=Array.isArray(d)?[$w(d),nl(d)]:[d,d],p=l.reduce(function(v,m){var g=xa(u,m,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),x=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,v[0]),Math.max(x,v[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},$Me=function(t,n,r,a,i){var o=n.map(function(s){return pq(t,s,r,i,a)}).filter(function(s){return!pt(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},mq=function(t,n,r,a,i){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&pq(t,l,c,a)||pp(t,c,r,i)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},vq=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},gq=function(t,n,r,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===n&&(i=!0),l.coordinate===r&&(o=!0),l.coordinate});return i||s.push(n),o||s.push(r),s},Bo=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,c=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?yi(s[0]-s[1])*2*c:c,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(d){var f=i?i.indexOf(d):d;return{coordinate:a(f)+c,value:d,offset:c}});return u.filter(function(d){return!eh(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,f){return{coordinate:a(d)+c,value:d,index:f,offset:c}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+c,value:d,offset:c}}):a.domain().map(function(d,f){return{coordinate:a(d)+c,value:i?i[d]:d,index:f,offset:c}})},h_=new WeakMap,Hg=function(t,n){if(typeof n!="function")return t;h_.has(t)||h_.set(t,new WeakMap);var r=h_.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},FMe=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:vm(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:lx(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:hp(),realScaleType:"point"}:i==="category"?{scale:vm(),realScaleType:"band"}:{scale:lx(),realScaleType:"linear"};if(Yc(a)){var l="scale".concat(Cw(a));return{scale:(a4[l]||hp)(),realScaleType:a4[l]?l:"point"}}return ot(a)?{scale:a}:{scale:hp(),realScaleType:"point"}},f4=1e-4,LMe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-f4,o=Math.max(a[0],a[1])+f4,s=t(n[0]),l=t(n[r-1]);(s<i||s>o||l<i||l>o)&&t.domain([n[0],n[r-1]])}},BMe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},UMe=function(t,n){if(!n||n.length!==2||!ve(n[0])||!ve(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!ve(t[0])||t[0]<r)&&(i[0]=r),(!ve(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},zMe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,s=0;s<n;++s){var l=eh(t[s][r][1])?t[s][r][0]:t[s][r][1];l>=0?(t[s][r][0]=i,t[s][r][1]=i+l,i=t[s][r][1]):(t[s][r][0]=o,t[s][r][1]=o+l,o=t[s][r][1])}},WMe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var s=eh(t[o][r][1])?t[o][r][0]:t[o][r][1];s>=0?(t[o][r][0]=i,t[o][r][1]=i+s,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},VMe={sign:zMe,expand:i2e,none:lf,silhouette:o2e,wiggle:s2e,positive:WMe},HMe=function(t,n,r){var a=n.map(function(s){return s.props.dataKey}),i=VMe[r],o=a2e().keys(a).value(function(s,l){return+xa(s,l,0)}).order(iE).offset(i);return o(t)},GMe=function(t,n,r,a,i,o){if(!t)return null;var s=o?n.reverse():n,l={},c=s.reduce(function(d,f){var p,v=(p=f.type)!==null&&p!==void 0&&p.defaultProps?mn(mn({},f.type.defaultProps),f.props):f.props,m=v.stackId,g=v.hide;if(g)return d;var y=v[r],x=d[y]||{hasStack:!1,stackGroups:{}};if(jn(m)){var b=x.stackGroups[m]||{numericAxisId:r,cateAxisId:a,items:[]};b.items.push(f),x.hasStack=!0,x.stackGroups[m]=b}else x.stackGroups[Av("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[f]};return mn(mn({},d),{},Dd({},y,x))},l),u={};return Object.keys(c).reduce(function(d,f){var p=c[f];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,g){var y=p.stackGroups[g];return mn(mn({},m),{},Dd({},g,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:HMe(t,y.items,i)}))},v)}return mn(mn({},d),{},Dd({},f,p))},u)},qMe=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=t.domain();if(!c.length)return null;var u=aMe(c,i,s);return t.domain([$w(u),nl(u)]),{niceTicks:u}}if(i&&a==="number"){var d=t.domain(),f=iMe(d,i,s);return{niceTicks:f}}return null};function h4(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pt(a[t.dataKey])){var s=L0(n,"value",a[t.dataKey]);if(s)return s.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=xa(a,pt(o)?t.dataKey:o);return pt(l)?null:t.scale(l)}var p4=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(n.type==="category")return r[s]?r[s].coordinate+a:null;var l=xa(o,n.dataKey,n.domain[s]);return pt(l)?null:n.scale(l)-i/2+a},KMe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},XMe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?mn(mn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(jn(i)){var o=n[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},YMe=function(t){return t.reduce(function(n,r){return[$w(r.concat([n[0]]).filter(ve)),nl(r.concat([n[1]]).filter(ve))]},[1/0,-1/0])},yq=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(c,u){var d=YMe(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},m4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,v4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,DE=function(t,n,r){if(ot(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(ve(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(m4.test(t[0])){var i=+m4.exec(t[0])[1];a[0]=n[0]-i}else ot(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(ve(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(v4.test(t[1])){var o=+v4.exec(t[1])[1];a[1]=n[1]+o}else ot(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},mx=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=aP(n,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var c=i[s],u=i[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},g4=function(t,n,r){return!t||!t.length||wm(t,Ba(r,"type.defaultProps.domain"))?n:t},xq=function(t,n){var r=t.type.defaultProps?mn(mn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return mn(mn({},ut(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:jP(t),value:xa(n,a),type:l,payload:n,chartType:c,hide:u})};function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(e)}function y4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function x4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(n),!0).forEach(function(r){QMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QMe(e,t,n){return t=JMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JMe(e){var t=ZMe(e,"string");return km(t)=="symbol"?t:t+""}function ZMe(e,t){if(km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vx=Math.PI/180,e$e=function(t){return t*180/Math.PI},ir=function(t,n,r,a){return{x:t+Math.cos(-vx*a)*r,y:n+Math.sin(-vx*a)*r}},t$e=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},n$e=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,s=t$e({x:r,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(r-i)/s,c=Math.acos(l);return a>o&&(c=2*Math.PI-c),{radius:s,angle:e$e(c),angleInRadian:c}},r$e=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},a$e=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},b4=function(t,n){var r=t.x,a=t.y,i=n$e({x:r,y:a},n),o=i.radius,s=i.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=r$e(n),d=u.startAngle,f=u.endAngle,p=s,v;if(d<=f){for(;p>f;)p-=360;for(;p<d;)p+=360;v=p>=d&&p<=f}else{for(;p>d;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=d}return v?x4(x4({},n),{},{radius:o,angle:a$e(p,n)}):null};function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}var i$e=["offset"];function o$e(e){return u$e(e)||c$e(e)||l$e(e)||s$e()}function s$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l$e(e,t){if(e){if(typeof e=="string")return ME(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ME(e,t)}}function c$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u$e(e){if(Array.isArray(e))return ME(e)}function ME(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d$e(e,t){if(e==null)return{};var n=f$e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f$e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function w4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w4(Object(n),!0).forEach(function(r){h$e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h$e(e,t,n){return t=p$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p$e(e){var t=m$e(e,"string");return Nm(t)=="symbol"?t:t+""}function m$e(e,t){if(Nm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tm.apply(this,arguments)}var v$e=function(t){var n=t.value,r=t.formatter,a=pt(t.children)?n:t.children;return ot(r)?r(a):a},g$e=function(t,n){var r=yi(n-t),a=Math.min(Math.abs(n-t),360);return r*a},y$e=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,c=l.cx,u=l.cy,d=l.innerRadius,f=l.outerRadius,p=l.startAngle,v=l.endAngle,m=l.clockWise,g=(d+f)/2,y=g$e(p,v),x=y>=0?1:-1,b,w;a==="insideStart"?(b=p+x*o,w=m):a==="insideEnd"?(b=v-x*o,w=!m):a==="end"&&(b=v+x*o,w=m),w=y<=0?w:!w;var S=ir(c,u,g,b),C=ir(c,u,g,b+(w?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(C.x,",").concat(C.y),k=pt(t.id)?Av("recharts-radial-line-"):t.id;return z.createElement("text",Tm({},r,{dominantBaseline:"central",className:vt("recharts-radial-bar-label",s)}),z.createElement("defs",null,z.createElement("path",{id:k,d:E})),z.createElement("textPath",{xlinkHref:"#".concat(k)},n))},x$e=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,s=i.cy,l=i.innerRadius,c=i.outerRadius,u=i.startAngle,d=i.endAngle,f=(u+d)/2;if(a==="outside"){var p=ir(o,s,c+r,f),v=p.x,m=p.y;return{x:v,y:m,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,y=ir(o,s,g,f),x=y.x,b=y.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},b$e=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,s=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,f=d*a,p=d>0?"end":"start",v=d>0?"start":"end",m=c>=0?1:-1,g=m*a,y=m>0?"end":"start",x=m>0?"start":"end";if(i==="top"){var b={x:s+c/2,y:l-d*a,textAnchor:"middle",verticalAnchor:p};return En(En({},b),r?{height:Math.max(l-r.y,0),width:c}:{})}if(i==="bottom"){var w={x:s+c/2,y:l+u+f,textAnchor:"middle",verticalAnchor:v};return En(En({},w),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(i==="left"){var S={x:s-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return En(En({},S),r?{width:Math.max(S.x-r.x,0),height:u}:{})}if(i==="right"){var C={x:s+c+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return En(En({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var E=r?{width:c,height:u}:{};return i==="insideLeft"?En({x:s+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},E):i==="insideRight"?En({x:s+c-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},E):i==="insideTop"?En({x:s+c/2,y:l+f,textAnchor:"middle",verticalAnchor:v},E):i==="insideBottom"?En({x:s+c/2,y:l+u-f,textAnchor:"middle",verticalAnchor:p},E):i==="insideTopLeft"?En({x:s+g,y:l+f,textAnchor:x,verticalAnchor:v},E):i==="insideTopRight"?En({x:s+c-g,y:l+f,textAnchor:y,verticalAnchor:v},E):i==="insideBottomLeft"?En({x:s+g,y:l+u-f,textAnchor:x,verticalAnchor:p},E):i==="insideBottomRight"?En({x:s+c-g,y:l+u-f,textAnchor:y,verticalAnchor:p},E):Yf(i)&&(ve(i.x)||wc(i.x))&&(ve(i.y)||wc(i.y))?En({x:s+Qc(i.x,c),y:l+Qc(i.y,u),textAnchor:"end",verticalAnchor:"end"},E):En({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},E)},w$e=function(t){return"cx"in t&&ve(t.cx)};function yr(e){var t=e.offset,n=t===void 0?5:t,r=d$e(e,i$e),a=En({offset:n},r),i=a.viewBox,o=a.position,s=a.value,l=a.children,c=a.content,u=a.className,d=u===void 0?"":u,f=a.textBreakAll;if(!i||pt(s)&&pt(l)&&!_.isValidElement(c)&&!ot(c))return null;if(_.isValidElement(c))return _.cloneElement(c,a);var p;if(ot(c)){if(p=_.createElement(c,a),_.isValidElement(p))return p}else p=v$e(a);var v=w$e(i),m=ut(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return y$e(a,p,m);var g=v?x$e(a):b$e(a);return z.createElement(tx,Tm({className:vt("recharts-label",d)},m,g,{breakAll:f}),p)}yr.displayName="Label";var bq=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,c=t.innerRadius,u=t.outerRadius,d=t.x,f=t.y,p=t.top,v=t.left,m=t.width,g=t.height,y=t.clockWise,x=t.labelViewBox;if(x)return x;if(ve(m)&&ve(g)){if(ve(d)&&ve(f))return{x:d,y:f,width:m,height:g};if(ve(p)&&ve(v))return{x:p,y:v,width:m,height:g}}return ve(d)&&ve(f)?{x:d,y:f,width:0,height:0}:ve(n)&&ve(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:y}:t.viewBox?t.viewBox:{}},S$e=function(t,n){return t?t===!0?z.createElement(yr,{key:"label-implicit",viewBox:n}):jn(t)?z.createElement(yr,{key:"label-implicit",viewBox:n,value:t}):_.isValidElement(t)?t.type===yr?_.cloneElement(t,{key:"label-implicit",viewBox:n}):z.createElement(yr,{key:"label-implicit",content:t,viewBox:n}):ot(t)?z.createElement(yr,{key:"label-implicit",content:t,viewBox:n}):Yf(t)?z.createElement(yr,Tm({viewBox:n},t,{key:"label-implicit"})):null:null},_$e=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=bq(t),o=Ei(a,yr).map(function(l,c){return _.cloneElement(l,{viewBox:n||i,key:"label-".concat(c)})});if(!r)return o;var s=S$e(t.label,n||i);return[s].concat(o$e(o))};yr.parseViewBox=bq;yr.renderCallByParent=_$e;function C$e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var E$e=C$e;const k$e=It(E$e);function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}var N$e=["valueAccessor"],T$e=["data","dataKey","clockWise","id","textBreakAll"];function A$e(e){return R$e(e)||O$e(e)||j$e(e)||P$e()}function P$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j$e(e,t){if(e){if(typeof e=="string")return $E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(e,t)}}function O$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function R$e(e){if(Array.isArray(e))return $E(e)}function $E(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gx.apply(this,arguments)}function S4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(n),!0).forEach(function(r){I$e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I$e(e,t,n){return t=D$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D$e(e){var t=M$e(e,"string");return Am(t)=="symbol"?t:t+""}function M$e(e,t){if(Am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C4(e,t){if(e==null)return{};var n=$$e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $$e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var F$e=function(t){return Array.isArray(t.value)?k$e(t.value):t.value};function gl(e){var t=e.valueAccessor,n=t===void 0?F$e:t,r=C4(e,N$e),a=r.data,i=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=C4(r,T$e);return!a||!a.length?null:z.createElement(an,{className:"recharts-label-list"},a.map(function(u,d){var f=pt(i)?n(u,d):xa(u&&u.payload,i),p=pt(s)?{}:{id:"".concat(s,"-").concat(d)};return z.createElement(yr,gx({},ut(u,!0),c,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:yr.parseViewBox(pt(o)?u:_4(_4({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}gl.displayName="LabelList";function L$e(e,t){return e?e===!0?z.createElement(gl,{key:"labelList-implicit",data:t}):z.isValidElement(e)||ot(e)?z.createElement(gl,{key:"labelList-implicit",data:t,content:e}):Yf(e)?z.createElement(gl,gx({data:t},e,{key:"labelList-implicit"})):null:null}function B$e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Ei(r,gl).map(function(o,s){return _.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!n)return a;var i=L$e(e.label,t);return[i].concat(A$e(a))}gl.renderCallByParent=B$e;function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function FE(){return FE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FE.apply(this,arguments)}function E4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function k4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(n),!0).forEach(function(r){U$e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U$e(e,t,n){return t=z$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z$e(e){var t=W$e(e,"string");return Pm(t)=="symbol"?t:t+""}function W$e(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V$e=function(t,n){var r=yi(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Gg=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,u=l*(s?1:-1)+a,d=Math.asin(l/u)/vx,f=c?i:i+o*d,p=ir(n,r,u,f),v=ir(n,r,a,f),m=c?i-o*d:i,g=ir(n,r,u*Math.cos(d*vx),m);return{center:p,circleTangency:v,lineTangency:g,theta:d}},wq=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=V$e(o,s),c=o+l,u=ir(n,r,i,o),d=ir(n,r,i,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=ir(n,r,a,o),v=ir(n,r,a,c);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},H$e=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,u=t.endAngle,d=yi(u-c),f=Gg({cx:n,cy:r,radius:i,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),p=f.circleTangency,v=f.lineTangency,m=f.theta,g=Gg({cx:n,cy:r,radius:i,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),y=g.circleTangency,x=g.lineTangency,b=g.theta,w=l?Math.abs(c-u):Math.abs(c-u)-m-b;if(w<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):wq({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var C=Gg({cx:n,cy:r,radius:a,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=C.circleTangency,k=C.lineTangency,N=C.theta,T=Gg({cx:n,cy:r,radius:a,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),A=T.circleTangency,P=T.lineTangency,I=T.theta,R=l?Math.abs(c-u):Math.abs(c-u)-N-I;if(R<0&&o===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(d>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},G$e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sq=function(t){var n=k4(k4({},G$e),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,f=n.className;if(o<i||u===d)return null;var p=vt("recharts-sector",f),v=o-i,m=Qc(s,v,0,!0),g;return m>0&&Math.abs(u-d)<360?g=H$e({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,v/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):g=wq({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d}),z.createElement("path",FE({},ut(n,!0),{className:p,d:g,role:"img"}))};function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LE.apply(this,arguments)}function N4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function T4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N4(Object(n),!0).forEach(function(r){q$e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q$e(e,t,n){return t=K$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K$e(e){var t=X$e(e,"string");return jm(t)=="symbol"?t:t+""}function X$e(e,t){if(jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A4={curveBasisClosed:q_e,curveBasisOpen:K_e,curveBasis:G_e,curveBumpX:O_e,curveBumpY:R_e,curveLinearClosed:X_e,curveLinear:kw,curveMonotoneX:Y_e,curveMonotoneY:Q_e,curveNatural:J_e,curveStep:Z_e,curveStepAfter:t2e,curveStepBefore:e2e},qg=function(t){return t.x===+t.x&&t.y===+t.y},Ah=function(t){return t.x},Ph=function(t){return t.y},Y$e=function(t,n){if(ot(t))return t;var r="curve".concat(Cw(t));return(r==="curveMonotone"||r==="curveBump")&&n?A4["".concat(r).concat(n==="vertical"?"Y":"X")]:A4[r]||kw},Q$e=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,c=l===void 0?!1:l,u=Y$e(r,s),d=c?i.filter(function(m){return qg(m)}):i,f;if(Array.isArray(o)){var p=c?o.filter(function(m){return qg(m)}):o,v=d.map(function(m,g){return T4(T4({},m),{},{base:p[g]})});return s==="vertical"?f=$g().y(Ph).x1(Ah).x0(function(m){return m.base.x}):f=$g().x(Ah).y1(Ph).y0(function(m){return m.base.y}),f.defined(qg).curve(u),f(v)}return s==="vertical"&&ve(o)?f=$g().y(Ph).x1(Ah).x0(o):ve(o)?f=$g().x(Ah).y1(Ph).y0(o):f=_H().x(Ah).y(Ph),f.defined(qg).curve(u),f(d)},mp=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?Q$e(t):a;return _.createElement("path",LE({},ut(t,!1),B0(t),{className:vt("recharts-curve",n),d:o,ref:i}))},_q={exports:{}},J$e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Z$e=J$e,e4e=Z$e;function Cq(){}function Eq(){}Eq.resetWarningCache=Cq;var t4e=function(){function e(r,a,i,o,s,l){if(l!==e4e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Eq,resetWarningCache:Cq};return n.PropTypes=n,n};_q.exports=t4e();var n4e=_q.exports;const Nt=It(n4e);var r4e=Object.getOwnPropertyNames,a4e=Object.getOwnPropertySymbols,i4e=Object.prototype.hasOwnProperty;function P4(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function Kg(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),s=i.get(r);if(o&&s)return o===r&&s===n;i.set(n,r),i.set(r,n);var l=e(n,r,a);return i.delete(n),i.delete(r),l}}function j4(e){return r4e(e).concat(a4e(e))}var o4e=Object.hasOwn||function(e,t){return i4e.call(e,t)};function mu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var s4e="__v",l4e="__o",c4e="_owner",O4=Object.getOwnPropertyDescriptor,R4=Object.keys;function u4e(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function d4e(e,t){return mu(e.getTime(),t.getTime())}function f4e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function h4e(e,t){return e===t}function I4(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,s,l=0;(o=i.next())&&!o.done;){for(var c=t.entries(),u=!1,d=0;(s=c.next())&&!s.done;){if(a[d]){d++;continue}var f=o.value,p=s.value;if(n.equals(f[0],p[0],l,d,e,t,n)&&n.equals(f[1],p[1],f[0],p[0],e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1;l++}return!0}var p4e=mu;function m4e(e,t,n){var r=R4(e),a=r.length;if(R4(t).length!==a)return!1;for(;a-- >0;)if(!kq(e,t,n,r[a]))return!1;return!0}function jh(e,t,n){var r=j4(e),a=r.length;if(j4(t).length!==a)return!1;for(var i,o,s;a-- >0;)if(i=r[a],!kq(e,t,n,i)||(o=O4(e,i),s=O4(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function v4e(e,t){return mu(e.valueOf(),t.valueOf())}function g4e(e,t){return e.source===t.source&&e.flags===t.flags}function D4(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,s;(o=i.next())&&!o.done;){for(var l=t.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!a[u]&&n.equals(o.value,s.value,o.value,s.value,e,t,n)){c=a[u]=!0;break}u++}if(!c)return!1}return!0}function y4e(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function x4e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function kq(e,t,n,r){return(r===c4e||r===l4e||r===s4e)&&(e.$$typeof||t.$$typeof)?!0:o4e(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var b4e="[object Arguments]",w4e="[object Boolean]",S4e="[object Date]",_4e="[object Error]",C4e="[object Map]",E4e="[object Number]",k4e="[object Object]",N4e="[object RegExp]",T4e="[object Set]",A4e="[object String]",P4e="[object URL]",j4e=Array.isArray,M4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,$4=Object.assign,O4e=Object.prototype.toString.call.bind(Object.prototype.toString);function R4e(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,s=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(v,m,g){if(v===m)return!0;if(v==null||m==null)return!1;var y=typeof v;if(y!==typeof m)return!1;if(y!=="object")return y==="number"?o(v,m,g):y==="function"?a(v,m,g):!1;var x=v.constructor;if(x!==m.constructor)return!1;if(x===Object)return s(v,m,g);if(j4e(v))return t(v,m,g);if(M4!=null&&M4(v))return d(v,m,g);if(x===Date)return n(v,m,g);if(x===RegExp)return c(v,m,g);if(x===Map)return i(v,m,g);if(x===Set)return u(v,m,g);var b=O4e(v);return b===S4e?n(v,m,g):b===N4e?c(v,m,g):b===C4e?i(v,m,g):b===T4e?u(v,m,g):b===k4e?typeof v.then!="function"&&typeof m.then!="function"&&s(v,m,g):b===P4e?f(v,m,g):b===_4e?r(v,m,g):b===b4e?s(v,m,g):b===w4e||b===E4e||b===A4e?l(v,m,g):!1}}function I4e(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?jh:u4e,areDatesEqual:d4e,areErrorsEqual:f4e,areFunctionsEqual:h4e,areMapsEqual:r?P4(I4,jh):I4,areNumbersEqual:p4e,areObjectsEqual:r?jh:m4e,arePrimitiveWrappersEqual:v4e,areRegExpsEqual:g4e,areSetsEqual:r?P4(D4,jh):D4,areTypedArraysEqual:r?jh:y4e,areUrlsEqual:x4e};if(n&&(a=$4({},a,n(a))),t){var i=Kg(a.areArraysEqual),o=Kg(a.areMapsEqual),s=Kg(a.areObjectsEqual),l=Kg(a.areSetsEqual);a=$4({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return a}function D4e(e){return function(t,n,r,a,i,o,s){return e(t,n,s)}}function M4e(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(l,c){var u=r(),d=u.cache,f=d===void 0?t?new WeakMap:void 0:d,p=u.meta;return n(l,c,{cache:f,equals:a,meta:p,strict:i})};if(t)return function(l,c){return n(l,c,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(l,c){return n(l,c,o)}}var $4e=Vl();Vl({strict:!0});Vl({circular:!0});Vl({circular:!0,strict:!0});Vl({createInternalComparator:function(){return mu}});Vl({strict:!0,createInternalComparator:function(){return mu}});Vl({circular:!0,createInternalComparator:function(){return mu}});Vl({circular:!0,createInternalComparator:function(){return mu},strict:!0});function Vl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,s=I4e(e),l=R4e(s),c=r?r(l):D4e(l);return M4e({circular:n,comparator:l,createState:a,equals:c,strict:o})}function F4e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function F4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):F4e(a)};requestAnimationFrame(r)}function BE(e){"@babel/helpers - typeof";return BE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BE(e)}function L4e(e){return W4e(e)||z4e(e)||U4e(e)||B4e()}function B4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U4e(e,t){if(e){if(typeof e=="string")return L4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L4(e,t)}}function L4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function W4e(e){if(Array.isArray(e))return e}function V4e(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,s=L4e(o),l=s[0],c=s.slice(1);if(typeof l=="number"){F4(a.bind(null,c),l);return}a(l),F4(a.bind(null,c));return}BE(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function B4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function U4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B4(Object(n),!0).forEach(function(r){Nq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nq(e,t,n){return t=H4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H4e(e){var t=G4e(e,"string");return Om(t)==="symbol"?t:String(t)}function G4e(e,t){if(Om(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Om(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q4e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},K4e=function(t){return t},X4e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},vp=function(t,n){return Object.keys(n).reduce(function(r,a){return U4(U4({},r),{},Nq({},a,t(a,n[a])))},{})},z4=function(t,n,r){return t.map(function(a){return"".concat(X4e(a)," ").concat(n,"ms ").concat(r)}).join(",")};function Y4e(e,t){return Z4e(e)||J4e(e,t)||Tq(e,t)||Q4e()}function Q4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function Z4e(e){if(Array.isArray(e))return e}function e3e(e){return r3e(e)||n3e(e)||Tq(e)||t3e()}function t3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tq(e,t){if(e){if(typeof e=="string")return UE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(e,t)}}function n3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r3e(e){if(Array.isArray(e))return UE(e)}function UE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yx=1e-4,Aq=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},Pq=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},W4=function(t,n){return function(r){var a=Aq(t,n);return Pq(a,r)}},a3e=function(t,n){return function(r){var a=Aq(t,n),i=[].concat(e3e(a.map(function(o,s){return o*s}).slice(1)),[0]);return Pq(i,r)}},V4=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=Y4e(c,4);a=u[0],i=u[1],o=u[2],s=u[3]}}}var d=W4(a,o),f=W4(i,s),p=a3e(a,o),v=function(y){return y>1?1:y<0?0:y},m=function(y){for(var x=y>1?1:y,b=x,w=0;w<8;++w){var S=d(b)-x,C=p(b);if(Math.abs(S-x)<yx||C<yx)return f(b);b=v(b-S/C)}return f(b)};return m.isStepper=!1,m},i3e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(u,d,f){var p=-(u-d)*r,v=f*i,m=f+(p-v)*s/1e3,g=f*s/1e3+u;return Math.abs(g-d)<yx&&Math.abs(m)<yx?[d,0]:[g,m]};return l.isStepper=!0,l.dt=s,l},o3e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return V4(a);case"spring":return i3e();default:if(a.split("(")[0]==="cubic-bezier")return V4(a)}return typeof a=="function"?a:null};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function H4(e){return c3e(e)||l3e(e)||jq(e)||s3e()}function s3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c3e(e){if(Array.isArray(e))return WE(e)}function G4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G4(Object(n),!0).forEach(function(r){zE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zE(e,t,n){return t=u3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u3e(e){var t=d3e(e,"string");return Rm(t)==="symbol"?t:String(t)}function d3e(e,t){if(Rm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f3e(e,t){return m3e(e)||p3e(e,t)||jq(e,t)||h3e()}function h3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jq(e,t){if(e){if(typeof e=="string")return WE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WE(e,t)}}function WE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p3e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function m3e(e){if(Array.isArray(e))return e}var xx=function(t,n,r){return t+(n-t)*r},VE=function(t){var n=t.from,r=t.to;return n!==r},v3e=function e(t,n,r){var a=vp(function(i,o){if(VE(o)){var s=t(o.from,o.to,o.velocity),l=f3e(s,2),c=l[0],u=l[1];return Qn(Qn({},o),{},{from:c,velocity:u})}return o},n);return r<1?vp(function(i,o){return VE(o)?Qn(Qn({},o),{},{velocity:xx(o.velocity,a[i].velocity,r),from:xx(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const g3e=function(e,t,n,r,a){var i=q4e(e,t),o=i.reduce(function(g,y){return Qn(Qn({},g),{},zE({},y,[e[y],t[y]]))},{}),s=i.reduce(function(g,y){return Qn(Qn({},g),{},zE({},y,{from:e[y],velocity:0,to:t[y]}))},{}),l=-1,c,u,d=function(){return null},f=function(){return vp(function(y,x){return x.from},s)},p=function(){return!Object.values(s).filter(VE).length},v=function(y){c||(c=y);var x=y-c,b=x/n.dt;s=v3e(n,s,b),a(Qn(Qn(Qn({},e),t),f())),c=y,p()||(l=requestAnimationFrame(d))},m=function(y){u||(u=y);var x=(y-u)/r,b=vp(function(S,C){return xx.apply(void 0,H4(C).concat([n(x)]))},o);if(a(Qn(Qn(Qn({},e),t),b)),x<1)l=requestAnimationFrame(d);else{var w=vp(function(S,C){return xx.apply(void 0,H4(C).concat([n(1)]))},o);a(Qn(Qn(Qn({},e),t),w))}};return d=n.isStepper?v:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}var y3e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function x3e(e,t){if(e==null)return{};var n=b3e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function b3e(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function p_(e){return C3e(e)||_3e(e)||S3e(e)||w3e()}function w3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S3e(e,t){if(e){if(typeof e=="string")return HE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HE(e,t)}}function _3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C3e(e){if(Array.isArray(e))return HE(e)}function HE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(n),!0).forEach(function(r){zh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zh(e,t,n){return t=Oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k3e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oq(r.key),r)}}function N3e(e,t,n){return t&&k3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oq(e){var t=T3e(e,"string");return gf(t)==="symbol"?t:String(t)}function T3e(e,t){if(gf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GE(e,t)}function GE(e,t){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},GE(e,t)}function P3e(e){var t=j3e();return function(){var r=bx(e),a;if(t){var i=bx(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return qE(this,a)}}function qE(e,t){if(t&&(gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KE(e)}function KE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bx(e){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bx(e)}var as=function(e){A3e(n,e);var t=P3e(n);function n(r,a){var i;E3e(this,n),i=t.call(this,r,a);var o=i.props,s=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,f=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(KE(i)),i.changeStyle=i.changeStyle.bind(KE(i)),!s||p<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),qE(i);if(d&&d.length)i.state={style:d[0].style};else if(c){if(typeof f=="function")return i.state={style:c},qE(i);i.state={style:l?zh({},l,c):c}}else i.state={style:{}};return i}return N3e(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,c=i.shouldReAnimate,u=i.to,d=i.from,f=this.state.style;if(s){if(!o){var p={style:l?zh({},l,u):u};this.state&&f&&(l&&f[l]!==u||!l&&f!==u)&&this.setState(p);return}if(!($4e(a.to,u)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=v||c?d:a.to;if(this.state&&f){var g={style:l?zh({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(g)}this.runAnimation(ti(ti({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,c=a.easing,u=a.begin,d=a.onAnimationEnd,f=a.onAnimationStart,p=g3e(o,s,o3e(c),l,this.changeStyle),v=function(){i.stopJSAnimation=p()};this.manager.start([f,u,v,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,c=o[0],u=c.style,d=c.duration,f=d===void 0?0:d,p=function(m,g,y){if(y===0)return m;var x=g.duration,b=g.easing,w=b===void 0?"ease":b,S=g.style,C=g.properties,E=g.onAnimationEnd,k=y>0?o[y-1]:g,N=C||Object.keys(S);if(typeof w=="function"||w==="spring")return[].concat(p_(m),[i.runJSAnimation.bind(i,{from:k.style,to:S,duration:x,easing:w}),x]);var T=z4(N,x,w),A=ti(ti(ti({},k.style),S),{},{transition:T});return[].concat(p_(m),[A,x,E]).filter(K4e)};return this.manager.start([l].concat(p_(o.reduce(p,[u,Math.max(f,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=V4e());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,c=a.easing,u=a.onAnimationStart,d=a.onAnimationEnd,f=a.steps,p=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var m=s?zh({},s,l):l,g=z4(Object.keys(m),o,c);v.start([u,i,ti(ti({},m),{},{transition:g}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=x3e(a,y3e),c=_.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!s||c===0||o<=0)return i;var d=function(p){var v=p.props,m=v.style,g=m===void 0?{}:m,y=v.className,x=_.cloneElement(p,ti(ti({},l),{},{style:ti(ti({},g),u),className:y}));return x};return c===1?d(_.Children.only(i)):z.createElement("div",null,_.Children.map(i,function(f){return d(f)}))}}]),n}(_.PureComponent);as.displayName="Animate";as.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};as.propTypes={from:Nt.oneOfType([Nt.object,Nt.string]),to:Nt.oneOfType([Nt.object,Nt.string]),attributeName:Nt.string,duration:Nt.number,begin:Nt.number,easing:Nt.oneOfType([Nt.string,Nt.func]),steps:Nt.arrayOf(Nt.shape({duration:Nt.number.isRequired,style:Nt.object.isRequired,easing:Nt.oneOfType([Nt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Nt.func]),properties:Nt.arrayOf("string"),onAnimationEnd:Nt.func})),children:Nt.oneOfType([Nt.node,Nt.func]),isActive:Nt.bool,canBegin:Nt.bool,onAnimationEnd:Nt.func,shouldReAnimate:Nt.bool,onAnimationStart:Nt.func,onAnimationReStart:Nt.func};function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wx.apply(this,arguments)}function O3e(e,t){return M3e(e)||D3e(e,t)||I3e(e,t)||R3e()}function R3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I3e(e,t){if(e){if(typeof e=="string")return K4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K4(e,t)}}function K4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D3e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function M3e(e){if(Array.isArray(e))return e}function X4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Y4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X4(Object(n),!0).forEach(function(r){$3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $3e(e,t,n){return t=F3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F3e(e){var t=L3e(e,"string");return Im(t)=="symbol"?t:t+""}function L3e(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q4=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),s=a>=0?1:-1,l=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0,u;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=i[f]>o?o:i[f];u="M".concat(t,",").concat(n+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(n)),u+="L ".concat(t+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(n+s*d[1])),u+="L ".concat(t+r,",").concat(n+a-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-l*d[2],",").concat(n+a)),u+="L ".concat(t+l*d[3],",").concat(n+a),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(n+a-s*d[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);u="M ".concat(t,",").concat(n+s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+l*v,",").concat(n,`
            L `).concat(t+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+r,",").concat(n+s*v,`
            L `).concat(t+r,",").concat(n+a-s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+r-l*v,",").concat(n+a,`
            L `).concat(t+l*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t,",").concat(n+a-s*v," Z")}else u="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return u},B3e=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(i,i+s),u=Math.max(i,i+s),d=Math.min(o,o+l),f=Math.max(o,o+l);return r>=c&&r<=u&&a>=d&&a<=f}return!1},U3e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},OP=function(t){var n=Y4(Y4({},U3e),t),r=_.useRef(),a=_.useState(-1),i=O3e(a,2),o=i[0],s=i[1];_.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&s(w)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,f=n.radius,p=n.className,v=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var b=vt("recharts-rectangle",p);return x?z.createElement(as,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:m,animationEasing:v,isActive:x},function(w){var S=w.width,C=w.height,E=w.x,k=w.y;return z.createElement(as,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:v},z.createElement("path",wx({},ut(n,!0),{className:b,d:Q4(E,k,S,C,f),ref:r})))}):z.createElement("path",wx({},ut(n,!0),{className:b,d:Q4(l,c,u,d,f)}))};function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XE.apply(this,arguments)}var RP=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=vt("recharts-dot",i);return n===+n&&r===+r&&a===+a?_.createElement("circle",XE({},ut(t,!1),B0(t),{className:o,cx:n,cy:r,r:a})):null};function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}var z3e=["x","y","top","left","width","height","className"];function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YE.apply(this,arguments)}function J4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function W3e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J4(Object(n),!0).forEach(function(r){V3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V3e(e,t,n){return t=H3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H3e(e){var t=G3e(e,"string");return Dm(t)=="symbol"?t:t+""}function G3e(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q3e(e,t){if(e==null)return{};var n=K3e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K3e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var X3e=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},Y3e=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,c=l===void 0?0:l,u=t.width,d=u===void 0?0:u,f=t.height,p=f===void 0?0:f,v=t.className,m=q3e(t,z3e),g=W3e({x:r,y:i,top:s,left:c,width:d,height:p},m);return!ve(r)||!ve(i)||!ve(d)||!ve(p)||!ve(s)||!ve(c)?null:z.createElement("path",YE({},ut(g,!0),{className:vt("recharts-cross",v),d:X3e(r,i,d,p,s,c)}))},Q3e=qH,J3e=Q3e(Object.getPrototypeOf,Object),Z3e=J3e,eFe=xs,tFe=Z3e,nFe=bs,rFe="[object Object]",aFe=Function.prototype,iFe=Object.prototype,Rq=aFe.toString,oFe=iFe.hasOwnProperty,sFe=Rq.call(Object);function lFe(e){if(!nFe(e)||eFe(e)!=rFe)return!1;var t=tFe(e);if(t===null)return!0;var n=oFe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Rq.call(n)==sFe}var cFe=lFe;const uFe=It(cFe);var dFe=xs,fFe=bs,hFe="[object Boolean]";function pFe(e){return e===!0||e===!1||fFe(e)&&dFe(e)==hFe}var mFe=pFe;const vFe=It(mFe);function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sx.apply(this,arguments)}function gFe(e,t){return wFe(e)||bFe(e,t)||xFe(e,t)||yFe()}function yFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xFe(e,t){if(e){if(typeof e=="string")return Z4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z4(e,t)}}function Z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bFe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function wFe(e){if(Array.isArray(e))return e}function e3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function t3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e3(Object(n),!0).forEach(function(r){SFe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SFe(e,t,n){return t=_Fe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Fe(e){var t=CFe(e,"string");return Mm(t)=="symbol"?t:t+""}function CFe(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n3=function(t,n,r,a,i){var o=r-a,s;return s="M ".concat(t,",").concat(n),s+="L ".concat(t+r,",").concat(n),s+="L ".concat(t+r-o/2,",").concat(n+i),s+="L ".concat(t+r-o/2-a,",").concat(n+i),s+="L ".concat(t,",").concat(n," Z"),s},EFe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kFe=function(t){var n=t3(t3({},EFe),t),r=_.useRef(),a=_.useState(-1),i=gFe(a,2),o=i[0],s=i[1];_.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,f=n.height,p=n.className,v=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var x=vt("recharts-trapezoid",p);return y?z.createElement(as,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:f,x:l,y:c},duration:m,animationEasing:v,isActive:y},function(b){var w=b.upperWidth,S=b.lowerWidth,C=b.height,E=b.x,k=b.y;return z.createElement(as,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:v},z.createElement("path",Sx({},ut(n,!0),{className:x,d:n3(E,k,w,S,C),ref:r})))}):z.createElement("g",null,z.createElement("path",Sx({},ut(n,!0),{className:x,d:n3(l,c,u,d,f)})))},NFe=["option","shapeType","propTransformer","activeClassName","isActive"];function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function TFe(e,t){if(e==null)return{};var n=AFe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function AFe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function r3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _x(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(n),!0).forEach(function(r){PFe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PFe(e,t,n){return t=jFe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jFe(e){var t=OFe(e,"string");return $m(t)=="symbol"?t:t+""}function OFe(e,t){if($m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RFe(e,t){return _x(_x({},t),e)}function IFe(e,t){return e==="symbols"}function a3(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return z.createElement(OP,n);case"trapezoid":return z.createElement(kFe,n);case"sector":return z.createElement(Sq,n);case"symbols":if(IFe(t))return z.createElement(YA,n);break;default:return null}}function DFe(e){return _.isValidElement(e)?e.props:e}function MFe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?RFe:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=TFe(e,NFe),c;if(_.isValidElement(t))c=_.cloneElement(t,_x(_x({},l),DFe(t)));else if(ot(t))c=t(l);else if(uFe(t)&&!vFe(t)){var u=a(t,l);c=z.createElement(a3,{shapeType:n,elementProps:u})}else{var d=l;c=z.createElement(a3,{shapeType:n,elementProps:d})}return s?z.createElement(an,{className:o},c):c}function Uw(e,t){return t!=null&&"trapezoids"in e.props}function zw(e,t){return t!=null&&"sectors"in e.props}function Fm(e,t){return t!=null&&"points"in e.props}function $Fe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function FFe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function LFe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function BFe(e,t){var n;return Uw(e,t)?n=$Fe:zw(e,t)?n=FFe:Fm(e,t)&&(n=LFe),n}function UFe(e,t){var n;return Uw(e,t)?n="trapezoids":zw(e,t)?n="sectors":Fm(e,t)&&(n="points"),n}function zFe(e,t){if(Uw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(zw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Fm(e,t)?t.payload:{}}function WFe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=UFe(n,t),i=zFe(n,t),o=r.filter(function(l,c){var u=wm(i,l),d=n.props[a].filter(function(v){var m=BFe(n,t);return m(v,t)}),f=n.props[a].indexOf(d[d.length-1]),p=c===f;return u&&p}),s=r.indexOf(o[o.length-1]);return s}var VFe=Math.ceil,HFe=Math.max;function GFe(e,t,n,r){for(var a=-1,i=HFe(VFe((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var qFe=GFe,KFe=fG,i3=1/0,XFe=17976931348623157e292;function YFe(e){if(!e)return e===0?e:0;if(e=KFe(e),e===i3||e===-i3){var t=e<0?-1:1;return t*XFe}return e===e?e:0}var Iq=YFe,QFe=qFe,JFe=Pw,m_=Iq;function ZFe(e){return function(t,n,r){return r&&typeof r!="number"&&JFe(t,n,r)&&(n=r=void 0),t=m_(t),n===void 0?(n=t,t=0):n=m_(n),r=r===void 0?t<n?1:-1:m_(r),QFe(t,n,r,e)}}var eLe=ZFe,tLe=eLe,nLe=tLe(),rLe=nLe;const Cx=It(rLe);function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function o3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function s3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(n),!0).forEach(function(r){Dq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dq(e,t,n){return t=aLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aLe(e){var t=iLe(e,"string");return Lm(t)=="symbol"?t:t+""}function iLe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oLe=["Webkit","Moz","O","ms"],sLe=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=oLe.reduce(function(i,o){return s3(s3({},i),{},Dq({},o+r,n))},{});return a[t]=n,a};function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ex.apply(this,arguments)}function l3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function v_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l3(Object(n),!0).forEach(function(r){na(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$q(r.key),r)}}function cLe(e,t,n){return t&&c3(e.prototype,t),n&&c3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uLe(e,t,n){return t=kx(t),dLe(e,Mq()?Reflect.construct(t,n||[],kx(e).constructor):t.apply(e,n))}function dLe(e,t){if(t&&(yf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fLe(e)}function fLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mq=function(){return!!e})()}function kx(e){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kx(e)}function hLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QE(e,t)}function QE(e,t){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},QE(e,t)}function na(e,t,n){return t=$q(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $q(e){var t=pLe(e,"string");return yf(t)=="symbol"?t:t+""}function pLe(e,t){if(yf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mLe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=hp().domain(Cx(0,l)).range([i,i+o-s]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(a),scale:c,scaleValues:u}},u3=function(t){return t.changedTouches&&!!t.changedTouches.length},xf=function(e){function t(n){var r;return lLe(this,t),r=uLe(this,t,[n]),na(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),na(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),na(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),r.detachDragEndListener()}),na(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),na(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),na(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),na(r,"handleSlideDragStart",function(a){var i=u3(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return hLe(t,e),cLe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,d=Math.min(a,i),f=Math.max(a,i),p=t.getIndexInRange(o,d),v=t.getIndexInRange(o,f);return{startIndex:p-p%l,endIndex:v===u?u:v-v%l}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=xa(i[r],s,r);return ot(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,f=l.startIndex,p=l.endIndex,v=l.onChange,m=r.pageX-i;m>0?m=Math.min(m,c+u-d-s,c+u-d-o):m<0&&(m=Math.max(m,c-o,c-s));var g=this.getIndex({startX:o+m,endX:s+m});(g.startIndex!==f||g.endIndex!==p)&&v&&v(g),this.setState({startX:o+m,endX:s+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=u3(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,c=this.state[o],u=this.props,d=u.x,f=u.width,p=u.travellerWidth,v=u.onChange,m=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},x=r.pageX-i;x>0?x=Math.min(x,d+f-p-c):x<0&&(x=Math.max(x,d-c)),y[o]=c+x;var b=this.getIndex(y),w=b.startIndex,S=b.endIndex,C=function(){var k=g.length-1;return o==="startX"&&(s>l?w%m===0:S%m===0)||s<l&&S===k||o==="endX"&&(s>l?S%m===0:w%m===0)||s>l&&S===k};this.setState(na(na({},o,c+x),"brushMoveStartX",r.pageX),function(){v&&C()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,u=this.state[a],d=s.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=s.length)){var p=s[f];a==="startX"&&p>=c||a==="endX"&&p<=l||this.setState(na({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return z.createElement("rect",{stroke:c,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,d=_.Children.only(c);return d?z.cloneElement(d,{x:a,y:i,width:o,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,s=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,f=l.traveller,p=l.ariaLabel,v=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),x=v_(v_({},ut(this.props,!1)),{},{x:y,y:c,width:u,height:d}),b=p||"Min value: ".concat((i=v[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return z.createElement(an,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,c=i.travellerWidth,u=Math.min(r,a)+c,d=Math.max(Math.abs(a-r)-c,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,f=u.endX,p=5,v={pointerEvents:"none",fill:c};return z.createElement(an,{className:"recharts-brush-texts"},z.createElement(tx,Ex({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-p,y:o+s/2},v),this.getTextOfTick(a)),z.createElement(tx,Ex({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+p,y:o+s/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,s=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,f=this.state,p=f.startX,v=f.endX,m=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,x=f.isTravellerFocused;if(!a||!a.length||!ve(s)||!ve(l)||!ve(c)||!ve(u)||c<=0||u<=0)return null;var b=vt("recharts-brush",i),w=z.Children.count(o)===1,S=sLe("userSelect","none");return z.createElement(an,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(m||g||y||x||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(i+s/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),z.createElement("line",{x1:a+1,y1:c,x2:a+o-1,y2:c,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:a+1,y1:c+2,x2:a+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return z.isValidElement(r)?i=z.cloneElement(r,a):ot(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(i!==a.prevData||c!==a.prevUpdateId)return v_({prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},i&&i.length?mLe({data:i,width:o,x:s,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var f=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>a?s=l:o=l}return a>=r[s]?s:o}}])}(_.PureComponent);na(xf,"displayName","Brush");na(xf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var vLe=rP;function gLe(e,t){var n;return vLe(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var yLe=gLe,xLe=LH,bLe=Ul,wLe=yLe,SLe=Zr,_Le=Pw;function CLe(e,t,n){var r=SLe(e)?xLe:wLe;return n&&_Le(e,t,n)&&(t=void 0),r(e,bLe(t))}var ELe=CLe;const kLe=It(ELe);var lo=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},d3=sG;function NLe(e,t,n){t=="__proto__"&&d3?d3(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var TLe=NLe,ALe=TLe,PLe=iG,jLe=Ul;function OLe(e,t){var n={};return t=jLe(t),PLe(e,function(r,a,i){ALe(n,a,t(r,a,i))}),n}var RLe=OLe;const ILe=It(RLe);function DLe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var MLe=DLe,$Le=rP;function FLe(e,t){var n=!0;return $Le(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var LLe=FLe,BLe=MLe,ULe=LLe,zLe=Ul,WLe=Zr,VLe=Pw;function HLe(e,t,n){var r=WLe(e)?BLe:ULe;return n&&VLe(e,t,n)&&(t=void 0),r(e,zLe(t))}var GLe=HLe;const Fq=It(GLe);var qLe=["x","y"];function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JE.apply(this,arguments)}function f3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f3(Object(n),!0).forEach(function(r){KLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KLe(e,t,n){return t=XLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XLe(e){var t=YLe(e,"string");return Bm(t)=="symbol"?t:t+""}function YLe(e,t){if(Bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QLe(e,t){if(e==null)return{};var n=JLe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JLe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ZLe(e,t){var n=e.x,r=e.y,a=QLe(e,qLe),i="".concat(n),o=parseInt(i,10),s="".concat(r),l=parseInt(s,10),c="".concat(t.height||a.height),u=parseInt(c,10),d="".concat(t.width||a.width),f=parseInt(d,10);return Oh(Oh(Oh(Oh(Oh({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function h3(e){return z.createElement(MFe,JE({shapeType:"rectangle",propTransformer:ZLe,activeClassName:"recharts-active-bar"},e))}var eBe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=ve(r)||gSe(r);return i?t(r,a):(i||Zc(),n)}},tBe=["value","background"],Lq;function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function nBe(e,t){if(e==null)return{};var n=rBe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rBe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nx.apply(this,arguments)}function p3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(n),!0).forEach(function(r){rl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uq(r.key),r)}}function iBe(e,t,n){return t&&m3(e.prototype,t),n&&m3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oBe(e,t,n){return t=Tx(t),sBe(e,Bq()?Reflect.construct(t,n||[],Tx(e).constructor):t.apply(e,n))}function sBe(e,t){if(t&&(bf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lBe(e)}function lBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bq=function(){return!!e})()}function Tx(e){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tx(e)}function cBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZE(e,t)}function ZE(e,t){return ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ZE(e,t)}function rl(e,t,n){return t=Uq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uq(e){var t=uBe(e,"string");return bf(t)=="symbol"?t:t+""}function uBe(e,t){if(bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vu=function(e){function t(){var n;aBe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=oBe(this,t,[].concat(a)),rl(n,"state",{isAnimationFinished:!1}),rl(n,"id",Av("recharts-bar-")),rl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),rl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return cBe(t,e),iBe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,c=i.activeBar,u=ut(this.props,!1);return r&&r.map(function(d,f){var p=f===l,v=p?c:o,m=yn(yn(yn({},u),d),{},{isActive:p,option:v,index:f,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return z.createElement(an,Nx({className:"recharts-bar-rectangle"},U0(a.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),z.createElement(h3,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state.prevData;return z.createElement(as,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,m=i.map(function(g,y){var x=f&&f[y];if(x){var b=ja(x.x,g.x),w=ja(x.y,g.y),S=ja(x.width,g.width),C=ja(x.height,g.height);return yn(yn({},g),{},{x:b(v),y:w(v),width:S(v),height:C(v)})}if(o==="horizontal"){var E=ja(0,g.height),k=E(v);return yn(yn({},g),{},{y:g.y+g.height-k,height:k})}var N=ja(0,g.width),T=N(v);return yn(yn({},g),{},{width:T})});return z.createElement(an,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!wm(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=ut(this.props.background,!1);return i.map(function(c,u){c.value;var d=c.background,f=nBe(c,tBe);if(!d)return null;var p=yn(yn(yn(yn(yn({},f),{},{fill:"#eee"},d),l),U0(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return z.createElement(h3,Nx({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},p))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,d=Ei(u,Bw);if(!d)return null;var f=c==="vertical"?o[0].height/2:o[0].width/2,p=function(g,y){var x=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:x,errorVal:xa(g,y)}},v={clipPath:r?"url(#clipPath-".concat(a,")"):null};return z.createElement(an,v,d.map(function(m){return z.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,f=r.height,p=r.isAnimationActive,v=r.background,m=r.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=vt("recharts-bar",o),x=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,w=x||b,S=pt(m)?this.id:m;return z.createElement(an,{className:y},x||b?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(S)},z.createElement("rect",{x:x?c:c-d/2,y:b?u:u-f/2,width:x?d:d*2,height:b?f:f*2}))):null,z.createElement(an,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,S),(!p||g)&&gl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(_.PureComponent);Lq=vu;rl(vu,"displayName","Bar");rl(vu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ho.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});rl(vu,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,p=BMe(r,n);if(!p)return null;var v=t.layout,m=n.type.defaultProps,g=m!==void 0?yn(yn({},m),n.props):n.props,y=g.dataKey,x=g.children,b=g.minPointSize,w=v==="horizontal"?o:i,S=c?w.scale.domain():null,C=KMe({numericAxis:w}),E=Ei(x,oP),k=d.map(function(N,T){var A,P,I,R,D,M;c?A=UMe(c[u+T],S):(A=xa(N,y),Array.isArray(A)||(A=[C,A]));var $=eBe(b,Lq.defaultProps.minPointSize)(A[1],T);if(v==="horizontal"){var j,O=[o.scale(A[0]),o.scale(A[1])],B=O[0],G=O[1];P=p4({axis:i,ticks:s,bandSize:a,offset:p.offset,entry:N,index:T}),I=(j=G??B)!==null&&j!==void 0?j:void 0,R=p.size;var L=B-G;if(D=Number.isNaN(L)?0:L,M={x:P,y:o.y,width:R,height:o.height},Math.abs($)>0&&Math.abs(D)<Math.abs($)){var W=yi(D||$)*(Math.abs($)-Math.abs(D));I-=W,D+=W}}else{var J=[i.scale(A[0]),i.scale(A[1])],ee=J[0],ne=J[1];if(P=ee,I=p4({axis:o,ticks:l,bandSize:a,offset:p.offset,entry:N,index:T}),R=ne-ee,D=p.size,M={x:i.x,y:I,width:i.width,height:D},Math.abs($)>0&&Math.abs(R)<Math.abs($)){var Z=yi(R||$)*(Math.abs($)-Math.abs(R));R+=Z}}return yn(yn(yn({},N),{},{x:P,y:I,width:R,height:D,value:c?A:A[1],payload:N,background:M},E&&E[T]&&E[T].props),{},{tooltipPayload:[xq(n,N)],tooltipPosition:{x:P+R/2,y:I+D/2}})});return yn({data:k,layout:v},f)});function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function dBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zq(r.key),r)}}function fBe(e,t,n){return t&&v3(e.prototype,t),n&&v3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(n),!0).forEach(function(r){Ww(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ww(e,t,n){return t=zq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=hBe(e,"string");return Um(t)=="symbol"?t:t+""}function hBe(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wq=function(t,n,r,a,i){var o=t.width,s=t.height,l=t.layout,c=t.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},f=!!aa(c,vu);return u.reduce(function(p,v){var m=n[v],g=m.orientation,y=m.domain,x=m.padding,b=x===void 0?{}:x,w=m.mirror,S=m.reversed,C="".concat(g).concat(w?"Mirror":""),E,k,N,T,A;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var P=y[1]-y[0],I=1/0,R=m.categoricalDomain.sort(bSe);if(R.forEach(function(J,ee){ee>0&&(I=Math.min((J||0)-(R[ee-1]||0),I))}),Number.isFinite(I)){var D=I/P,M=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(E=D*M/2),m.padding==="no-gap"){var $=Qc(t.barCategoryGap,D*M),j=D*M/2;E=j-$-(j-$)/M*$}}}a==="xAxis"?k=[r.left+(b.left||0)+(E||0),r.left+r.width-(b.right||0)-(E||0)]:a==="yAxis"?k=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(E||0),r.top+r.height-(b.bottom||0)-(E||0)]:k=m.range,S&&(k=[k[1],k[0]]);var O=FMe(m,i,f),B=O.scale,G=O.realScaleType;B.domain(y).range(k),LMe(B);var L=qMe(B,fi(fi({},m),{},{realScaleType:G}));a==="xAxis"?(A=g==="top"&&!w||g==="bottom"&&w,N=r.left,T=d[C]-A*m.height):a==="yAxis"&&(A=g==="left"&&!w||g==="right"&&w,N=d[C]-A*m.width,T=r.top);var W=fi(fi(fi({},m),L),{},{realScaleType:G,x:N,y:T,scale:B,width:a==="xAxis"?r.width:m.width,height:a==="yAxis"?r.height:m.height});return W.bandSize=mx(W,L),!m.hide&&a==="xAxis"?d[C]+=(A?-1:1)*W.height:m.hide||(d[C]+=(A?-1:1)*W.width),fi(fi({},p),{},Ww({},v,W))},{})},Vq=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},pBe=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return Vq({x:n,y:r},{x:a,y:i})},Hq=function(){function e(t){dBe(this,e),this.scale=t}return fBe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Ww(Hq,"EPS",1e-4);var IP=function(t){var n=Object.keys(t).reduce(function(r,a){return fi(fi({},r),{},Ww({},a,Hq.create(t[a])))},{});return fi(fi({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return ILe(a,function(l,c){return n[c].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return Fq(a,function(i,o){return n[o].isInRange(i)})}})};function mBe(e){return(e%180+180)%180}var vBe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=mBe(a),o=i*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},gBe=Ul,yBe=Pv,xBe=Tw;function bBe(e){return function(t,n,r){var a=Object(t);if(!yBe(t)){var i=gBe(n);t=xBe(t),n=function(s){return i(a[s],s,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var wBe=bBe,SBe=Iq;function _Be(e){var t=SBe(e),n=t%1;return t===t?n?t-n:t:0}var CBe=_Be,EBe=ZH,kBe=Ul,NBe=CBe,TBe=Math.max;function ABe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:NBe(n);return a<0&&(a=TBe(r+a,0)),EBe(e,kBe(t),a)}var PBe=ABe,jBe=wBe,OBe=PBe,RBe=jBe(OBe),IBe=RBe;const DBe=It(IBe);var MBe=w1e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),DP=_.createContext(void 0),MP=_.createContext(void 0),Gq=_.createContext(void 0),qq=_.createContext({}),Kq=_.createContext(void 0),Xq=_.createContext(0),Yq=_.createContext(0),y3=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,s=t.children,l=t.width,c=t.height,u=MBe(i);return z.createElement(DP.Provider,{value:r},z.createElement(MP.Provider,{value:a},z.createElement(qq.Provider,{value:i},z.createElement(Gq.Provider,{value:u},z.createElement(Kq.Provider,{value:o},z.createElement(Xq.Provider,{value:c},z.createElement(Yq.Provider,{value:l},s)))))))},$Be=function(){return _.useContext(Kq)},Qq=function(t){var n=_.useContext(DP);n==null&&Zc();var r=n[t];return r==null&&Zc(),r},FBe=function(){var t=_.useContext(DP);return zs(t)},LBe=function(){var t=_.useContext(MP),n=DBe(t,function(r){return Fq(r.domain,Number.isFinite)});return n||zs(t)},Jq=function(t){var n=_.useContext(MP);n==null&&Zc();var r=n[t];return r==null&&Zc(),r},BBe=function(){var t=_.useContext(Gq);return t},UBe=function(){return _.useContext(qq)},$P=function(){return _.useContext(Yq)},FP=function(){return _.useContext(Xq)};function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function zBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eK(r.key),r)}}function VBe(e,t,n){return t&&WBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HBe(e,t,n){return t=Ax(t),GBe(e,Zq()?Reflect.construct(t,n||[],Ax(e).constructor):t.apply(e,n))}function GBe(e,t){if(t&&(wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qBe(e)}function qBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zq=function(){return!!e})()}function Ax(e){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ax(e)}function KBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ek(e,t)}function ek(e,t){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ek(e,t)}function x3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function b3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(n),!0).forEach(function(r){LP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LP(e,t,n){return t=eK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eK(e){var t=XBe(e,"string");return wf(t)=="symbol"?t:t+""}function XBe(e,t){if(wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YBe(e,t){return e5e(e)||ZBe(e,t)||JBe(e,t)||QBe()}function QBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JBe(e,t){if(e){if(typeof e=="string")return w3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w3(e,t)}}function w3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZBe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function e5e(e){if(Array.isArray(e))return e}function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tk.apply(this,arguments)}var t5e=function(t,n){var r;return z.isValidElement(t)?r=z.cloneElement(t,n):ot(t)?r=t(n):r=z.createElement("line",tk({},n,{className:"recharts-reference-line-line"})),r},n5e=function(t,n,r,a,i,o,s,l,c){var u=i.x,d=i.y,f=i.width,p=i.height;if(r){var v=c.y,m=t.y.apply(v,{position:o});if(lo(c,"discard")&&!t.y.isInRange(m))return null;var g=[{x:u+f,y:m},{x:u,y:m}];return l==="left"?g.reverse():g}if(n){var y=c.x,x=t.x.apply(y,{position:o});if(lo(c,"discard")&&!t.x.isInRange(x))return null;var b=[{x,y:d+p},{x,y:d}];return s==="top"?b.reverse():b}if(a){var w=c.segment,S=w.map(function(C){return t.apply(C,{position:o})});return lo(c,"discard")&&kLe(S,function(C){return!t.isInRange(C)})?null:S}return null};function r5e(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,c=$Be(),u=Qq(a),d=Jq(i),f=BBe();if(!c||!f)return null;Vo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=IP({x:u.scale,y:d.scale}),v=jn(t),m=jn(n),g=r&&r.length===2,y=n5e(p,v,m,g,f,e.position,u.orientation,d.orientation,e);if(!y)return null;var x=YBe(y,2),b=x[0],w=b.x,S=b.y,C=x[1],E=C.x,k=C.y,N=lo(e,"hidden")?"url(#".concat(c,")"):void 0,T=b3(b3({clipPath:N},ut(e,!0)),{},{x1:w,y1:S,x2:E,y2:k});return z.createElement(an,{className:vt("recharts-reference-line",s)},t5e(o,T),yr.renderCallByParent(e,pBe({x1:w,y1:S,x2:E,y2:k})))}var BP=function(e){function t(){return zBe(this,t),HBe(this,t,arguments)}return KBe(t,e),VBe(t,[{key:"render",value:function(){return z.createElement(r5e,this.props)}}])}(z.Component);LP(BP,"displayName","ReferenceLine");LP(BP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nk.apply(this,arguments)}function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function S3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S3(Object(n),!0).forEach(function(r){Vw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i5e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nK(r.key),r)}}function o5e(e,t,n){return t&&i5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s5e(e,t,n){return t=Px(t),l5e(e,tK()?Reflect.construct(t,n||[],Px(e).constructor):t.apply(e,n))}function l5e(e,t){if(t&&(Sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c5e(e)}function c5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tK=function(){return!!e})()}function Px(e){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Px(e)}function u5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},rk(e,t)}function Vw(e,t,n){return t=nK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nK(e){var t=d5e(e,"string");return Sf(t)=="symbol"?t:t+""}function d5e(e,t){if(Sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f5e=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=IP({x:a.scale,y:i.scale}),s=o.apply({x:n,y:r},{bandAware:!0});return lo(t,"discard")&&!o.isInRange(s)?null:s},Hw=function(e){function t(){return a5e(this,t),s5e(this,t,arguments)}return u5e(t,e),o5e(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=jn(a),u=jn(i);if(Vo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=f5e(this.props);if(!d)return null;var f=d.x,p=d.y,v=this.props,m=v.shape,g=v.className,y=lo(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=_3(_3({clipPath:y},ut(this.props,!0)),{},{cx:f,cy:p});return z.createElement(an,{className:vt("recharts-reference-dot",g)},t.renderDot(m,x),yr.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])}(z.Component);Vw(Hw,"displayName","ReferenceDot");Vw(Hw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Vw(Hw,"renderDot",function(e,t){var n;return z.isValidElement(e)?n=z.cloneElement(e,t):ot(e)?n=e(t):n=z.createElement(RP,nk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(this,arguments)}function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function C3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function E3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(n),!0).forEach(function(r){Gw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p5e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aK(r.key),r)}}function m5e(e,t,n){return t&&p5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v5e(e,t,n){return t=jx(t),g5e(e,rK()?Reflect.construct(t,n||[],jx(e).constructor):t.apply(e,n))}function g5e(e,t){if(t&&(_f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y5e(e)}function y5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rK=function(){return!!e})()}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jx(e)}function x5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ik(e,t)}function ik(e,t){return ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ik(e,t)}function Gw(e,t,n){return t=aK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aK(e){var t=b5e(e,"string");return _f(t)=="symbol"?t:t+""}function b5e(e,t){if(_f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w5e=function(t,n,r,a,i){var o=i.x1,s=i.x2,l=i.y1,c=i.y2,u=i.xAxis,d=i.yAxis;if(!u||!d)return null;var f=IP({x:u.scale,y:d.scale}),p={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(s,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(c,{position:"end"}):f.y.rangeMax};return lo(i,"discard")&&(!f.isInRange(p)||!f.isInRange(v))?null:Vq(p,v)},qw=function(e){function t(){return h5e(this,t),v5e(this,t,arguments)}return x5e(t,e),m5e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;Vo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=jn(a),f=jn(i),p=jn(o),v=jn(s),m=this.props.shape;if(!d&&!f&&!p&&!v&&!m)return null;var g=w5e(d,f,p,v,this.props);if(!g&&!m)return null;var y=lo(this.props,"hidden")?"url(#".concat(u,")"):void 0;return z.createElement(an,{className:vt("recharts-reference-area",l)},t.renderRect(m,E3(E3({clipPath:y},ut(this.props,!0)),g)),yr.renderCallByParent(this.props,g))}}])}(z.Component);Gw(qw,"displayName","ReferenceArea");Gw(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Gw(qw,"renderRect",function(e,t){var n;return z.isValidElement(e)?n=z.cloneElement(e,t):ot(e)?n=e(t):n=z.createElement(OP,ak({},t,{className:"recharts-reference-area-rect"})),n});function iK(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function S5e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return vBe(r,n)}function _5e(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:r?a:i,end:r?a+o:i+s}:{start:r?a+o:i+s,end:r?a:i}}function Ox(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function C5e(e,t){return iK(e,t+1)}function E5e(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,s=t.end,l=0,c=1,u=o,d=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:iK(r,c)};var m=l,g,y=function(){return g===void 0&&(g=n(v,m)),g},x=v.coordinate,b=l===0||Ox(e,x,y,u,s);b||(l=0,u=o,c+=1),b&&(u=x+e*(y()/2+a),l+=c)},f;c<=i.length;)if(f=d(),f)return f.v;return[]}function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function k3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(n),!0).forEach(function(r){k5e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k5e(e,t,n){return t=N5e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N5e(e){var t=T5e(e,"string");return zm(t)=="symbol"?t:t+""}function T5e(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A5e(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,s=t.start,l=t.end,c=function(f){var p=i[f],v,m=function(){return v===void 0&&(v=n(p,f)),v};if(f===o-1){var g=e*(p.coordinate+e*m()/2-l);i[f]=p=pr(pr({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else i[f]=p=pr(pr({},p),{},{tickCoord:p.coordinate});var y=Ox(e,p.tickCoord,m,s,l);y&&(l=p.tickCoord-e*(m()/2+a),i[f]=pr(pr({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function P5e(e,t,n,r,a,i){var o=(r||[]).slice(),s=o.length,l=t.start,c=t.end;if(i){var u=r[s-1],d=n(u,s-1),f=e*(u.coordinate+e*d/2-c);o[s-1]=u=pr(pr({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=Ox(e,u.tickCoord,function(){return d},l,c);p&&(c=u.tickCoord-e*(d/2+a),o[s-1]=pr(pr({},u),{},{isShow:!0}))}for(var v=i?s-1:s,m=function(x){var b=o[x],w,S=function(){return w===void 0&&(w=n(b,x)),w};if(x===0){var C=e*(b.coordinate-e*S()/2-l);o[x]=b=pr(pr({},b),{},{tickCoord:C<0?b.coordinate-C*e:b.coordinate})}else o[x]=b=pr(pr({},b),{},{tickCoord:b.coordinate});var E=Ox(e,b.tickCoord,S,l,c);E&&(l=b.tickCoord+e*(S()/2+a),o[x]=pr(pr({},b),{},{isShow:!0}))},g=0;g<v;g++)m(g);return o}function UP(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(ve(l)||Ho.isSsr)return C5e(a,typeof l=="number"&&ve(l)?l:0);var f=[],p=s==="top"||s==="bottom"?"width":"height",v=u&&p==="width"?fp(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(b,w){var S=ot(c)?c(b.value,w):b.value;return p==="width"?S5e(fp(S,{fontSize:t,letterSpacing:n}),v,d):fp(S,{fontSize:t,letterSpacing:n})[p]},g=a.length>=2?yi(a[1].coordinate-a[0].coordinate):1,y=_5e(i,g,p);return l==="equidistantPreserveStart"?E5e(g,y,m,a,o):(l==="preserveStart"||l==="preserveStartEnd"?f=P5e(g,y,m,a,o,l==="preserveStartEnd"):f=A5e(g,y,m,a,o),f.filter(function(x){return x.isShow}))}var j5e=["viewBox"],O5e=["viewBox"],R5e=["ticks"];function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(this,arguments)}function N3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(n),!0).forEach(function(r){zP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g_(e,t){if(e==null)return{};var n=I5e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function I5e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function D5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sK(r.key),r)}}function M5e(e,t,n){return t&&T3(e.prototype,t),n&&T3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $5e(e,t,n){return t=Rx(t),F5e(e,oK()?Reflect.construct(t,n||[],Rx(e).constructor):t.apply(e,n))}function F5e(e,t){if(t&&(Cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L5e(e)}function L5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oK=function(){return!!e})()}function Rx(e){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rx(e)}function B5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ok(e,t)}function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ok(e,t)}function zP(e,t,n){return t=sK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sK(e){var t=U5e(e,"string");return Cf(t)=="symbol"?t:t+""}function U5e(e,t){if(Cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sh=function(e){function t(n){var r;return D5e(this,t),r=$5e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return B5e(t,e),M5e(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=g_(r,j5e),s=this.props,l=s.viewBox,c=g_(s,O5e);return!Od(i,l)||!Od(o,c)||!Od(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,c=a.orientation,u=a.tickSize,d=a.mirror,f=a.tickMargin,p,v,m,g,y,x,b=d?-1:1,w=r.tickSize||u,S=ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":p=v=r.coordinate,g=o+ +!d*l,m=g-b*w,x=m-b*f,y=S;break;case"left":m=g=r.coordinate,v=i+ +!d*s,p=v-b*w,y=p-b*f,x=S;break;case"right":m=g=r.coordinate,v=i+ +d*s,p=v+b*w,y=p+b*f,x=S;break;default:p=v=r.coordinate,g=o+ +d*l,m=g+b*w,x=m+b*f,y=S;break}return{line:{x1:p,y1:m,x2:v,y2:g},tick:{x:y,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=Cn(Cn(Cn({},ut(this.props,!1)),ut(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=Cn(Cn({},d),{},{x1:a,y1:i+f*s,x2:a+o,y2:i+f*s})}else{var p=+(l==="left"&&!c||l==="right"&&c);d=Cn(Cn({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+s})}return z.createElement("line",cd({},d,{className:vt("recharts-cartesian-axis-line",Ba(u,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,d=s.tickFormatter,f=s.unit,p=UP(Cn(Cn({},this.props),{},{ticks:r}),a,i),v=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=ut(this.props,!1),y=ut(u,!1),x=Cn(Cn({},g),{},{fill:"none"},ut(l,!1)),b=p.map(function(w,S){var C=o.getTickLineCoord(w),E=C.line,k=C.tick,N=Cn(Cn(Cn(Cn({textAnchor:v,verticalAnchor:m},g),{},{stroke:"none",fill:c},y),k),{},{index:S,payload:w,visibleTicksCount:p.length,tickFormatter:d});return z.createElement(an,cd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},U0(o.props,w,S)),l&&z.createElement("line",cd({},x,E,{className:vt("recharts-cartesian-axis-tick-line",Ba(l,"className"))})),u&&t.renderTickItem(u,N,"".concat(ot(d)?d(w.value,S):w.value).concat(f||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,c=a.className,u=a.hide;if(u)return null;var d=this.props,f=d.ticks,p=g_(d,R5e),v=f;return ot(l)&&(v=f&&f.length>0?l(this.props):l(p)),o<=0||s<=0||!v||!v.length?null:z.createElement(an,{className:vt("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),yr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o,s=vt(a.className,"recharts-cartesian-axis-tick-value");return z.isValidElement(r)?o=z.cloneElement(r,Cn(Cn({},a),{},{className:s})):ot(r)?o=r(Cn(Cn({},a),{},{className:s})):o=z.createElement(tx,cd({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(_.Component);zP(sh,"displayName","CartesianAxis");zP(sh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var z5e=["x1","y1","x2","y2","key"],W5e=["offset"];function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function A3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(n),!0).forEach(function(r){V5e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V5e(e,t,n){return t=H5e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H5e(e){var t=G5e(e,"string");return eu(t)=="symbol"?t:t+""}function G5e(e,t){if(eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cc.apply(this,arguments)}function P3(e,t){if(e==null)return{};var n=q5e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function q5e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var K5e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return z.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function lK(e,t){var n;if(z.isValidElement(e))n=z.cloneElement(e,t);else if(ot(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=P3(t,z5e),c=ut(l,!1);c.offset;var u=P3(c,W5e);n=z.createElement("line",Cc({},u,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:s}))}return n}function X5e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var c=xr(xr({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(l),index:l});return lK(a,c)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Y5e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var c=xr(xr({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(l),index:l});return lK(a,c)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Q5e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,c=l===void 0?!0:l;if(!c||!t||!t.length)return null;var u=s.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var v=!u[p+1],m=v?a+o-f:u[p+1]-f;if(m<=0)return null;var g=p%t.length;return z.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:m,width:i,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function J5e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var v=!u[p+1],m=v?i+s-f:u[p+1]-f;if(m<=0)return null;var g=p%r.length;return z.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Z5e=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return gq(UP(xr(xr(xr({},sh.defaultProps),r),{},{ticks:Bo(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},eUe=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return gq(UP(xr(xr(xr({},sh.defaultProps),r),{},{ticks:Bo(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Du={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function sk(e){var t,n,r,a,i,o,s=$P(),l=FP(),c=UBe(),u=xr(xr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Du.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Du.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Du.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Du.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Du.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Du.verticalFill,x:ve(e.x)?e.x:c.left,y:ve(e.y)?e.y:c.top,width:ve(e.width)?e.width:c.width,height:ve(e.height)?e.height:c.height}),d=u.x,f=u.y,p=u.width,v=u.height,m=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,x=FBe(),b=LBe();if(!ve(p)||p<=0||!ve(v)||v<=0||!ve(d)||d!==+d||!ve(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||Z5e,S=u.horizontalCoordinatesGenerator||eUe,C=u.horizontalPoints,E=u.verticalPoints;if((!C||!C.length)&&ot(S)){var k=g&&g.length,N=S({yAxis:b?xr(xr({},b),{},{ticks:k?g:b.ticks}):void 0,width:s,height:l,offset:c},k?!0:m);Vo(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(eu(N),"]")),Array.isArray(N)&&(C=N)}if((!E||!E.length)&&ot(w)){var T=y&&y.length,A=w({xAxis:x?xr(xr({},x),{},{ticks:T?y:x.ticks}):void 0,width:s,height:l,offset:c},T?!0:m);Vo(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(eu(A),"]")),Array.isArray(A)&&(E=A)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(K5e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),z.createElement(X5e,Cc({},u,{offset:c,horizontalPoints:C,xAxis:x,yAxis:b})),z.createElement(Y5e,Cc({},u,{offset:c,verticalPoints:E,xAxis:x,yAxis:b})),z.createElement(Q5e,Cc({},u,{horizontalPoints:C})),z.createElement(J5e,Cc({},u,{verticalPoints:E})))}sk.displayName="CartesianGrid";var tUe=["layout","type","stroke","connectNulls","isRange","ref"],nUe=["key"],cK;function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function uK(e,t){if(e==null)return{};var n=rUe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rUe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ec.apply(this,arguments)}function j3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(n),!0).forEach(function(r){Yi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fK(r.key),r)}}function iUe(e,t,n){return t&&O3(e.prototype,t),n&&O3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oUe(e,t,n){return t=Ix(t),sUe(e,dK()?Reflect.construct(t,n||[],Ix(e).constructor):t.apply(e,n))}function sUe(e,t){if(t&&(Ef(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lUe(e)}function lUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dK=function(){return!!e})()}function Ix(e){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ix(e)}function cUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lk(e,t)}function lk(e,t){return lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lk(e,t)}function Yi(e,t,n){return t=fK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fK(e){var t=uUe(e,"string");return Ef(t)=="symbol"?t:t+""}function uUe(e,t){if(Ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hl=function(e){function t(){var n;aUe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=oUe(this,t,[].concat(a)),Yi(n,"state",{isAnimationFinished:!0}),Yi(n,"id",Av("recharts-area-")),Yi(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ot(o)&&o()}),Yi(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ot(o)&&o()}),n}return cUe(t,e),iUe(t,[{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=ut(this.props,!1),p=ut(c,!0),v=u.map(function(g,y){var x=Is(Is(Is({key:"dot-".concat(y),r:3},f),p),{},{index:y,cx:g.x,cy:g.y,dataKey:d,value:g.value,payload:g.payload,points:u});return t.renderDotItem(c,x)}),m={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return z.createElement(an,Ec({className:"recharts-area-dots"},m),v)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,c=o[o.length-1].x,u=r*Math.abs(l-c),d=nl(o.map(function(f){return f.y||0}));return ve(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(nl(i.map(function(f){return f.y||0})),d)),ve(d)?z.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,c=o[o.length-1].y,u=r*Math.abs(l-c),d=nl(o.map(function(f){return f.x||0}));return ve(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(nl(i.map(function(f){return f.x||0})),d)),ve(d)?z.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,i,o){var s=this.props,l=s.layout,c=s.type,u=s.stroke,d=s.connectNulls,f=s.isRange;s.ref;var p=uK(s,tUe);return z.createElement(an,{clipPath:i?"url(#clipPath-".concat(o,")"):null},z.createElement(mp,Ec({},ut(p,!0),{points:r,connectNulls:d,type:c,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&z.createElement(mp,Ec({},ut(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&f&&z.createElement(mp,Ec({},ut(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var i=this,o=this.props,s=o.points,l=o.baseLine,c=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,f=o.animationEasing,p=o.animationId,v=this.state,m=v.prevPoints,g=v.prevBaseLine;return z.createElement(as,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t;if(m){var b=m.length/s.length,w=s.map(function(k,N){var T=Math.floor(N*b);if(m[T]){var A=m[T],P=ja(A.x,k.x),I=ja(A.y,k.y);return Is(Is({},k),{},{x:P(x),y:I(x)})}return k}),S;if(ve(l)&&typeof l=="number"){var C=ja(g,l);S=C(x)}else if(pt(l)||eh(l)){var E=ja(g,0);S=E(x)}else S=l.map(function(k,N){var T=Math.floor(N*b);if(g[T]){var A=g[T],P=ja(A.x,k.x),I=ja(A.y,k.y);return Is(Is({},k),{},{x:P(x),y:I(x)})}return k});return i.renderAreaStatically(w,S,r,a)}return z.createElement(an,null,z.createElement("defs",null,z.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(x))),z.createElement(an,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,r,a)))})}},{key:"renderArea",value:function(r,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,f=c.totalLength;return l&&o&&o.length&&(!u&&f>0||!wm(u,o)||!wm(d,s))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,s,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,c=a.top,u=a.left,d=a.xAxis,f=a.yAxis,p=a.width,v=a.height,m=a.isAnimationActive,g=a.id;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,x=s.length===1,b=vt("recharts-area",l),w=d&&d.allowDataOverflow,S=f&&f.allowDataOverflow,C=w||S,E=pt(g)?this.id:g,k=(r=ut(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=k.r,T=N===void 0?3:N,A=k.strokeWidth,P=A===void 0?2:A,I=ASe(o)?o:{},R=I.clipDot,D=R===void 0?!0:R,M=T*2+P;return z.createElement(an,{className:b},w||S?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(E)},z.createElement("rect",{x:w?u:u-p/2,y:S?c:c-v/2,width:w?p:p*2,height:S?v:v*2})),!D&&z.createElement("clipPath",{id:"clipPath-dots-".concat(E)},z.createElement("rect",{x:u-M/2,y:c-M/2,width:p+M,height:v+M}))):null,x?null:this.renderArea(C,E),(o||x)&&this.renderDots(C,D,E),(!m||y)&&gl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(_.PureComponent);cK=Hl;Yi(Hl,"displayName","Area");Yi(Hl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ho.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Yi(Hl,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(ve(s)&&typeof s=="number")return s;var l=a==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return s==="dataMin"?d:s==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]});Yi(Hl,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,c=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,p=t.layout,v=c&&c.length,m=cK.getBaseValue(t,n,r,a),g=p==="horizontal",y=!1,x=d.map(function(w,S){var C;v?C=c[u+S]:(C=xa(w,l),Array.isArray(C)?y=!0:C=[m,C]);var E=C[1]==null||v&&xa(w,l)==null;return g?{x:h4({axis:r,ticks:i,bandSize:s,entry:w,index:S}),y:E?null:a.scale(C[1]),value:C,payload:w}:{x:E?null:r.scale(C[1]),y:h4({axis:a,ticks:o,bandSize:s,entry:w,index:S}),value:C,payload:w}}),b;return v||y?b=x.map(function(w){var S=Array.isArray(w.value)?w.value[0]:null;return g?{x:w.x,y:S!=null&&w.y!=null?a.scale(S):null}:{x:S!=null?r.scale(S):null,y:w.y}}):b=g?a.scale(m):r.scale(m),Is({points:x,baseLine:b,layout:p,isRange:y},f)});Yi(Hl,"renderDotItem",function(e,t){var n;if(z.isValidElement(e))n=z.cloneElement(e,t);else if(ot(e))n=e(t);else{var r=vt("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=uK(t,nUe);n=z.createElement(RP,Ec({},i,{key:a,className:r}))}return n});function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function dUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mK(r.key),r)}}function hUe(e,t,n){return t&&fUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pUe(e,t,n){return t=Dx(t),mUe(e,hK()?Reflect.construct(t,n||[],Dx(e).constructor):t.apply(e,n))}function mUe(e,t){if(t&&(kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vUe(e)}function vUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hK=function(){return!!e})()}function Dx(e){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dx(e)}function gUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}function ck(e,t){return ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ck(e,t)}function pK(e,t,n){return t=mK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mK(e){var t=yUe(e,"string");return kf(t)=="symbol"?t:t+""}function yUe(e,t){if(kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uk.apply(this,arguments)}function xUe(e){var t=e.xAxisId,n=$P(),r=FP(),a=Qq(t);return a==null?null:_.createElement(sh,uk({},a,{className:vt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Bo(o,!0)}}))}var Nf=function(e){function t(){return dUe(this,t),pUe(this,t,arguments)}return gUe(t,e),hUe(t,[{key:"render",value:function(){return _.createElement(xUe,this.props)}}])}(_.Component);pK(Nf,"displayName","XAxis");pK(Nf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function bUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yK(r.key),r)}}function SUe(e,t,n){return t&&wUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Ue(e,t,n){return t=Mx(t),CUe(e,vK()?Reflect.construct(t,n||[],Mx(e).constructor):t.apply(e,n))}function CUe(e,t){if(t&&(Tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EUe(e)}function EUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vK=function(){return!!e})()}function Mx(e){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mx(e)}function kUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dk(e,t)}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},dk(e,t)}function gK(e,t,n){return t=yK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yK(e){var t=NUe(e,"string");return Tf(t)=="symbol"?t:t+""}function NUe(e,t){if(Tf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fk(){return fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fk.apply(this,arguments)}var TUe=function(t){var n=t.yAxisId,r=$P(),a=FP(),i=Jq(n);return i==null?null:_.createElement(sh,fk({},i,{className:vt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(s){return Bo(s,!0)}}))},Af=function(e){function t(){return bUe(this,t),_Ue(this,t,arguments)}return kUe(t,e),SUe(t,[{key:"render",value:function(){return _.createElement(TUe,this.props)}}])}(_.Component);gK(Af,"displayName","YAxis");gK(Af,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function R3(e){return OUe(e)||jUe(e)||PUe(e)||AUe()}function AUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PUe(e,t){if(e){if(typeof e=="string")return hk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hk(e,t)}}function jUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OUe(e){if(Array.isArray(e))return hk(e)}function hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pk=function(t,n,r,a,i){var o=Ei(t,BP),s=Ei(t,Hw),l=[].concat(R3(o),R3(s)),c=Ei(t,qw),u="".concat(a,"Id"),d=a[0],f=n;if(l.length&&(f=l.reduce(function(m,g){if(g.props[u]===r&&lo(g.props,"extendDomain")&&ve(g.props[d])){var y=g.props[d];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),c.length){var p="".concat(d,"1"),v="".concat(d,"2");f=c.reduce(function(m,g){if(g.props[u]===r&&lo(g.props,"extendDomain")&&ve(g.props[p])&&ve(g.props[v])){var y=g.props[p],x=g.props[v];return[Math.min(m[0],y,x),Math.max(m[1],y,x)]}return m},f)}return i&&i.length&&(f=i.reduce(function(m,g){return ve(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},f)),f},xK={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new a(u,d||l,f),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)t.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,v=new Array(p);f<p;f++)v[f]=d[f].fn;return v},s.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(c,u,d,f,p,v){var m=n?n+c:c;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,x,b;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,f),!0;case 5:return g.fn.call(g.context,u,d,f,p),!0;case 6:return g.fn.call(g.context,u,d,f,p,v),!0}for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];g.fn.apply(g.context,x)}else{var w=g.length,S;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(c,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,u);break;case 3:g[b].fn.call(g[b].context,u,d);break;case 4:g[b].fn.call(g[b].context,u,d,f);break;default:if(!x)for(S=1,x=new Array(y-1);S<y;S++)x[S-1]=arguments[S];g[b].fn.apply(g[b].context,x)}}return!0},s.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},s.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},s.prototype.removeListener=function(c,u,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!f||v.once)&&(!d||v.context===d)&&o(this,p);else{for(var m=0,g=[],y=v.length;m<y;m++)(v[m].fn!==u||f&&!v[m].once||d&&v[m].context!==d)&&g.push(v[m]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(xK);var RUe=xK.exports;const IUe=It(RUe);var y_=new IUe,x_="recharts.syncMouseEvents";function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function DUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bK(r.key),r)}}function $Ue(e,t,n){return t&&MUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b_(e,t,n){return t=bK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bK(e){var t=FUe(e,"string");return Wm(t)=="symbol"?t:t+""}function FUe(e,t){if(Wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LUe=function(){function e(){DUe(this,e),b_(this,"activeIndex",0),b_(this,"coordinateList",[]),b_(this,"layout","horizontal")}return $Ue(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,s=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=i+l+c,f=o+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function BUe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&ve(r)&&ve(a))return!0}return!1}function UUe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function wK(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=ir(t,n,r,a),s=ir(t,n,r,i);return{points:[o,s],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function zUe(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,f=ir(s,l,c,d),p=ir(s,l,u,d);r=f.x,a=f.y,i=p.x,o=p.y}else return wK(t);return[{x:r,y:a},{x:i,y:o}]}function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function I3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(n),!0).forEach(function(r){WUe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WUe(e,t,n){return t=VUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VUe(e){var t=HUe(e,"string");return Vm(t)=="symbol"?t:t+""}function HUe(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GUe(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,c=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!i||!o||f!=="ScatterChart"&&a!=="axis")return null;var v,m=mp;if(f==="ScatterChart")v=o,m=Y3e;else if(f==="BarChart")v=UUe(d,o,l,u),m=OP;else if(d==="radial"){var g=wK(o),y=g.cx,x=g.cy,b=g.radius,w=g.startAngle,S=g.endAngle;v={cx:y,cy:x,startAngle:w,endAngle:S,innerRadius:b,outerRadius:b},m=Sq}else v={points:zUe(d,o,l)},m=mp;var C=Xg(Xg(Xg(Xg({stroke:"#ccc",pointerEvents:"none"},l),v),ut(p,!1)),{},{payload:s,payloadIndex:c,className:vt("recharts-tooltip-cursor",p.className)});return _.isValidElement(p)?_.cloneElement(p,C):_.createElement(m,C)}var qUe=["item"],KUe=["children","className","width","height","style","compact","title","desc"];function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function ud(){return ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ud.apply(this,arguments)}function D3(e,t){return QUe(e)||YUe(e,t)||_K(e,t)||XUe()}function XUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YUe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function QUe(e){if(Array.isArray(e))return e}function M3(e,t){if(e==null)return{};var n=JUe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JUe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ZUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CK(r.key),r)}}function tze(e,t,n){return t&&eze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nze(e,t,n){return t=$x(t),rze(e,SK()?Reflect.construct(t,n||[],$x(e).constructor):t.apply(e,n))}function rze(e,t){if(t&&(Pf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aze(e)}function aze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SK=function(){return!!e})()}function $x(e){return $x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$x(e)}function ize(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mk(e,t)}function mk(e,t){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},mk(e,t)}function jf(e){return lze(e)||sze(e)||_K(e)||oze()}function oze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _K(e,t){if(e){if(typeof e=="string")return vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vk(e,t)}}function sze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lze(e){if(Array.isArray(e))return vk(e)}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qe(e,t,n){return t=CK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CK(e){var t=cze(e,"string");return Pf(t)=="symbol"?t:t+""}function cze(e,t){if(Pf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uze={xAxis:["bottom","top"],yAxis:["left","right"]},dze={width:"100%",height:"100%"},EK={x:0,y:0};function Yg(e){return e}var fze=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},hze=function(t,n,r,a){var i=n.find(function(u){return u&&u.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return ce(ce(ce({},a),ir(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,c=a.angle;return ce(ce(ce({},a),ir(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return EK},Kw=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(jf(s),jf(c)):s},[]);return o.length>0?o:t&&t.length&&ve(a)&&ve(i)?t.slice(a,i+1):[]};function kK(e){return e==="number"?[0,"auto"]:void 0}var gk=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,s=Kw(n,t);return r<0||!i||!i.length||r>=s.length?null:i.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?s:d;f=L0(p,o.dataKey,a)}else f=d&&d[r]||s[r];return f?[].concat(jf(l),[xq(c,f)]):l},[])},F3=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=fze(i,r),s=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,u=OMe(o,s,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,f=gk(t,n,u,d),p=hze(r,s,u,i);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:p}}return null},pze=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=t.layout,d=t.children,f=t.stackOffset,p=vq(u,i);return r.reduce(function(v,m){var g,y=m.type.defaultProps!==void 0?ce(ce({},m.type.defaultProps),m.props):m.props,x=y.type,b=y.dataKey,w=y.allowDataOverflow,S=y.allowDuplicatedCategory,C=y.scale,E=y.ticks,k=y.includeHidden,N=y[o];if(v[N])return v;var T=Kw(t.data,{graphicalItems:a.filter(function(L){var W,J=o in L.props?L.props[o]:(W=L.type.defaultProps)===null||W===void 0?void 0:W[o];return J===N}),dataStartIndex:l,dataEndIndex:c}),A=T.length,P,I,R;BUe(y.domain,w,x)&&(P=DE(y.domain,null,w),p&&(x==="number"||C!=="auto")&&(R=pp(T,b,"category")));var D=kK(x);if(!P||P.length===0){var M,$=(M=y.domain)!==null&&M!==void 0?M:D;if(b){if(P=pp(T,b,x),x==="category"&&p){var j=xSe(P);S&&j?(I=P,P=Cx(0,A)):S||(P=g4($,P,m).reduce(function(L,W){return L.indexOf(W)>=0?L:[].concat(jf(L),[W])},[]))}else if(x==="category")S?P=P.filter(function(L){return L!==""&&!pt(L)}):P=g4($,P,m).reduce(function(L,W){return L.indexOf(W)>=0||W===""||pt(W)?L:[].concat(jf(L),[W])},[]);else if(x==="number"){var O=$Me(T,a.filter(function(L){var W,J,ee=o in L.props?L.props[o]:(W=L.type.defaultProps)===null||W===void 0?void 0:W[o],ne="hide"in L.props?L.props.hide:(J=L.type.defaultProps)===null||J===void 0?void 0:J.hide;return ee===N&&(k||!ne)}),b,i,u);O&&(P=O)}p&&(x==="number"||C!=="auto")&&(R=pp(T,b,"category"))}else p?P=Cx(0,A):s&&s[N]&&s[N].hasStack&&x==="number"?P=f==="expand"?[0,1]:yq(s[N].stackGroups,l,c):P=mq(T,a.filter(function(L){var W=o in L.props?L.props[o]:L.type.defaultProps[o],J="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return W===N&&(k||!J)}),x,u,!0);if(x==="number")P=pk(d,P,N,i,E),$&&(P=DE($,P,w));else if(x==="category"&&$){var B=$,G=P.every(function(L){return B.indexOf(L)>=0});G&&(P=B)}}return ce(ce({},v),{},qe({},N,ce(ce({},y),{},{axisType:i,domain:P,categoricalDomain:R,duplicateDomain:I,originalDomain:(g=y.domain)!==null&&g!==void 0?g:D,isCategorical:p,layout:u})))},{})},mze=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=t.layout,d=t.children,f=Kw(t.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),p=f.length,v=vq(u,i),m=-1;return r.reduce(function(g,y){var x=y.type.defaultProps!==void 0?ce(ce({},y.type.defaultProps),y.props):y.props,b=x[o],w=kK("number");if(!g[b]){m++;var S;return v?S=Cx(0,p):s&&s[b]&&s[b].hasStack?(S=yq(s[b].stackGroups,l,c),S=pk(d,S,b,i)):(S=DE(w,mq(f,r.filter(function(C){var E,k,N=o in C.props?C.props[o]:(E=C.type.defaultProps)===null||E===void 0?void 0:E[o],T="hide"in C.props?C.props.hide:(k=C.type.defaultProps)===null||k===void 0?void 0:k.hide;return N===b&&!T}),"number",u),a.defaultProps.allowDataOverflow),S=pk(d,S,b,i)),ce(ce({},g),{},qe({},b,ce(ce({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ba(uze,"".concat(i,".").concat(m%2),null),domain:S,originalDomain:w,isCategorical:v,layout:u})))}return g},{})},vze=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=t.children,d="".concat(a,"Id"),f=Ei(u,i),p={};return f&&f.length?p=pze(t,{axes:f,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(p=mze(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),p},gze=function(t){var n=zs(t),r=Bo(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:aP(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:mx(n,r)}},L3=function(t){var n=t.children,r=t.defaultShowTooltip,a=aa(n,xf),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},yze=function(t){return!t||!t.length?!1:t.some(function(n){var r=Wo(n&&n.type);return r&&r.indexOf("Bar")>=0})},B3=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xze=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,d=r.children,f=r.margin||{},p=aa(d,xf),v=aa(d,Rd),m=Object.keys(l).reduce(function(S,C){var E=l[C],k=E.orientation;return!E.mirror&&!E.hide?ce(ce({},S),{},qe({},k,S[k]+E.width)):S},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(S,C){var E=o[C],k=E.orientation;return!E.mirror&&!E.hide?ce(ce({},S),{},qe({},k,Ba(S,"".concat(k))+E.height)):S},{top:f.top||0,bottom:f.bottom||0}),y=ce(ce({},g),m),x=y.bottom;p&&(y.bottom+=p.props.height||xf.defaultProps.height),v&&n&&(y=DMe(y,a,r,n));var b=c-y.left-y.right,w=u-y.top-y.bottom;return ce(ce({brushBottom:x},y),{},{width:Math.max(b,0),height:Math.max(w,0)})},bze=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},NK=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,c=t.legendContent,u=t.formatAxisMap,d=t.defaultProps,f=function(y,x){var b=x.graphicalItems,w=x.stackGroups,S=x.offset,C=x.updateId,E=x.dataStartIndex,k=x.dataEndIndex,N=y.barSize,T=y.layout,A=y.barGap,P=y.barCategoryGap,I=y.maxBarSize,R=B3(T),D=R.numericAxisName,M=R.cateAxisName,$=yze(b),j=[];return b.forEach(function(O,B){var G=Kw(y.data,{graphicalItems:[O],dataStartIndex:E,dataEndIndex:k}),L=O.type.defaultProps!==void 0?ce(ce({},O.type.defaultProps),O.props):O.props,W=L.dataKey,J=L.maxBarSize,ee=L["".concat(D,"Id")],ne=L["".concat(M,"Id")],Z={},K=l.reduce(function(Me,st){var xe=x["".concat(st.axisType,"Map")],me=L["".concat(st.axisType,"Id")];xe&&xe[me]||st.axisType==="zAxis"||Zc();var Ee=xe[me];return ce(ce({},Me),{},qe(qe({},st.axisType,Ee),"".concat(st.axisType,"Ticks"),Bo(Ee)))},Z),Q=K[M],ie=K["".concat(M,"Ticks")],V=w&&w[ee]&&w[ee].hasStack&&XMe(O,w[ee].stackGroups),q=Wo(O.type).indexOf("Bar")>=0,de=mx(Q,ie),he=[],ae=$&&RMe({barSize:N,stackGroups:w,totalSize:bze(K,M)});if(q){var le,ge,_e=pt(J)?I:J,Re=(le=(ge=mx(Q,ie,!0))!==null&&ge!==void 0?ge:_e)!==null&&le!==void 0?le:0;he=IMe({barGap:A,barCategoryGap:P,bandSize:Re!==de?Re:de,sizeList:ae[ne],maxBarSize:_e}),Re!==de&&(he=he.map(function(Me){return ce(ce({},Me),{},{position:ce(ce({},Me.position),{},{offset:Me.position.offset-Re/2})})}))}var He=O&&O.type&&O.type.getComposedData;He&&j.push({props:ce(ce({},He(ce(ce({},K),{},{displayedData:G,props:y,dataKey:W,item:O,bandSize:de,barPosition:he,offset:S,stackedData:V,layout:T,dataStartIndex:E,dataEndIndex:k}))),{},qe(qe(qe({key:O.key||"item-".concat(B)},D,K[D]),M,K[M]),"animationId",C)),childIndex:OSe(O,y.children),item:O})}),j},p=function(y,x){var b=y.props,w=y.dataStartIndex,S=y.dataEndIndex,C=y.updateId;if(!cM({props:b}))return null;var E=b.children,k=b.layout,N=b.stackOffset,T=b.data,A=b.reverseStackOrder,P=B3(k),I=P.numericAxisName,R=P.cateAxisName,D=Ei(E,r),M=GMe(T,D,"".concat(I,"Id"),"".concat(R,"Id"),N,A),$=l.reduce(function(L,W){var J="".concat(W.axisType,"Map");return ce(ce({},L),{},qe({},J,vze(b,ce(ce({},W),{},{graphicalItems:D,stackGroups:W.axisType===I&&M,dataStartIndex:w,dataEndIndex:S}))))},{}),j=xze(ce(ce({},$),{},{props:b,graphicalItems:D}),x==null?void 0:x.legendBBox);Object.keys($).forEach(function(L){$[L]=u(b,$[L],j,L.replace("Map",""),n)});var O=$["".concat(R,"Map")],B=gze(O),G=f(b,ce(ce({},$),{},{dataStartIndex:w,dataEndIndex:S,updateId:C,graphicalItems:D,stackGroups:M,offset:j}));return ce(ce({formattedGraphicalItems:G,graphicalItems:D,offset:j,stackGroups:M},B),$)},v=function(g){function y(x){var b,w,S;return ZUe(this,y),S=nze(this,y,[x]),qe(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qe(S,"accessibilityManager",new LUe),qe(S,"handleLegendBBoxUpdate",function(C){if(C){var E=S.state,k=E.dataStartIndex,N=E.dataEndIndex,T=E.updateId;S.setState(ce({legendBBox:C},p({props:S.props,dataStartIndex:k,dataEndIndex:N,updateId:T},ce(ce({},S.state),{},{legendBBox:C}))))}}),qe(S,"handleReceiveSyncEvent",function(C,E,k){if(S.props.syncId===C){if(k===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(E)}}),qe(S,"handleBrushChange",function(C){var E=C.startIndex,k=C.endIndex;if(E!==S.state.dataStartIndex||k!==S.state.dataEndIndex){var N=S.state.updateId;S.setState(function(){return ce({dataStartIndex:E,dataEndIndex:k},p({props:S.props,dataStartIndex:E,dataEndIndex:k,updateId:N},S.state))}),S.triggerSyncEvent({dataStartIndex:E,dataEndIndex:k})}}),qe(S,"handleMouseEnter",function(C){var E=S.getMouseInfo(C);if(E){var k=ce(ce({},E),{},{isTooltipActive:!0});S.setState(k),S.triggerSyncEvent(k);var N=S.props.onMouseEnter;ot(N)&&N(k,C)}}),qe(S,"triggeredAfterMouseMove",function(C){var E=S.getMouseInfo(C),k=E?ce(ce({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(k),S.triggerSyncEvent(k);var N=S.props.onMouseMove;ot(N)&&N(k,C)}),qe(S,"handleItemMouseEnter",function(C){S.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),qe(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),qe(S,"handleMouseMove",function(C){C.persist(),S.throttleTriggeredAfterMouseMove(C)}),qe(S,"handleMouseLeave",function(C){S.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};S.setState(E),S.triggerSyncEvent(E);var k=S.props.onMouseLeave;ot(k)&&k(E,C)}),qe(S,"handleOuterEvent",function(C){var E=jSe(C),k=Ba(S.props,"".concat(E));if(E&&ot(k)){var N,T;/.*touch.*/i.test(E)?T=S.getMouseInfo(C.changedTouches[0]):T=S.getMouseInfo(C),k((N=T)!==null&&N!==void 0?N:{},C)}}),qe(S,"handleClick",function(C){var E=S.getMouseInfo(C);if(E){var k=ce(ce({},E),{},{isTooltipActive:!0});S.setState(k),S.triggerSyncEvent(k);var N=S.props.onClick;ot(N)&&N(k,C)}}),qe(S,"handleMouseDown",function(C){var E=S.props.onMouseDown;if(ot(E)){var k=S.getMouseInfo(C);E(k,C)}}),qe(S,"handleMouseUp",function(C){var E=S.props.onMouseUp;if(ot(E)){var k=S.getMouseInfo(C);E(k,C)}}),qe(S,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),qe(S,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&S.handleMouseDown(C.changedTouches[0])}),qe(S,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&S.handleMouseUp(C.changedTouches[0])}),qe(S,"handleDoubleClick",function(C){var E=S.props.onDoubleClick;if(ot(E)){var k=S.getMouseInfo(C);E(k,C)}}),qe(S,"handleContextMenu",function(C){var E=S.props.onContextMenu;if(ot(E)){var k=S.getMouseInfo(C);E(k,C)}}),qe(S,"triggerSyncEvent",function(C){S.props.syncId!==void 0&&y_.emit(x_,S.props.syncId,C,S.eventEmitterSymbol)}),qe(S,"applySyncEvent",function(C){var E=S.props,k=E.layout,N=E.syncMethod,T=S.state.updateId,A=C.dataStartIndex,P=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)S.setState(ce({dataStartIndex:A,dataEndIndex:P},p({props:S.props,dataStartIndex:A,dataEndIndex:P,updateId:T},S.state)));else if(C.activeTooltipIndex!==void 0){var I=C.chartX,R=C.chartY,D=C.activeTooltipIndex,M=S.state,$=M.offset,j=M.tooltipTicks;if(!$)return;if(typeof N=="function")D=N(j,C);else if(N==="value"){D=-1;for(var O=0;O<j.length;O++)if(j[O].value===C.activeLabel){D=O;break}}var B=ce(ce({},$),{},{x:$.left,y:$.top}),G=Math.min(I,B.x+B.width),L=Math.min(R,B.y+B.height),W=j[D]&&j[D].value,J=gk(S.state,S.props.data,D),ee=j[D]?{x:k==="horizontal"?j[D].coordinate:G,y:k==="horizontal"?L:j[D].coordinate}:EK;S.setState(ce(ce({},C),{},{activeLabel:W,activeCoordinate:ee,activePayload:J,activeTooltipIndex:D}))}else S.setState(C)}),qe(S,"renderCursor",function(C){var E,k=S.state,N=k.isTooltipActive,T=k.activeCoordinate,A=k.activePayload,P=k.offset,I=k.activeTooltipIndex,R=k.tooltipAxisBandSize,D=S.getTooltipEventType(),M=(E=C.props.active)!==null&&E!==void 0?E:N,$=S.props.layout,j=C.key||"_recharts-cursor";return z.createElement(GUe,{key:j,activeCoordinate:T,activePayload:A,activeTooltipIndex:I,chartName:n,element:C,isActive:M,layout:$,offset:P,tooltipAxisBandSize:R,tooltipEventType:D})}),qe(S,"renderPolarAxis",function(C,E,k){var N=Ba(C,"type.axisType"),T=Ba(S.state,"".concat(N,"Map")),A=C.type.defaultProps,P=A!==void 0?ce(ce({},A),C.props):C.props,I=T&&T[P["".concat(N,"Id")]];return _.cloneElement(C,ce(ce({},I),{},{className:vt(N,I.className),key:C.key||"".concat(E,"-").concat(k),ticks:Bo(I,!0)}))}),qe(S,"renderPolarGrid",function(C){var E=C.props,k=E.radialLines,N=E.polarAngles,T=E.polarRadius,A=S.state,P=A.radiusAxisMap,I=A.angleAxisMap,R=zs(P),D=zs(I),M=D.cx,$=D.cy,j=D.innerRadius,O=D.outerRadius;return _.cloneElement(C,{polarAngles:Array.isArray(N)?N:Bo(D,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(T)?T:Bo(R,!0).map(function(B){return B.coordinate}),cx:M,cy:$,innerRadius:j,outerRadius:O,key:C.key||"polar-grid",radialLines:k})}),qe(S,"renderLegend",function(){var C=S.state.formattedGraphicalItems,E=S.props,k=E.children,N=E.width,T=E.height,A=S.props.margin||{},P=N-(A.left||0)-(A.right||0),I=hq({children:k,formattedGraphicalItems:C,legendWidth:P,legendContent:c});if(!I)return null;var R=I.item,D=M3(I,qUe);return _.cloneElement(R,ce(ce({},D),{},{chartWidth:N,chartHeight:T,margin:A,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),qe(S,"renderTooltip",function(){var C,E=S.props,k=E.children,N=E.accessibilityLayer,T=aa(k,di);if(!T)return null;var A=S.state,P=A.isTooltipActive,I=A.activeCoordinate,R=A.activePayload,D=A.activeLabel,M=A.offset,$=(C=T.props.active)!==null&&C!==void 0?C:P;return _.cloneElement(T,{viewBox:ce(ce({},M),{},{x:M.left,y:M.top}),active:$,label:D,payload:$?R:[],coordinate:I,accessibilityLayer:N})}),qe(S,"renderBrush",function(C){var E=S.props,k=E.margin,N=E.data,T=S.state,A=T.offset,P=T.dataStartIndex,I=T.dataEndIndex,R=T.updateId;return _.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Hg(S.handleBrushChange,C.props.onChange),data:N,x:ve(C.props.x)?C.props.x:A.left,y:ve(C.props.y)?C.props.y:A.top+A.height+A.brushBottom-(k.bottom||0),width:ve(C.props.width)?C.props.width:A.width,startIndex:P,endIndex:I,updateId:"brush-".concat(R)})}),qe(S,"renderReferenceElement",function(C,E,k){if(!C)return null;var N=S,T=N.clipPathId,A=S.state,P=A.xAxisMap,I=A.yAxisMap,R=A.offset,D=C.type.defaultProps||{},M=C.props,$=M.xAxisId,j=$===void 0?D.xAxisId:$,O=M.yAxisId,B=O===void 0?D.yAxisId:O;return _.cloneElement(C,{key:C.key||"".concat(E,"-").concat(k),xAxis:P[j],yAxis:I[B],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:T})}),qe(S,"renderActivePoints",function(C){var E=C.item,k=C.activePoint,N=C.basePoint,T=C.childIndex,A=C.isRange,P=[],I=E.props.key,R=E.item.type.defaultProps!==void 0?ce(ce({},E.item.type.defaultProps),E.item.props):E.item.props,D=R.activeDot,M=R.dataKey,$=ce(ce({index:T,dataKey:M,cx:k.x,cy:k.y,r:4,fill:jP(E.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},ut(D,!1)),B0(D));return P.push(y.renderActiveDot(D,$,"".concat(I,"-activePoint-").concat(T))),N?P.push(y.renderActiveDot(D,ce(ce({},$),{},{cx:N.x,cy:N.y}),"".concat(I,"-basePoint-").concat(T))):A&&P.push(null),P}),qe(S,"renderGraphicChild",function(C,E,k){var N=S.filterFormatItem(C,E,k);if(!N)return null;var T=S.getTooltipEventType(),A=S.state,P=A.isTooltipActive,I=A.tooltipAxis,R=A.activeTooltipIndex,D=A.activeLabel,M=S.props.children,$=aa(M,di),j=N.props,O=j.points,B=j.isRange,G=j.baseLine,L=N.item.type.defaultProps!==void 0?ce(ce({},N.item.type.defaultProps),N.item.props):N.item.props,W=L.activeDot,J=L.hide,ee=L.activeBar,ne=L.activeShape,Z=!!(!J&&P&&$&&(W||ee||ne)),K={};T!=="axis"&&$&&$.props.trigger==="click"?K={onClick:Hg(S.handleItemMouseEnter,C.props.onClick)}:T!=="axis"&&(K={onMouseLeave:Hg(S.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Hg(S.handleItemMouseEnter,C.props.onMouseEnter)});var Q=_.cloneElement(C,ce(ce({},N.props),K));function ie(st){return typeof I.dataKey=="function"?I.dataKey(st.payload):null}if(Z)if(R>=0){var V,q;if(I.dataKey&&!I.allowDuplicatedCategory){var de=typeof I.dataKey=="function"?ie:"payload.".concat(I.dataKey.toString());V=L0(O,de,D),q=B&&G&&L0(G,de,D)}else V=O==null?void 0:O[R],q=B&&G&&G[R];if(ne||ee){var he=C.props.activeIndex!==void 0?C.props.activeIndex:R;return[_.cloneElement(C,ce(ce(ce({},N.props),K),{},{activeIndex:he})),null,null]}if(!pt(V))return[Q].concat(jf(S.renderActivePoints({item:N,activePoint:V,basePoint:q,childIndex:R,isRange:B})))}else{var ae,le=(ae=S.getItemByXY(S.state.activeCoordinate))!==null&&ae!==void 0?ae:{graphicalItem:Q},ge=le.graphicalItem,_e=ge.item,Re=_e===void 0?C:_e,He=ge.childIndex,Me=ce(ce(ce({},N.props),K),{},{activeIndex:He});return[_.cloneElement(Re,Me),null,null]}return B?[Q,null,null]:[Q,null]}),qe(S,"renderCustomized",function(C,E,k){return _.cloneElement(C,ce(ce({key:"recharts-customized-".concat(k)},S.props),S.state))}),qe(S,"renderMap",{CartesianGrid:{handler:Yg,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:Yg},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:Yg},YAxis:{handler:Yg},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:Av("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=hG(S.triggeredAfterMouseMove,(w=x.throttleDelay)!==null&&w!==void 0?w:1e3/60),S.state={},S}return ize(y,g),tze(y,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,S=b.data,C=b.height,E=b.layout,k=aa(w,di);if(k){var N=k.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,A=gk(this.state,S,N,T),P=this.state.tooltipTicks[N].coordinate,I=(this.state.offset.top+C)/2,R=E==="horizontal",D=R?{x:P,y:I}:{y:P,x:I},M=this.state.formattedGraphicalItems.find(function(j){var O=j.item;return O.type.name==="Scatter"});M&&(D=ce(ce({},D),M.props.points[N].tooltipPosition),A=M.props.points[N].tooltipPayload);var $={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:T,activePayload:A,activeCoordinate:D};this.setState($),this.renderCursor(k),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var S,C;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(b){YC([aa(b.children,di)],[aa(this.props.children,di)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=aa(this.props.children,di);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return s.indexOf(w)>=0?w:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,S=w.getBoundingClientRect(),C=aOe(S),E={chartX:Math.round(b.pageX-C.left),chartY:Math.round(b.pageY-C.top)},k=S.width/w.offsetWidth||1,N=this.inRange(E.chartX,E.chartY,k);if(!N)return null;var T=this.state,A=T.xAxisMap,P=T.yAxisMap,I=this.getTooltipEventType(),R=F3(this.state,this.props.data,this.props.layout,N);if(I!=="axis"&&A&&P){var D=zs(A).scale,M=zs(P).scale,$=D&&D.invert?D.invert(E.chartX):null,j=M&&M.invert?M.invert(E.chartY):null;return ce(ce({},E),{},{xValue:$,yValue:j},R)}return R?ce(ce({},E),R):null}},{key:"inRange",value:function(b,w){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,E=b/S,k=w/S;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,T=E>=N.left&&E<=N.left+N.width&&k>=N.top&&k<=N.top+N.height;return T?{x:E,y:k}:null}var A=this.state,P=A.angleAxisMap,I=A.radiusAxisMap;if(P&&I){var R=zs(P);return b4({x:E,y:k},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),S=aa(b,di),C={};S&&w==="axis"&&(S.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=B0(this.props,this.handleOuterEvent);return ce(ce({},E),C)}},{key:"addListener",value:function(){y_.on(x_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){y_.removeListener(x_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,S){for(var C=this.state.formattedGraphicalItems,E=0,k=C.length;E<k;E++){var N=C[E];if(N.item===b||N.props.key===b.key||w===Wo(N.item.type)&&S===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,S=w.left,C=w.top,E=w.height,k=w.width;return z.createElement("defs",null,z.createElement("clipPath",{id:b},z.createElement("rect",{x:S,y:C,height:E,width:k})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,S){var C=D3(S,2),E=C[0],k=C[1];return ce(ce({},w),{},qe({},E,k.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,S){var C=D3(S,2),E=C[0],k=C[1];return ce(ce({},w),{},qe({},E,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,S=w.formattedGraphicalItems,C=w.activeItem;if(S&&S.length)for(var E=0,k=S.length;E<k;E++){var N=S[E],T=N.props,A=N.item,P=A.type.defaultProps!==void 0?ce(ce({},A.type.defaultProps),A.props):A.props,I=Wo(A.type);if(I==="Bar"){var R=(T.data||[]).find(function(j){return B3e(b,j)});if(R)return{graphicalItem:N,payload:R}}else if(I==="RadialBar"){var D=(T.data||[]).find(function(j){return b4(b,j)});if(D)return{graphicalItem:N,payload:D}}else if(Uw(N,C)||zw(N,C)||Fm(N,C)){var M=WFe({graphicalItem:N,activeTooltipItem:C,itemData:P.data}),$=P.activeIndex===void 0?M:P.activeIndex;return{graphicalItem:ce(ce({},N),{},{childIndex:$}),payload:Fm(N,C)?P.data[M]:N.props.data[M]}}}return null}},{key:"render",value:function(){var b=this;if(!cM(this))return null;var w=this.props,S=w.children,C=w.className,E=w.width,k=w.height,N=w.style,T=w.compact,A=w.title,P=w.desc,I=M3(w,KUe),R=ut(I,!1);if(T)return z.createElement(y3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(JC,ud({},R,{width:E,height:k,title:A,desc:P}),this.renderClipPath(),dM(S,this.renderMap)));if(this.props.accessibilityLayer){var D,M;R.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,R.role=(M=this.props.role)!==null&&M!==void 0?M:"application",R.onKeyDown=function(j){b.accessibilityManager.keyboardEvent(j)},R.onFocus=function(){b.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return z.createElement(y3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",ud({className:vt("recharts-wrapper",C),style:ce({position:"relative",cursor:"default",width:E,height:k},N)},$,{ref:function(O){b.container=O}}),z.createElement(JC,ud({},R,{width:E,height:k,title:A,desc:P,style:dze}),this.renderClipPath(),dM(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(_.Component);qe(v,"displayName",n),qe(v,"defaultProps",ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),qe(v,"getDerivedStateFromProps",function(g,y){var x=g.dataKey,b=g.data,w=g.children,S=g.width,C=g.height,E=g.layout,k=g.stackOffset,N=g.margin,T=y.dataStartIndex,A=y.dataEndIndex;if(y.updateId===void 0){var P=L3(g);return ce(ce(ce({},P),{},{updateId:0},p(ce(ce({props:g},P),{},{updateId:0}),y)),{},{prevDataKey:x,prevData:b,prevWidth:S,prevHeight:C,prevLayout:E,prevStackOffset:k,prevMargin:N,prevChildren:w})}if(x!==y.prevDataKey||b!==y.prevData||S!==y.prevWidth||C!==y.prevHeight||E!==y.prevLayout||k!==y.prevStackOffset||!Od(N,y.prevMargin)){var I=L3(g),R={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},D=ce(ce({},F3(y,b,E)),{},{updateId:y.updateId+1}),M=ce(ce(ce({},I),R),D);return ce(ce(ce({},M),p(ce({props:g},M),y)),{},{prevDataKey:x,prevData:b,prevWidth:S,prevHeight:C,prevLayout:E,prevStackOffset:k,prevMargin:N,prevChildren:w})}if(!YC(w,y.prevChildren)){var $,j,O,B,G=aa(w,xf),L=G&&($=(j=G.props)===null||j===void 0?void 0:j.startIndex)!==null&&$!==void 0?$:T,W=G&&(O=(B=G.props)===null||B===void 0?void 0:B.endIndex)!==null&&O!==void 0?O:A,J=L!==T||W!==A,ee=!pt(b),ne=ee&&!J?y.updateId:y.updateId+1;return ce(ce({updateId:ne},p(ce(ce({props:g},y),{},{updateId:ne,dataStartIndex:L,dataEndIndex:W}),y)),{},{prevChildren:w,dataStartIndex:L,dataEndIndex:W})}return null}),qe(v,"renderActiveDot",function(g,y,x){var b;return _.isValidElement(g)?b=_.cloneElement(g,y):ot(g)?b=g(y):b=z.createElement(RP,y),z.createElement(an,{className:"recharts-active-dot",key:x},b)});var m=_.forwardRef(function(y,x){return z.createElement(v,ud({},y,{ref:x}))});return m.displayName=v.displayName,m},wze=NK({chartName:"BarChart",GraphicalChild:vu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Nf},{axisType:"yAxis",AxisComp:Af}],formatAxisMap:Wq}),Sze=NK({chartName:"AreaChart",GraphicalChild:Hl,axisComponents:[{axisType:"xAxis",AxisComp:Nf},{axisType:"yAxis",AxisComp:Af}],formatAxisMap:Wq});const _ze=()=>{const[e,t]=_.useState({totalStudents:0,totalTeachers:0,totalBatches:0,totalSubjects:0,todaySessions:0,distribution:[],attendanceTrend:[]}),[n,r]=_.useState(!0);_.useEffect(()=>{(async()=>{r(!0);try{const s=await Ce.getStats();t(s)}catch{at.error("Failed to load dashboard stats")}finally{r(!1)}})()},[]);const a=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ef4444"],i=[{title:"Students",value:e.totalStudents,icon:Fa,color:"text-blue-500",bg:"bg-blue-500/10",desc:"Registered students"},{title:"Teachers",value:e.totalTeachers,icon:zp,color:"text-emerald-500",bg:"bg-emerald-500/10",desc:"Active faculty"},{title:"Batches",value:e.totalBatches,icon:_b,color:"text-violet-500",bg:"bg-violet-500/10",desc:"Across all depts"},{title:"Routines",value:e.todaySessions,icon:Hte,color:"text-rose-500",bg:"bg-rose-500/10",desc:"Scheduled sessions"}];return h.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-10 max-w-7xl mx-auto",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 px-1",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"University Overview"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time statistics and academic insights"})]}),h.jsxs("div",{className:"hidden sm:flex items-center gap-2 bg-muted/50 p-1 rounded-lg text-xs font-medium",children:[h.jsx("span",{className:"px-2 py-1 rounded bg-background shadow-sm border",children:"Live View"}),h.jsxs("span",{className:"px-2 text-muted-foreground mr-1 flex items-center gap-1",children:[h.jsx(Wte,{className:"w-3 h-3 text-emerald-500"}),"System Active"]})]})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:i.map((o,s)=>h.jsxs(Et,{className:"overflow-hidden border-none shadow-sm bg-card hover:shadow-md transition-all duration-300",children:[h.jsxs(zn,{className:"p-3 sm:p-4 pb-0 flex flex-row items-center justify-between space-y-0",children:[h.jsx(o.icon,{className:`h-4 w-4 sm:h-5 sm:w-5 ${o.color} opacity-80`}),h.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 rounded-full flex items-center justify-center bg-muted/30",children:h.jsx(BN,{className:"w-3 h-3 sm:w-4 sm:h-4 text-emerald-500"})})]}),h.jsxs(Ut,{className:"p-3 sm:p-4 pt-1",children:[h.jsx("div",{className:"text-xl sm:text-2xl font-bold tracking-tight",children:n?"...":o.value}),h.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium uppercase tracking-wider mt-1",children:o.title})]})]},s))}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 sm:gap-6",children:[h.jsxs(Et,{className:"lg:col-span-3 shadow-sm border-none bg-card overflow-hidden",children:[h.jsxs(zn,{className:"pb-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(rr,{className:"text-lg font-semibold flex items-center gap-2",children:["Attendance Velocity",h.jsx(U5,{className:"w-4 h-4 text-emerald-500"})]}),h.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-600 px-2 py-0.5 rounded-full font-bold",children:"+12.5%"})]}),h.jsx(zo,{children:"Daily session check-ins for the past week"})]}),h.jsx(Ut,{className:"p-0 sm:p-4 h-[250px] sm:h-[300px]",children:h.jsx(l$,{width:"100%",height:"100%",children:h.jsxs(Sze,{data:e.attendanceTrend,margin:{top:10,right:10,left:-20,bottom:0},children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.2}),h.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),h.jsx(sk,{strokeDasharray:"3 3",vertical:!1,stroke:"#888888",opacity:.1}),h.jsx(Nf,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),h.jsx(Af,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),h.jsx(di,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",fontSize:"12px"}}),h.jsx(Hl,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorCount)"})]})})})]}),h.jsxs(Et,{className:"lg:col-span-2 shadow-sm border-none bg-card",children:[h.jsxs(zn,{className:"pb-2",children:[h.jsxs(rr,{className:"text-lg font-semibold flex items-center gap-2",children:["Faculty Mix",h.jsx(Fa,{className:"w-4 h-4 text-blue-500"})]}),h.jsx(zo,{children:"Student count per department"})]}),h.jsx(Ut,{className:"p-0 sm:p-4 h-[250px] sm:h-[300px]",children:h.jsx(l$,{width:"100%",height:"100%",children:h.jsxs(wze,{data:e.distribution,margin:{top:10,right:10,left:-20,bottom:0},children:[h.jsx(sk,{strokeDasharray:"3 3",vertical:!1,stroke:"#888888",opacity:.1}),h.jsx(Nf,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),h.jsx(Af,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),h.jsx(di,{contentStyle:{borderRadius:"8px",border:"none",fontSize:"12px"}}),h.jsx(vu,{dataKey:"students",radius:[4,4,0,0],barSize:20,children:e.distribution.map((o,s)=>h.jsx(oP,{fill:a[s%a.length]},`cell-${s}`))})]})})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs(Et,{className:"md:col-span-2 shadow-sm border-none bg-indigo-600 text-white overflow-hidden relative",children:[h.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:h.jsx(zp,{className:"w-32 h-32"})}),h.jsxs(zn,{children:[h.jsx(rr,{className:"text-white",children:"Quick Action Center"}),h.jsx(zo,{className:"text-indigo-100",children:"Common administrative tasks"})]}),h.jsxs(Ut,{className:"flex flex-wrap gap-2",children:[h.jsx(we,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-none text-xs h-8",children:"Enroll Student"}),h.jsx(we,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-none text-xs h-8",children:"Add Routine"}),h.jsx(we,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-none text-xs h-8",children:"Update Catalog"}),h.jsx(we,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-none text-xs h-8",children:"System Settings"})]})]}),h.jsxs(Et,{className:"shadow-sm border-none",children:[h.jsx(zn,{className:"pb-2",children:h.jsx(rr,{className:"text-sm font-bold uppercase tracking-widest text-muted-foreground",children:"Recent Sync"})}),h.jsxs(Ut,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-xs font-medium truncate",children:"Database Sync"}),h.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Last updated 2 mins ago"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-xs font-medium truncate",children:"Python Backend"}),h.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Connected & Stable"})]})]})]})]})]})]})},xi=_.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:Te("w-full caption-bottom text-sm",e),...t})}));xi.displayName="Table";const bi=_.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:Te("[&_tr]:border-b",e),...t}));bi.displayName="TableHeader";const wi=_.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:Te("[&_tr:last-child]:border-0",e),...t}));wi.displayName="TableBody";const Cze=_.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Cze.displayName="TableFooter";const Mt=_.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:Te("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Mt.displayName="TableRow";const Je=_.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:Te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Je.displayName="TableHead";const Ge=_.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:Te("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ge.displayName="TableCell";const Eze=_.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:Te("mt-4 text-sm text-muted-foreground",e),...t}));Eze.displayName="TableCaption";const Tl=OA,Xw=Dxe,kze=RA,TK=_.forwardRef(({className:e,...t},n)=>h.jsx(kv,{ref:n,className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));TK.displayName=kv.displayName;const is=_.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(kze,{children:[h.jsx(TK,{}),h.jsxs(Nv,{ref:r,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,h.jsxs(K8,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none",children:[h.jsx(Eb,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));is.displayName=Nv.displayName;const os=({className:e,...t})=>h.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});os.displayName="DialogHeader";const Yw=({className:e,...t})=>h.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Yw.displayName="DialogFooter";const ss=_.forwardRef(({className:e,...t},n)=>h.jsx(sw,{ref:n,className:Te("text-lg font-semibold leading-none tracking-tight",e),...t}));ss.displayName=sw.displayName;const Hm=_.forwardRef(({className:e,...t},n)=>h.jsx(lw,{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));Hm.displayName=lw.displayName;var U3=1,Nze=.9,Tze=.8,Aze=.17,w_=.1,S_=.999,Pze=.9999,jze=.99,Oze=/[\\\/_+.#"@\[\(\{&]/,Rze=/[\\\/_+.#"@\[\(\{&]/g,Ize=/[\s-]/,AK=/[\s-]/g;function yk(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?U3:jze;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var l=r.charAt(i),c=n.indexOf(l,a),u=0,d,f,p,v;c>=0;)d=yk(e,t,n,r,c+1,i+1,o),d>u&&(c===a?d*=U3:Oze.test(e.charAt(c-1))?(d*=Tze,p=e.slice(a,c-1).match(Rze),p&&a>0&&(d*=Math.pow(S_,p.length))):Ize.test(e.charAt(c-1))?(d*=Nze,v=e.slice(a,c-1).match(AK),v&&a>0&&(d*=Math.pow(S_,v.length))):(d*=Aze,a>0&&(d*=Math.pow(S_,c-a))),e.charAt(c)!==t.charAt(i)&&(d*=Pze)),(d<w_&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(f=yk(e,t,n,r,c+1,i+2,o),f*w_>d&&(d=f*w_)),d>u&&(u=d),c=n.indexOf(l,c+1);return o[s]=u,u}function z3(e){return e.toLowerCase().replace(AK," ")}function Dze(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,yk(e,t,z3(e),z3(t),0,0,{})}var Rh='[cmdk-group=""]',__='[cmdk-group-items=""]',Mze='[cmdk-group-heading=""]',PK='[cmdk-item=""]',W3=`${PK}:not([aria-disabled="true"])`,xk="cmdk-item-select",Wu="data-value",$ze=(e,t,n)=>Dze(e,t,n),jK=_.createContext(void 0),Dv=()=>_.useContext(jK),OK=_.createContext(void 0),WP=()=>_.useContext(OK),RK=_.createContext(void 0),IK=_.forwardRef((e,t)=>{let n=Vu(()=>{var L,W;return{search:"",value:(W=(L=e.value)!=null?L:e.defaultValue)!=null?W:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Vu(()=>new Set),a=Vu(()=>new Map),i=Vu(()=>new Map),o=Vu(()=>new Set),s=DK(e),{label:l,children:c,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:v,disablePointerSelection:m=!1,vimBindings:g=!0,...y}=e,x=sr(),b=sr(),w=sr(),S=_.useRef(null),C=Kze();tu(()=>{if(u!==void 0){let L=u.trim();n.current.value=L,E.emit()}},[u]),tu(()=>{C(6,I)},[]);let E=_.useMemo(()=>({subscribe:L=>(o.current.add(L),()=>o.current.delete(L)),snapshot:()=>n.current,setState:(L,W,J)=>{var ee,ne,Z,K;if(!Object.is(n.current[L],W)){if(n.current[L]=W,L==="search")P(),T(),C(1,A);else if(L==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Q=document.getElementById(w);Q?Q.focus():(ee=document.getElementById(x))==null||ee.focus()}if(C(7,()=>{var Q;n.current.selectedItemId=(Q=R())==null?void 0:Q.id,E.emit()}),J||C(5,I),((ne=s.current)==null?void 0:ne.value)!==void 0){let Q=W??"";(K=(Z=s.current).onValueChange)==null||K.call(Z,Q);return}}E.emit()}},emit:()=>{o.current.forEach(L=>L())}}),[]),k=_.useMemo(()=>({value:(L,W,J)=>{var ee;W!==((ee=i.current.get(L))==null?void 0:ee.value)&&(i.current.set(L,{value:W,keywords:J}),n.current.filtered.items.set(L,N(W,J)),C(2,()=>{T(),E.emit()}))},item:(L,W)=>(r.current.add(L),W&&(a.current.has(W)?a.current.get(W).add(L):a.current.set(W,new Set([L]))),C(3,()=>{P(),T(),n.current.value||A(),E.emit()}),()=>{i.current.delete(L),r.current.delete(L),n.current.filtered.items.delete(L);let J=R();C(4,()=>{P(),(J==null?void 0:J.getAttribute("id"))===L&&A(),E.emit()})}),group:L=>(a.current.has(L)||a.current.set(L,new Set),()=>{i.current.delete(L),a.current.delete(L)}),filter:()=>s.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:w,labelId:b,listInnerRef:S}),[]);function N(L,W){var J,ee;let ne=(ee=(J=s.current)==null?void 0:J.filter)!=null?ee:$ze;return L?ne(L,n.current.search,W):0}function T(){if(!n.current.search||s.current.shouldFilter===!1)return;let L=n.current.filtered.items,W=[];n.current.filtered.groups.forEach(ee=>{let ne=a.current.get(ee),Z=0;ne.forEach(K=>{let Q=L.get(K);Z=Math.max(Q,Z)}),W.push([ee,Z])});let J=S.current;D().sort((ee,ne)=>{var Z,K;let Q=ee.getAttribute("id"),ie=ne.getAttribute("id");return((Z=L.get(ie))!=null?Z:0)-((K=L.get(Q))!=null?K:0)}).forEach(ee=>{let ne=ee.closest(__);ne?ne.appendChild(ee.parentElement===ne?ee:ee.closest(`${__} > *`)):J.appendChild(ee.parentElement===J?ee:ee.closest(`${__} > *`))}),W.sort((ee,ne)=>ne[1]-ee[1]).forEach(ee=>{var ne;let Z=(ne=S.current)==null?void 0:ne.querySelector(`${Rh}[${Wu}="${encodeURIComponent(ee[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function A(){let L=D().find(J=>J.getAttribute("aria-disabled")!=="true"),W=L==null?void 0:L.getAttribute(Wu);E.setState("value",W||void 0)}function P(){var L,W,J,ee;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ne=0;for(let Z of r.current){let K=(W=(L=i.current.get(Z))==null?void 0:L.value)!=null?W:"",Q=(ee=(J=i.current.get(Z))==null?void 0:J.keywords)!=null?ee:[],ie=N(K,Q);n.current.filtered.items.set(Z,ie),ie>0&&ne++}for(let[Z,K]of a.current)for(let Q of K)if(n.current.filtered.items.get(Q)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=ne}function I(){var L,W,J;let ee=R();ee&&(((L=ee.parentElement)==null?void 0:L.firstChild)===ee&&((J=(W=ee.closest(Rh))==null?void 0:W.querySelector(Mze))==null||J.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function R(){var L;return(L=S.current)==null?void 0:L.querySelector(`${PK}[aria-selected="true"]`)}function D(){var L;return Array.from(((L=S.current)==null?void 0:L.querySelectorAll(W3))||[])}function M(L){let W=D()[L];W&&E.setState("value",W.getAttribute(Wu))}function $(L){var W;let J=R(),ee=D(),ne=ee.findIndex(K=>K===J),Z=ee[ne+L];(W=s.current)!=null&&W.loop&&(Z=ne+L<0?ee[ee.length-1]:ne+L===ee.length?ee[0]:ee[ne+L]),Z&&E.setState("value",Z.getAttribute(Wu))}function j(L){let W=R(),J=W==null?void 0:W.closest(Rh),ee;for(;J&&!ee;)J=L>0?Gze(J,Rh):qze(J,Rh),ee=J==null?void 0:J.querySelector(W3);ee?E.setState("value",ee.getAttribute(Wu)):$(L)}let O=()=>M(D().length-1),B=L=>{L.preventDefault(),L.metaKey?O():L.altKey?j(1):$(1)},G=L=>{L.preventDefault(),L.metaKey?M(0):L.altKey?j(-1):$(-1)};return _.createElement(Fe.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:L=>{var W;(W=y.onKeyDown)==null||W.call(y,L);let J=L.nativeEvent.isComposing||L.keyCode===229;if(!(L.defaultPrevented||J))switch(L.key){case"n":case"j":{g&&L.ctrlKey&&B(L);break}case"ArrowDown":{B(L);break}case"p":case"k":{g&&L.ctrlKey&&G(L);break}case"ArrowUp":{G(L);break}case"Home":{L.preventDefault(),M(0);break}case"End":{L.preventDefault(),O();break}case"Enter":{L.preventDefault();let ee=R();if(ee){let ne=new Event(xk);ee.dispatchEvent(ne)}}}}},_.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:Yze},l),Qw(e,L=>_.createElement(OK.Provider,{value:E},_.createElement(jK.Provider,{value:k},L))))}),Fze=_.forwardRef((e,t)=>{var n,r;let a=sr(),i=_.useRef(null),o=_.useContext(RK),s=Dv(),l=DK(e),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;tu(()=>{if(!c)return s.item(a,o==null?void 0:o.id)},[c]);let u=MK(a,i,[e.value,e.children,i],e.keywords),d=WP(),f=Al(C=>C.value&&C.value===u.current),p=Al(C=>c||s.filter()===!1?!0:C.search?C.filtered.items.get(a)>0:!0);_.useEffect(()=>{let C=i.current;if(!(!C||e.disabled))return C.addEventListener(xk,v),()=>C.removeEventListener(xk,v)},[p,e.onSelect,e.disabled]);function v(){var C,E;m(),(E=(C=l.current).onSelect)==null||E.call(C,u.current)}function m(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:g,value:y,onSelect:x,forceMount:b,keywords:w,...S}=e;return _.createElement(Fe.div,{ref:Qo(i,t),...S,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||s.getDisablePointerSelection()?void 0:m,onClick:g?void 0:v},e.children)}),Lze=_.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=sr(),s=_.useRef(null),l=_.useRef(null),c=sr(),u=Dv(),d=Al(p=>a||u.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);tu(()=>u.group(o),[]),MK(o,s,[e.value,e.heading,l]);let f=_.useMemo(()=>({id:o,forceMount:a}),[a]);return _.createElement(Fe.div,{ref:Qo(s,t),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&_.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Qw(e,p=>_.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},_.createElement(RK.Provider,{value:f},p))))}),Bze=_.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=_.useRef(null),i=Al(o=>!o.search);return!n&&!i?null:_.createElement(Fe.div,{ref:Qo(a,t),...r,"cmdk-separator":"",role:"separator"})}),Uze=_.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=WP(),o=Al(c=>c.search),s=Al(c=>c.selectedItemId),l=Dv();return _.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),_.createElement(Fe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":s,id:l.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),zze=_.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=_.useRef(null),o=_.useRef(null),s=Al(c=>c.selectedItemId),l=Dv();return _.useEffect(()=>{if(o.current&&i.current){let c=o.current,u=i.current,d,f=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let p=c.offsetHeight;u.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return f.observe(c),()=>{cancelAnimationFrame(d),f.unobserve(c)}}},[]),_.createElement(Fe.div,{ref:Qo(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:l.listId},Qw(e,c=>_.createElement("div",{ref:Qo(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),Wze=_.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return _.createElement(OA,{open:n,onOpenChange:r},_.createElement(RA,{container:o},_.createElement(kv,{"cmdk-overlay":"",className:a}),_.createElement(Nv,{"aria-label":e.label,"cmdk-dialog":"",className:i},_.createElement(IK,{ref:t,...s}))))}),Vze=_.forwardRef((e,t)=>Al(n=>n.filtered.count===0)?_.createElement(Fe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Hze=_.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return _.createElement(Fe.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Qw(e,o=>_.createElement("div",{"aria-hidden":!0},o)))}),ea=Object.assign(IK,{List:zze,Item:Fze,Input:Uze,Group:Lze,Separator:Bze,Dialog:Wze,Empty:Vze,Loading:Hze});function Gze(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function qze(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function DK(e){let t=_.useRef(e);return tu(()=>{t.current=e}),t}var tu=typeof window>"u"?_.useEffect:_.useLayoutEffect;function Vu(e){let t=_.useRef();return t.current===void 0&&(t.current=e()),t}function Al(e){let t=WP(),n=()=>e(t.snapshot());return _.useSyncExternalStore(t.subscribe,n,n)}function MK(e,t,n,r=[]){let a=_.useRef(),i=Dv();return tu(()=>{var o;let s=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():a.current}})(),l=r.map(c=>c.trim());i.value(e,s,l),(o=t.current)==null||o.setAttribute(Wu,s),a.current=s}),a}var Kze=()=>{let[e,t]=_.useState(),n=Vu(()=>new Map);return tu(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Xze(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Qw({asChild:e,children:t},n){return e&&_.isValidElement(t)?_.cloneElement(Xze(t),{ref:t.ref},n(t.props.children)):n(t)}var Yze={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const $K=_.forwardRef(({className:e,...t},n)=>h.jsx(ea,{ref:n,className:Te("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));$K.displayName=ea.displayName;const FK=_.forwardRef(({className:e,...t},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(fo,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(ea.Input,{ref:n,className:Te("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));FK.displayName=ea.Input.displayName;const LK=_.forwardRef(({className:e,...t},n)=>h.jsx(ea.List,{ref:n,className:Te("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));LK.displayName=ea.List.displayName;const BK=_.forwardRef((e,t)=>h.jsx(ea.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));BK.displayName=ea.Empty.displayName;const UK=_.forwardRef(({className:e,...t},n)=>h.jsx(ea.Group,{ref:n,className:Te("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));UK.displayName=ea.Group.displayName;const Qze=_.forwardRef(({className:e,...t},n)=>h.jsx(ea.Separator,{ref:n,className:Te("-mx-1 h-px bg-border",e),...t}));Qze.displayName=ea.Separator.displayName;const zK=_.forwardRef(({className:e,...t},n)=>h.jsx(ea.Item,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));zK.displayName=ea.Item.displayName;var Jw="Popover",[WK,bVe]=Sa(Jw,[Rl]),Mv=Rl(),[Jze,Gl]=WK(Jw),VK=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=Mv(t),l=_.useRef(null),[c,u]=_.useState(!1),[d,f]=uo({prop:r,defaultProp:a??!1,onChange:i,caller:Jw});return h.jsx(RN,{...s,children:h.jsx(Jze,{scope:t,contentId:sr(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:_.useCallback(()=>u(!0),[]),onCustomAnchorRemove:_.useCallback(()=>u(!1),[]),modal:o,children:n})})};VK.displayName=Jw;var HK="PopoverAnchor",Zze=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Gl(HK,n),i=Mv(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return _.useEffect(()=>(o(),()=>s()),[o,s]),h.jsx(iv,{...i,...r,ref:t})});Zze.displayName=HK;var GK="PopoverTrigger",qK=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Gl(GK,n),i=Mv(n),o=ft(t,a.triggerRef),s=h.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":JK(a.open),...r,ref:o,onClick:ye(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:h.jsx(iv,{asChild:!0,...i,children:s})});qK.displayName=GK;var VP="PopoverPortal",[eWe,tWe]=WK(VP,{forceMount:void 0}),KK=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Gl(VP,t);return h.jsx(eWe,{scope:t,forceMount:n,children:h.jsx(Jr,{present:n||i.open,children:h.jsx(Lf,{asChild:!0,container:a,children:r})})})};KK.displayName=VP;var Of="PopoverContent",XK=_.forwardRef((e,t)=>{const n=tWe(Of,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Gl(Of,e.__scopePopover);return h.jsx(Jr,{present:r||i.open,children:i.modal?h.jsx(rWe,{...a,ref:t}):h.jsx(aWe,{...a,ref:t})})});XK.displayName=Of;var nWe=wl("PopoverContent.RemoveScroll"),rWe=_.forwardRef((e,t)=>{const n=Gl(Of,e.__scopePopover),r=_.useRef(null),a=ft(t,r),i=_.useRef(!1);return _.useEffect(()=>{const o=r.current;if(o)return Db(o)},[]),h.jsx(pv,{as:nWe,allowPinchZoom:!0,children:h.jsx(YK,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,c=s.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ye(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),aWe=_.forwardRef((e,t)=>{const n=Gl(Of,e.__scopePopover),r=_.useRef(!1),a=_.useRef(!1);return h.jsx(YK,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),YK=_.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=Gl(Of,n),p=Mv(n);return Ib(),h.jsx(hv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:h.jsx(ou,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(mb,{"data-state":JK(f.open),role:"dialog",id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),QK="PopoverClose",iWe=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Gl(QK,n);return h.jsx(Fe.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,()=>a.onOpenChange(!1))})});iWe.displayName=QK;var oWe="PopoverArrow",sWe=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Mv(n);return h.jsx(vb,{...a,...r,ref:t})});sWe.displayName=oWe;function JK(e){return e?"open":"closed"}var lWe=VK,cWe=qK,uWe=KK,ZK=XK;const dWe=lWe,fWe=cWe,e9=_.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>h.jsx(uWe,{children:h.jsx(ZK,{ref:a,align:t,sideOffset:n,className:Te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));e9.displayName=ZK.displayName;const C_=({items:e,value:t,onChange:n,placeholder:r="Select item...",searchPlaceholder:a="Search...",disabled:i=!1})=>{var l;const[o,s]=_.useState(!1);return h.jsxs(dWe,{open:o,onOpenChange:s,children:[h.jsx(fWe,{asChild:!0,children:h.jsxs(we,{variant:"outline",role:"combobox","aria-expanded":o,className:Te("w-[200px] justify-between",!t&&"text-muted-foreground"),disabled:i,children:[t?(l=e.find(c=>c.value===t))==null?void 0:l.label:r,h.jsx(Xte,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(e9,{className:"w-[200px] p-0",children:h.jsxs($K,{children:[h.jsx(FK,{placeholder:a}),h.jsxs(LK,{children:[h.jsx(BK,{children:"No item found."}),h.jsx(UK,{children:e.map(c=>h.jsxs(zK,{value:c.label,onSelect:()=>{n(c.value===t?"":c.value),s(!1)},children:[h.jsx(Sb,{className:Te("mr-2 h-4 w-4",t===c.value?"opacity-100":"opacity-0")}),c.label]},c.value))})]})]})})]})},hWe=()=>{const{toast:e}=ds(),[t,n]=_.useState([]),[r,a]=_.useState([]),[i,o]=_.useState([]),[s,l]=_.useState([]),[c,u]=_.useState(!0),[d,f]=_.useState(""),[p,v]=_.useState(""),[m,g]=_.useState(""),[y,x]=_.useState(!1),[b,w]=_.useState("departments"),[S,C]=_.useState(""),[E,k]=_.useState(""),[N,T]=_.useState(""),[A,P]=_.useState(""),[I,R]=_.useState(""),[D,M]=_.useState(""),[$,j]=_.useState(!1),[O,B]=_.useState(""),[G,L]=_.useState(""),[W,J]=_.useState(""),[ee,ne]=_.useState(""),[Z,K]=_.useState(""),[Q,ie]=_.useState(""),[V,q]=_.useState(""),[de,he]=_.useState(!1),ae=async()=>{u(!0);try{const[X,be,oe,Ie]=await Promise.all([Ce.getFaculties(),Ce.getBatches(),Ce.getSections(),Ce.getCourseCatalog()]);n(X||[]),a(be||[]),o(oe||[]),l(Ie||[])}catch(X){console.error("Failed to fetch data",X),e({title:"Error",description:"Failed to load data",variant:"destructive"})}finally{u(!1)}};_.useEffect(()=>{ae()},[]);const le=X=>{w(X),f(""),v(""),g(""),T(""),C(""),k(""),M(""),j(!1),B("")},ge=X=>{const be=X%10,oe=X%100;return be===1&&oe!==11?`${X}st Sem`:be===2&&oe!==12?`${X}nd Sem`:be===3&&oe!==13?`${X}rd Sem`:`${X}th Sem`},_e=(X,be)=>{if(j(!0),B(be.id),C(be.name||be.subject_name),X==="batches")T(be.faculty_id);else if(X==="sections"){const oe=r.find(Ie=>Ie.id===be.batch_id);oe&&(R(oe.faculty_id),T(be.batch_id))}else X==="catalog"&&(k(be.subject_code),T(be.faculty_id),P(be.semester_level.toString()));x(!0)},Re=async()=>{if(!c){u(!0);try{if($&&O){let X={},be="faculties";b==="batches"?(be="batches",X={name:S,faculty_id:N}):b==="sections"?(be="sections",X={name:S,batch_id:N}):b==="catalog"?(be="course_catalog",X={subject_name:S,subject_code:E,faculty_id:N,semester_level:parseInt(A)}):X={name:S},await Ce.updateResource(be,O,X),e({title:"Success",description:"Item updated successfully"})}else if(b==="departments")if(de){const X=G.split(`
`).filter(oe=>oe.trim()),be=X.map(oe=>Ce.createFaculty(oe.trim()));await Promise.all(be),e({title:"Success",description:`Added ${X.length} departments`})}else await Ce.createFaculty(S),e({title:"Success",description:"Department added"});else if(b==="batches"){if(!N)throw new Error("Department required");if(de){const X=parseInt(ee),be=parseInt(Z),oe=[];for(let Ie=X;Ie<=be;Ie++)oe.push(Ce.createBatch(N,Ie.toString()));await Promise.all(oe),e({title:"Success",description:"Batches added"})}else await Ce.createBatch(N,S),e({title:"Success",description:"Batch added"})}else if(b==="sections"){if(!N)throw new Error("Batch required");if(de){const X=Q.toUpperCase().charCodeAt(0),be=V.toUpperCase().charCodeAt(0),oe=[];for(let Ie=X;Ie<=be;Ie++)oe.push(Ce.createSection(N,String.fromCharCode(Ie)));await Promise.all(oe),e({title:"Success",description:"Sections added"})}else await Ce.createSection(N,S),e({title:"Success",description:"Section added"})}else if(b==="catalog"){if(!N)throw new Error("Department required");if(!A)throw new Error("Semester required");const X=parseInt(A);if(de){const be=W.split(`
`).filter(Ie=>Ie.trim()),oe=[];for(const Ie of be){let Dt=Ie,qn="SUB";if(Ie.includes("-")){const Nr=Ie.split("-");qn=Nr[0].trim(),Dt=Nr.slice(1).join("-").trim()}else qn=Dt.substring(0,3).toUpperCase();oe.push(Ce.createCatalogSubject(N,X,Dt,qn))}await Promise.all(oe),e({title:"Success",description:`Added ${be.length} subjects to catalog`})}else{if(!S||!E)throw new Error("Name and Code required");await Ce.createCatalogSubject(N,X,S,E),e({title:"Success",description:"Subject added to catalog"})}}ae(),x(!1),He()}catch(X){e({title:"Error",description:X.message||"Failed to save item",variant:"destructive"})}finally{u(!1)}}},He=()=>{C(""),k(""),T(""),R(""),P(""),L(""),J(""),ne(""),K(""),ie(""),q(""),he(!1),j(!1),B("")},Me=async(X,be)=>{if(confirm("Are you sure? This action cannot be undone."))try{X==="course_catalog"?await Ce.deleteCatalogSubject(be):await Ce.deleteResource(X,be),e({title:"Deleted",description:"Item deleted successfully"}),ae()}catch(oe){e({title:"Error",description:oe.message||"Failed to delete item",variant:"destructive"})}},st=X=>{var be;return((be=t.find(oe=>oe.id===X))==null?void 0:be.name)||"Unknown"},xe=_.useMemo(()=>t.map(X=>({label:X.name,value:X.id})),[t]),me=_.useMemo(()=>d?r.filter(X=>X.faculty_id===d).map(X=>({label:`Batch ${X.name}`,value:X.id})):[],[r,d]);_.useMemo(()=>p?i.filter(X=>X.batch_id===p).map(X=>({label:`Section ${X.name}`,value:X.id})):[],[i,p]);const Ee=[1,2,3,4,5,6,7,8,9,10,11,12].map(X=>({label:ge(X),value:X.toString()}));return h.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Academic Structure"}),h.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Manage departments, batches, sections, and catalog"})]}),h.jsxs(kT,{defaultValue:"departments",onValueChange:le,className:"w-full",children:[h.jsxs(zb,{className:"grid w-full grid-cols-2 sm:grid-cols-4 h-auto",children:[h.jsx(Mo,{value:"departments",className:"text-xs sm:text-sm px-2 py-2",children:"Depts"}),h.jsx(Mo,{value:"batches",className:"text-xs sm:text-sm px-2 py-2",children:"Batches"}),h.jsx(Mo,{value:"sections",className:"text-xs sm:text-sm px-2 py-2",children:"Sections"}),h.jsx(Mo,{value:"catalog",className:"text-xs sm:text-sm px-2 py-2",children:"Course Catalog"})]}),h.jsx("div",{className:"mt-4 sm:mt-6 flex flex-col items-start gap-4 p-4 border rounded-lg bg-card/50",children:h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 w-full",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[h.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Filters:"}),b!=="departments"&&h.jsx(C_,{items:xe,value:d,onChange:X=>{f(X),v("")},placeholder:"Select Department...",searchPlaceholder:"Search Dept..."}),b==="sections"&&h.jsx(C_,{items:me,value:p,onChange:v,placeholder:d?"Select Batch...":"Select Dept First",disabled:!d}),b==="catalog"&&h.jsx(C_,{items:Ee,value:m,onChange:g,placeholder:"Select Semester..."})]}),h.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[h.jsxs("div",{className:"relative flex-1 sm:w-64",children:[h.jsx(fo,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),h.jsx(lt,{placeholder:`Search ${b}...`,className:"pl-8",value:D,onChange:X=>M(X.target.value)})]}),h.jsxs(Tl,{open:y,onOpenChange:x,children:[h.jsx(Xw,{asChild:!0,children:h.jsx(we,{size:"icon",children:h.jsx(Cb,{className:"w-4 h-4"})})}),h.jsxs(is,{className:"max-w-md max-h-[90vh] overflow-y-auto mx-4",children:[h.jsxs(os,{children:[h.jsxs(ss,{className:"capitalize",children:[$?"Edit":"Add New"," ",b==="catalog"?"Subject":b.slice(0,-1)]}),!$&&h.jsx("div",{className:"flex items-center gap-2 pt-2",children:h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:de,onChange:X=>he(X.target.checked),className:"w-4 h-4"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:"Bulk Mode"})]})})]}),h.jsxs("div",{className:"grid gap-4 py-4",children:[b==="departments"&&(de?h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Names"}),h.jsx("textarea",{value:G,onChange:X=>L(X.target.value),className:"min-h-[100px] w-full border rounded-md p-2 text-sm"})]}):h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Name"}),h.jsx(lt,{value:S,onChange:X=>C(X.target.value)})]})),b==="batches"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Department"}),h.jsxs(_t,{onValueChange:T,value:N,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Department"})}),h.jsx(wt,{children:t.map(X=>h.jsx(it,{value:X.id,children:X.name},X.id))})]})]}),de?h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(We,{children:"Start"}),h.jsx(lt,{value:ee,onChange:X=>ne(X.target.value)})]}),h.jsxs("div",{children:[h.jsx(We,{children:"End"}),h.jsx(lt,{value:Z,onChange:X=>K(X.target.value)})]})]}):h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Name"}),h.jsx(lt,{value:S,onChange:X=>C(X.target.value)})]})]}),b==="sections"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Department"}),h.jsxs(_t,{onValueChange:X=>{R(X),T("")},children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Department"})}),h.jsx(wt,{children:t.map(X=>h.jsx(it,{value:X.id,children:X.name},X.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Batch"}),h.jsxs(_t,{onValueChange:T,value:N,disabled:!I,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Batch"})}),h.jsx(wt,{children:r.filter(X=>X.faculty_id===I).map(X=>h.jsx(it,{value:X.id,children:X.name},X.id))})]})]}),de?null:h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Name"}),h.jsx(lt,{value:S,onChange:X=>C(X.target.value)})]}),de&&h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(We,{children:"Start"}),h.jsx(lt,{value:Q,onChange:X=>ie(X.target.value.toUpperCase()),maxLength:1})]}),h.jsxs("div",{children:[h.jsx(We,{children:"End"}),h.jsx(lt,{value:V,onChange:X=>q(X.target.value.toUpperCase()),maxLength:1})]})]})]}),b==="catalog"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Department"}),h.jsxs(_t,{onValueChange:T,value:N,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Department"})}),h.jsx(wt,{children:t.map(X=>h.jsx(it,{value:X.id,children:X.name},X.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Semester"}),h.jsxs(_t,{onValueChange:P,value:A,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Semester"})}),h.jsx(wt,{children:[1,2,3,4,5,6,7,8,9,10,11,12].map(X=>h.jsx(it,{value:X.toString(),children:ge(X)},X))})]})]}),de?h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Subjects"}),h.jsx("textarea",{value:W,onChange:X=>J(X.target.value),className:"min-h-[100px] w-full border rounded-md p-2 text-sm"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Code"}),h.jsx(lt,{value:E,onChange:X=>k(X.target.value)})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Name"}),h.jsx(lt,{value:S,onChange:X=>C(X.target.value)})]})]})]})]}),h.jsx(Yw,{children:h.jsx(we,{onClick:Re,children:c?"Saving...":"Save"})})]})]})]})]})}),h.jsx($o,{value:"departments",children:h.jsx(Et,{children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{children:"Name"}),h.jsx(Je,{className:"text-right",children:"Actions"})]})}),h.jsx(wi,{children:t.filter(X=>X.name.toLowerCase().includes(D.toLowerCase())).map(X=>h.jsxs(Mt,{children:[h.jsx(Ge,{className:"font-medium",children:X.name}),h.jsxs(Ge,{className:"text-right",children:[h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>_e("faculties",X),className:"mr-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:h.jsx(lg,{className:"w-4 h-4"})}),h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>Me("faculties",X.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:h.jsx(pc,{className:"w-4 h-4"})})]})]},X.id))})]})})}),h.jsx($o,{value:"batches",className:"space-y-4",children:h.jsx(Et,{children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{children:"Name"}),h.jsx(Je,{children:"Department"}),h.jsx(Je,{children:"Current Sem"}),h.jsx(Je,{className:"text-right",children:"Actions"})]})}),h.jsx(wi,{children:r.filter(X=>(!d||X.faculty_id===d)&&X.name.includes(D)).map(X=>h.jsxs(Mt,{children:[h.jsx(Ge,{children:X.name}),h.jsx(Ge,{children:st(X.faculty_id)}),h.jsx(Ge,{children:ge(X.current_semester)}),h.jsxs(Ge,{className:"text-right",children:[h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>_e("batches",X),className:"mr-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:h.jsx(lg,{className:"w-4 h-4"})}),h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>Me("batches",X.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:h.jsx(pc,{className:"w-4 h-4"})})]})]},X.id))})]})})}),h.jsx($o,{value:"sections",className:"space-y-4",children:h.jsx(Et,{children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{children:"Name"}),h.jsx(Je,{children:"Batch"}),h.jsx(Je,{className:"text-right",children:"Actions"})]})}),h.jsx(wi,{children:i.filter(X=>{const be=r.find(oe=>oe.id===X.batch_id);return d&&(be==null?void 0:be.faculty_id)!==d||p&&X.batch_id!==p?!1:X.name.includes(D)}).map(X=>{var be;return h.jsxs(Mt,{children:[h.jsx(Ge,{children:X.name}),h.jsx(Ge,{children:((be=r.find(oe=>oe.id===X.batch_id))==null?void 0:be.name)||"-"}),h.jsxs(Ge,{className:"text-right",children:[h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>_e("sections",X),className:"mr-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:h.jsx(lg,{className:"w-4 h-4"})}),h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>Me("sections",X.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:h.jsx(pc,{className:"w-4 h-4"})})]})]},X.id)})})]})})}),h.jsx($o,{value:"catalog",className:"space-y-4",children:h.jsx(Et,{children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{className:"h-10",children:[h.jsx(Je,{className:"py-2",children:"Code"}),h.jsx(Je,{className:"py-2",children:"Name"}),h.jsx(Je,{className:"py-2",children:"Department"}),h.jsx(Je,{className:"py-2",children:"Semester"}),h.jsx(Je,{className:"text-right py-2",children:"Actions"})]})}),h.jsx(wi,{children:s.filter(X=>d&&X.faculty_id!==d||m&&X.semester_level!==parseInt(m)?!1:X.subject_name.toLowerCase().includes(D.toLowerCase())||X.subject_code.toLowerCase().includes(D.toLowerCase())).map(X=>h.jsxs(Mt,{className:"h-8",children:[h.jsx(Ge,{className:"font-mono text-xs py-1",children:X.subject_code}),h.jsx(Ge,{className:"text-xs py-1 font-medium",children:X.subject_name}),h.jsx(Ge,{className:"text-xs py-1 text-muted-foreground",children:st(X.faculty_id)}),h.jsx(Ge,{className:"text-xs py-1",children:ge(X.semester_level)}),h.jsxs(Ge,{className:"text-right py-1",children:[h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>_e("catalog",X),className:"h-6 w-6 p-0 mr-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:h.jsx(lg,{className:"w-3 h-3"})}),h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>Me("course_catalog",X.id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-600 hover:bg-red-50",children:h.jsx(pc,{className:"w-3 h-3"})})]})]},X.id))})]})})})]})]})},pWe=sv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function yt({className:e,variant:t,...n}){return h.jsx("div",{className:Te(pWe({variant:t}),e),...n})}var bk=["Enter"," "],mWe=["ArrowDown","PageUp","Home"],t9=["ArrowUp","PageDown","End"],vWe=[...mWe,...t9],gWe={ltr:[...bk,"ArrowRight"],rtl:[...bk,"ArrowLeft"]},yWe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$v="Menu",[Gm,xWe,bWe]=bb($v),[gu,n9]=Sa($v,[bWe,Rl,Bb]),Zw=Rl(),r9=Bb(),[wWe,yu]=gu($v),[SWe,Fv]=gu($v),a9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=Zw(t),[l,c]=_.useState(null),u=_.useRef(!1),d=Xr(i),f=Rb(a);return _.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),h.jsx(RN,{...s,children:h.jsx(wWe,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:h.jsx(SWe,{scope:t,onClose:_.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};a9.displayName=$v;var _We="MenuAnchor",HP=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Zw(n);return h.jsx(iv,{...a,...r,ref:t})});HP.displayName=_We;var GP="MenuPortal",[CWe,i9]=gu(GP,{forceMount:void 0}),o9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=yu(GP,t);return h.jsx(CWe,{scope:t,forceMount:n,children:h.jsx(Jr,{present:n||i.open,children:h.jsx(Lf,{asChild:!0,container:a,children:r})})})};o9.displayName=GP;var Ua="MenuContent",[EWe,qP]=gu(Ua),s9=_.forwardRef((e,t)=>{const n=i9(Ua,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=yu(Ua,e.__scopeMenu),o=Fv(Ua,e.__scopeMenu);return h.jsx(Gm.Provider,{scope:e.__scopeMenu,children:h.jsx(Jr,{present:r||i.open,children:h.jsx(Gm.Slot,{scope:e.__scopeMenu,children:o.modal?h.jsx(kWe,{...a,ref:t}):h.jsx(NWe,{...a,ref:t})})})})}),kWe=_.forwardRef((e,t)=>{const n=yu(Ua,e.__scopeMenu),r=_.useRef(null),a=ft(t,r);return _.useEffect(()=>{const i=r.current;if(i)return Db(i)},[]),h.jsx(KP,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ye(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),NWe=_.forwardRef((e,t)=>{const n=yu(Ua,e.__scopeMenu);return h.jsx(KP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),TWe=wl("MenuContent.ScrollLock"),KP=_.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:v,...m}=e,g=yu(Ua,n),y=Fv(Ua,n),x=Zw(n),b=r9(n),w=xWe(n),[S,C]=_.useState(null),E=_.useRef(null),k=ft(t,E,g.onContentChange),N=_.useRef(0),T=_.useRef(""),A=_.useRef(0),P=_.useRef(null),I=_.useRef("right"),R=_.useRef(0),D=v?pv:_.Fragment,M=v?{as:TWe,allowPinchZoom:!0}:void 0,$=O=>{var Z,K;const B=T.current+O,G=w().filter(Q=>!Q.disabled),L=document.activeElement,W=(Z=G.find(Q=>Q.ref.current===L))==null?void 0:Z.textValue,J=G.map(Q=>Q.textValue),ee=BWe(J,B,W),ne=(K=G.find(Q=>Q.textValue===ee))==null?void 0:K.ref.current;(function Q(ie){T.current=ie,window.clearTimeout(N.current),ie!==""&&(N.current=window.setTimeout(()=>Q(""),1e3))})(B),ne&&setTimeout(()=>ne.focus())};_.useEffect(()=>()=>window.clearTimeout(N.current),[]),Ib();const j=_.useCallback(O=>{var G,L;return I.current===((G=P.current)==null?void 0:G.side)&&zWe(O,(L=P.current)==null?void 0:L.area)},[]);return h.jsx(EWe,{scope:n,searchRef:T,onItemEnter:_.useCallback(O=>{j(O)&&O.preventDefault()},[j]),onItemLeave:_.useCallback(O=>{var B;j(O)||((B=E.current)==null||B.focus(),C(null))},[j]),onTriggerLeave:_.useCallback(O=>{j(O)&&O.preventDefault()},[j]),pointerGraceTimerRef:A,onPointerGraceIntentChange:_.useCallback(O=>{P.current=O},[]),children:h.jsx(D,{...M,children:h.jsx(hv,{asChild:!0,trapped:a,onMountAutoFocus:ye(i,O=>{var B;O.preventDefault(),(B=E.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(ou,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(JW,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:ye(l,O=>{y.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(mb,{role:"menu","aria-orientation":"vertical","data-state":_9(g.open),"data-radix-menu-content":"",dir:y.dir,...x,...m,ref:k,style:{outline:"none",...m.style},onKeyDown:ye(m.onKeyDown,O=>{const G=O.target.closest("[data-radix-menu-content]")===O.currentTarget,L=O.ctrlKey||O.altKey||O.metaKey,W=O.key.length===1;G&&(O.key==="Tab"&&O.preventDefault(),!L&&W&&$(O.key));const J=E.current;if(O.target!==J||!vWe.includes(O.key))return;O.preventDefault();const ne=w().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);t9.includes(O.key)&&ne.reverse(),FWe(ne)}),onBlur:ye(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(N.current),T.current="")}),onPointerMove:ye(e.onPointerMove,qm(O=>{const B=O.target,G=R.current!==O.clientX;if(O.currentTarget.contains(B)&&G){const L=O.clientX>R.current?"right":"left";I.current=L,R.current=O.clientX}}))})})})})})})});s9.displayName=Ua;var AWe="MenuGroup",XP=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Fe.div,{role:"group",...r,ref:t})});XP.displayName=AWe;var PWe="MenuLabel",l9=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Fe.div,{...r,ref:t})});l9.displayName=PWe;var Fx="MenuItem",V3="menu.itemSelect",e1=_.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=_.useRef(null),o=Fv(Fx,e.__scopeMenu),s=qP(Fx,e.__scopeMenu),l=ft(t,i),c=_.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const f=new CustomEvent(V3,{bubbles:!0,cancelable:!0});d.addEventListener(V3,p=>r==null?void 0:r(p),{once:!0}),SN(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(c9,{...a,ref:l,disabled:n,onClick:ye(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),c.current=!0},onPointerUp:ye(e.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ye(e.onKeyDown,d=>{const f=s.searchRef.current!=="";n||f&&d.key===" "||bk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});e1.displayName=Fx;var c9=_.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=qP(Fx,n),s=r9(n),l=_.useRef(null),c=ft(t,l),[u,d]=_.useState(!1),[f,p]=_.useState("");return _.useEffect(()=>{const v=l.current;v&&p((v.textContent??"").trim())},[i.children]),h.jsx(Gm.ItemSlot,{scope:n,disabled:r,textValue:a??f,children:h.jsx(ZW,{asChild:!0,...s,focusable:!r,children:h.jsx(Fe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:ye(e.onPointerMove,qm(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(e.onPointerLeave,qm(v=>o.onItemLeave(v))),onFocus:ye(e.onFocus,()=>d(!0)),onBlur:ye(e.onBlur,()=>d(!1))})})})}),jWe="MenuCheckboxItem",u9=_.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return h.jsx(m9,{scope:e.__scopeMenu,checked:n,children:h.jsx(e1,{role:"menuitemcheckbox","aria-checked":Lx(n)?"mixed":n,...a,ref:t,"data-state":QP(n),onSelect:ye(a.onSelect,()=>r==null?void 0:r(Lx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});u9.displayName=jWe;var d9="MenuRadioGroup",[OWe,RWe]=gu(d9,{value:void 0,onValueChange:()=>{}}),f9=_.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Xr(r);return h.jsx(OWe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:h.jsx(XP,{...a,ref:t})})});f9.displayName=d9;var h9="MenuRadioItem",p9=_.forwardRef((e,t)=>{const{value:n,...r}=e,a=RWe(h9,e.__scopeMenu),i=n===a.value;return h.jsx(m9,{scope:e.__scopeMenu,checked:i,children:h.jsx(e1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":QP(i),onSelect:ye(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});p9.displayName=h9;var YP="MenuItemIndicator",[m9,IWe]=gu(YP,{checked:!1}),v9=_.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=IWe(YP,n);return h.jsx(Jr,{present:r||Lx(i.checked)||i.checked===!0,children:h.jsx(Fe.span,{...a,ref:t,"data-state":QP(i.checked)})})});v9.displayName=YP;var DWe="MenuSeparator",g9=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});g9.displayName=DWe;var MWe="MenuArrow",y9=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Zw(n);return h.jsx(vb,{...a,...r,ref:t})});y9.displayName=MWe;var $We="MenuSub",[wVe,x9]=gu($We),Wh="MenuSubTrigger",b9=_.forwardRef((e,t)=>{const n=yu(Wh,e.__scopeMenu),r=Fv(Wh,e.__scopeMenu),a=x9(Wh,e.__scopeMenu),i=qP(Wh,e.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=i,c={__scopeMenu:e.__scopeMenu},u=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>u,[u]),_.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),l(null)}},[s,l]),h.jsx(HP,{asChild:!0,...c,children:h.jsx(c9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":_9(n.open),...e,ref:Qo(t,a.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ye(e.onPointerMove,qm(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ye(e.onPointerLeave,qm(d=>{var p,v;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(v=n.content)==null?void 0:v.dataset.side,g=m==="right",y=g?-5:5,x=f[g?"left":"right"],b=f[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ye(e.onKeyDown,d=>{var p;const f=i.searchRef.current!=="";e.disabled||f&&d.key===" "||gWe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});b9.displayName=Wh;var w9="MenuSubContent",S9=_.forwardRef((e,t)=>{const n=i9(Ua,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=yu(Ua,e.__scopeMenu),o=Fv(Ua,e.__scopeMenu),s=x9(w9,e.__scopeMenu),l=_.useRef(null),c=ft(t,l);return h.jsx(Gm.Provider,{scope:e.__scopeMenu,children:h.jsx(Jr,{present:r||i.open,children:h.jsx(Gm.Slot,{scope:e.__scopeMenu,children:h.jsx(KP,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ye(e.onFocusOutside,u=>{u.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ye(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ye(e.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=yWe[o.dir].includes(u.key);d&&f&&(i.onOpenChange(!1),(p=s.trigger)==null||p.focus(),u.preventDefault())})})})})})});S9.displayName=w9;function _9(e){return e?"open":"closed"}function Lx(e){return e==="indeterminate"}function QP(e){return Lx(e)?"indeterminate":e?"checked":"unchecked"}function FWe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function LWe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function BWe(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=LWe(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function UWe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],c=s.x,u=s.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(a=!a)}return a}function zWe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return UWe(n,t)}function qm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var WWe=a9,VWe=HP,HWe=o9,GWe=s9,qWe=XP,KWe=l9,XWe=e1,YWe=u9,QWe=f9,JWe=p9,ZWe=v9,e6e=g9,t6e=y9,n6e=b9,r6e=S9,t1="DropdownMenu",[a6e,SVe]=Sa(t1,[n9]),Fr=n9(),[i6e,C9]=a6e(t1),E9=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,l=Fr(t),c=_.useRef(null),[u,d]=uo({prop:a,defaultProp:i??!1,onChange:o,caller:t1});return h.jsx(i6e,{scope:t,triggerId:sr(),triggerRef:c,contentId:sr(),open:u,onOpenChange:d,onOpenToggle:_.useCallback(()=>d(f=>!f),[d]),modal:s,children:h.jsx(WWe,{...l,open:u,onOpenChange:d,dir:r,modal:s,children:n})})};E9.displayName=t1;var k9="DropdownMenuTrigger",N9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=C9(k9,n),o=Fr(n);return h.jsx(VWe,{asChild:!0,...o,children:h.jsx(Fe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Qo(t,i.triggerRef),onPointerDown:ye(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:ye(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});N9.displayName=k9;var o6e="DropdownMenuPortal",T9=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Fr(t);return h.jsx(HWe,{...r,...n})};T9.displayName=o6e;var A9="DropdownMenuContent",P9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=C9(A9,n),i=Fr(n),o=_.useRef(!1);return h.jsx(GWe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:ye(e.onCloseAutoFocus,s=>{var l;o.current||(l=a.triggerRef.current)==null||l.focus(),o.current=!1,s.preventDefault()}),onInteractOutside:ye(e.onInteractOutside,s=>{const l=s.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});P9.displayName=A9;var s6e="DropdownMenuGroup",l6e=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(qWe,{...a,...r,ref:t})});l6e.displayName=s6e;var c6e="DropdownMenuLabel",j9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(KWe,{...a,...r,ref:t})});j9.displayName=c6e;var u6e="DropdownMenuItem",O9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(XWe,{...a,...r,ref:t})});O9.displayName=u6e;var d6e="DropdownMenuCheckboxItem",R9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(YWe,{...a,...r,ref:t})});R9.displayName=d6e;var f6e="DropdownMenuRadioGroup",h6e=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(QWe,{...a,...r,ref:t})});h6e.displayName=f6e;var p6e="DropdownMenuRadioItem",I9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(JWe,{...a,...r,ref:t})});I9.displayName=p6e;var m6e="DropdownMenuItemIndicator",D9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(ZWe,{...a,...r,ref:t})});D9.displayName=m6e;var v6e="DropdownMenuSeparator",M9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(e6e,{...a,...r,ref:t})});M9.displayName=v6e;var g6e="DropdownMenuArrow",y6e=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(t6e,{...a,...r,ref:t})});y6e.displayName=g6e;var x6e="DropdownMenuSubTrigger",$9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(n6e,{...a,...r,ref:t})});$9.displayName=x6e;var b6e="DropdownMenuSubContent",F9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Fr(n);return h.jsx(r6e,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F9.displayName=b6e;var w6e=E9,S6e=N9,_6e=T9,L9=P9,B9=j9,U9=O9,z9=R9,W9=I9,V9=D9,H9=M9,G9=$9,q9=F9;const Bx=w6e,Ux=S6e,C6e=_.forwardRef(({className:e,inset:t,children:n,...r},a)=>h.jsxs(G9,{ref:a,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,h.jsx(ef,{className:"ml-auto h-4 w-4"})]}));C6e.displayName=G9.displayName;const E6e=_.forwardRef(({className:e,...t},n)=>h.jsx(q9,{ref:n,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));E6e.displayName=q9.displayName;const Km=_.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(_6e,{children:h.jsx(L9,{ref:r,sideOffset:t,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Km.displayName=L9.displayName;const Qi=_.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(U9,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));Qi.displayName=U9.displayName;const k6e=_.forwardRef(({className:e,children:t,checked:n,...r},a)=>h.jsxs(z9,{ref:a,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(V9,{children:h.jsx(Sb,{className:"h-4 w-4"})})}),t]}));k6e.displayName=z9.displayName;const N6e=_.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(W9,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(V9,{children:h.jsx(Yte,{className:"h-2 w-2 fill-current"})})}),t]}));N6e.displayName=W9.displayName;const Xm=_.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(B9,{ref:r,className:Te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Xm.displayName=B9.displayName;const zx=_.forwardRef(({className:e,...t},n)=>h.jsx(H9,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));zx.displayName=H9.displayName;const T6e=()=>{const{toast:e}=ds(),[t,n]=_.useState([]),[r,a]=_.useState([]),[i,o]=_.useState(!0),[s,l]=_.useState(""),c=async()=>{o(!0);try{const[p,v]=await Promise.all([Ce.getStudents(),Ce.getTeachers()]);n(p||[]),a(v||[])}catch(p){console.error("Failed to fetch users",p),e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{o(!1)}};_.useEffect(()=>{c()},[]);const u=async(p,v,m)=>{const g=v==="student"?"students":"teachers";try{await Ce.updateResource(g,p,{is_active:!m}),e({title:"Updated",description:"Status updated successfully."}),c()}catch{e({title:"Error",description:"Failed to update status",variant:"destructive"})}},d=t.filter(p=>{var v,m,g;return((m=(v=p.profile)==null?void 0:v.name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((g=p.student_id)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))}),f=r.filter(p=>{var v,m,g,y,x;return((m=(v=p.profile)==null?void 0:v.name)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||((y=(g=p.profile)==null?void 0:g.email)==null?void 0:y.toLowerCase().includes(s.toLowerCase()))||((x=p.employee_id)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))});return h.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"User Management"}),h.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Manage students and teachers access"})]}),h.jsxs("div",{className:"relative w-full sm:w-72",children:[h.jsx(fo,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),h.jsx(lt,{placeholder:"Search users...",className:"pl-8 h-9 sm:h-10 text-sm",value:s,onChange:p=>l(p.target.value)})]})]}),h.jsxs(kT,{defaultValue:"students",className:"w-full",children:[h.jsxs(zb,{className:"grid w-full grid-cols-2 max-w-[400px]",children:[h.jsxs(Mo,{value:"students",className:"gap-2 text-sm",children:[h.jsx(Fa,{className:"w-4 h-4"})," ",h.jsx("span",{className:"hidden sm:inline",children:"Students"}),h.jsx("span",{className:"sm:hidden",children:"Students"})]}),h.jsxs(Mo,{value:"teachers",className:"gap-2 text-sm",children:[h.jsx(zp,{className:"w-4 h-4"})," ",h.jsx("span",{className:"hidden sm:inline",children:"Teachers"}),h.jsx("span",{className:"sm:hidden",children:"Teachers"})]})]}),h.jsx($o,{value:"students",className:"mt-4 sm:mt-6",children:h.jsx("div",{className:"rounded-md border bg-card overflow-x-auto",children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{className:"min-w-[100px]",children:"Student ID"}),h.jsx(Je,{className:"min-w-[150px]",children:"Name"}),h.jsx(Je,{className:"hidden md:table-cell",children:"Batch"}),h.jsx(Je,{className:"hidden md:table-cell",children:"Section"}),h.jsx(Je,{className:"min-w-[100px]",children:"Face Reg"}),h.jsx(Je,{className:"min-w-[80px]",children:"Status"}),h.jsx(Je,{className:"text-right min-w-[70px]",children:"Actions"})]})}),h.jsx(wi,{children:d.map(p=>{var v,m,g,y;return h.jsxs(Mt,{children:[h.jsx(Ge,{className:"font-mono text-xs sm:text-sm",children:p.student_id}),h.jsx(Ge,{className:"min-w-0",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-medium text-sm truncate max-w-[150px] sm:max-w-none",children:(v=p.profile)==null?void 0:v.name}),h.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[150px] sm:max-w-none",children:(m=p.profile)==null?void 0:m.email})]})}),h.jsx(Ge,{className:"hidden md:table-cell",children:(g=p.section)!=null&&g.batch?h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{children:p.section.batch.name}),h.jsxs("span",{className:"text-xs text-muted-foreground",children:["Sem ",p.section.batch.current_semester]})]}):"-"}),h.jsx(Ge,{className:"hidden md:table-cell",children:((y=p.section)==null?void 0:y.name)||"-"}),h.jsx(Ge,{children:p.face_registered?h.jsx(yt,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-200 text-xs whitespace-nowrap",children:"Registered"}):h.jsx(yt,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-200 text-xs whitespace-nowrap",children:"Pending"})}),h.jsx(Ge,{children:p.is_active?h.jsx(yt,{variant:"default",className:"bg-green-600 text-xs whitespace-nowrap",children:"Active"}):h.jsx(yt,{variant:"destructive",className:"text-xs whitespace-nowrap",children:"Disabled"})}),h.jsx(Ge,{className:"text-right",children:h.jsxs(Bx,{children:[h.jsx(Ux,{asChild:!0,children:h.jsx(we,{variant:"ghost",className:"h-8 w-8 p-0",children:h.jsx(qO,{className:"h-4 w-4"})})}),h.jsxs(Km,{align:"end",children:[h.jsx(Xm,{children:"Actions"}),h.jsx(Qi,{onClick:()=>u(p.id,"student",p.is_active),children:p.is_active?"Disable Account":"Enable Account"}),p.face_registered&&h.jsx(Qi,{className:"text-rose-500 focus:text-rose-500",onClick:async()=>{var x;if(confirm(`Are you sure you want to reset the face data for ${(x=p.profile)==null?void 0:x.name}? They will need to register again.`))try{await Ce.resetStudentFace(p.id),e({title:"Success",description:"Face data reset successfully."}),c()}catch{e({title:"Error",description:"Failed to reset face data",variant:"destructive"})}},children:"Reset Face Identity"})]})]})})]},p.id)})})]})})}),h.jsx($o,{value:"teachers",className:"mt-4 sm:mt-6",children:h.jsx("div",{className:"rounded-md border bg-card overflow-x-auto",children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{className:"min-w-[100px]",children:"Teacher ID"}),h.jsx(Je,{className:"min-w-[150px]",children:"Name"}),h.jsx(Je,{className:"hidden md:table-cell",children:"Subjects"}),h.jsx(Je,{className:"min-w-[80px]",children:"Status"}),h.jsx(Je,{className:"text-right min-w-[70px]",children:"Actions"})]})}),h.jsx(wi,{children:f.map(p=>{var v,m,g;return h.jsxs(Mt,{children:[h.jsx(Ge,{className:"font-mono text-xs sm:text-sm",children:p.employee_id||`T-${p.id.slice(0,4)}`}),h.jsx(Ge,{className:"min-w-0",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-medium text-sm truncate max-w-[150px] sm:max-w-none",children:(v=p.profile)==null?void 0:v.name}),h.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[150px] sm:max-w-none",children:(m=p.profile)==null?void 0:m.email})]})}),h.jsx(Ge,{className:"hidden md:table-cell",children:((g=p.faculty)==null?void 0:g.name)||"General"}),h.jsx(Ge,{children:p.is_active?h.jsx(yt,{variant:"default",className:"bg-green-600 text-xs whitespace-nowrap",children:"Active"}):h.jsx(yt,{variant:"destructive",className:"text-xs whitespace-nowrap",children:"Disabled"})}),h.jsx(Ge,{className:"text-right",children:h.jsxs(Bx,{children:[h.jsx(Ux,{asChild:!0,children:h.jsx(we,{variant:"ghost",className:"h-8 w-8 p-0",children:h.jsx(qO,{className:"h-4 w-4"})})}),h.jsxs(Km,{align:"end",children:[h.jsx(Xm,{children:"Actions"}),h.jsx(Qi,{onClick:()=>u(p.id,"teacher",p.is_active),children:p.is_active?"Disable Account":"Enable Account"}),h.jsx(Qi,{disabled:!0,children:"Manage Profile"})]})]})})]},p.id)})})]})})})]})]})},A6e=()=>{const{toast:e}=ds(),[t,n]=_.useState([]),[r,a]=_.useState(!0),[i,o]=_.useState(!1),[s,l]=_.useState([]),[c,u]=_.useState([]),[d,f]=_.useState([]),[p,v]=_.useState([]),[m,g]=_.useState([]),[y,x]=_.useState(""),[b,w]=_.useState(""),[S,C]=_.useState(""),[E,k]=_.useState(""),[N,T]=_.useState(""),[A,P]=_.useState(""),[I,R]=_.useState(""),[D,M]=_.useState(""),[$,j]=_.useState(""),[O,B]=_.useState("all"),[G,L]=_.useState("all"),[W,J]=_.useState(""),ee=async()=>{a(!0);try{const[K,Q,ie,V,q,de]=await Promise.all([Ce.getRoutines(),Ce.getTeachers(),Ce.getFaculties(),Ce.getBatches(),Ce.getSections(),Ce.getSubjects()]);n(K||[]),l(Q||[]),u(ie||[]),f(V||[]),v(q||[]),g(de||[])}catch(K){console.error("Failed to fetch data",K),e({title:"Error",description:"Failed to load data",variant:"destructive"})}finally{a(!1)}};_.useEffect(()=>{ee()},[]);const ne=async()=>{if(!y||!N||!A||!I||!D){e({title:"Error",description:"Please fill all required fields",variant:"destructive"});return}try{await Ce.createRoutine({teacher_id:y,section_id:E,course_catalog_id:N,day_of_week:A,start_time:I,end_time:D,room_id:$||null}),e({title:"Success",description:"Routine created successfully"}),o(!1),ee(),x(""),T(""),P(""),R(""),M(""),j("")}catch(K){e({title:"Error",description:K.message||"Failed to create routine",variant:"destructive"})}},Z=async K=>{if(confirm("Are you sure you want to delete this routine?"))try{await Ce.deleteResource("routines",K),e({title:"Routine deleted"}),ee()}catch{e({title:"Error",description:"Failed to delete routine",variant:"destructive"})}};return h.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-card p-4 sm:p-6 rounded-lg border shadow-sm gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Routine Management"}),h.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"View and manage class schedules."})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[h.jsxs("div",{className:"relative w-full sm:w-[200px]",children:[h.jsx(fo,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),h.jsx(lt,{placeholder:"Search routine...",value:W,onChange:K=>J(K.target.value),className:"pl-8"})]}),h.jsxs(_t,{value:O,onValueChange:K=>{B(K),L("all")},children:[h.jsx(bt,{className:"w-full sm:w-[150px]",children:h.jsx(Ct,{placeholder:"Filter Dept"})}),h.jsxs(wt,{children:[h.jsx(it,{value:"all",children:"All Depts"}),c.map(K=>h.jsx(it,{value:K.id,children:K.name},K.id))]})]}),h.jsxs(_t,{value:G,onValueChange:L,disabled:O==="all",children:[h.jsx(bt,{className:"w-full sm:w-[150px]",children:h.jsx(Ct,{placeholder:"Filter Batch"})}),h.jsxs(wt,{children:[h.jsx(it,{value:"all",children:"All Batches"}),d.filter(K=>K.faculty_id===O).map(K=>h.jsx(it,{value:K.id,children:K.name},K.id))]})]}),h.jsxs(Tl,{open:i,onOpenChange:o,children:[h.jsx(Xw,{asChild:!0,children:h.jsxs(we,{className:"gap-2 w-full sm:w-auto",children:[h.jsx(Cb,{className:"w-4 h-4"})," Add Routine"]})}),h.jsxs(is,{className:"max-w-xl max-h-[90vh] overflow-y-auto w-[95vw] sm:w-full p-4 sm:p-6",children:[h.jsx(os,{children:h.jsx(ss,{children:"Add New Routine"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Department"}),h.jsxs(_t,{value:b,onValueChange:K=>{w(K),C("")},children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Department"})}),h.jsx(wt,{children:c.map(K=>h.jsx(it,{value:K.id,children:K.name},K.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Batch"}),h.jsxs(_t,{value:S,onValueChange:C,disabled:!b,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Batch"})}),h.jsx(wt,{children:d.filter(K=>K.faculty_id===b).map(K=>h.jsx(it,{value:K.id,children:K.name},K.id))})]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Section"}),h.jsxs(_t,{value:E,onValueChange:k,disabled:!S,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Section"})}),h.jsx(wt,{children:p.filter(K=>K.batch_id===S).map(K=>h.jsx(it,{value:K.id,children:K.name},K.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Subject"}),h.jsxs(_t,{value:N,onValueChange:T,disabled:!E,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Subject"})}),h.jsx(wt,{children:m.filter(K=>{const Q=p.find(V=>V.id===E),ie=d.find(V=>V.id===(Q==null?void 0:Q.batch_id));return K.faculty_id===(ie==null?void 0:ie.faculty_id)&&K.semester_level===(ie==null?void 0:ie.current_semester)}).map(K=>h.jsxs(it,{value:K.id,children:[K.name," (",K.code,")"]},K.id))})]})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Teacher"}),h.jsxs(_t,{value:y,onValueChange:x,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Select Teacher"})}),h.jsx(wt,{children:s.map(K=>{var Q;return h.jsxs(it,{value:K.id,children:[(Q=K.profile)==null?void 0:Q.name," (",K.employee_id||"No ID",")"]},K.id)})})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Day of Week"}),h.jsxs(_t,{value:A,onValueChange:P,children:[h.jsx(bt,{children:h.jsx(Ct,{placeholder:"Select Day"})}),h.jsx(wt,{children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(K=>h.jsx(it,{value:K,children:K},K))})]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Start Time"}),h.jsx(lt,{type:"time",value:I,onChange:K=>R(K.target.value)})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"End Time"}),h.jsx(lt,{type:"time",value:D,onChange:K=>M(K.target.value)})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"Room No"}),h.jsx(lt,{value:$,onChange:K=>j(K.target.value),placeholder:"e.g. 302"})]})]}),h.jsx(we,{onClick:ne,className:"w-full mt-2",children:"Create Routine"})]})]})]})]})]}),h.jsx("div",{className:"rounded-md border bg-card overflow-x-auto",children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{className:"w-[100px]",children:"Day"}),h.jsx(Je,{className:"w-[100px]",children:"Time"}),h.jsx(Je,{children:"Subject"}),h.jsx(Je,{className:"hidden md:table-cell",children:"Teacher"}),h.jsx(Je,{className:"hidden sm:table-cell",children:"Batch/Section"}),h.jsx(Je,{className:"hidden lg:table-cell",children:"Room"}),h.jsx(Je,{className:"text-right",children:"Actions"})]})}),h.jsxs(wi,{children:[t.filter(K=>{var Q,ie,V,q,de,he,ae,le,ge,_e;if(O!=="all"&&((ie=(Q=K.section)==null?void 0:Q.batch)==null?void 0:ie.faculty_id)!==O||G!=="all"&&((V=K.section)==null?void 0:V.batch_id)!==G)return!1;if(W){const Re=W.toLowerCase(),He=((de=(q=K.course_catalog)==null?void 0:q.subject_name)==null?void 0:de.toLowerCase())||"",Me=((ae=(he=K.course_catalog)==null?void 0:he.subject_code)==null?void 0:ae.toLowerCase())||"",st=((_e=(ge=(le=K.teacher)==null?void 0:le.profile)==null?void 0:ge.name)==null?void 0:_e.toLowerCase())||"";return He.includes(Re)||Me.includes(Re)||st.includes(Re)}return!0}).map(K=>{var Q,ie,V,q,de,he,ae,le,ge;return h.jsxs(Mt,{children:[h.jsx(Ge,{className:"font-medium",children:K.day_of_week}),h.jsxs(Ge,{children:[(Q=K.start_time)==null?void 0:Q.slice(0,5)," - ",(ie=K.end_time)==null?void 0:ie.slice(0,5)]}),h.jsx(Ge,{children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{children:(V=K.course_catalog)==null?void 0:V.subject_name}),h.jsx("span",{className:"text-xs text-muted-foreground",children:(q=K.course_catalog)==null?void 0:q.subject_code})]})}),h.jsx(Ge,{children:(he=(de=K.teacher)==null?void 0:de.profile)==null?void 0:he.name}),h.jsxs(Ge,{children:[(le=(ae=K.section)==null?void 0:ae.batch)==null?void 0:le.name," - ",(ge=K.section)==null?void 0:ge.name]}),h.jsx(Ge,{children:K.room_id||"N/A"}),h.jsx(Ge,{className:"text-right",children:h.jsx(we,{variant:"ghost",size:"sm",onClick:()=>Z(K.id),children:h.jsx(pc,{className:"w-4 h-4 text-destructive"})})})]},K.id)}),t.length===0&&!r&&h.jsx(Mt,{children:h.jsx(Ge,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No routines found."})}),r&&h.jsx(Mt,{children:h.jsx(Ge,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Loading schedules..."})})]})]})})]})},P6e=()=>{var k,N,T,A,P,I,R,D,M,$;const[e,t]=_.useState(null),[n,r]=_.useState(()=>{const j=localStorage.getItem("cache_admin_attendance");return j?JSON.parse(j):[]}),[a,i]=_.useState(!n.length),[o,s]=_.useState([]),[l,c]=_.useState([]),[u,d]=_.useState([]),[f,p]=_.useState("all"),[v,m]=_.useState("all"),[g,y]=_.useState("all"),[x,b]=_.useState(""),w=n.reduce((j,O)=>{const B=`${O.date}_${O.course_catalog_id}_${O.section_id}`;let G=j.find(L=>L.id===B);return G||(G={id:B,date:O.date,created_at:O.created_at,subject:O.course_catalog,section:O.section,students:[]},j.push(G)),G.students.push({id:O.id,student:O.student,status:O.status,created_at:O.created_at}),j},[]);_.useEffect(()=>{(async()=>{try{const O=await Ce.getFaculties();s(O)}catch(O){console.error("Failed to load faculties",O)}})()},[]),_.useEffect(()=>{(async()=>{if(f!=="all"){const O=await Ce.getBatches(f);c(O)}else c([]);m("all")})()},[f]),_.useEffect(()=>{(async()=>{if(v!=="all"){const O=await Ce.getSections(v);d(O)}else d([]);y("all")})()},[v]);const S=async()=>{i(!0);try{const j={};f!=="all"&&(j.faculty_id=f),v!=="all"&&(j.batch_id=v),g!=="all"&&(j.section_id=g),x&&(j.date=x);const O=await Ce.getAttendanceHistory(j);r(O||[])}catch{at.error("Failed to load attendance records")}finally{i(!1)}};_.useEffect(()=>{S()},[f,v,g,x]);const C=()=>{p("all"),m("all"),y("all"),b("")},E=j=>{if(!j)return"N/A";const O=new Date(j);return isNaN(O.getTime())?"N/A":O.toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-black tracking-tight text-slate-900",children:"Attendance Sessions"}),h.jsx("p",{className:"text-slate-500 font-medium",children:"Grouped viewing of daily attendance logs."})]}),(f!=="all"||v!=="all"||g!=="all"||x)&&h.jsxs(we,{variant:"ghost",size:"sm",onClick:C,className:"text-slate-500 hover:text-rose-500 hover:bg-rose-50 rounded-xl px-4",children:[h.jsx(Eb,{className:"w-4 h-4 mr-2"}),"Clear All Filters"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 bg-white p-5 rounded-[2.5rem] border border-slate-100 shadow-sm relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-2xl -mr-16 -mt-16"}),h.jsxs("div",{className:"space-y-2 relative z-10",children:[h.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Department"}),h.jsxs(_t,{value:f,onValueChange:p,children:[h.jsx(bt,{className:"bg-slate-50 border-none rounded-2xl h-11 focus:ring-primary/20",children:h.jsx(Ct,{placeholder:"All Departments"})}),h.jsxs(wt,{className:"rounded-2xl border-slate-100 shadow-xl max-h-[300px]",children:[h.jsx(it,{value:"all",children:"All Departments"}),o.map(j=>h.jsx(it,{value:j.id,children:j.name},j.id))]})]})]}),h.jsxs("div",{className:"space-y-2 relative z-10",children:[h.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Academic Batch"}),h.jsxs(_t,{value:v,onValueChange:m,disabled:f==="all",children:[h.jsx(bt,{className:"bg-slate-50 border-none rounded-2xl h-11 focus:ring-primary/20",children:h.jsx(Ct,{placeholder:"Select Batch"})}),h.jsxs(wt,{className:"rounded-2xl border-slate-100 shadow-xl max-h-[300px]",children:[h.jsx(it,{value:"all",children:"All Batches"}),l.map(j=>h.jsx(it,{value:j.id,children:j.name},j.id))]})]})]}),h.jsxs("div",{className:"space-y-2 relative z-10",children:[h.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Section"}),h.jsxs(_t,{value:g,onValueChange:y,disabled:v==="all",children:[h.jsx(bt,{className:"bg-slate-50 border-none rounded-2xl h-11 focus:ring-primary/20",children:h.jsx(Ct,{placeholder:"Select Section"})}),h.jsxs(wt,{className:"rounded-2xl border-slate-100 shadow-xl max-h-[300px]",children:[h.jsx(it,{value:"all",children:"All Sections"}),u.map(j=>h.jsx(it,{value:j.id,children:j.name},j.id))]})]})]}),h.jsxs("div",{className:"space-y-2 relative z-10",children:[h.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Session Date"}),h.jsxs("div",{className:"relative",children:[h.jsx(lt,{type:"date",value:x,onChange:j=>b(j.target.value),className:"bg-slate-50 border-none rounded-2xl h-11 focus:ring-primary/20 pl-10"}),h.jsx(to,{className:"w-4 h-4 absolute left-3.5 top-3.5 text-slate-400"})]})]})]}),h.jsx("div",{className:"rounded-[2.5rem] border border-slate-50 bg-white shadow-sm overflow-hidden min-h-[400px]",children:h.jsxs(xi,{children:[h.jsx(bi,{className:"bg-slate-50/50",children:h.jsxs(Mt,{className:"hover:bg-transparent border-slate-50",children:[h.jsx(Je,{className:"font-black text-slate-400 uppercase text-[10px] tracking-widest py-6 pl-8",children:"Date & Time"}),h.jsx(Je,{className:"font-black text-slate-400 uppercase text-[10px] tracking-widest py-6",children:"Course Information"}),h.jsx(Je,{className:"font-black text-slate-400 uppercase text-[10px] tracking-widest py-6",children:"Academic Group"}),h.jsx(Je,{className:"font-black text-slate-400 uppercase text-[10px] tracking-widest py-6",children:"Participation"}),h.jsx(Je,{className:"font-black text-slate-400 uppercase text-[10px] tracking-widest py-6 text-center",children:"Actions"})]})}),h.jsxs(wi,{children:[a?h.jsx(Mt,{children:h.jsx(Ge,{colSpan:5,className:"text-center py-32",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-primary border-t-transparent animate-spin shadow-lg"}),h.jsx("span",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em] animate-pulse",children:"Scanning Logs"})]})})}):w.map(j=>{var O,B,G,L,W,J,ee,ne;return h.jsxs(Mt,{className:"hover:bg-slate-50/50 border-slate-50 transition-colors group",children:[h.jsx(Ge,{className:"py-5 pl-8",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-bold text-slate-700",children:E(j.date)}),h.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-tighter",children:j.created_at?new Date(j.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"})]})}),h.jsx(Ge,{children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-black text-slate-800 text-sm leading-tight",children:(O=j.subject)==null?void 0:O.subject_name}),h.jsx("span",{className:"text-[10px] text-primary uppercase font-black mt-0.5",children:(B=j.subject)==null?void 0:B.subject_code})]})}),h.jsx(Ge,{children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx(yt,{variant:"outline",className:"w-fit bg-slate-100 border-none text-slate-500 font-bold text-[9px] px-2 py-0 rounded-md",children:(W=(L=(G=j.section)==null?void 0:G.batch)==null?void 0:L.faculty)==null?void 0:W.name}),h.jsxs("span",{className:"text-xs text-slate-400 mt-1 font-bold",children:["Section ",(J=j.section)==null?void 0:J.name,"  ",(ne=(ee=j.section)==null?void 0:ee.batch)==null?void 0:ne.name]})]})}),h.jsx(Ge,{children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(yt,{className:"bg-emerald-500 text-white font-black text-[10px] px-2 py-0.5 rounded-lg border-none shadow-sm",children:[j.students.filter(Z=>Z.status==="present").length," Present"]}),h.jsx("span",{className:"text-[10px] text-slate-300 font-bold",children:"/"}),h.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:[j.students.length," Total"]})]})}),h.jsx(Ge,{className:"text-center",children:h.jsx(we,{variant:"outline",size:"sm",onClick:()=>t(j),className:"rounded-xl border-slate-200 text-slate-600 hover:bg-slate-900 hover:text-white hover:border-slate-900 transition-all font-black text-[10px] uppercase tracking-widest px-4 h-9",children:"View Attendees"})})]},j.id)}),!a&&w.length===0&&h.jsx(Mt,{children:h.jsx(Ge,{colSpan:5,className:"text-center py-32",children:h.jsxs("div",{className:"flex flex-col items-center gap-3 opacity-20",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-[2rem] flex items-center justify-center",children:h.jsx(D2,{className:"w-8 h-8 text-slate-400"})}),h.jsx("span",{className:"text-slate-500 font-black uppercase text-xs tracking-widest",children:"No matching sessions"})]})})})]})]})}),h.jsx(Tl,{open:!!e,onOpenChange:j=>!j&&t(null),children:h.jsxs(is,{className:"w-[calc(100%-2rem)] max-w-[580px] h-[780px] max-h-[92vh] flex flex-col rounded-[3rem] border-none shadow-2xl overflow-hidden p-0 bg-white",children:[h.jsxs(os,{className:"p-10 pb-12 bg-[#0F172A] text-white flex flex-col items-center shrink-0 relative",children:[h.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[150%] h-full bg-gradient-to-b from-primary/20 to-transparent blur-[80px] pointer-events-none opacity-30"}),h.jsx(ss,{className:"text-2xl font-black tracking-tight leading-tight text-center px-8 relative z-10",children:(k=e==null?void 0:e.subject)==null?void 0:k.subject_name}),h.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary/80 mt-2 relative z-10",children:((A=(T=(N=e==null?void 0:e.section)==null?void 0:N.batch)==null?void 0:T.faculty)==null?void 0:A.name)||"Department"}),h.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2.5 mt-5 relative z-10",children:[h.jsx(yt,{className:"bg-primary text-white font-black text-[9px] uppercase tracking-tighter rounded-lg px-3 py-1 border-none shadow-lg shadow-primary/20",children:(P=e==null?void 0:e.subject)==null?void 0:P.subject_code}),h.jsx(yt,{variant:"outline",className:"border-slate-700 bg-slate-800/50 text-slate-300 font-bold text-[9px] uppercase px-3 py-1 rounded-lg",children:(R=(I=e==null?void 0:e.section)==null?void 0:I.batch)==null?void 0:R.name}),h.jsxs(yt,{className:"bg-slate-800/80 text-primary border-none font-bold text-[9px] uppercase px-3 py-1 rounded-lg",children:["Sem ",(M=(D=e==null?void 0:e.section)==null?void 0:D.batch)==null?void 0:M.current_semester]})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-8 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 font-black uppercase tracking-widest",children:[h.jsx(to,{className:"w-3.5 h-3.5 text-primary/60"}),e?E(e.date):"N/A"]}),h.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-800"}),h.jsx("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 font-black uppercase tracking-widest",children:h.jsxs(yt,{variant:"outline",className:"border-slate-800 text-slate-400 font-bold px-2 py-0 h-5 text-[9px] rounded-md",children:["Section ",($=e==null?void 0:e.section)==null?void 0:$.name]})})]})]}),h.jsx("div",{className:"px-10 -mt-12 relative z-20 shrink-0",children:h.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-[0_20px_40px_rgba(0,0,0,0.08)] border border-slate-50 flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-6",children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Attendance Status"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 shadow-sm"}),h.jsx("span",{className:"text-xl font-black text-slate-900",children:e==null?void 0:e.students.filter(j=>j.status==="present").length}),h.jsx("span",{className:"text-[10px] font-bold text-slate-400 mt-1 uppercase",children:"Present"})]}),h.jsx("div",{className:"w-px h-8 bg-slate-100"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-rose-500 shadow-sm"}),h.jsx("span",{className:"text-xl font-black text-slate-900",children:e==null?void 0:e.students.filter(j=>j.status==="absent").length}),h.jsx("span",{className:"text-[10px] font-bold text-slate-400 mt-1 uppercase",children:"Absent"})]})]})]})}),h.jsxs("div",{className:"flex flex-col items-end gap-1",children:[h.jsxs("span",{className:"text-2xl font-black text-primary",children:[e&&e.students.length>0?Math.round(e.students.filter(j=>j.status==="present").length/e.students.length*100):0,"%"]}),h.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Participation Rate"})]})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto px-10 pb-8 pt-0 scrollbar-hide",children:h.jsx("div",{className:"space-y-4",children:e==null?void 0:e.students.map(j=>{var O,B,G,L,W,J;return h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-[2rem] bg-slate-50 border border-slate-100/30 hover:bg-white hover:shadow-xl hover:scale-[1.01] transition-all duration-500 group",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white border border-slate-100 flex items-center justify-center font-black text-slate-400 text-sm shadow-sm group-hover:bg-[#0F172A] group-hover:text-white group-hover:border-[#0F172A] transition-all duration-500",children:(G=(B=(O=j.student)==null?void 0:O.profile)==null?void 0:B.name)==null?void 0:G.charAt(0)}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-black text-slate-800 text-sm leading-none transition-colors group-hover:text-slate-950",children:(W=(L=j.student)==null?void 0:L.profile)==null?void 0:W.name}),h.jsx("div",{className:"flex items-center gap-2 mt-2",children:h.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider bg-slate-100 px-2 py-0.5 rounded-md",children:(J=j.student)==null?void 0:J.student_id})})]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-2",children:[h.jsx(yt,{className:`rounded-xl px-4 py-1.5 font-black text-[9px] uppercase tracking-widest border-none shadow-md ${j.status==="present"?"bg-emerald-500 text-white shadow-emerald-200/50":"bg-rose-500 text-white shadow-rose-200/50"}`,children:j.status}),h.jsxs("span",{className:"text-[9px] text-slate-400 font-black uppercase tracking-tighter flex items-center gap-1.5 opacity-60 group-hover:opacity-100 transition-opacity",children:[h.jsx(D2,{className:"w-3 h-3 text-slate-300"}),j.created_at?new Date(j.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"]})]})]},j.id)})})})]})})]})};var n1="Switch",[j6e,_Ve]=Sa(n1),[O6e,R6e]=j6e(n1),K9=_.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:c,form:u,...d}=e,[f,p]=_.useState(null),v=ft(t,b=>p(b)),m=_.useRef(!1),g=f?u||!!f.closest("form"):!0,[y,x]=uo({prop:a,defaultProp:i??!1,onChange:c,caller:n1});return h.jsxs(O6e,{scope:n,checked:y,disabled:s,children:[h.jsx(Fe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":J9(y),"data-disabled":s?"":void 0,disabled:s,value:l,...d,ref:v,onClick:ye(e.onClick,b=>{x(w=>!w),g&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),g&&h.jsx(Q9,{control:f,bubbles:!m.current,name:r,value:l,checked:y,required:o,disabled:s,form:u,style:{transform:"translateX(-100%)"}})]})});K9.displayName=n1;var X9="SwitchThumb",Y9=_.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=R6e(X9,n);return h.jsx(Fe.span,{"data-state":J9(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Y9.displayName=X9;var I6e="SwitchBubbleInput",Q9=_.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=_.useRef(null),s=ft(o,i),l=_T(n),c=PN(t);return _.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const v=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(v)}},[l,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q9.displayName=I6e;function J9(e){return e?"checked":"unchecked"}var Z9=K9,D6e=Y9;const Wx=_.forwardRef(({className:e,...t},n)=>h.jsx(Z9,{className:Te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:h.jsx(D6e,{className:Te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Wx.displayName=Z9.displayName;const M6e=()=>{const{toast:e}=ds(),[t,n]=_.useState({systemName:"University Attendance System",branding:"University of Technology",maintenanceMode:!1,faceRecognitionEnabled:!0}),r=()=>{e({title:"Settings saved",description:"System configuration updated successfully."})};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"System Settings"}),h.jsx("p",{className:"text-muted-foreground",children:"Configure general system preferences."})]}),h.jsxs("div",{className:"grid gap-6",children:[h.jsxs(Et,{children:[h.jsxs(zn,{children:[h.jsx(rr,{children:"General Information"}),h.jsx(zo,{children:"Basic system identity and branding."})]}),h.jsxs(Ut,{className:"space-y-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"System Name"}),h.jsx(lt,{value:t.systemName,onChange:a=>n({...t,systemName:a.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{children:"University Branding"}),h.jsx(lt,{value:t.branding,onChange:a=>n({...t,branding:a.target.value})})]})]})]}),h.jsxs(Et,{className:"border-destructive/20",children:[h.jsxs(zn,{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(une,{className:"h-5 w-5 text-destructive"}),h.jsx(rr,{children:"System Control"})]}),h.jsx(zo,{children:"Advanced controls and maintenance."})]}),h.jsxs(Ut,{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"space-y-0.5",children:[h.jsx(We,{children:"Maintenance Mode"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Disable all access except for admins."})]}),h.jsx(Wx,{checked:t.maintenanceMode,onCheckedChange:a=>n({...t,maintenanceMode:a})})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"space-y-0.5",children:[h.jsx(We,{children:"Face Recognition"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable global face recognition features."})]}),h.jsx(Wx,{checked:t.faceRecognitionEnabled,onCheckedChange:a=>n({...t,faceRecognitionEnabled:a})})]})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsxs(we,{onClick:r,className:"gap-2",children:[h.jsx(one,{className:"w-4 h-4"}),"Save Changes"]})})]})]})},$6e=()=>{var c;const{logout:e,user:t}=kr(),n=Ha(),r=vo(),[a,i]=_.useState(!1),o=()=>{e(),n("/")},s=[{icon:M2,label:"Dashboard",path:"/teacher/dashboard"},{icon:Fa,label:"My Classes",path:"/teacher/classes"},{icon:Gte,label:"Routine",path:"/teacher/routine"},{icon:Bp,label:"Take Attendance",path:"/teacher/take-attendance"},{icon:nne,label:"History",path:"/teacher/past-attendance"}],l=({mobile:u=!1})=>h.jsxs("div",{className:"flex flex-col h-full bg-white text-slate-900",children:[h.jsx("div",{className:"h-20 flex items-center px-8 border-b border-slate-100",children:h.jsxs("div",{children:[h.jsx("h1",{className:"font-black text-xl tracking-tight leading-none text-slate-900",children:"AttendU"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:"Teacher Portal"})]})}),h.jsxs("nav",{className:"flex-1 px-4 py-8 space-y-2 overflow-y-auto",children:[h.jsx("div",{className:"mb-4 px-2",children:h.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:"Main Menu"})}),s.map(d=>h.jsx(Js,{to:d.path,onClick:()=>u&&i(!1),className:({isActive:f})=>`group relative flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-300 ${f?"bg-slate-900 text-white shadow-xl shadow-slate-200":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:({isActive:f})=>h.jsxs(h.Fragment,{children:[h.jsx(d.icon,{className:`w-5 h-5 transition-colors ${f?"text-white":"text-slate-400 group-hover:text-slate-900"}`}),d.label,f&&h.jsx(ef,{className:"ml-auto w-4 h-4 text-white/50"})]})},d.path))]}),h.jsx("div",{className:"p-6 border-t border-slate-100",children:h.jsxs(we,{variant:"ghost",className:"w-full justify-start gap-3 text-slate-500 hover:text-red-600 hover:bg-red-50 transition-all rounded-xl h-12",onClick:o,children:[h.jsx(bd,{className:"w-5 h-5"}),"Sign Out"]})})]});return h.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] text-slate-900 font-sans selection:bg-primary/20",children:[h.jsx("aside",{className:"hidden lg:flex w-72 border-r border-slate-200 bg-white flex-col fixed h-full z-30",children:h.jsx(l,{})}),h.jsx(X8,{open:a,onOpenChange:i,children:h.jsxs(IA,{side:"left",className:"w-72 p-0 flex flex-col bg-white border-r border-slate-100",children:[h.jsx(Q8,{className:"sr-only",children:"Menu"}),h.jsx(J8,{className:"sr-only",children:"Navigation"}),h.jsx(l,{mobile:!0})]})}),h.jsxs("div",{className:"flex-1 lg:ml-72 flex flex-col min-h-screen relative z-10 transition-all duration-300",children:[h.jsxs("header",{className:"h-20 border-b border-slate-100 bg-white/80 backdrop-blur-md sticky top-0 z-20 px-4 sm:px-8 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(we,{variant:"ghost",size:"icon",className:"lg:hidden text-slate-500 hover:bg-slate-50",onClick:()=>i(!0),children:h.jsx(V5,{className:"w-6 h-6"})}),h.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3",children:h.jsx("h2",{className:"text-lg font-bold text-slate-800 tracking-tight hidden sm:block",children:((c=s.find(u=>u.path===r.pathname))==null?void 0:c.label)||"Overview"})})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"hidden md:flex items-center max-w-md relative mr-4",children:[h.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 bg-slate-50 border-none rounded-xl py-2 pl-10 text-sm focus:ring-2 focus:ring-primary/20 text-slate-600 outline-none transition-all hidden lg:block"})]}),h.jsxs(we,{variant:"ghost",size:"icon",className:"rounded-xl text-slate-500 relative hover:bg-slate-50",children:[h.jsx(z5,{className:"w-5 h-5"}),h.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]}),h.jsxs(Bx,{children:[h.jsx(Ux,{asChild:!0,children:h.jsxs(we,{variant:"ghost",className:"h-auto py-2 px-3 hover:bg-slate-50 rounded-xl flex items-center gap-3 border border-transparent hover:border-slate-100 transition-all",children:[h.jsxs("div",{className:"text-right hidden sm:block",children:[h.jsx("p",{className:"text-sm font-black text-slate-800 leading-none",children:(t==null?void 0:t.name)||"Instructor"}),h.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase mt-1 tracking-wider",children:"Faculty Portal"})]}),h.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-slate-400",children:h.jsx(mc,{className:"w-4 h-4"})})]})}),h.jsxs(Km,{className:"w-56 rounded-xl border-slate-100 shadow-xl bg-white",align:"end",children:[h.jsx(Xm,{children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-bold text-slate-900",children:(t==null?void 0:t.name)||"Instructor"}),h.jsx("span",{className:"text-xs text-slate-500 font-normal",children:"Faculty Member"})]})}),h.jsx(zx,{}),h.jsxs(Qi,{className:"cursor-pointer hover:bg-slate-50",children:[h.jsx(mc,{className:"mr-2 h-4 w-4"})," Profile"]}),h.jsx(zx,{}),h.jsxs(Qi,{className:"text-red-500 cursor-pointer hover:bg-red-50",onClick:o,children:[h.jsx(bd,{className:"mr-2 h-4 w-4"})," Sign Out"]})]})]})]})]}),h.jsx("main",{className:"flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto pb-24 lg:pb-8",children:h.jsxs("div",{className:"max-w-7xl mx-auto w-full space-y-8",children:[h.jsx(cb,{}),h.jsx("div",{className:"mt-12 pt-8 border-t border-slate-100",children:h.jsx(Gf,{variant:"light"})})]})})]}),h.jsxs("nav",{className:"lg:hidden fixed bottom-6 left-6 right-6 z-50 h-16 bg-slate-900 rounded-2xl shadow-2xl flex items-center justify-around px-4 border border-white/10 backdrop-blur-lg",children:[h.jsxs(Js,{to:"/teacher/dashboard",className:({isActive:u})=>`flex flex-col items-center gap-1 transition-all duration-300 ${u?"text-primary scale-110":"text-slate-400 hover:text-white"}`,children:[h.jsx(M2,{className:"w-6 h-6"}),h.jsx("span",{className:"text-[10px] font-bold",children:"Home"})]}),h.jsxs("div",{className:"relative -top-8 px-2",children:[h.jsx("button",{onClick:()=>n("/teacher/take-attendance"),className:"w-14 h-14 bg-primary rounded-2xl shadow-xl shadow-primary/40 flex items-center justify-center text-white active:scale-95 transition-transform",children:h.jsx(Bp,{className:"w-8 h-8"})}),h.jsx("span",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-[10px] font-bold text-slate-400 whitespace-nowrap",children:"Attend"})]}),h.jsxs(Js,{to:"/teacher/classes",className:({isActive:u})=>`flex flex-col items-center gap-1 transition-all duration-300 ${u?"text-primary scale-110":"text-slate-400 hover:text-white"}`,children:[h.jsx(Fa,{className:"w-6 h-6"}),h.jsx("span",{className:"text-[10px] font-bold",children:"Classes"})]})]})]})},F6e=()=>{const{user:e}=kr(),{toast:t}=ds(),[n,r]=_.useState({assignedCount:0,todayCount:0,attendanceTaken:0}),[a,i]=_.useState([]),[o,s]=_.useState(!0),l=async()=>{if(!(e!=null&&e.teacher_id)){console.warn(" Dashboard: No teacher_id found in user context"),s(!1);return}s(!0);try{const d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],[f,p]=await Promise.all([Ce.getRoutines({teacher_id:e.teacher_id,day:d}),Ce.getTeacherAssignments(e.teacher_id)]);i(f||[]),r({assignedCount:(p==null?void 0:p.length)||0,todayCount:(f==null?void 0:f.length)||0,attendanceTaken:0})}catch(u){console.error("Dashboard fetch error",u),t({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{s(!1)}};_.useEffect(()=>{l()},[e==null?void 0:e.teacher_id]);const c=({title:u,value:d,icon:f,colorClass:p,bgClass:v,delay:m})=>h.jsx(Et,{className:"border-none shadow-sm bg-white rounded-3xl group hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-in fade-in slide-in-from-bottom-5",style:{animationDelay:m},children:h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:`w-12 h-12 ${v} rounded-2xl flex items-center justify-center mb-4 ring-4 ring-white shadow-sm transition-transform group-hover:scale-110`,children:h.jsx(f,{className:`w-6 h-6 ${p}`})}),h.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:u}),h.jsx("p",{className:"text-3xl font-black text-slate-900 mt-1",children:d})]})});return h.jsxs("div",{className:"space-y-8 pb-6",children:[h.jsxs("div",{className:"relative overflow-hidden group rounded-[2.5rem]",children:[h.jsx("div",{className:"absolute inset-0 bg-primary/5 -z-10 transition-colors group-hover:bg-primary/10"}),h.jsxs("div",{className:"px-8 py-10 sm:px-12 flex flex-col md:flex-row justify-between items-start md:items-center gap-8",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx(yt,{className:"bg-primary text-white hover:bg-primary border-none text-[10px] font-bold uppercase tracking-widest px-3 py-1",children:"Academic Session 2024"}),h.jsx("h1",{className:"text-4xl sm:text-5xl font-black text-slate-900 tracking-tight",children:"Instructor Dashboard"}),h.jsxs("p",{className:"text-slate-500 font-medium text-lg leading-relaxed max-w-md",children:["Welcome back, ",h.jsx("span",{className:"text-slate-900 font-bold",children:e==null?void 0:e.name}),". You have ",h.jsxs("span",{className:"font-black text-primary",children:[n.todayCount," classes"]})," scheduled for today."]})]}),h.jsx("div",{className:"hidden md:block",children:h.jsx("div",{className:"w-20 h-20 bg-white rounded-3xl flex items-center justify-center shadow-xl shadow-slate-200 rotate-3 transition-transform group-hover:rotate-6",children:h.jsx(BN,{className:"w-10 h-10 text-primary"})})})]})]}),h.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[h.jsx(c,{title:"Total Classes",value:n.assignedCount,icon:Fa,colorClass:"text-blue-600",bgClass:"bg-blue-50",delay:"0ms"}),h.jsx(c,{title:"Scheduled Today",value:n.todayCount,icon:to,colorClass:"text-purple-600",bgClass:"bg-purple-50",delay:"100ms"}),h.jsx(c,{title:"Sessions Taken",value:n.attendanceTaken,icon:xd,colorClass:"text-green-600",bgClass:"bg-green-50",delay:"200ms"})]}),h.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-10 duration-700 delay-300",children:[h.jsxs("div",{className:"flex items-center justify-between px-2",children:[h.jsxs("h2",{className:"text-2xl font-black text-slate-900 flex items-center gap-2",children:[h.jsx(tp,{className:"w-6 h-6 text-primary"}),"Today's Schedule"]}),h.jsx("span",{className:"text-xs font-bold px-3 py-1 bg-slate-100 rounded-full text-slate-500 uppercase tracking-wide",children:new Date().toLocaleDateString("en-US",{weekday:"long"})})]}),h.jsx("div",{className:"grid gap-4",children:o?h.jsx("div",{className:"flex flex-col gap-4",children:[1,2].map(u=>h.jsx("div",{className:"h-32 bg-slate-100 animate-pulse rounded-3xl"},u))}):a.length>0?a.map((u,d)=>{var f,p,v,m,g,y,x;return h.jsxs("div",{className:"group relative flex flex-col sm:flex-row items-start sm:items-center gap-6 p-6 bg-white border border-slate-100 rounded-3xl hover:shadow-xl hover:shadow-slate-200 hover:-translate-y-1 transition-all duration-300 cursor-default",style:{animationDelay:`${d*100}ms`},children:[h.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[90px] bg-slate-50 rounded-2xl p-3 border border-slate-100 group-hover:bg-primary/5 group-hover:border-primary/20 transition-colors",children:[h.jsx("span",{className:"text-xl font-black text-slate-900",children:(f=u.start_time)==null?void 0:f.slice(0,5)}),h.jsx("div",{className:"h-0.5 w-4 bg-slate-200 my-1 group-hover:bg-primary/20"}),h.jsx("span",{className:"text-sm font-bold text-slate-500",children:(p=u.end_time)==null?void 0:p.slice(0,5)})]}),h.jsxs("div",{className:"flex-1 space-y-2",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(yt,{variant:"outline",className:"border-slate-200 text-slate-500 text-[10px] uppercase font-bold tracking-wider",children:(v=u.course_catalog)==null?void 0:v.subject_code})}),h.jsx("h3",{className:"text-xl font-bold text-slate-900 group-hover:text-primary transition-colors",children:(m=u.course_catalog)==null?void 0:m.subject_name}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm font-medium text-slate-500",children:[h.jsxs("span",{className:"flex items-center gap-1.5",children:[h.jsx(Fa,{className:"w-4 h-4"}),(y=(g=u.section)==null?void 0:g.batch)==null?void 0:y.name]}),h.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),h.jsxs("span",{className:"text-slate-700",children:["Section ",(x=u.section)==null?void 0:x.name]})]})]}),u.room_id&&h.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-50 rounded-xl text-slate-600 font-bold border border-slate-100",children:[h.jsx(a0,{className:"w-4 h-4 text-red-500"}),h.jsx("span",{children:u.room_id})]}),h.jsx("div",{className:"hidden sm:flex items-center opacity-0 group-hover:opacity-100 transition-opacity -translate-x-4 group-hover:translate-x-0 duration-300",children:h.jsx(we,{size:"icon",className:"rounded-full h-10 w-10",children:h.jsx(Vte,{className:"w-5 h-5"})})})]},u.id)}):h.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border-2 border-dashed border-slate-100 rounded-[3rem]",children:[h.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-50 flex items-center justify-center mb-6",children:h.jsx(cne,{className:"w-10 h-10 text-slate-300"})}),h.jsx("p",{className:"text-slate-400 font-bold text-lg",children:"No classes scheduled for today."}),h.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Enjoy your free time!"})]})})]})]})},L6e=()=>{var ne,Z,K,Q,ie;const{user:e}=kr(),{toast:t}=ds(),[n,r]=_.useState([]),[a,i]=_.useState(null),[o,s]=_.useState([]),[l,c]=_.useState(!0),[u,d]=_.useState(!1),[f,p]=_.useState(!1),[v,m]=_.useState(!1),[g,y]=_.useState(""),[x,b]=_.useState([]),[w,S]=_.useState([]),[C,E]=_.useState([]),[k,N]=_.useState([]),[T,A]=_.useState(""),[P,I]=_.useState(""),[R,D]=_.useState(""),[M,$]=_.useState("");_.useEffect(()=>{j(),O()},[e==null?void 0:e.teacher_id]);const j=async()=>{if(!(e!=null&&e.teacher_id)){console.warn(" Batches: No teacher_id found"),c(!1);return}c(!0);try{const V=await Ce.getTeacherAssignments(e.teacher_id);r(V||[])}catch{t({title:"Error",description:"Failed to load assigned classes",variant:"destructive"})}finally{c(!1)}},O=async()=>{try{const[V,q,de]=await Promise.all([Ce.getFaculties(),Ce.getBatches(),Ce.getSections()]);b(V||[]),S(q||[]),E(de||[])}catch(V){console.error("Failed to load structure",V)}},B=w.filter(V=>V.faculty_id===T),G=C.filter(V=>V.batch_id===P);_.useEffect(()=>{if(P){const V=w.find(q=>q.id===P);V&&(async()=>{try{const de=await Ce.getCourseCatalog(V.faculty_id,V.current_semester);N(de||[])}catch(de){console.error("Failed to fetch catalog subjects",de),N([])}})()}else N([])},[P,w]);const L=async()=>{if(!M||!R||!(e!=null&&e.teacher_id)){at.error("Please select all fields");return}if(n.some(q=>q.course_catalog_id===M&&q.section_id===R)){at.error("You are already assigned to this subject/section");return}m(!0);try{await Ce.createTeacherAssignment(e.teacher_id,R,M),at.success("Assignment added!"),p(!1),J(),j()}catch(q){console.error(q),at.error(q.message||"Failed to add assignment")}finally{m(!1)}},W=async V=>{if(confirm("Remove this assignment?"))try{await Ce.deleteTeacherAssignment(V),at.success("Assignment removed"),j()}catch{at.error("Failed to remove assignment")}},J=()=>{A(""),I(""),D(""),$("")},ee=async V=>{i(V),d(!0);try{const q=await Ce.getStudentsBySection(V.section_id);s(q||[])}catch{t({title:"Error",description:"Failed to load students",variant:"destructive"})}finally{d(!1)}};return h.jsxs("div",{className:"space-y-4 md:space-y-6 pb-6",children:[h.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground px-1 mb-2",children:[h.jsx(sne,{className:"w-3 h-3"}),h.jsx("span",{children:"Teacher Portal"}),h.jsx(ef,{className:"w-3 h-3"}),h.jsx("span",{className:"text-foreground font-medium",children:"My Classes"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 px-1",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-br from-foreground to-foreground/50 bg-clip-text text-transparent",children:"My Classes"}),h.jsx("p",{className:"text-sm md:text-base text-muted-foreground font-medium",children:"Manage your academic subjects and view student directories"})]}),h.jsxs(Tl,{open:f,onOpenChange:p,children:[h.jsx(Xw,{asChild:!0,children:h.jsxs(we,{className:"gap-2 w-full sm:w-auto shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all font-semibold h-11",children:[h.jsx(Cb,{className:"w-5 h-5"}),h.jsx("span",{children:"Add New Assignment"})]})}),h.jsxs(is,{className:"max-w-md p-0 overflow-hidden border-none shadow-2xl",children:[h.jsx("div",{className:"p-6 bg-gradient-to-br from-primary/10 via-background to-background border-b",children:h.jsxs(os,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[h.jsx("div",{className:"p-2 rounded-lg bg-primary/20",children:h.jsx(ep,{className:"w-5 h-5 text-primary"})}),h.jsx(ss,{className:"text-xl font-bold",children:"Add Subject Assignment"})]}),h.jsx(Hm,{className:"text-sm",children:"Select the department and subject you want to teach"})]})}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"text-sm font-semibold",children:"Department"}),h.jsxs(_t,{value:T,onValueChange:V=>{A(V),I(""),D(""),$("")},children:[h.jsx(bt,{className:"h-11 bg-muted/30 border-border/50",children:h.jsx(Ct,{placeholder:"Select Department"})}),h.jsx(wt,{children:x.map(V=>h.jsx(it,{value:V.id,children:V.name},V.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"text-sm font-semibold",children:"Class / Batch"}),h.jsxs(_t,{value:P,onValueChange:V=>{I(V),D(""),$("")},disabled:!T,children:[h.jsx(bt,{className:"h-11 bg-muted/30 border-border/50",children:h.jsx(Ct,{placeholder:"Select Class"})}),h.jsx(wt,{children:B.map(V=>h.jsxs(it,{value:V.id,children:[V.name," (Sem ",V.current_semester,")"]},V.id))})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"text-sm font-semibold",children:"Section"}),h.jsxs(_t,{value:R,onValueChange:D,disabled:!P,children:[h.jsx(bt,{className:"h-11 bg-muted/30 border-border/50",children:h.jsx(Ct,{placeholder:"Section"})}),h.jsx(wt,{children:G.map(V=>h.jsx(it,{value:V.id,children:V.name},V.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"text-sm font-semibold",children:"Subject"}),h.jsxs(_t,{value:M,onValueChange:$,disabled:!P,children:[h.jsx(bt,{className:"h-11 bg-muted/30 border-border/50",children:h.jsx(Ct,{placeholder:"Subject"})}),h.jsx(wt,{children:k.length===0?h.jsx(it,{value:"none",disabled:!0,children:"Empty catalog"}):k.map(V=>h.jsx(it,{value:V.id,children:V.subject_code},V.id))})]})]})]}),M&&k.find(V=>V.id===M)&&h.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20 text-xs text-primary font-medium animate-in fade-in slide-in-from-top-2",children:["Selected: ",(ne=k.find(V=>V.id===M))==null?void 0:ne.subject_name]})]}),h.jsxs(Yw,{className:"p-6 bg-muted/20 border-t flex gap-2",children:[h.jsx(we,{variant:"outline",onClick:()=>p(!1),className:"flex-1 font-semibold rounded-lg",children:"Cancel"}),h.jsx(we,{onClick:L,disabled:!M||!R||v,className:"flex-1 font-bold rounded-lg shadow-lg shadow-primary/20",children:v?h.jsx(wd,{className:"w-4 h-4 animate-spin"}):"Confirm Assignment"})]})]})]})]}),!l&&n.length>0&&h.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 gap-4 px-1",children:[h.jsx(Et,{className:"bg-gradient-to-br from-primary/5 to-transparent border-primary/10 shadow-sm",children:h.jsxs(Ut,{className:"p-4 flex items-center gap-4",children:[h.jsx("div",{className:"p-3 rounded-2xl bg-primary/10 text-primary",children:h.jsx(ep,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Courses"}),h.jsx("p",{className:"text-2xl font-bold",children:n.length})]})]})}),h.jsx(Et,{className:"bg-gradient-to-br from-blue-500/5 to-transparent border-blue-500/10 shadow-sm",children:h.jsxs(Ut,{className:"p-4 flex items-center gap-4",children:[h.jsx("div",{className:"p-3 rounded-2xl bg-blue-500/10 text-blue-500",children:h.jsx(Fa,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Unique Batches"}),h.jsx("p",{className:"text-2xl font-bold",children:new Set(n.map(V=>{var q;return(q=V.section)==null?void 0:q.batch_id})).size})]})]})}),h.jsx(Et,{className:"bg-gradient-to-br from-amber-500/5 to-transparent border-amber-500/10 shadow-sm",children:h.jsxs(Ut,{className:"p-4 flex items-center gap-4",children:[h.jsx("div",{className:"p-3 rounded-2xl bg-amber-500/10 text-amber-500",children:h.jsx(dne,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Sections"}),h.jsx("p",{className:"text-2xl font-bold",children:new Set(n.map(V=>V.section_id)).size})]})]})})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 px-1",children:[h.jsxs("div",{className:"relative flex-1 group",children:[h.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground transition-all duration-300 group-focus-within:text-primary group-focus-within:scale-110"}),h.jsx(lt,{placeholder:"Search your classes by name or code...",className:"pl-11 h-12 bg-card/60 backdrop-blur-md border-border/60 focus-visible:ring-primary/20 focus-visible:border-primary transition-all shadow-md rounded-2xl md:text-lg",value:g,onChange:V=>y(V.target.value)})]}),h.jsx(we,{variant:"outline",size:"icon",className:"h-12 w-12 rounded-2xl bg-card/60 backdrop-blur-md border-border/60 hover:text-primary transition-all",onClick:j,children:h.jsx(wd,{className:`w-5 h-5 ${l?"animate-spin":""}`})})]}),l?h.jsx("div",{className:"py-12 text-center text-sm",children:"Loading..."}):n.length>0?h.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.filter(V=>{var q,de,he,ae;return((de=(q=V.course_catalog)==null?void 0:q.subject_name)==null?void 0:de.toLowerCase().includes(g.toLowerCase()))||((ae=(he=V.course_catalog)==null?void 0:he.subject_code)==null?void 0:ae.toLowerCase().includes(g.toLowerCase()))}).map((V,q)=>{var ae,le,ge,_e,Re,He,Me;const de=["from-indigo-500 to-purple-600","from-emerald-500 to-teal-600","from-rose-500 to-pink-600","from-amber-500 to-orange-600","from-blue-500 to-cyan-600"],he=de[q%de.length];return h.jsxs(Et,{className:"group relative flex flex-col overflow-hidden border border-border/50 bg-card hover:bg-card/90 shadow-sm hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom-8 cursor-pointer rounded-2xl min-h-[320px]",style:{animationDelay:`${q*50}ms`},onClick:()=>ee(V),children:[h.jsx("div",{className:`h-2.5 w-full bg-gradient-to-r ${he} opacity-90`}),h.jsxs(zn,{className:"space-y-4 pb-4",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("div",{className:"p-3.5 rounded-2xl bg-secondary/5 border border-border/40 shadow-inner group-hover:scale-110 group-hover:bg-primary/5 transition-all duration-500",children:h.jsx(ep,{className:"w-6 h-6 text-primary"})}),h.jsx(we,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors h-10 w-10 rounded-xl",onClick:st=>{st.stopPropagation(),W(V.id)},children:h.jsx(pc,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"space-y-2.5",children:[h.jsx(rr,{className:"text-xl font-black tracking-tight leading-tight group-hover:text-primary transition-colors min-h-[3.2rem] line-clamp-2",children:(ae=V.course_catalog)==null?void 0:ae.subject_name}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(yt,{variant:"outline",className:"font-mono text-[10px] tracking-widest px-2.5 py-0.5 rounded-lg border-primary/30 bg-primary/5 text-primary font-bold uppercase",children:(le=V.course_catalog)==null?void 0:le.subject_code})})]})]}),h.jsxs(Ut,{className:"space-y-6 pt-0 flex-1 flex flex-col justify-end",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-0 rounded-2xl bg-muted/20 border border-border/30 overflow-hidden shadow-inner",children:[h.jsxs("div",{className:"p-4 space-y-1 border-r border-border/20 bg-background/40",children:[h.jsx("p",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-black opacity-80",children:"Batch"}),h.jsx("p",{className:"text-base font-bold text-foreground truncate",children:(_e=(ge=V.section)==null?void 0:ge.batch)==null?void 0:_e.name})]}),h.jsxs("div",{className:"p-4 space-y-1 bg-background/20",children:[h.jsx("p",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-black opacity-80",children:"Semester"}),h.jsxs("p",{className:"text-base font-bold text-foreground",children:["Sem ",(He=(Re=V.section)==null?void 0:Re.batch)==null?void 0:He.current_semester]})]})]}),h.jsxs("div",{className:"flex items-center justify-between gap-4 pt-4 border-t border-border/40 group/footer",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("div",{className:"p-2 rounded-xl bg-primary/10 group-hover/footer:bg-primary/20 transition-colors",children:h.jsx(Fa,{className:"w-4 h-4 text-primary"})}),h.jsxs("span",{className:"text-[13px] font-black truncate text-foreground/80 uppercase tracking-tighter",children:["Section ",(Me=V.section)==null?void 0:Me.name]})]}),h.jsxs(we,{variant:"link",size:"sm",className:"h-auto p-0 text-primary font-black hover:no-underline group/btn flex items-center gap-1 shrink-0",children:[h.jsx("span",{children:"View Students"}),h.jsx(ef,{className:"w-4 h-4 group-hover/btn:translate-x-1 transition-transform"})]})]})]})]},V.id)})}):h.jsx(Et,{className:"border-dashed border-2 bg-muted/20",children:h.jsx(Ut,{className:"py-20 text-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center animate-pulse",children:h.jsx(zp,{className:"w-10 h-10 text-primary"})}),h.jsxs("div",{className:"space-y-2 max-w-sm mx-auto",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Start Your Journey"}),h.jsx("p",{className:"text-muted-foreground",children:`You haven't assigned any classes to yourself yet. Use the "Add Assignment" button to begin managing your students.`}),h.jsx(we,{onClick:()=>p(!0),className:"mt-4 shadow-lg shadow-primary/20",children:"Assign First Class"})]})]})})}),h.jsx(Tl,{open:!!a,onOpenChange:V=>!V&&i(null),children:h.jsxs(is,{className:"max-w-3xl max-h-[90vh] p-0 overflow-hidden flex flex-col gap-0 border-none shadow-2xl",children:[h.jsx("div",{className:"p-6 bg-gradient-to-br from-primary/10 via-background to-background border-b",children:h.jsxs(os,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2 rounded-lg bg-primary/20",children:h.jsx(Fa,{className:"w-5 h-5 text-primary"})}),h.jsx(ss,{className:"text-xl font-bold",children:"Student Directory"})]}),h.jsx(Hm,{className:"text-sm font-medium text-foreground/80",children:a&&h.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1",children:[h.jsx("span",{className:"text-primary",children:(Z=a.course_catalog)==null?void 0:Z.subject_name}),h.jsx("span",{className:"text-muted-foreground",children:""}),h.jsx("span",{children:(Q=(K=a.section)==null?void 0:K.batch)==null?void 0:Q.name}),h.jsx("span",{className:"text-muted-foreground",children:""}),h.jsxs("span",{children:["Section ",(ie=a.section)==null?void 0:ie.name]})]})})]})}),h.jsx("div",{className:"flex-1 overflow-auto p-2 sm:p-6 bg-muted/5",children:h.jsx("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:h.jsxs(xi,{children:[h.jsx(bi,{className:"bg-muted/50",children:h.jsxs(Mt,{className:"hover:bg-transparent",children:[h.jsx(Je,{className:"w-[100px] font-bold",children:"ID"}),h.jsx(Je,{className:"font-bold",children:"Student Name"}),h.jsx(Je,{className:"hidden md:table-cell font-bold",children:"Email Address"}),h.jsx(Je,{className:"text-right font-bold pr-6",children:"Status"})]})}),h.jsx(wi,{children:u?h.jsx(Mt,{children:h.jsx(Ge,{colSpan:4,className:"text-center py-20",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx(wd,{className:"w-8 h-8 text-primary animate-spin"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Retrieving student data..."})]})})}):o.length>0?o.map(V=>{var q,de,he;return h.jsxs(Mt,{className:"group transition-colors hover:bg-muted/30",children:[h.jsx(Ge,{className:"font-mono text-xs sm:text-sm font-medium py-4",children:V.student_id}),h.jsx(Ge,{className:"py-4",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-semibold text-sm sm:text-base",children:(q=V.profile)==null?void 0:q.name}),h.jsx("span",{className:"md:hidden text-xs text-muted-foreground mt-0.5",children:(de=V.profile)==null?void 0:de.email})]})}),h.jsx(Ge,{className:"hidden md:table-cell text-sm text-muted-foreground py-4",children:(he=V.profile)==null?void 0:he.email}),h.jsx(Ge,{className:"text-right py-4 pr-6",children:h.jsx(yt,{variant:V.is_active?"default":"secondary",className:`text-[10px] uppercase font-bold tracking-wider ${V.is_active?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20 hover:bg-emerald-500/20":""}`,children:V.is_active?"Active":"Inactive"})})]},V.id)}):h.jsx(Mt,{children:h.jsx(Ge,{colSpan:4,className:"text-center py-20",children:h.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[h.jsx(fo,{className:"w-8 h-8 opacity-20"}),h.jsx("p",{children:"No students enrolled in this section"})]})})})})]})})}),h.jsx("div",{className:"p-4 bg-muted/20 border-t flex justify-end",children:h.jsx(we,{variant:"outline",onClick:()=>i(null),className:"rounded-lg",children:"Close Directory"})})]})})]})};var r1="Checkbox",[B6e,CVe]=Sa(r1),[U6e,JP]=B6e(r1);function z6e(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:s,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[f,p]=uo({prop:n,defaultProp:a??!1,onChange:l,caller:r1}),[v,m]=_.useState(null),[g,y]=_.useState(null),x=_.useRef(!1),b=v?!!o||!!v.closest("form"):!0,w={checked:f,disabled:i,setChecked:p,control:v,setControl:m,name:s,form:o,value:u,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:yl(a)?!1:a,isFormControl:b,bubbleInput:g,setBubbleInput:y};return h.jsx(U6e,{scope:t,...w,children:W6e(d)?d(w):r})}var e7="CheckboxTrigger",t7=_.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:s,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:v}=JP(e7,e),m=ft(a,u),g=_.useRef(l);return _.useEffect(()=>{const y=i==null?void 0:i.form;if(y){const x=()=>d(g.current);return y.addEventListener("reset",x),()=>y.removeEventListener("reset",x)}},[i,d]),h.jsx(Fe.button,{type:"button",role:"checkbox","aria-checked":yl(l)?"mixed":l,"aria-required":c,"data-state":o7(l),"data-disabled":s?"":void 0,disabled:s,value:o,...r,ref:m,onKeyDown:ye(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:ye(n,y=>{d(x=>yl(x)?!0:!x),v&&p&&(f.current=y.isPropagationStopped(),f.current||y.stopPropagation())})})});t7.displayName=e7;var ZP=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:l,onCheckedChange:c,form:u,...d}=e;return h.jsx(z6e,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:s,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>h.jsxs(h.Fragment,{children:[h.jsx(t7,{...d,ref:t,__scopeCheckbox:n}),f&&h.jsx(i7,{__scopeCheckbox:n})]})})});ZP.displayName=r1;var n7="CheckboxIndicator",r7=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=JP(n7,n);return h.jsx(Jr,{present:r||yl(i.checked)||i.checked===!0,children:h.jsx(Fe.span,{"data-state":o7(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});r7.displayName=n7;var a7="CheckboxBubbleInput",i7=_.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:s,disabled:l,name:c,value:u,form:d,bubbleInput:f,setBubbleInput:p}=JP(a7,e),v=ft(n,p),m=_T(i),g=PN(r);_.useEffect(()=>{const x=f;if(!x)return;const b=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(b,"checked").set,C=!a.current;if(m!==i&&S){const E=new Event("click",{bubbles:C});x.indeterminate=yl(i),S.call(x,yl(i)?!1:i),x.dispatchEvent(E)}},[f,m,i,a]);const y=_.useRef(yl(i)?!1:i);return h.jsx(Fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:s,disabled:l,name:c,value:u,form:d,...t,tabIndex:-1,ref:v,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});i7.displayName=a7;function W6e(e){return typeof e=="function"}function yl(e){return e==="indeterminate"}function o7(e){return yl(e)?"indeterminate":e?"checked":"unchecked"}const s7=_.forwardRef(({className:e,...t},n)=>h.jsx(ZP,{ref:n,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(r7,{className:Te("flex items-center justify-center text-current"),children:h.jsx(Sb,{className:"h-4 w-4"})})}));s7.displayName=ZP.displayName;const V6e=()=>{const{user:e,loading:t}=kr(),[n,r]=_.useState([]),[a,i]=_.useState([]),[o,s]=_.useState(!0),[l,c]=_.useState(!1),[u,d]=_.useState(""),[f,p]=_.useState(""),[v,m]=_.useState([]),[g,y]=_.useState(""),[x,b]=_.useState(""),[w,S]=_.useState(""),C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];_.useEffect(()=>{!t&&(e!=null&&e.teacher_id)?E():t||s(!1)},[t,e==null?void 0:e.teacher_id]);const E=async()=>{if(e!=null&&e.teacher_id){s(!0);try{const[I,R]=await Promise.all([Ce.getTeacherAssignments(e.teacher_id),Ce.getRoutines({teacher_id:e.teacher_id})]);i(I||[]),r(R||[])}catch(I){at.error(`Load error: ${I.message||"Unknown error"}`)}finally{s(!1)}}},k=async()=>{if(!f||v.length===0){at.error("Please select assignment and days");return}const I=a.find(R=>R.id===f);if(I)try{const R=v.map(D=>{const M={day_of_week:D,start_time:g||null,end_time:x||null,course_catalog_id:I.course_catalog_id,section_id:I.section_id,teacher_id:e.teacher_id,room_id:w||"TBD"};return Ce.createRoutine(M)});await Promise.all(R),c(!1),T(),at.success("Routine added!"),E()}catch{at.error("Failed to add routine")}},N=async I=>{if(confirm("Remove this routine?"))try{await Ce.deleteResource("routines",I),at.success("Routine removed"),E()}catch{at.error("Failed to delete")}},T=()=>{p(""),m([]),y(""),b(""),S("")},A=I=>{m(R=>R.includes(I)?R.filter(D=>D!==I):[...R,I])},P=C.map(I=>({day:I,items:n.filter(R=>R.day_of_week===I).filter(R=>{var D,M,$,j,O;return((M=(D=R.course_catalog)==null?void 0:D.subject_name)==null?void 0:M.toLowerCase().includes(u.toLowerCase()))||((j=($=R.course_catalog)==null?void 0:$.subject_code)==null?void 0:j.toLowerCase().includes(u.toLowerCase()))||((O=R.room_id)==null?void 0:O.toLowerCase().includes(u.toLowerCase()))}).sort((R,D)=>R.start_time?D.start_time?R.start_time.localeCompare(D.start_time):1:-1)})).filter(I=>I.items.length>0);return h.jsxs("div",{className:"space-y-4 md:space-y-6 pb-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 px-1",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Class Routine"}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your weekly schedule"})]}),h.jsxs(Tl,{open:l,onOpenChange:c,children:[h.jsx(Xw,{asChild:!0,children:h.jsxs(we,{className:"gap-2 w-full sm:w-auto",disabled:a.length===0,children:[h.jsx(Cb,{className:"w-4 h-4"}),"Set Routine"]})}),h.jsxs(is,{className:"max-w-md max-h-[90vh] overflow-y-auto mx-4",children:[h.jsxs(os,{children:[h.jsx(ss,{children:"Add New Routine"}),h.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Set class timings"})]}),h.jsxs("div",{className:"grid gap-3 py-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"text-sm",children:"Select Assignment *"}),h.jsxs(_t,{value:f,onValueChange:p,children:[h.jsx(bt,{className:"h-9",children:h.jsx(Ct,{placeholder:"Choose subject"})}),h.jsx(wt,{children:a.map(I=>{var R,D,M,$;return h.jsxs(it,{value:I.id,className:"text-sm",children:[(R=I.course_catalog)==null?void 0:R.subject_name," - ",(M=(D=I.section)==null?void 0:D.batch)==null?void 0:M.name," ",($=I.section)==null?void 0:$.name]},I.id)})})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"text-sm",children:"Select Days *"}),h.jsx("div",{className:"grid grid-cols-2 gap-2 p-2 border rounded-md",children:C.map(I=>h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(s7,{id:`day-${I}`,checked:v.includes(I),onCheckedChange:()=>A(I)}),h.jsx("label",{htmlFor:`day-${I}`,className:"text-xs sm:text-sm font-medium cursor-pointer",children:I})]},I))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsxs(We,{className:"text-xs sm:text-sm flex items-center gap-1",children:[h.jsx(tp,{className:"w-3 h-3"})," Start"]}),h.jsx(lt,{type:"time",value:g,onChange:I=>y(I.target.value),className:"h-9 text-sm"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsxs(We,{className:"text-xs sm:text-sm flex items-center gap-1",children:[h.jsx(tp,{className:"w-3 h-3"})," End"]}),h.jsx(lt,{type:"time",value:x,onChange:I=>b(I.target.value),className:"h-9 text-sm"})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsxs(We,{className:"text-xs sm:text-sm flex items-center gap-1",children:[h.jsx(a0,{className:"w-3 h-3"})," Room"]}),h.jsx(lt,{value:w,onChange:I=>S(I.target.value),placeholder:"e.g. 301",className:"h-9"})]})]}),h.jsxs(Yw,{className:"gap-2 sm:gap-0",children:[h.jsx(we,{variant:"outline",onClick:()=>c(!1),className:"flex-1 sm:flex-none",children:"Cancel"}),h.jsx(we,{onClick:k,disabled:!f||v.length===0,className:"flex-1 sm:flex-none",children:"Save"})]})]})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(fo,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),h.jsx(lt,{placeholder:"Search routine...",className:"pl-8",value:u,onChange:I=>d(I.target.value)})]}),o?h.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"Loading..."}):a.length>0?P.length>0?h.jsx("div",{className:"space-y-4 md:space-y-6",children:P.map(({day:I,items:R})=>h.jsxs(Et,{children:[h.jsx(zn,{className:"pb-3",children:h.jsxs(rr,{className:"flex items-center justify-between text-base md:text-lg",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(to,{className:"w-4 h-4 md:w-5 md:h-5 text-primary"}),I]}),h.jsx(yt,{variant:"secondary",className:"text-xs",children:R.length})]})}),h.jsx(Ut,{children:h.jsx("div",{className:"space-y-3",children:R.map(D=>{var M,$,j,O,B;return h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[h.jsx("div",{className:"font-medium truncate text-sm",children:(M=D.course_catalog)==null?void 0:M.subject_name}),h.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[(j=($=D.section)==null?void 0:$.batch)==null?void 0:j.name," - ",(O=D.section)==null?void 0:O.name]})]}),h.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[D.start_time?h.jsxs(yt,{variant:"outline",className:"text-xs whitespace-nowrap px-2",children:[h.jsx(tp,{className:"w-3 h-3 mr-1"}),D.start_time.slice(0,5),"-",(B=D.end_time)==null?void 0:B.slice(0,5)]}):h.jsx("span",{className:"text-muted-foreground italic",children:"Flexible"}),h.jsxs(yt,{variant:"outline",className:"text-xs whitespace-nowrap px-2",children:[h.jsx(a0,{className:"w-3 h-3 mr-1"}),D.room_id]})]}),h.jsx(we,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10 h-7 w-7 shrink-0",onClick:()=>N(D.id),children:h.jsx(pc,{className:"w-3.5 h-3.5"})})]})]},D.id)})})})]},I))}):h.jsx(Et,{children:h.jsx(Ut,{className:"py-12 text-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsx(to,{className:"w-12 h-12 md:w-14 md:h-14 text-muted-foreground"}),h.jsxs("div",{className:"space-y-1 px-4",children:[h.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"No Routines Set"}),h.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:'Tap "Set Routine" to create schedules'})]})]})})}):h.jsx(Et,{children:h.jsx(Ut,{className:"py-12 text-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsx(to,{className:"w-12 h-12 md:w-14 md:h-14 text-muted-foreground"}),h.jsxs("div",{className:"space-y-1 px-4",children:[h.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"No Assignments Found"}),h.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:'Add assignments in "Classes" first'})]})]})})})]})},H6e=()=>{const{user:e,loading:t}=kr(),n=Ha(),[r,a]=_.useState("select"),[i,o]=_.useState([]),[s,l]=_.useState(""),[c,u]=_.useState(new Date().toISOString().split("T")[0]),[d,f]=_.useState(0),[p,v]=_.useState(!1),[m,g]=_.useState([]),[y,x]=_.useState(!0),[b,w]=_.useState(!1),[S,C]=_.useState(!1),[E,k]=_.useState(0),[N,T]=_.useState(0),[A,P]=_.useState(0),[I,R]=_.useState([]),[D,M]=_.useState(!1),[$,j]=_.useState(null),[O,B]=_.useState(!1),[G,L]=_.useState(!1),[W,J]=_.useState("online"),ee=.2,ne=_.useRef(null),Z=_.useRef(null),K=_.useRef(null),Q=_.useRef(new Set),ie=_.useRef([]),V=_.useRef(null);_.useEffect(()=>{(async()=>{try{const me="/models";await Promise.all([ar.tinyFaceDetector.loadFromUri(me),ar.faceLandmark68TinyNet.loadFromUri(me),ar.faceRecognitionNet.loadFromUri(me)]),w(!0),console.log(" TakeAttendance: Models loaded")}catch(me){console.error(" TakeAttendance: Model loading error:",me),at.error("Failed to load Face AI models")}})()},[]),_.useEffect(()=>{(async()=>{if(t||!(e!=null&&e.teacher_id)){x(!1);return}x(!0);try{const me=await Ce.getTeacherAssignments(e.teacher_id);o(me||[])}catch{at.error("Failed to load your assignments")}finally{x(!1)}})()},[t,e==null?void 0:e.teacher_id]),_.useEffect(()=>{(async()=>{if(!s){f(0),v(!1);return}const me=i.find(Ee=>Ee.id===s);if(me)try{const Ee=await Ce.getSessionCount(me.course_catalog_id,me.section_id);f(Ee),Ee>=25&&at.error("Session limit reached (25/25) for this class.");const X=await Ce.checkSessionExists(me.course_catalog_id,me.section_id,c);v(X),X&&at.warning(`Attendance already logged for this subject on ${c}.`)}catch(Ee){console.error("Error checking session data:",Ee)}})()},[s,i,c]),_.useEffect(()=>{let xe=null;return r==="camera"?(async()=>{if(r==="camera")try{xe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}}),ne.current&&(ne.current.srcObject=xe,ne.current.setAttribute("playsinline","true"),ne.current.play().catch(Ee=>console.error("Video play error:",Ee)),C(!0))}catch(Ee){console.error("Camera access error:",Ee),at.error("Could not access camera. Manual upload only."),C(!1)}})():(Re(),C(!1)),()=>{xe&&xe.getTracks().forEach(Ee=>Ee.stop())}},[r]);const q=async xe=>{var X;const me=(X=xe.target.files)==null?void 0:X[0];if(!me)return;const Ee=new FileReader;Ee.onload=be=>{var Ie;const oe=(Ie=be.target)==null?void 0:Ie.result;R(Dt=>[...Dt,{id:Date.now(),url:oe,blob:me}]),at.success("Image added to batch")},Ee.readAsDataURL(me),xe.target.value=""},de=async()=>{var X;if(!ne.current)return;const xe=document.createElement("canvas");xe.width=ne.current.videoWidth,xe.height=ne.current.videoHeight;const me=xe.getContext("2d");if(!me)return;me.drawImage(ne.current,0,0);const Ee=document.createElement("div");Ee.className="absolute inset-0 bg-white/50 z-50 transition-opacity duration-200 pointer-events-none",(X=ne.current.parentElement)==null||X.appendChild(Ee),setTimeout(()=>Ee.classList.add("opacity-0"),50),setTimeout(()=>Ee.remove(),250),xe.toBlob(be=>{if(be){const oe=URL.createObjectURL(be);R(Ie=>[...Ie,{id:Date.now(),url:oe,blob:be}]),at.success("Frame captured")}},"image/jpeg",.85)},he=xe=>{R(me=>me.filter(Ee=>Ee.id!==xe))},ae=async()=>{if(I.length===0){at.warning("No images to process");return}M(!0),J("loading");const xe=new Set(Q.current);let me=0,Ee=0;try{for(const X of I)try{const be=await Ce.recognizeFaces(X.blob);J("online"),me+=be.detected_faces||0,be.matches&&be.matches.length>0&&be.matches.forEach(oe=>{var Dt;const Ie=String(oe.student_id);if(oe.confidence>=ee&&!xe.has(Ie)){xe.add(Ie),Ee++;const qn=ie.current.find(Nr=>String(Nr.id)===Ie);qn&&console.log(` Batch Match: ${(Dt=qn.profile)==null?void 0:Dt.name}`)}})}catch(be){console.error("Batch error:",be),J("error");break}Q.current=xe,T(xe.size),k(me),Ee>0?at.success(`Found ${Ee} new students!`):me>0?at.warning(`Detected ${me} faces but no confident matches.`):at.info("No faces detected in images.")}catch{at.error("Error processing batch")}finally{M(!1)}},le=()=>{V.current&&(clearTimeout(V.current),V.current=null),Re();const xe=Q.current,Ee=ie.current.map(X=>{var oe;const be=xe.has(String(X.id));return{studentId:X.id,name:((oe=X.profile)==null?void 0:oe.name)||"Unknown",student_id:X.student_id,status:be?"present":"absent",confidence:be?.95:0}});g(Ee),a("verify")},ge=xe=>{if(!ne.current){at.error("Camera not ready");return}k(0),P(xe.length),B(!0),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{at.info("Auto-stopped after 20s"),le()},2e4),K.current=setInterval(async()=>{var me;if(!(!O||!ne.current||!Z.current||!G))try{const Ee=document.createElement("canvas");Ee.width=ne.current.videoWidth,Ee.height=ne.current.videoHeight;const X=Ee.getContext("2d");if(!X)return;X.drawImage(ne.current,0,0);const be=await new Promise(Dt=>Ee.toBlob(Dt,"image/jpeg",.8));if(!be)return;const oe=await Ce.recognizeFaces(be);J("online");const Ie=oe.detected_faces||0;k(Ie),((me=oe.matches)==null?void 0:me.length)>0&&(oe.matches.forEach(Dt=>{var qn;if(Dt.confidence>=ee){const Nr=String(Dt.student_id);if(!Q.current.has(Nr)){const ur=ie.current.find(So=>String(So.id)===Nr),Kn=((qn=ur==null?void 0:ur.profile)==null?void 0:qn.name)||"Unknown";Q.current.add(Nr),j(`${Kn} (${(Dt.confidence*100).toFixed(0)}%)`),setTimeout(()=>j(null),3e3)}}}),T(Q.current.size)),Ie>0&&Q.current.size>=Ie&&(V.current&&clearTimeout(V.current),at.success("All visible faces recognized!"),le())}catch(Ee){console.error(Ee),J("error")}},800)},_e=()=>{B(!1),K.current&&(clearInterval(K.current),K.current=null)},Re=()=>{var xe;_e(),(xe=ne.current)!=null&&xe.srcObject&&ne.current.srcObject.getTracks().forEach(me=>me.stop())},He=async()=>{if(s)try{x(!0);const xe=i.find(Ee=>Ee.id===s),me=await Ce.getStudentsBySection(xe.section_id);ie.current=me,P(me.length),T(0),Q.current=new Set,R([]),J("online"),a("camera")}catch{at.error("Failed to load class roster")}finally{x(!1)}},Me=xe=>{g(me=>me.map(Ee=>Ee.studentId===xe?{...Ee,status:Ee.status==="present"?"absent":"present"}:Ee))},st=async()=>{const xe=i.find(me=>me.id===s);if(xe){x(!0);try{const me=m.map(X=>({student_id:X.studentId,course_catalog_id:xe.course_catalog_id,section_id:xe.section_id,teacher_id:e.teacher_id,date:c,status:X.status,confidence:X.status==="present"?.95:0})),{error:Ee}=await Ce.logAttendance(me);if(Ee)throw Ee;a("success"),at.success("Attendance saved!")}catch(me){console.error(" Submission Error:",me),at.error(me.message||"Failed to save attendance")}finally{x(!1)}}};if(r==="select")return h.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-in fade-in duration-500",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"New Session"}),h.jsx("p",{className:"text-slate-500",children:"Select a class to take attendance."})]}),h.jsxs(Et,{className:"bg-white border-none shadow-xl shadow-slate-200/50 rounded-3xl overflow-hidden",children:[h.jsx(zn,{className:"bg-slate-50 border-b border-slate-100 p-6",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx(rr,{className:"text-lg font-bold text-slate-800",children:"Class Details"}),h.jsxs(we,{variant:"ghost",size:"sm",className:"text-slate-500 hover:text-primary",onClick:()=>Ce.syncFaces().then(()=>at.success("Synced")),children:[h.jsx(wd,{className:"w-4 h-4 mr-2"})," Sync AI"]})]})}),h.jsx(Ut,{className:"p-8 space-y-6",children:y?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"h-14 bg-slate-100 rounded-xl animate-pulse"}),h.jsx("div",{className:"h-24 bg-slate-50 rounded-xl animate-pulse"})]}):i.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"uppercase text-[10px] font-bold tracking-widest text-slate-400",children:"Select Subject"}),h.jsxs(_t,{value:s,onValueChange:l,children:[h.jsx(bt,{className:"h-14 rounded-xl border-slate-200 bg-white text-base",children:h.jsx(Ct,{placeholder:"Choose a course..."})}),h.jsx(wt,{className:"rounded-xl border-slate-100 shadow-xl",children:i.map(xe=>{var me,Ee,X;return h.jsxs(it,{value:xe.id,className:"py-3",children:[h.jsx("span",{className:"font-bold text-slate-800",children:(me=xe.course_catalog)==null?void 0:me.subject_name}),h.jsxs("span",{className:"ml-2 text-xs text-slate-400",children:["(",(X=(Ee=xe.section)==null?void 0:Ee.batch)==null?void 0:X.name,")"]})]},xe.id)})})]})]}),s&&h.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-300",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(We,{className:"uppercase text-[10px] font-bold tracking-widest text-slate-400",children:"Session Date"}),h.jsxs("div",{className:"relative",children:[h.jsx(to,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx(lt,{type:"date",value:c,onChange:xe=>u(xe.target.value),className:"h-14 pl-11 rounded-xl border-slate-200 bg-white text-base"})]})]}),h.jsxs("div",{className:`p-4 rounded-2xl border flex items-start gap-3 ${d>=25?"bg-red-50 border-red-100":"bg-primary/5 border-primary/10"}`,children:[d>=25?h.jsx(I2,{className:"w-5 h-5 text-red-500 mt-0.5"}):h.jsx(Fa,{className:"w-5 h-5 text-primary mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:`text-sm font-bold ${d>=25?"text-red-800":"text-slate-800"}`,children:d>=25?"Limit Reached":"Session Status"}),h.jsx("p",{className:`text-xs ${d>=25?"text-red-600":"text-slate-500"} mt-0.5`,children:d>=25?"You have reached the maximum of 25 sessions for this class.":`This will be session ${d+1} of 25.`})]})]})]})]}):h.jsxs("div",{className:"text-center py-10",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(_b,{className:"w-8 h-8 text-slate-400"})}),h.jsx("p",{className:"text-slate-500 font-bold",children:"No classes assigned."})]})}),h.jsxs(VW,{className:"p-6 pt-0 flex flex-col gap-4",children:[p&&h.jsxs("div",{className:"w-full flex items-center gap-3 p-4 bg-amber-50 border border-amber-200 rounded-2xl animate-in slide-in-from-bottom-2",children:[h.jsx(I2,{className:"w-5 h-5 text-amber-500 shrink-0"}),h.jsx("p",{className:"text-sm font-semibold text-amber-800 text-left",children:"Attendance has already been recorded for this subject on the selected date."})]}),h.jsxs(we,{className:`w-full h-14 text-lg font-bold rounded-xl shadow-lg ${d>=25||p?"bg-slate-200 text-slate-400 cursor-not-allowed":"shadow-primary/20"}`,onClick:He,disabled:!s||y||d>=25||p,children:[h.jsx(Bp,{className:"mr-2 w-5 h-5"})," Launch Scanner"]})]})]})]});if(r==="camera"){const xe=W==="online";return h.jsxs("div",{className:"max-w-5xl mx-auto space-y-4 pb-28 lg:pb-6 animate-in hover:fade-in zoom-in-95 duration-300",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(we,{variant:"ghost",onClick:()=>a("select"),className:"text-slate-500 hover:text-slate-900 -ml-2",children:[h.jsx(n0,{className:"w-4 h-4 mr-2"})," Back"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(yt,{variant:"outline",className:"bg-slate-100 text-slate-600 border-none font-bold text-[10px]",children:[" ",new Date(c).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]}),h.jsx(yt,{variant:"outline",className:`border-none ${xe?"bg-green-100 text-green-700":"bg-red-100 text-red-700"} font-bold uppercase tracking-wider text-[10px]`,children:xe?"AI Connected":"AI Offline"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[h.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[h.jsxs("div",{className:"relative min-h-[70vh] lg:h-[calc(100vh-200px)] bg-black rounded-3xl overflow-hidden shadow-2xl shadow-slate-200 border border-slate-900/10",children:[h.jsx("video",{ref:ne,autoPlay:!0,muted:!0,playsInline:!0,onLoadedMetadata:()=>L(!0),onPlay:()=>L(!0),className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("canvas",{ref:Z,className:"absolute inset-0 w-full h-full pointer-events-none"}),h.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[h.jsx("div",{className:"absolute top-6 left-6 w-12 h-12 border-l-4 border-t-4 border-white/50 rounded-tl-2xl"}),h.jsx("div",{className:"absolute top-6 right-6 w-12 h-12 border-r-4 border-t-4 border-white/50 rounded-tr-2xl"}),h.jsx("div",{className:"absolute bottom-6 left-6 w-12 h-12 border-l-4 border-b-4 border-white/50 rounded-bl-2xl"}),h.jsx("div",{className:"absolute bottom-6 right-6 w-12 h-12 border-r-4 border-b-4 border-white/50 rounded-br-2xl"}),O&&h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-blue-500/50 shadow-[0_0_20px_rgba(59,130,246,0.8)] animate-[scan_3s_ease-in-out_infinite]"}),h.jsxs("div",{className:"absolute bottom-0 inset-x-0 p-6 bg-gradient-to-t from-black/80 to-transparent flex justify-between items-end",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-white/60 text-[10px] font-bold uppercase tracking-widest mb-1",children:"Detected Faces"}),h.jsx("p",{className:"text-3xl font-black text-white",children:E})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-white/60 text-[10px] font-bold uppercase tracking-widest mb-1",children:"Identified"}),h.jsxs("p",{className:"text-3xl font-black text-green-400",children:[N," ",h.jsxs("span",{className:"text-lg text-white/40",children:["/ ",A]})]})]})]}),$&&h.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white/90 backdrop-blur-xl px-6 py-4 rounded-2xl shadow-2xl animate-in zoom-in fade-in slide-in-from-bottom-5",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:h.jsx(xd,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-slate-800",children:$.split("(")[0]}),h.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Confirmed"})]})]})})]})]}),h.jsx(we,{className:`h-16 lg:h-20 w-full rounded-2xl text-lg lg:text-xl font-black shadow-lg transition-all ${O?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary/90 shadow-primary/20"}`,onClick:O?_e:()=>ge(ie.current),children:O?h.jsxs(h.Fragment,{children:[h.jsx(Up,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2"})," Stop Scanning"]}):h.jsxs(h.Fragment,{children:[h.jsx($2,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2"})," Start Scanning"]})})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs(Et,{className:"bg-white border-none shadow-sm rounded-3xl flex-1 flex flex-col overflow-hidden",children:[h.jsx(zn,{className:"bg-slate-50/50 pb-2",children:h.jsx(rr,{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Capture Queue"})}),h.jsx(Ut,{className:"flex-1 p-4 overflow-y-auto",children:h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[I.map(me=>h.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden group",children:[h.jsx("img",{src:me.url,className:"w-full h-full object-cover"}),h.jsx("button",{onClick:()=>he(me.id),className:"absolute inset-0 bg-red-500/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(Up,{className:"text-white w-5 h-5"})})]},me.id)),h.jsxs("button",{className:"aspect-square rounded-xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400 hover:border-primary/50 hover:bg-primary/5 hover:text-primary transition-all",onClick:de,children:[h.jsx(Bp,{className:"w-6 h-6 mb-1"}),h.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Snap"})]})]})}),h.jsxs("div",{className:"p-4 border-t border-slate-100 space-y-2",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",onChange:q}),h.jsxs(we,{variant:"outline",className:"w-full rounded-xl border-slate-200",children:[h.jsx(Zte,{className:"w-4 h-4 mr-2"})," Upload Photo"]})]}),h.jsx(we,{className:"w-full rounded-xl bg-slate-900 text-white hover:bg-slate-800",disabled:I.length===0||D,onClick:ae,children:D?h.jsx(wd,{className:"w-4 h-4 animate-spin"}):"Process Queue"})]})]}),h.jsxs(we,{variant:"secondary",className:"h-14 rounded-2xl bg-white text-slate-900 border border-slate-200 hover:bg-slate-50 font-bold shadow-sm",onClick:le,children:["Review & Submit ",h.jsx(n0,{className:"ml-2 w-4 h-4 rotate-180"})]})]})]})]})}if(r==="verify"){const xe={present:m.filter(me=>me.status==="present").length,absent:m.filter(me=>me.status==="absent").length};return h.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-black text-slate-900",children:"Summary"}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("span",{className:"text-slate-500 text-sm",children:"Attendance for"}),h.jsx("div",{className:"relative inline-block",children:h.jsx("input",{type:"date",value:c,onChange:me=>u(me.target.value),className:"text-primary font-bold bg-transparent border-none p-0 focus:ring-0 cursor-pointer hover:underline"})})]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"px-4 py-2 bg-green-50 rounded-xl border border-green-100",children:[h.jsx("span",{className:"block text-[10px] font-bold text-green-600 uppercase tracking-widest",children:"Present"}),h.jsx("span",{className:"text-2xl font-black text-green-700",children:xe.present})]}),h.jsxs("div",{className:"px-4 py-2 bg-red-50 rounded-xl border border-red-100",children:[h.jsx("span",{className:"block text-[10px] font-bold text-red-600 uppercase tracking-widest",children:"Absent"}),h.jsx("span",{className:"text-2xl font-black text-red-700",children:xe.absent})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(me=>h.jsxs("div",{onClick:()=>Me(me.studentId),className:`p-4 rounded-2xl border transition-all cursor-pointer flex items-center justify-between group ${me.status==="present"?"bg-white border-green-200 shadow-sm hover:border-green-300":"bg-slate-50 border-slate-100 opacity-60 hover:opacity-100 hover:bg-white"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${me.status==="present"?"bg-green-100 text-green-700":"bg-slate-200 text-slate-500"}`,children:me.name.charAt(0)}),h.jsxs("div",{className:"overflow-hidden",children:[h.jsx("p",{className:"font-bold text-slate-800 truncate",children:me.name}),h.jsx("p",{className:"text-xs text-slate-400",children:me.student_id})]})]}),h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border ${me.status==="present"?"bg-green-500 border-green-500":"border-slate-300"}`,children:me.status==="present"&&h.jsx(xd,{className:"w-4 h-4 text-white"})})]},me.studentId))}),h.jsxs("div",{className:"flex gap-4 pt-4 border-t border-slate-100",children:[h.jsx(we,{variant:"outline",className:"flex-1 h-14 rounded-xl text-slate-500 font-bold",onClick:()=>a("camera"),children:"Resume Scanning"}),h.jsx(we,{className:"flex-[2] h-14 rounded-xl font-bold text-lg shadow-lg shadow-primary/20",onClick:st,disabled:y,children:y?"Submitting...":"Confirm & Save Attendance"})]})]})}return h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center space-y-6 animate-in zoom-in duration-300",children:[h.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center shadow-xl shadow-green-100/50",children:h.jsx(xd,{className:"w-12 h-12 text-green-600"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-black text-slate-900",children:"Attendance Recorded!"}),h.jsx("p",{className:"text-slate-500 mt-2",children:"The session has been successfully logged."})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx(we,{variant:"outline",className:"rounded-xl font-bold",onClick:()=>n("/teacher/dashboard"),children:"Back to Dashboard"}),h.jsx(we,{className:"rounded-xl font-bold",onClick:()=>a("select"),children:"Start New Class"})]})]})},G6e=()=>{const{user:e}=kr(),[t,n]=_.useState(""),[r,a]=_.useState("all"),[i,o]=_.useState(null),[s,l]=_.useState([]),[c,u]=_.useState([]),[d,f]=_.useState(!0),p=async()=>{if(!(e!=null&&e.teacher_id)){console.warn(" PastAttendance: No teacher_id found"),f(!1);return}f(!0);try{const[y,x]=await Promise.all([Ce.getAttendanceHistory({teacher_id:e.teacher_id}),Ce.getTeacherAssignments(e.teacher_id)]);l(y||[]),u(x||[])}catch{at.error("Failed to load attendance history")}finally{f(!1)}};_.useEffect(()=>{p()},[e==null?void 0:e.teacher_id]);const v=_.useMemo(()=>{const y=new Map;return s.forEach(x=>{var k,N,T,A;const b=x.date,w=x.course_catalog_id||((k=x.routine)==null?void 0:k.course_catalog_id)||"unknown",S=((N=x.course_catalog)==null?void 0:N.subject_name)||((A=(T=x.routine)==null?void 0:T.course_catalog)==null?void 0:A.subject_name)||"Unknown Subject";y.has(b)||y.set(b,{date:b,subjects:new Map});const C=y.get(b);C.subjects.has(w)||C.subjects.set(w,{id:`${w}-${b}`,date:b,subjectId:w,subjectName:S,totalPresent:0,totalAbsent:0,records:[]});const E=C.subjects.get(w);E.records.push(x),x.status==="present"?E.totalPresent++:E.totalAbsent++}),Array.from(y.values()).sort((x,b)=>new Date(b.date).getTime()-new Date(x.date).getTime()).map(x=>({...x,subjects:Array.from(x.subjects.values())}))},[s]),m=_.useMemo(()=>v.map(y=>{const x=y.subjects.filter(b=>{const w=r==="all"||b.subjectId===r,S=b.subjectName.toLowerCase().includes(t.toLowerCase());return w&&S});return{...y,subjects:x}}).filter(y=>y.subjects.length>0),[v,r,t]),g=async(y,x)=>{const b=x==="present"?"absent":"present";try{if(await Ce.updateResource("attendance_logs",y,{status:b}),l(w=>w.map(S=>S.id===y?{...S,status:b}:S)),i){const S=s.map(k=>k.id===y?{...k,status:b}:k).filter(k=>{var T;return(k.course_catalog_id||((T=k.routine)==null?void 0:T.course_catalog_id))===i.subjectId&&k.date===i.date});let C=0,E=0;S.forEach(k=>k.status==="present"?C++:E++),o({...i,records:S,totalPresent:C,totalAbsent:E})}at.success("Attendance updated")}catch{at.error("Failed to update status")}};return h.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in duration-500 pb-20",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Attendance History"}),h.jsx("p",{className:"text-slate-500 font-medium",children:"Review and manage past classroom sessions."})]}),h.jsxs("div",{className:"flex flex-wrap gap-3",children:[h.jsxs("div",{className:"relative min-w-[240px]",children:[h.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),h.jsx(lt,{placeholder:"Search subjects...",className:"h-12 pl-10 rounded-xl border-slate-200 bg-white shadow-sm focus:ring-primary/20",value:t,onChange:y=>n(y.target.value)})]}),h.jsxs(_t,{value:r,onValueChange:a,children:[h.jsxs(bt,{className:"h-12 w-[200px] rounded-xl border-slate-200 bg-white shadow-sm",children:[h.jsx(D2,{className:"w-4 h-4 mr-2 text-slate-400"}),h.jsx(Ct,{placeholder:"All Subjects"})]}),h.jsxs(wt,{className:"rounded-xl border-slate-100 shadow-xl",children:[h.jsx(it,{value:"all",children:"All Subjects"}),c.map(y=>{var x;return h.jsx(it,{value:y.course_catalog_id,children:(x=y.course_catalog)==null?void 0:x.subject_name},y.course_catalog_id)})]})]})]})]}),d?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(y=>h.jsx("div",{className:"h-48 bg-slate-100 rounded-3xl animate-pulse"},y))}):h.jsx("div",{className:"space-y-10",children:m.length>0?m.map(y=>h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 bg-white px-4 py-2 rounded-2xl shadow-sm border border-slate-100",children:[" ",new Date(y.date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),h.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.subjects.map(x=>h.jsxs(Et,{className:"group hover:border-primary/30 transition-all duration-300 bg-white border-slate-100 shadow-sm hover:shadow-xl hover:shadow-primary/5 rounded-3xl overflow-hidden",children:[h.jsxs(zn,{className:"pb-2",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx(yt,{className:"bg-primary/10 text-primary hover:bg-primary/20 border-none px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:"SESSION"}),h.jsxs("div",{className:"flex gap-2 text-[10px] font-bold",children:[h.jsxs("span",{className:"text-green-600 bg-green-50 px-2 py-0.5 rounded-md",children:["P: ",x.totalPresent]}),h.jsxs("span",{className:"text-red-600 bg-red-50 px-2 py-0.5 rounded-md",children:["A: ",x.totalAbsent]})]})]}),h.jsx(rr,{className:"text-lg font-black text-slate-800 line-clamp-1",children:x.subjectName})]}),h.jsx(Ut,{className:"pt-2",children:h.jsx(we,{variant:"secondary",className:"w-full bg-slate-50 hover:bg-primary hover:text-white text-slate-600 font-bold rounded-xl transition-all",onClick:()=>o(x),children:"View Detailed List"})})]},x.id))})]},y.date)):h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200",children:[h.jsx(to,{className:"w-16 h-16 text-slate-300 mb-4"}),h.jsx("p",{className:"text-slate-500 font-bold text-lg",children:"No sessions match your search."}),h.jsx(we,{variant:"link",onClick:()=>{n(""),a("all")},className:"text-primary mt-2",children:"Clear all filters"})]})}),h.jsx(Tl,{open:!!i,onOpenChange:y=>!y&&o(null),children:h.jsxs(is,{className:"max-w-3xl",children:[h.jsxs(os,{children:[h.jsx(ss,{children:"Session Details"}),h.jsx(Hm,{children:i&&h.jsxs(h.Fragment,{children:[i.subjectName," - ",new Date(i.date).toDateString()]})})]}),h.jsx("div",{className:"border rounded-md mt-4 max-h-[60vh] overflow-y-auto",children:h.jsxs(xi,{children:[h.jsx(bi,{children:h.jsxs(Mt,{children:[h.jsx(Je,{children:"Student ID"}),h.jsx(Je,{children:"Name"}),h.jsx(Je,{className:"text-right",children:"Status"})]})}),h.jsx(wi,{children:i&&i.records.map(y=>{var x,b,w;return h.jsxs(Mt,{children:[h.jsx(Ge,{className:"font-mono text-sm",children:(x=y.student)==null?void 0:x.student_id}),h.jsx(Ge,{children:(w=(b=y.student)==null?void 0:b.profile)==null?void 0:w.name}),h.jsxs(Ge,{className:"flex justify-end items-center gap-2",children:[h.jsx("span",{className:`text-xs font-medium w-12 text-right ${y.status==="present"?"text-green-600":"text-destructive"}`,children:y.status.toUpperCase()}),h.jsx(Wx,{checked:y.status==="present",onCheckedChange:()=>g(y.id,y.status)})]})]},y.id)})})]})})]})})]})},q6e=()=>{const{logout:e,user:t}=kr(),n=Ha(),r=vo(),a=()=>{e(),n("/")},i=()=>{if(t!=null&&t.face_registered){at.error("Identity Already Registered",{description:"Your face biometric is already locked in our system. Please contact your Department Admin to reset your identity if needed.",duration:5e3});return}n("/face-registration?mode=update")},o=[{title:"Overview",icon:KO,href:"/student/attendance"},{title:"Routine",icon:r0,href:"/student/routine"},{title:"Profile",icon:mc,href:"/student/profile"}];return h.jsxs("div",{className:"flex min-h-screen bg-[#F8FAFC] text-slate-900 font-sans",children:[h.jsxs("aside",{className:"hidden lg:flex fixed left-0 top-0 z-40 h-screen w-72 border-r border-slate-200 bg-white flex-col shadow-[1px_0_10px_rgba(0,0,0,0.02)]",children:[h.jsx("div",{className:"flex h-20 items-center px-8 border-b border-slate-100",children:h.jsxs("div",{children:[h.jsx("h1",{className:"font-black text-xl tracking-tight text-slate-800 leading-none",children:"AttendU"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:"Student Portal"})]})}),h.jsxs("nav",{className:"flex-1 px-4 py-8 space-y-2",children:[o.map(s=>h.jsxs(Js,{to:s.href,className:({isActive:l})=>`flex items-center group rounded-xl px-4 py-3 text-sm font-semibold transition-all duration-300 ${l?"bg-slate-900 text-white shadow-xl shadow-slate-200 translate-x-1":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[h.jsx(s.icon,{className:`w-5 h-5 mr-3 transition-colors ${r.pathname===s.href?"text-white":"text-slate-400 group-hover:text-slate-900"}`}),s.title,r.pathname===s.href&&h.jsx(ef,{className:"ml-auto w-4 h-4 opacity-50"})]},s.href)),h.jsxs("div",{className:"pt-8 px-4",children:[h.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-4",children:"Quick Links"}),h.jsxs(we,{variant:"outline",className:"w-full justify-start rounded-xl border-slate-200 text-slate-600 hover:bg-slate-50 hover:border-primary/20 group transition-all",onClick:i,children:[h.jsx(np,{className:"w-4 h-4 mr-2 text-slate-400 group-hover:text-primary"}),"Update Scan"]})]})]}),h.jsx("div",{className:"p-6 border-t border-slate-100",children:h.jsxs(we,{variant:"ghost",className:"w-full justify-start rounded-xl text-slate-500 hover:text-red-600 hover:bg-red-50 transition-all duration-300",onClick:a,children:[h.jsx(bd,{className:"w-5 h-5 mr-3"}),"Sign Out"]})})]}),h.jsxs("main",{className:"flex-1 lg:ml-72 w-full pb-24 lg:pb-0",children:[h.jsxs("header",{className:"sticky top-0 z-30 flex h-20 items-center justify-between bg-white/80 backdrop-blur-md border-b border-slate-100 px-4 sm:px-10 shadow-sm",children:[h.jsx("div",{className:"lg:hidden flex items-center",children:h.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"AttendU"})}),h.jsxs("div",{className:"hidden lg:flex items-center flex-1 max-w-md relative",children:[h.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"text",placeholder:"Search academic info...",className:"w-full bg-slate-50 border-none rounded-xl py-2 pl-10 text-sm focus:ring-2 focus:ring-primary/10 text-slate-600 outline-none transition-all hover:bg-slate-100/50"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs(we,{variant:"ghost",size:"icon",className:"rounded-xl text-slate-500 relative hover:bg-slate-50 hover:text-primary transition-colors",children:[h.jsx(z5,{className:"w-5 h-5"}),h.jsx("span",{className:"absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]}),h.jsxs(Bx,{children:[h.jsx(Ux,{asChild:!0,children:h.jsxs(we,{variant:"ghost",className:"h-auto py-2 px-3 hover:bg-slate-50 rounded-xl flex items-center gap-3 border border-transparent hover:border-slate-100 transition-all",children:[h.jsxs("div",{className:"text-right hidden sm:block",children:[h.jsx("p",{className:"text-sm font-black text-slate-800 leading-none",children:t==null?void 0:t.name}),h.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase mt-1 tracking-wider",children:"Student Account"})]}),h.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-slate-400",children:h.jsx(mc,{className:"w-4 h-4"})})]})}),h.jsxs(Km,{align:"end",className:"w-56 rounded-2xl border-slate-100 shadow-xl p-2",children:[h.jsx(Xm,{className:"px-3 pb-2 text-xs font-bold text-slate-400 uppercase tracking-widest",children:"My Account"}),h.jsxs(Qi,{className:"rounded-xl cursor-pointer py-2.5",onClick:()=>n("/student/profile"),children:[h.jsx(mc,{className:"mr-2 h-4 w-4"})," Profile"]}),h.jsxs(Qi,{className:"rounded-xl cursor-pointer py-2.5",onClick:i,children:[h.jsx(np,{className:"mr-2 h-4 w-4"})," Face Scan"]}),h.jsx(zx,{className:"my-2 bg-slate-50"}),h.jsxs(Qi,{className:"text-red-500 rounded-xl cursor-pointer py-2.5 hover:bg-red-50",onClick:a,children:[h.jsx(bd,{className:"mr-2 h-4 w-4"})," Sign Out"]})]})]})]})]}),h.jsx("div",{className:"px-3 sm:px-10 py-6 max-w-6xl mx-auto min-h-[calc(100vh-80px-100px)]",children:h.jsx(cb,{})}),h.jsx("div",{className:"px-4 sm:px-10 pb-10",children:h.jsx(Gf,{variant:"light"})})]}),h.jsxs("nav",{className:"lg:hidden fixed bottom-4 left-4 right-4 z-50 h-16 bg-slate-900 rounded-2xl shadow-2xl flex items-center justify-around px-2 border border-white/10 backdrop-blur-lg",children:[h.jsxs(Js,{to:"/student/attendance",className:({isActive:s})=>`flex flex-col items-center gap-1 transition-all duration-300 min-w-[50px] ${s?"text-primary scale-110":"text-slate-400 hover:text-white"}`,children:[h.jsx(KO,{className:"w-5 h-5"}),h.jsx("span",{className:"text-[9px] font-bold",children:"Home"})]}),h.jsxs(Js,{to:"/student/routine",className:({isActive:s})=>`flex flex-col items-center gap-1 transition-all duration-300 min-w-[50px] ${s?"text-primary scale-110":"text-slate-400 hover:text-white"}`,children:[h.jsx(r0,{className:"w-5 h-5"}),h.jsx("span",{className:"text-[9px] font-bold",children:"Routine"})]}),h.jsxs("div",{className:"relative -top-6",children:[h.jsx("button",{onClick:i,className:"w-12 h-12 bg-primary rounded-xl shadow-xl shadow-primary/40 flex items-center justify-center text-white active:scale-95 transition-transform",children:h.jsx(np,{className:"w-7 h-7"})}),h.jsx("span",{className:"absolute -bottom-5 left-1/2 -translate-x-1/2 text-[9px] font-bold text-slate-400 whitespace-nowrap",children:"Scan"})]}),h.jsxs(Js,{to:"/student/profile",className:({isActive:s})=>`flex flex-col items-center gap-1 transition-all duration-300 min-w-[50px] ${s?"text-primary scale-110":"text-slate-400 hover:text-white"}`,children:[h.jsx(mc,{className:"w-5 h-5"}),h.jsx("span",{className:"text-[9px] font-bold",children:"Profile"})]}),h.jsxs("button",{onClick:a,className:"flex flex-col items-center gap-1 transition-all duration-300 min-w-[50px] text-slate-400 hover:text-red-400",children:[h.jsx(bd,{className:"w-5 h-5"}),h.jsx("span",{className:"text-[9px] font-bold",children:"Sign Out"})]})]})]})},K6e=()=>{const{user:e}=kr(),[t,n]=_.useState(()=>{const f=localStorage.getItem(`attendance_history_${e==null?void 0:e.id}`);return f?JSON.parse(f):[]}),[r,a]=_.useState(()=>{const f=localStorage.getItem(`attendance_subjects_${e==null?void 0:e.id}`);return f?JSON.parse(f):[]}),[i,o]=_.useState(null),[s,l]=_.useState(null),[c,u]=_.useState(!t.length);_.useEffect(()=>{(async()=>{const p=e==null?void 0:e.student_id,v=e==null?void 0:e.section_id;if(!(!p||!v))try{const[m,g]=await Promise.all([Ce.getAttendanceHistory({student_id:p}),Ce.getSubjects(v)]);n(m||[]),a(g||[]),localStorage.setItem(`attendance_history_${e==null?void 0:e.id}`,JSON.stringify(m||[])),localStorage.setItem(`attendance_subjects_${e==null?void 0:e.id}`,JSON.stringify(g||[]))}catch(m){console.error("Fetcher error:",m),t.length||at.error("Failed to load attendance data")}finally{u(!1)}})()},[e==null?void 0:e.id]);const d=_.useMemo(()=>{const f=r.map(g=>{const y=t.filter(C=>{var E;return(C.course_catalog_id||((E=C.routine)==null?void 0:E.course_catalog_id))===g.id}),x=y.length,b=y.filter(C=>C.status==="present").length,w=x>0?Math.round(b/x*100):0,S=x>0?Number((b/x*7).toFixed(2)):0;return{subject:g,total:x,present:b,absent:x-b,percentage:w,marks:S,history:y.sort((C,E)=>new Date(E.date).getTime()-new Date(C.date).getTime())}}),p=f.reduce((g,y)=>g+y.present,0),v=f.reduce((g,y)=>g+y.total,0),m=v>0?Math.round(p/v*100):0;return{subjects:f,overallPct:m,overallPresent:p,overallTotal:v,totalSubjects:f.length}},[r,t]);return c?h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 animate-bounce flex items-center justify-center",children:h.jsx(BN,{className:"w-6 h-6 text-primary"})}),h.jsx("div",{className:"h-4 w-48 bg-slate-100 rounded-full animate-pulse"})]}):h.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20 animate-in fade-in duration-700",children:[h.jsxs("div",{className:"flex flex-col items-center text-center gap-3 px-2",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Academic Attendance"}),h.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-0.5",children:"Section Overview & Course Statistics"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(yt,{variant:"outline",className:"border-slate-200 text-slate-500 font-bold px-3 py-1 rounded-full bg-white shadow-sm text-[10px]",children:[d.overallPct,"% Overall"]}),d.overallPct>=75&&h.jsxs(yt,{className:"bg-emerald-500/10 text-emerald-600 border-none px-3 py-1 rounded-full font-bold text-[10px]",children:[h.jsx(GO,{className:"w-3 h-3 mr-1"})," Good Standing"]})]})]}),h.jsx("div",{className:"grid grid-cols-4 gap-2 sm:gap-4 px-1 sm:px-4",children:[{label:"Attended",value:d.overallPresent,icon:xd,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Missed",value:d.overallTotal-d.overallPresent,icon:Up,color:"text-rose-600",bg:"bg-rose-50"},{label:"Recordings",value:d.overallTotal,icon:to,color:"text-blue-600",bg:"bg-blue-50"},{label:"Courses",value:d.totalSubjects,icon:ep,color:"text-indigo-600",bg:"bg-indigo-50"}].map((f,p)=>h.jsx(Et,{className:"border-none shadow-sm bg-white rounded-xl sm:rounded-2xl group hover:shadow-md transition-all duration-300",children:h.jsxs(Ut,{className:"p-2 sm:p-4 flex flex-col sm:flex-row items-center sm:items-center text-center sm:text-left gap-1 sm:gap-3",children:[h.jsx("div",{className:`w-8 h-8 sm:w-11 sm:h-11 ${f.bg} rounded-lg sm:rounded-xl flex items-center justify-center shrink-0`,children:h.jsx(f.icon,{className:`w-4 h-4 sm:w-5 sm:h-5 ${f.color}`})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h3",{className:"text-[7px] sm:text-[10px] font-black text-slate-400 uppercase tracking-tight sm:tracking-widest leading-none truncate",children:f.label}),h.jsx("div",{className:"text-sm sm:text-xl font-black text-slate-900 mt-0.5 sm:mt-1",children:f.value})]})]})},p))}),h.jsxs("div",{className:"grid gap-3 px-1 sm:px-4",children:[d.subjects.map(f=>h.jsxs(Et,{className:`group relative overflow-hidden bg-white/80 backdrop-blur-sm border-2 transition-all duration-500 rounded-[1.5rem] sm:rounded-[2.5rem] cursor-pointer shadow-sm ${s===f.subject.id?"border-primary/30 shadow-lg":"border-slate-50 hover:border-primary/20"}`,onClick:()=>l(s===f.subject.id?null:f.subject.id),children:[h.jsx(zn,{className:"p-4 sm:p-6 relative z-10 transition-all duration-300",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1",children:[h.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl flex items-center justify-center shrink-0 transition-colors ${s===f.subject.id?"bg-primary/10":"bg-slate-50"}`,children:h.jsx(ep,{className:`w-5 h-5 sm:w-6 sm:h-6 ${s===f.subject.id?"text-primary":"text-slate-400"}`})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(rr,{className:"text-base sm:text-xl font-black tracking-tight text-slate-900 truncate",children:f.subject.name}),h.jsx(yt,{className:"bg-slate-100 text-slate-600 hover:bg-slate-200 border-none px-2 py-0.5 rounded-lg font-black text-[9px] sm:text-[10px] uppercase shrink-0",children:f.subject.code})]}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsxs("span",{className:`text-[10px] font-black uppercase tracking-wider ${f.percentage<75?"text-rose-500":"text-emerald-600"}`,children:[f.percentage,"% Attendance"]}),h.jsx("span",{className:"text-slate-300",children:""}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:[f.total," Classes"]})]})]})]}),h.jsx(pi.div,{animate:{rotate:s===f.subject.id?180:0},transition:{duration:.3},className:"shrink-0",children:h.jsx(LN,{className:`w-5 h-5 ${s===f.subject.id?"text-primary":"text-slate-300"}`})})]})}),h.jsx(Fz,{children:s===f.subject.id&&h.jsx(pi.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.4,ease:"easeInOut"},children:h.jsxs(Ut,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-5 border-t border-slate-50 pt-5 relative z-10",children:[h.jsx("div",{className:"absolute top-0 left-1/4 right-1/4 h-12 bg-emerald-500/10 blur-[40px] rounded-full -z-10"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-end px-1",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 leading-none",children:"Attendance Score"}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[h.jsxs(yt,{className:`border-none px-2 py-0.5 font-black text-[12px] rounded-lg shadow-sm ${f.percentage<75?"bg-rose-500 text-white":"bg-primary text-white"}`,children:[f.percentage,"%"]}),h.jsx("span",{className:"text-[10px] font-bold text-slate-300",children:"/"}),h.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 px-2 py-0.5 rounded-lg border border-slate-100",children:[h.jsx(GO,{className:`w-3 h-3 ${f.percentage<75?"text-rose-400":"text-primary"}`}),h.jsxs("span",{className:"text-[11px] font-black text-slate-700 tracking-tight",children:[f.marks," Pts"]})]})]})]}),h.jsx(yt,{variant:"outline",className:`text-[10px] font-black uppercase tracking-wider py-1 rounded-full ${f.percentage<75?"border-rose-100 text-rose-500 bg-rose-50/30":"border-emerald-100 text-emerald-600 bg-emerald-50/30"}`,children:f.percentage>=75?"Perfect Standing":"Below Requirement"})]}),h.jsx("div",{className:"h-6 bg-slate-50 rounded-2xl p-1 shadow-inner ring-1 ring-slate-100 relative overflow-hidden",children:h.jsx(pi.div,{initial:{width:0},animate:{width:`${f.percentage}%`},transition:{duration:1.5,ease:"easeOut"},className:`h-full rounded-xl shadow-sm ${f.percentage<75?"bg-gradient-to-r from-rose-400 to-rose-600 shadow-rose-500/20":"bg-gradient-to-r from-primary/60 to-primary shadow-primary/20"}`,children:h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(45deg,rgba(255,255,255,0.2)25%,transparent 25%,transparent 50%,rgba(255,255,255,0.2)50%,rgba(255,255,255,0.2)75%,transparent 75%,transparent)] bg-[length:24px_24px] animate-[shimmer_2s_linear_infinite]"})})})]}),h.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{val:f.total,sub:"Classes",color:"text-slate-800",bg:"bg-slate-50"},{val:f.present,sub:"Attended",color:"text-emerald-600",bg:"bg-emerald-50/50"},{val:f.absent,sub:"Missed",color:"text-rose-500",bg:"bg-rose-50/50"}].map((p,v)=>h.jsxs("div",{className:`${p.bg} rounded-2xl p-3 sm:p-4 text-center border border-slate-100/50 transition-all duration-300 hover:shadow-md hover:bg-white`,children:[h.jsx("div",{className:`text-lg sm:text-xl font-black ${p.color}`,children:p.val}),h.jsx("div",{className:"text-[8px] sm:text-[9px] font-black text-slate-400 uppercase tracking-tighter mt-1",children:p.sub})]},v))}),h.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-primary/5 hover:bg-primary/10 transition-colors group/btn",onClick:p=>{p.stopPropagation(),o(f)},children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[11px] font-black text-primary uppercase tracking-[0.1em]",children:"Analyze Detailed Records"}),h.jsx("span",{className:"text-[9px] text-slate-400 font-bold",children:"View full attendance logs & timestamps"})]}),h.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center shadow-lg shadow-primary/30 group-hover/btn:scale-110 transition-transform",children:h.jsx(U5,{className:"w-4 h-4"})})]})]})})})]},f.subject.id)),d.subjects.length===0&&h.jsxs("div",{className:"col-span-full py-16 text-center border-2 border-dashed border-slate-100 rounded-[2rem] bg-slate-50/50",children:[h.jsx(_b,{className:"w-12 h-12 text-slate-200 mx-auto mb-3"}),h.jsx("h3",{className:"text-lg font-bold text-slate-400 italic",children:"No courses found for this section."})]})]}),h.jsx(Tl,{open:!!i,onOpenChange:f=>!f&&o(null),children:h.jsxs(is,{className:"w-[calc(100%-3rem)] max-w-[360px] h-[550px] flex flex-col rounded-[2.5rem] border-none shadow-2xl overflow-hidden p-0 bg-white [&>button]:text-white/50 hover:[&>button]:text-white [&>button]:right-6 [&>button]:top-6 [&>button]:transition-all",children:[h.jsxs(os,{className:"p-6 pb-4 bg-slate-900 text-white text-center flex flex-col items-center shrink-0",children:[h.jsx(ss,{className:"text-lg font-black tracking-tight leading-tight",children:i==null?void 0:i.subject.name}),h.jsx(Hm,{className:"text-primary font-black uppercase text-[8px] tracking-[0.2em] mt-1.5 bg-primary/10 px-2 py-0.5 rounded-full",children:"History Logs"})]}),h.jsx("div",{className:"flex-1 p-5 pt-2 overflow-y-auto scrollbar-hide",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute left-[0.625rem] top-2 bottom-2 w-0.5 bg-slate-100"}),i!=null&&i.history.length?h.jsx("div",{className:"space-y-3",children:i.history.map(f=>h.jsxs("div",{className:"flex items-center gap-4 group",children:[h.jsx("div",{className:`w-5 h-5 shrink-0 rounded-full ring-4 ring-white shadow-sm relative z-10 transition-transform group-hover:scale-110 ${f.status==="present"?"bg-emerald-500":"bg-rose-500"}`}),h.jsx("div",{className:"flex-1 bg-slate-50/50 rounded-2xl p-3 border border-slate-100 group-hover:bg-white transition-all duration-300",children:h.jsxs("div",{className:"flex justify-between items-center gap-2",children:[h.jsxs("div",{className:"space-y-0.5",children:[h.jsx("h4",{className:"text-[13px] font-black text-slate-900 tracking-tight leading-none",children:new Date(f.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),h.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:[new Date(f.date).toLocaleDateString("en-US",{weekday:"short"}),"  ",new Date(f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),h.jsx(yt,{className:`border-none font-black text-[7.5px] uppercase px-2 py-0.5 rounded-lg ${f.status==="present"?"bg-emerald-500 text-white":"bg-rose-500 text-white"}`,children:f.status})]})})]},f.id))}):h.jsx("div",{className:"text-center py-12 bg-slate-50/50 rounded-[2rem] border-2 border-dashed border-slate-100 mt-2",children:h.jsx("p",{className:"text-slate-400 font-black uppercase tracking-[0.2em] text-[8px]",children:"No activity logs found"})})]})})]})})]})},X6e=()=>{var c,u,d,f,p,v,m,g;const e=Ha(),{user:t,setPendingStudentId:n,setSelectedRole:r}=kr(),[a,i]=_.useState(null),[o,s]=_.useState(!0);_.useEffect(()=>{(async()=>{if(t!=null&&t.id){s(!0);try{const x=await Ce.getStudentByProfileId(t.id);i(x)}catch{at.error("Failed to load profile")}finally{s(!1)}}})()},[t==null?void 0:t.id]);const l=()=>{if(t!=null&&t.face_registered){at.error("Identity Already Registered",{description:"Your face biometric is already locked in our system. Please contact your Department Admin to reset your identity if needed.",duration:5e3});return}t!=null&&t.id&&(n(t.id),r("student"),e("/face-registration?mode=update"))};return o?h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4 animate-pulse",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800/10"}),h.jsx("div",{className:"h-4 w-48 bg-slate-800/10 rounded"})]}):a?h.jsx("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:h.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-slate-950 border border-white/5 shadow-2xl p-6 sm:p-10",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-primary/10 rounded-full blur-[100px] -mr-48 -mt-48"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-[80px] -ml-32 -mb-32"}),h.jsxs("div",{className:"relative space-y-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-white/5 pb-8",children:[h.jsxs("div",{className:"space-y-1 text-center md:text-left",children:[h.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 mb-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-500/80",children:"Active Session"})]}),h.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tight",children:t==null?void 0:t.name})]}),h.jsx("div",{className:"flex flex-col items-center md:items-end gap-2 text-center md:text-right",children:h.jsx("div",{className:"bg-white/5 px-4 py-2 rounded-xl border border-white/10 backdrop-blur-md",children:h.jsx("span",{className:"text-xl font-black text-primary tracking-tighter",children:a.student_id})})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[[{label:"Faculty",val:((d=(u=(c=a.section)==null?void 0:c.batch)==null?void 0:u.faculty)==null?void 0:d.name)||"Science & Tech",icon:W5},{label:"Batch",val:((p=(f=a.section)==null?void 0:f.batch)==null?void 0:p.name)||"N/A",icon:zp},{label:"Section",val:((v=a.section)==null?void 0:v.name)||"N/A",icon:_b},{label:"Semester",val:`${((g=(m=a.section)==null?void 0:m.batch)==null?void 0:g.current_semester)||"1"}st Semester`,icon:to},{label:"Email Address",val:t==null?void 0:t.email,icon:ine,full:!0}].map((y,x)=>h.jsx("div",{className:`${y.full?"md:col-span-2":""} group relative overflow-hidden bg-white/5 border border-white/5 rounded-2xl p-4 transition-all duration-300 hover:bg-white/[0.08] hover:border-white/10`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-slate-400 group-hover:text-primary group-hover:bg-primary/10 transition-colors",children:h.jsx(y.icon,{className:"w-5 h-5"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest leading-none mb-1",children:y.label}),h.jsx("p",{className:"text-sm font-bold text-white tracking-wide truncate",children:y.val})]})]})},x)),h.jsxs("div",{className:`relative overflow-hidden border rounded-2xl p-4 flex items-center justify-between group cursor-pointer transition-all duration-300 ${a.face_registered?"bg-emerald-500/5 border-emerald-500/20 hover:bg-emerald-500/10":"bg-rose-500/5 border-rose-500/20 hover:bg-rose-500/10"}`,onClick:l,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all group-hover:scale-110 ${a.face_registered?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:a.face_registered?h.jsx(np,{className:"w-5 h-5"}):h.jsx(Up,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest leading-none mb-1",children:"Biometrics"}),h.jsx("p",{className:`text-sm font-black tracking-tight ${a.face_registered?"text-emerald-400":"text-rose-400"}`,children:a.face_registered?"Identity Locked":"Required"})]})]}),h.jsxs("div",{className:"flex items-center gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("span",{className:"text-[9px] font-black uppercase text-white/40 tracking-widest",children:"Update"}),h.jsx(ef,{className:"w-3 h-3 text-white/40"})]})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-4 border-t border-white/5 opacity-50",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(py,{className:"w-5 h-5 text-primary"}),h.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]",children:"Encrypted Data Protection Active"})]}),h.jsx("p",{className:"text-[9px] text-slate-500 font-medium",children:"System Version 2.0.4.L"})]})]})]})}):h.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[h.jsx("div",{className:"w-20 h-20 bg-slate-900 rounded-[2rem] flex items-center justify-center mb-6",children:h.jsx(rne,{className:"w-10 h-10 text-slate-700"})}),h.jsx("h2",{className:"text-xl font-black text-slate-400",children:"Student record not found"}),h.jsx("p",{className:"text-slate-600 mt-2 max-w-sm",children:"Please contact the academic office for registration details."})]})},Y6e=()=>{const{user:e,loading:t}=kr(),[n,r]=_.useState([]),[a,i]=_.useState(!0),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];_.useEffect(()=>{const c=e;!t&&(c!=null&&c.section_id)?s(c.section_id):t||i(!1)},[t,e]);const s=async c=>{i(!0);try{const u=await Ce.getRoutines({section_id:c});r(u||[])}catch(u){at.error(`Failed to load routine: ${u.message||"Unknown error"}`)}finally{i(!1)}},l=o.map(c=>({day:c,items:n.filter(u=>u.day_of_week===c).sort((u,d)=>u.start_time?d.start_time?u.start_time.localeCompare(d.start_time):1:-1)})).filter(c=>c.items.length>0);return h.jsxs("div",{className:"space-y-6 pb-6 animate-in fade-in duration-700",children:[h.jsxs("div",{className:"px-1",children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Class Routine"}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Your weekly academic schedule"})]}),a?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[h.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),h.jsx("p",{className:"text-sm font-medium text-slate-400 uppercase tracking-widest",children:"Loading Routine..."})]}):l.length>0?h.jsx("div",{className:"grid gap-6",children:l.map(({day:c,items:u})=>h.jsxs(Et,{className:"border-none shadow-sm overflow-hidden bg-white/50 backdrop-blur-sm",children:[h.jsx(zn,{className:"bg-white/80 border-b border-slate-100 py-4",children:h.jsxs(rr,{className:"flex items-center justify-between text-lg text-slate-800",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(r0,{className:"w-5 h-5 text-primary"}),c]}),h.jsxs(yt,{variant:"secondary",className:"bg-primary/10 text-primary hover:bg-primary/20 border-none px-3 font-bold",children:[u.length," ",u.length===1?"Class":"Classes"]})]})}),h.jsx(Ut,{className:"p-4",children:h.jsx("div",{className:"grid gap-3",children:u.map(d=>{var f,p,v,m,g;return h.jsxs("div",{className:"group relative flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 rounded-2xl bg-white border border-slate-100 hover:border-primary/20 hover:shadow-md transition-all duration-300",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-bold text-slate-800 text-base mb-1",children:(f=d.course_catalog)==null?void 0:f.subject_name}),h.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:[h.jsx("span",{children:(p=d.course_catalog)==null?void 0:p.subject_code}),h.jsx("span",{children:""}),h.jsx("span",{children:((m=(v=d.teachers)==null?void 0:v.profiles)==null?void 0:m.name)||"TBA"})]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.start_time?h.jsxs(yt,{variant:"outline",className:"bg-slate-50 text-slate-700 border-slate-200 text-xs py-1 px-3 rounded-lg flex items-center gap-2",children:[h.jsx(tp,{className:"w-3.5 h-3.5 text-primary"}),d.start_time.slice(0,5)," - ",(g=d.end_time)==null?void 0:g.slice(0,5)]}):h.jsx(yt,{variant:"outline",className:"bg-slate-50 text-slate-500 italic border-slate-200 text-xs py-1 px-3 rounded-lg",children:"Time TBA"}),h.jsxs(yt,{variant:"outline",className:"bg-slate-50 text-slate-700 border-slate-200 text-xs py-1 px-3 rounded-lg flex items-center gap-2",children:[h.jsx(a0,{className:"w-3.5 h-3.5 text-primary"}),"Room ",d.room_id]})]})]},d.id)})})})]},c))}):h.jsx(Et,{className:"border-none shadow-sm bg-white/50 backdrop-blur-sm",children:h.jsx(Ut,{className:"py-20 text-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-100 flex items-center justify-center text-slate-400",children:h.jsx(r0,{className:"w-8 h-8"})}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"No Routine Found"}),h.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:"Your class schedule hasn't been set yet. Please check back later or contact your department."})]})]})})})]})},Q6e=()=>h.jsx(fue,{children:h.jsx($Q,{children:h.jsxs(TQ,{children:[h.jsx(Tt,{path:"/",element:h.jsx(mue,{})}),h.jsx(Tt,{path:"/role-selection",element:h.jsx(Fde,{})}),h.jsx(Tt,{path:"/auth",element:h.jsx(efe,{})}),h.jsx(Tt,{path:"/admin/login",element:h.jsx(tfe,{})}),h.jsx(Tt,{path:"/face-registration",element:h.jsx(Cxe,{})}),h.jsx(Tt,{element:h.jsx(GS,{allowedRole:"admin"}),children:h.jsxs(Tt,{path:"/admin",element:h.jsx(Fxe,{}),children:[h.jsx(Tt,{index:!0,element:h.jsx(jo,{to:"/admin/dashboard",replace:!0})}),h.jsx(Tt,{path:"dashboard",element:h.jsx(_ze,{})}),h.jsx(Tt,{path:"academic",element:h.jsx(hWe,{})}),h.jsx(Tt,{path:"users",element:h.jsx(T6e,{})}),h.jsx(Tt,{path:"routines",element:h.jsx(A6e,{})}),h.jsx(Tt,{path:"attendance",element:h.jsx(P6e,{})}),h.jsx(Tt,{path:"settings",element:h.jsx(M6e,{})})]})}),h.jsx(Tt,{element:h.jsx(GS,{allowedRole:"teacher"}),children:h.jsxs(Tt,{path:"/teacher",element:h.jsx($6e,{}),children:[h.jsx(Tt,{index:!0,element:h.jsx(jo,{to:"/teacher/dashboard",replace:!0})}),h.jsx(Tt,{path:"dashboard",element:h.jsx(F6e,{})}),h.jsx(Tt,{path:"classes",element:h.jsx(L6e,{})}),h.jsx(Tt,{path:"routine",element:h.jsx(V6e,{})}),h.jsx(Tt,{path:"take-attendance",element:h.jsx(H6e,{})}),h.jsx(Tt,{path:"past-attendance",element:h.jsx(G6e,{})})]})}),h.jsx(Tt,{element:h.jsx(GS,{allowedRole:"student"}),children:h.jsxs(Tt,{path:"/student",element:h.jsx(q6e,{}),children:[h.jsx(Tt,{index:!0,element:h.jsx(jo,{to:"/student/attendance",replace:!0})}),h.jsx(Tt,{path:"attendance",element:h.jsx(K6e,{})}),h.jsx(Tt,{path:"profile",element:h.jsx(X6e,{})}),h.jsx(Tt,{path:"routine",element:h.jsx(Y6e,{})})]})}),h.jsx(Tt,{path:"*",element:h.jsx(Exe,{})})]})})});var J6e=["added","removed","updated"];function H3(e){return J6e.includes(e)}async function Z6e({queryClient:e,persister:t,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:a}){try{const i=await t.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,s=i.buster!==r;if(o||s)return t.removeClient();fJ(e,i.clientState,a)}else return t.removeClient()}catch(i){throw await t.removeClient(),i}}async function G3({queryClient:e,persister:t,buster:n="",dehydrateOptions:r}){const a={buster:n,timestamp:Date.now(),clientState:dJ(e,r)};await t.persistClient(a)}function eVe(e){const t=e.queryClient.getQueryCache().subscribe(r=>{H3(r.type)&&G3(e)}),n=e.queryClient.getMutationCache().subscribe(r=>{H3(r.type)&&G3(e)});return()=>{t(),n()}}var tVe=({children:e,persistOptions:t,onSuccess:n,onError:r,...a})=>{const[i,o]=_.useState(!0),s=_.useRef({persistOptions:t,onSuccess:n,onError:r}),l=_.useRef(!1);return _.useEffect(()=>{s.current={persistOptions:t,onSuccess:n,onError:r}}),_.useEffect(()=>{const c={...s.current.persistOptions,queryClient:a.client};return l.current||(l.current=!0,Z6e(c).then(()=>{var u,d;return(d=(u=s.current).onSuccess)==null?void 0:d.call(u)}).catch(()=>{var u,d;return(d=(u=s.current).onError)==null?void 0:d.call(u)}).finally(()=>{o(!1)})),i?void 0:eVe(c)},[a.client,i]),h.jsx(IB,{...a,children:h.jsx(kJ,{value:i,children:e})})};function E_(){}function nVe({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:a=JSON.parse,retry:i}){if(e){const o=s=>{try{e.setItem(t,r(s));return}catch(l){return l}};return{persistClient:rVe(s=>{let l=s,c=o(l),u=0;for(;c&&l;)u++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:u}),l&&(c=o(l))},n),restoreClient:()=>{const s=e.getItem(t);if(s)return a(s)},removeClient:()=>{e.removeItem(t)}}}return{persistClient:E_,restoreClient:E_,removeClient:E_}}function rVe(e,t=100){let n=null,r;return function(...a){r=a,n===null&&(n=Yy.setTimeout(()=>{e(...r),n=null},t))}}const aVe=new RB({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*60*24,refetchOnWindowFocus:!1,retry:1}}}),iVe=nVe({storage:window.localStorage}),oVe=({children:e})=>h.jsx(tVe,{client:aVe,persistOptions:{persister:iVe},children:e});mB(document.getElementById("root")).render(h.jsx(oVe,{children:h.jsx(Q6e,{})}))});export default sVe();
